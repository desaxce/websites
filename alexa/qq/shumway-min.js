function fail(a,b){throw new Error((b?b+": ":"")+a)}function assert(a,b,c){a||fail(b,c)}function scriptProperties(a,b){return b.reduce(function(b,c){return b[c]=a+" "+c,b},{})}function cloneObject(a){var b=Object.create(null);for(var c in a)b[c]=a[c];return b}function sortNumeric(a,b){return a-b}function sortByZindex(a,b){return a._zindex-b._zindex}function rgbaObjToStr(a){return"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha/255+")"}function rgbIntAlphaToStr(a,b){if(a|=0,b>=1){for(var c=a.toString(16);c.length<6;)c="0"+c;return"#"+c}var d=a>>16&255,e=a>>8&255,f=255&a;return"rgba("+d+","+e+","+f+","+b+")"}function argbUintToStr(a){return"rgba("+(a>>>16&255)+","+(a>>>8&255)+","+(255&a)+","+(a>>>24&255)/255+")"}function randomStyle(){return randomStyleCache||(randomStyleCache=["#ff5e3a","#ff9500","#ffdb4c","#87fc70","#52edc7","#1ad6fd","#c644fc","#ef4db6","#4a4a4a","#dbddde","#ff3b30","#ff9500","#ffcc00","#4cd964","#34aadc","#007aff","#5856d6","#ff2d55","#8e8e93","#c7c7cc","#5ad427","#c86edf","#d1eefc","#e0f8d8","#fb2b69","#f7f7f7","#1d77ef","#d6cec3","#55efcb","#ff4981","#ffd3e0","#f7f7f7","#ff1300","#1f1f21","#bdbec2","#ff3a2d"]),randomStyleCache[nextStyle++%randomStyleCache.length]}function makeHuffmanTable(a){for(var b=Math.max.apply(null,a),c=a.length,d=1<<b,e=new Uint32Array(d),f=0,g=1,h=2;b>=g;f<<=1,++g,h<<=1)for(var i=0;c>i;++i)if(a[i]===g){for(var j=0,k=0;g>k;++k)j=2*j+(f>>k&1);for(var k=j;d>k;k+=h)e[k]=g<<16|i;++f}return{codes:e,maxBits:b}}function verifyDeflateHeader(a){a[0]<<8|a[1]}function createInflatedStream(a,b){verifyDeflateHeader(a);var c=new Stream(a,2),d={data:new Uint8Array(b),available:0,completed:!1},e={header:null,distanceTable:null,literalTable:null,sym:null,len:null,sym2:null};do inflateBlock(c,d,e);while(!d.completed&&c.pos<c.end);return new Stream(d.data,0,d.available)}function inflateBlock(a,b,c){var d=null!==c.header?c.header:c.header=readBits(a.bytes,a,3);switch(d>>1){case 0:a.align();var e=a.pos;if(a.end-e<4)throw InflateNoDataError;{var f=a.getUint16(e,!0);a.getUint16(e+2,!0)}if(a.end-e<4+f)throw InflateNoDataError;var g=e+4,h=a.pos=g+f,i=a.bytes,j=b.data;j.set(i.subarray(g,h),b.available),b.available+=f;break;case 1:inflate(a,b,fixedLiteralTable,fixedDistanceTable,c);break;case 2:var k,l;if(null!==c.distanceTable)k=c.distanceTable,l=c.literalTable;else{var m,n,i=a.bytes,o=a.pos,p=a.bitBuffer,q=a.bitLength,r=[];try{m=readBits(i,a,5)+257,n=readBits(i,a,5)+1;for(var s=m+n,t=readBits(i,a,4)+4,u=0;19>u;++u)r[codeLengthOrder[u]]=t>u?readBits(i,a,3):0;var v=makeHuffmanTable(r);r=[];for(var u=0,w=0;s>u;){var x=1,y=readCode(i,a,v);switch(y){case 16:x=readBits(i,a,2)+3,y=w;break;case 17:x=readBits(i,a,3)+3,y=0;break;case 18:x=readBits(i,a,7)+11,y=0;break;default:w=y}for(;x--;)r[u++]=y}}catch(z){throw a.pos=o,a.bitBuffer=p,a.bitLength=q,z}k=c.distanceTable=makeHuffmanTable(r.splice(m,n)),l=c.literalTable=makeHuffmanTable(r)}inflate(a,b,l,k,c),c.distanceTable=null,c.literalTable=null;break;default:fail("unknown block type","inflate")}c.header=null,b.completed=!!(1&d)}function readBits(a,b,c){var d=b.bitBuffer,e=b.bitLength;if(c>e){var f=b.pos,g=b.end;do{if(f>=g)throw b.pos=f,b.bitBuffer=d,b.bitLength=e,InflateNoDataError;d|=a[f++]<<e,e+=8}while(c>e);b.pos=f}return b.bitBuffer=d>>>c,b.bitLength=e-c,d&(1<<c)-1}function inflate(a,b,c,d,e){for(var f=b.available,g=b.data,h=a.bytes,i=null!==e.sym?e.sym:readCode(h,a,c);256!==i;){if(256>i)g[f++]=i;else{e.sym=i,i-=257;for(var j=null!==e.len?e.len:e.len=lengthCodes[i]+readBits(h,a,lengthExtraBits[i]),k=null!==e.sym2?e.sym2:e.sym2=readCode(h,a,d),l=distanceCodes[k]+readBits(h,a,distanceExtraBits[k]),m=f-l;j--;)g[f++]=g[m++];e.sym2=null,e.len=null,e.sym=null}b.available=f,i=readCode(h,a,c)}}function readCode(a,b,c){var d=b.bitBuffer,e=b.bitLength,f=c.maxBits;if(f>e){var g=b.pos,h=b.end;do{if(g>=h)throw b.pos=g,b.bitBuffer=d,b.bitLength=e,InflateNoDataError;d|=a[g++]<<e,e+=8}while(f>e);b.pos=g}var i=c.codes[d&(1<<f)-1],j=i>>16;return b.bitBuffer=d>>>j,b.bitLength=e-j,65535&i}function crc32(a,b,c){for(var d=-1,e=b;c>e;e++){var f=255&(d^a[e]),g=crcTable[f];d=d>>>8^g}return-1^d}function createPngChunk(a,b){var c=new Uint8Array(12+b.length),d=0,e=b.length;c[d]=e>>24&255,c[d+1]=e>>16&255,c[d+2]=e>>8&255,c[d+3]=255&e,c[d+4]=255&a.charCodeAt(0),c[d+5]=255&a.charCodeAt(1),c[d+6]=255&a.charCodeAt(2),c[d+7]=255&a.charCodeAt(3),b instanceof Uint8Array&&c.set(b,8),d=8+e;var f=crc32(c,4,d);return c[d]=f>>24&255,c[d+1]=f>>16&255,c[d+2]=f>>8&255,c[d+3]=255&f,c}function adler32(a,b,c){for(var d=1,e=0,f=b;c>f;++f)d=(d+(255&a[f]))%65521,e=(e+d)%65521;return e<<16|d}function defineBitmap(a){var b,c=a.width,d=a.height,e=a.hasAlpha,f="",g="",h=a.bmpData;switch(a.format){case FORMAT_COLORMAPPED:var i=3,j=c+3&-4,k=a.colorTableSize+1,l=k*(a.hasAlpha?4:3),m=l+j*d,n=createInflatedStream(h,m),o=n.bytes,p=0;if(n.ensure(l),e){for(var q=new Uint8Array(l/4*3),r=0,s=new Uint8Array(l/4),t=0;l>p;)q[r++]=o[p],q[r++]=o[p+1],q[r++]=o[p+2],s[t++]=o[p+3],p+=4;f=createPngChunk("PLTE",q),g=createPngChunk("tRNS",s)}else f=createPngChunk("PLTE",o.subarray(p,p+l)),p+=l;b=new Uint8Array(c*d+d);for(var u=0;m>p;){n.ensure(j);var v=p,w=v+c;u++,b.set(o.subarray(v,w),u),u+=w-v,n.pos=p+=j}break;case FORMAT_15BPP:var i=2,j=2*c+3&-4,n=createInflatedStream(h,j*d),p=0;b=new Uint8Array(c*d*3+d);for(var u=0,x=0;d>x;++x){u++,n.ensure(j);for(var y=0;c>y;++y){var z=n.getUint16(p);p+=2,b[u++]=0|FACTOR_5BBP*(z>>10&31),b[u++]=0|FACTOR_5BBP*(z>>5&31),b[u++]=0|FACTOR_5BBP*(31&z)}n.pos=p+=j}break;case FORMAT_24BPP:var A;if(e){var i=6;A=0,b=new Uint8Array(c*d*4+d)}else{var i=2;A=1,b=new Uint8Array(c*d*3+d)}for(var j=4*c,n=createInflatedStream(h,j*d),o=n.bytes,p=0,u=0,x=0;d>x;++x){n.ensure(j),u++;for(var y=0;c>y;++y){if(p+=A,e){var B=o[p];if(B){var C=B/255;b[u++]=0|o[p+1]/C,b[u++]=0|o[p+2]/C,b[u++]=0|o[p+3]/C,b[u++]=B}else u+=4}else b[u++]=o[p],b[u++]=o[p+1],b[u++]=o[p+2];p+=4-A}n.pos=p}break;default:fail("invalid format","bitmap")}var D=new Uint8Array([c>>24&255,c>>16&255,c>>8&255,255&c,d>>24&255,d>>16&255,d>>8&255,255&d,8,i,0,0,0]),E=b.length,F=65535,G=new Uint8Array(2+E+5*Math.ceil(E/F)+4),H=0;G[H++]=120,G[H++]=156;for(var p=0;E>F;)G[H++]=0,G[H++]=255,G[H++]=255,G[H++]=0,G[H++]=0,G.set(b.subarray(p,p+F),H),H+=F,p+=F,E-=F;G[H++]=1,G[H++]=255&E,G[H++]=E>>8&255,G[H++]=65535&~E&255,G[H++]=(65535&~E)>>8&255,G.set(b.subarray(p),H),H+=b.length-p;var I=adler32(b,0,b.length);G[H++]=I>>24&255,G[H++]=I>>16&255,G[H++]=I>>8&255,G[H++]=255&I;var J=[new Uint8Array([137,80,78,71,13,10,26,10]),createPngChunk("IHDR",D),f,g,createPngChunk("IDAT",G),createPngChunk("IEND","")];return{type:"image",id:a.id,width:c,height:d,mimeType:"image/png",data:new Blob(J,{type:"image/png"})}}function defineButton(a,b){for(var c,d=a.characters,e={up:{},over:{},down:{},hitTest:{}},f=0;(c=d[f++])&&!c.eob;){var g=b[c.symbolId],h={symbolId:g.id,hasMatrix:!!c.matrix,matrix:c.matrix};c.stateUp&&(e.up[c.depth]=h),c.stateOver&&(e.over[c.depth]=h),c.stateDown&&(e.down[c.depth]=h),c.stateHitTest&&(e.hitTest[c.depth]=h)}var i={type:"button",id:a.id,buttonActions:a.buttonActions,states:e};return i}function maxPower2(a){for(var b=0,c=a;c>=2;)c/=2,++b;return pow(2,b)}function toString16(a){return fromCharCode(a>>8&255,255&a)}function toString32(a){return toString16(a>>16)+toString16(a)}function defineFont(a){var b={},c=[],d={},e=[],f=a.glyphs,g=f.length;if(a.codes){c=c.concat(a.codes);for(var h,i=0;h=c[i];++i)d[h]=i;c.sort(function(a,b){return a-b});for(var h,i=0;h=c[i++];){for(var j=h,k=j,l=[i-1];(h=c[i])&&k+1===h;)++k,l.push(i),++i;e.push([j,k,l])}}else{for(var l=[],m=57344,i=0;g>i;i++){var h=m+i;c.push(h),d[h]=i,l.push(i)}e.push([m,m+g-1,l])}var n=a.resolution||1,o=Math.ceil(a.ascent/n)||1024,p=0|-Math.ceil(a.descent/n),q=a.leading/n|0;b["OS/2"]="\x00\x00\x00"+toString16(a.bold?700:400)+"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00ALF "+toString16((a.italic?1:0)|(a.bold?32:0))+toString16(c[0])+toString16(c[c.length-1])+toString16(o)+toString16(p)+toString16(q)+toString16(o)+toString16(-p)+"\x00\x00\x00\x00\x00\x00\x00\x00";for(var r,s="",t="",u="",v="",i=0;r=e[i++];){var j=r[0],k=r[1],h=r[2][0];s+=toString16(j),t+=toString16(k),u+=toString16(h-j+1&65535),v+=toString16(0)}t+="Ã¿Ã¿",s+="Ã¿Ã¿",u+="\x00",v+="\x00\x00";var w=e.length+1,x=2*maxPower2(w),y=2*w-x,z="\x00\x00"+toString16(2*w)+toString16(x)+toString16(logE(w)/logE(2))+toString16(y)+t+"\x00\x00"+s+u+v;b.cmap="\x00\x00\x00\x00\x00\x00\x00\x00\f\x00"+toString16(z.length+4)+z;for(var h,A="\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x001\x00",B="\x00\x00",C=16,D=0,E=[],F=[],G=[],H=[],I=0,i=0;h=c[i++];){for(var J,K=f[d[h]],L=K.records,M=1,N=0,O="",P="",Q="",R="",S=0,T=0,U=1024,V=-1024,W=1024,X=-1024,Y=0;J=L[Y];++Y)if(J.type){if(J.isStraight)if(J.isGeneral){P+="";var Z=J.deltaX/n,$=-J.deltaY/n;Q+=toString16(Z),R+=toString16($),S+=Z,T+=$}else if(J.isVertical){P+="";var $=-J.deltaY/n;R+=toString16($),T+=$}else{P+="!";var Z=J.deltaX/n;Q+=toString16(Z),S+=Z}else{P+="\x00";var _=J.controlDeltaX/n,ab=-J.controlDeltaY/n;Q+=toString16(_),R+=toString16(ab),P+="";var Z=J.anchorDeltaX/n,$=-J.anchorDeltaY/n;Q+=toString16(Z),R+=toString16($),++N,S+=_+Z,T+=ab+$}U>S&&(U=S),S>V&&(V=S),W>T&&(W=T),T>X&&(X=T),++N}else{if(J.eos)break;if(J.move){N&&(++M,O+=toString16(N-1)),P+="";var bb=J.moveX/n,cb=-J.moveY/n,Z=bb-S,$=cb-T;Q+=toString16(Z),R+=toString16($),S=bb,T=cb,N>D&&(D=N),U>S&&(U=S),S>V&&(V=S),W>T&&(W=T),T>X&&(X=T),++N}}O+=toString16((N||1)-1),Y||(U=V=W=X=0,P+="1");var db=toString16(M)+toString16(U)+toString16(W)+toString16(V)+toString16(X)+O+"\x00\x00"+P+Q+R;1&db.length&&(db+="\x00"),A+=db,B+=toString16(C/2),C+=db.length,E.push(U),F.push(V),G.push(W),H.push(X),M>I&&(I=M),N>D&&(D=N)}B+=toString16(C/2),b.glyf=A,b.head="\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00_<Ãµ\x00\x00\x00\x00\x00\x00"+toString32(Date.now())+"\x00\x00\x00\x00"+toString32(Date.now())+toString16(min.apply(null,E))+toString16(min.apply(null,G))+toString16(max.apply(null,F))+toString16(max.apply(null,H))+toString16((a.italic?2:0)|(a.bold?1:0))+"\x00\b\x00\x00\x00\x00\x00";var eb=a.advance;b.hhea="\x00\x00\x00"+toString16(o)+toString16(p)+toString16(q)+toString16(eb?max.apply(null,eb):1024)+"\x00\x00\x00\x00Â¸\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"+toString16(g+1);for(var fb="\x00\x00\x00\x00",i=0;g>i;++i)fb+=toString16(eb?eb[i]/n:1024)+"\x00\x00";if(b.hmtx=fb,a.kerning){for(var J,gb=a.kerning,hb=gb.length,x=2*maxPower2(hb),ib="\x00\x00\x00\x00\x00"+toString16(14+6*hb)+"\x00"+toString16(hb)+toString16(x)+toString16(logE(hb)/logE(2))+toString16(2*hb-x),i=0;J=gb[i++];)ib+=toString16(d[J.code1])+toString16(d[J.code2])+toString16(J.adjustment);b.kern=ib}b.loca=B,b.maxp="\x00\x00\x00"+toString16(g+1)+toString16(D)+toString16(I)+"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";for(var jb,kb="swf-font-"+nextFontId++,lb=a.name||kb,mb=lb.replace(/ /g,""),nb=[a.copyright||"Original licence",lb,"Unknown",kb,lb,"1.0",mb,"Unknown","Unknown","Unknown"],ob=nb.length,pb="\x00\x00"+toString16(ob)+toString16(12*ob+6),C=0,i=0;jb=nb[i++];)pb+="\x00\x00\x00\x00\x00"+toString16(i-1)+toString16(jb.length)+toString16(C),C+=jb.length;b.name=pb+nb.join(""),b.post="\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";for(var pb,qb=keys(b),rb=qb.length,sb="\x00\x00\x00"+toString16(rb)+"\x00Â€\x00\x00 ",tb="",C=16*rb+sb.length,i=0;pb=qb[i++];){var ub=b[pb],vb=ub.length;for(sb+=pb+"\x00\x00\x00\x00"+toString32(C)+toString32(vb);3&vb;)ub+="\x00",++vb;for(tb+=ub;3&C;)++C;C+=vb}var wb=sb+tb,xb=1024,yb={ascent:o/xb,descent:-p/xb,leading:q/xb};return{type:"font",id:a.id,name:lb,uniqueName:mb+kb,codes:c,metrics:yb,bold:1===a.bold,italic:1===a.italic,data:wb}}function getUint16(a,b){return a[b]<<8|a[b+1]}function parseJpegChunks(a,b){var c,d=0,e=b.length,f=[];do{for(var g=d;e>d&&255!==b[d];)++d;for(;e>d&&255===b[d];)++d;if(c=b[d++],218===c)d=e;else{if(217===c){d+=2;continue}if(208>c||c>216){var h=getUint16(b,d);c>=192&&195>=c&&(a.height=getUint16(b,d+3),a.width=getUint16(b,d+5)),d+=h}}f.push(b.subarray(g,d))}while(e>d);return f}function defineImage(a,b){var c,d={type:"image",id:a.id,mimeType:a.mimeType},e=a.imgData;if("image/jpeg"===a.mimeType){c=parseJpegChunks(d,e);var f=a.alphaData;if(f&&(d.mask=createInflatedStream(f,d.width*d.height).bytes),a.incomplete){var g=b[0],h=g.data;h&&h.size&&(c[0]=c[0].subarray(2),c.unshift(h.slice(0,h.size-2)))}}else c=[e];return d.data=new Blob(c,{type:a.mimeType}),d}function defineLabel(a,b){for(var c,d,e=a.records,f=a.matrix,g=["c.save()","c.transform("+[f.a,f.b,f.c,f.d,f.tx/20,f.ty/20].join(",")+")","c.scale(0.05, 0.05)"],h=[],i=0,j=0,k=0;(c=e[k++])&&!c.eot;){if(c.hasFont){var l=b[c.fontId];d=l.codes,g.push('c.font="'+c.fontHeight+"px '"+l.uniqueName+"'\""),h.push(l.id)}c.hasColor?(g.push('ct.setFillStyle(c,"'+rgbaObjToStr(c.color)+'")'),g.push("ct.setAlpha(c)")):g.push("ct.setAlpha(c,true)"),c.hasMoveX&&(i=c.moveX),c.hasMoveY&&(j=c.moveY);for(var m,n=c.entries,o=0;m=n[o++];){var p=d[m.glyphIndex],q=p>=32&&34!=p&&92!=p?fromCharCode(p):"\\u"+(p+65536).toString(16).substring(1);g.push('c.fillText("'+q+'",'+i+","+j+")"),i+=m.advance}}g.push("c.restore()");var r={type:"label",id:a.id,bbox:a.bbox,data:g.join("\n")};return h.length&&(r.require=h),r}function applySegmentToStyles(a,b,c,d,e){if(a){var f,g,h,i,j=a.commands,k=a.data,l=a.morphData;if(b.fill0){f=d[b.fill0-1],b.fill1||b.line?g=f.addSegment([],[],e?[]:null):(g=f.head(),g.commands=[],g.data=[],g.morphData=e?[]:null);var m=g.commands,n=g.data,o=g.morphData;m.push(SHAPE_MOVE_TO);var p=k.length-2;for(n.push(k[p],k[p+1]),e&&o.push(l[p],l[p+1]),i=j.length;i-->1;p-=2)h=j[i],m.push(h),n.push(k[p-2],k[p-1]),e&&o.push(l[p-2],l[p-1]),h===SHAPE_CURVE_TO&&(n.push(k[p-4],k[p-3]),e&&o.push(l[p-4],l[p-3]),p-=2)}b.line&&b.fill1&&(f=c[b.line-1],f.addSegment(j,k,l))}}function convertRecordsToStyledPaths(a,b,c,d,e,f,g){for(var h,i,j,k=null!==f,l={fill0:0,fill1:0,line:0},m=null,n=a.length-1,o=0,p=0,q=0,r=0,s=0,t=0;n>s;s++){var u,v=a[s];if(k&&(u=f[t++]),0===v.type)m&&applySegmentToStyles(m,l,c,b,k),v.hasNewStyles&&(h||(h=[]),push.apply(h,b),b=createPathsList(v.fillStyles,!1,d,e),push.apply(h,c),c=createPathsList(v.lineStyles,!0,d,e),i&&(h.push(i),i=null),l={fill0:0,fill1:0,line:0}),v.hasFillStyle0&&(l.fill0=v.fillStyle0),v.hasFillStyle1&&(l.fill1=v.fillStyle1),v.hasLineStyle&&(l.line=v.lineStyle),l.fill1?j=b[l.fill1-1]:l.line?j=c[l.line-1]:l.fill0&&(j=b[l.fill0-1]),v.move&&(o=0|v.moveX,p=0|v.moveY),j&&(m=j.addSegment([],[],k?[]:null),m.commands.push(SHAPE_MOVE_TO),m.data.push(o,p),k&&(0===u.type?(q=0|u.moveX,r=0|u.moveY):(q=o,r=p,t--),m.morphData.push(q,r)));else{if(!m){if(!i){var w={color:{red:0,green:0,blue:0,alpha:255},width:20};i=new SegmentedPath(null,processStyle(w,!0))}m=i.addSegment([],[],k?[]:null),m.commands.push(SHAPE_MOVE_TO),m.data.push(o,p),k&&m.morphData.push(q,r)}if(k){for(;u&&0===u.type;)u=f[t++];u||(u=v)}if(!v.isStraight||k&&!u.isStraight){var x,y,z,A;v.isStraight?(z=0|v.deltaX,A=0|v.deltaY,x=o+(z>>1),y=p+(A>>1),o+=z,p+=A):(x=o+v.controlDeltaX|0,y=p+v.controlDeltaY|0,o=x+v.anchorDeltaX|0,p=y+v.anchorDeltaY|0),m.commands.push(SHAPE_CURVE_TO),m.data.push(x,y,o,p),k&&(u.isStraight?(z=0|u.deltaX,A=0|u.deltaY,x=q+(z>>1),y=r+(A>>1),q+=z,r+=A):(x=q+u.controlDeltaX|0,y=r+u.controlDeltaY|0,q=x+u.anchorDeltaX|0,r=y+u.anchorDeltaY|0),m.morphData.push(x,y,q,r))}else o+=0|v.deltaX,p+=0|v.deltaY,m.commands.push(SHAPE_LINE_TO),m.data.push(o,p),k&&(q+=0|u.deltaX,r+=0|u.deltaY,m.morphData.push(q,r))}}applySegmentToStyles(m,l,c,b,k),h?push.apply(h,b):h=b,push.apply(h,c),i&&h.push(i);var B=0;for(s=0;s<h.length;s++)j=h[s],j.head()?h[s-B]=segmentedPathToShapePath(j,k,g):B++;return h.length-=B,h}function segmentedPathToShapePath(a,b,c){for(var d=a.head(),e=d,f=null,g=null,h=0,i=d.prev;d;){for(;i;)a.segmentsConnect(i,d)?(i.next!==d&&(a.removeSegment(i),a.insertSegment(i,d)),d=i,i=d.prev,h++):a.segmentsConnect(e,i)?(a.removeSegment(i),e.next=i,i=i.prev,e.next.prev=e,e.next.next=null,e=e.next,h++):i=i.prev;if(i=d.prev,f?(g.next=d,d.prev=g,g=e,g.next=null):(f=d,g=e),!i)break;d=e=i,i=d.prev}var j=-h,k=-h<<1;for(i=f;i;)j+=i.commands.length,k+=i.data.length,i=i.next;var l=new ShapePath(a.fillStyle,a.lineStyle,j,k,b,c),m=l.commands,n=l.data,o=l.morphData,p=0,q=0;for(i=f;i;){for(var r=i.commands,s=i.data,t=i.morphData,u=+(s[0]===n[q-2]&&s[1]===n[q-1]),v=u;v<r.length;v++,p++)m[p]=r[v];for(v=u<<1;v<s.length;v++,q++)n[q]=s[v],b&&(o[q]=t[v]);i=i.next}return l}function processStyle(a,b,c,d){if(b&&(a.lineCap=CAPS_STYLE_TYPES[0|a.endCapStyle],a.lineJoin=JOIN_STYLE_TYPES[0|a.joinStyle],a.miterLimit=2*(a.miterLimitFactor||1.5),!a.color&&a.hasFill)){var e=processStyle(a.fillStyle,!1,c,d);return a.style=e.style,a.type=e.type,a.transform=e.transform,a.records=e.records,a.focalPoint=e.focalPoint,a.bitmapId=e.bitmapId,a.repeat=e.repeat,a.fillStyle=null,a}var f;if(void 0===a.type||a.type===GRAPHICS_FILL_SOLID)return f=a.color,a.style="rgba("+f.red+","+f.green+","+f.blue+","+f.alpha/255+")",a.color=null,a;var g;switch(a.type){case GRAPHICS_FILL_LINEAR_GRADIENT:case GRAPHICS_FILL_RADIAL_GRADIENT:case GRAPHICS_FILL_FOCAL_RADIAL_GRADIENT:g=819.2;break;case GRAPHICS_FILL_REPEATING_BITMAP:case GRAPHICS_FILL_CLIPPED_BITMAP:case GRAPHICS_FILL_NONSMOOTHED_REPEATING_BITMAP:case GRAPHICS_FILL_NONSMOOTHED_CLIPPED_BITMAP:c[a.bitmapId]&&(d.push(c[a.bitmapId].id),g=.05);break;default:fail("invalid fill style","shape")}if(!a.matrix)return a;var h=a.matrix;return a.transform={a:h.a*g,b:h.b*g,c:h.c*g,d:h.d*g,e:h.tx,f:h.ty},a.matrix=null,a}function createPathsList(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=processStyle(a[f],b,c,d);e[f]=b?new SegmentedPath(null,g):new SegmentedPath(g,null)}return e}function defineShape(a,b){var c=[],d=[],e=createPathsList(a.fillStyles,!1,b,c),f=createPathsList(a.lineStyles,!0,b,c),g=convertRecordsToStyledPaths(a.records,e,f,b,c,a.recordsMorph||null,d);if(a.bboxMorph){var h=a.bboxMorph;extendBoundsByPoint(a.bbox,h.xMin,h.yMin),extendBoundsByPoint(a.bbox,h.xMax,h.yMax),h=a.strokeBboxMorph,h&&(extendBoundsByPoint(a.strokeBbox,h.xMin,h.yMin),extendBoundsByPoint(a.strokeBbox,h.xMax,h.yMax))}return{type:"shape",id:a.id,strokeBbox:a.strokeBbox,strokeBboxMorph:a.strokeBboxMorph,bbox:a.bbox,bboxMorph:a.bboxMorph,isMorph:a.isMorph,paths:g,require:c.length?c:null,transferables:d}}function logShape(a,b){'{"bounds":'+JSON.stringify(b)+',"paths":['+a.map(function(a){return a.serialize()}).join()+"]}"}function SegmentedPath(a,b){this.fillStyle=a,this.lineStyle=b,this._head=null}function ShapePath(a,b,c,d,e,f){this.fillStyle=a,this.lineStyle=b,c?(this.commands=new Uint8Array(c),this.data=new Int32Array(d),this.morphData=e?new Int32Array(d):null):(this.commands=[],this.data=[]),this.bounds=null,this.strokeBounds=null,this.isMorph=!!e,this.fullyInitialized=!1,inWorker?(this.buffers=[this.commands.buffer,this.data.buffer],f.push(this.commands.buffer,this.data.buffer),e&&(this.buffers.push(this.morphData.buffer),f.push(this.morphData.buffer))):this.buffers=null}function distanceSq(a,b,c,d){var e=c-a,f=d-b;return e*e+f*f}function intersectsLine(a,b,c,d,e,f){return f>b!=d>b&&(c-e)*(b-f)/(d-f)+e>a}function quadraticBezier(a,b,c,d){var e=1-d;return a*e*e+2*b*e*d+c*d*d}function quadraticBezierExtreme(a,b,c){var d=(a-b)/(a-2*b+c);return 0>d?a:d>1?c:quadraticBezier(a,b,c,d)}function cubicBezier(a,b,c,d,e){var f=e*e,g=1-e,h=g*g;return a*g*h+3*b*e*h+3*c*g*f+d*e*f}function cubicBezierExtremes(a,b,c,d){var e=b-a,f=c-b;f*=2;var g=d-c;e+g===f&&(g*=1.0001);var h=2*e-f,i=f-2*e,j=Math.sqrt(i*i-4*e*(e-f+g)),k=2*(e-f+g),l=(h+j)/k,m=(h-j)/k,n=[];return l>=0&&1>=l&&n.push(cubicBezier(a,b,c,d,l)),m>=0&&1>=m&&n.push(cubicBezier(a,b,c,d,m)),n}function cubicXAtY(a,b,c,d,e,f,g,h,i){function j(a){return a*(n+a*(p+a*r))+b-i}function k(b){return 0>b?b=0:b>1&&(b=1),a+b*(m+b*(o+b*q))}function l(a,b,c,d){if(!(Math.abs(c-b)<=d)){var e=.5*(b+c);if(a(b)*a(c)<=0)return s=b,void(t=c);l(a,b,e,d),l(a,e,c,d)}}var m=3*(c-a),n=3*(d-b),o=3*(e-c)-m,p=3*(f-d)-n,q=g-a-m-o,r=h-b-n-p,s=0,t=1;l(j,0,1,.05);var u=findRoot(s,t,j,50,1e-6),v=Math.abs(j(u));if(v>1e-5)return[];var w=[];1>=u&&w.push(k(u));var x=r,y=u*x+p,z=u*y+n,A=y*y-4*x*z;if(0>A)return w;A=Math.sqrt(A),x=1/(x+x);var B=(A-y)*x,C=(-y-A)*x;return B>=0&&1>=B&&w.push(k(B)),C>=0&&1>=C&&w.push(k(C)),w}function findRoot(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r=a;if(g=c(a),0===g)return a;if(i=c(b),0===i)return b;if(i*g>0)return a;for(var s=0,t=0;d>t;++t){if(s++,f=.5*(b+a),h=c(f),0===h)return f;if(Math.abs(f-a)<e)return f;if(h*g>0&&(q=a,a=b,b=q,q=g,g=i,i=q),l=h-g,n=i-h,m=i-g,2*h*l>i*m)b=f,i=h;else{if(j=(f-a)/l,k=(l-n)/(n*m),o=a-j*g*(1-k*h),p=c(o),0===p)return o;if(Math.abs(o-r)<e)return o;r=o,0>p*g?(b=o,i=p):(a=o,g=p,b=f,i=h)}}return f}function extendBoundsByPoint(a,b,c){b<a.xMin?a.xMin=b:b>a.xMax&&(a.xMax=b),c<a.yMin?a.yMin=c:c>a.yMax&&(a.yMax=c)}function extendBoundsByX(a,b){b<a.xMin?a.xMin=b:b>a.xMax&&(a.xMax=b)}function extendBoundsByY(a,b){b<a.yMin?a.yMin=b:b>a.yMax&&(a.yMax=b)}function morph(a,b,c){return a+(b-a)*c}function finishShapePath(a,b){if(a.fullyInitialized)return a;if(!(a instanceof ShapePath)){var c=a;a=new ShapePath(a.fillStyle,a.lineStyle,0,0,a.isMorph),isSupportTypedArray?(a.commands=new Uint8Array(c.buffers[0]),a.data=new Int32Array(c.buffers[1])):(a.commands=new Uint8Array(c.buffers[0].bufferArray),a.data=new Int32Array(c.buffers[1].bufferArray)),c.isMorph&&(a.morphData=new Int32Array(isSupportTypedArray?c.buffers[2]:c.buffers[2].bufferArray)),a.buffers=null}return a.fillStyle&&initStyle(a.fillStyle,b),a.lineStyle&&initStyle(a.lineStyle,b),a.fullyInitialized=!0,a}function buildLinearGradientFactory(a){for(var b=factoryCtx.createLinearGradient(-1,0,1,0),c=0;c<a.length;c++)b.addColorStop(a[c].ratio,a[c].color);var d=function(b,c){for(var d=b.createLinearGradient(-1,0,1,0),e=0;e<a.length;e++)c.addGradientColorStop(d,a[e].ratio,a[e].color);return d};return d.defaultFillStyle=b,d}function buildRadialGradientFactory(a,b){for(var c=factoryCtx.createRadialGradient(a,0,0,0,0,1),d=0;d<b.length;d++)c.addColorStop(b[d].ratio,b[d].color);var e=function(c,d){for(var e=c.createRadialGradient(a,0,0,0,0,1),f=0;f<b.length;f++)d.addGradientColorStop(e,b[f].ratio,b[f].color);return e};return e.defaultFillStyle=c,e}function buildBitmapPatternFactory(a,b){var c,d,e=factoryCtx.createPattern(a,b),f=function(f,g){if(!g.mode)return e;var h=g.getTransformFingerprint();if(h===d)return c;var i=document.createElement("canvas");i.width=a.width,i.height=a.height;var f=i.getContext("2d");return g.setAlpha(f,!0),f.drawImage(a,0,0),c=f.createPattern(i,b),d=h,c};return f.defaultFillStyle=e,f}function initStyle(a,b){if(void 0!==a.type)switch(a.type){case GRAPHICS_FILL_SOLID:break;case GRAPHICS_FILL_LINEAR_GRADIENT:case GRAPHICS_FILL_RADIAL_GRADIENT:case GRAPHICS_FILL_FOCAL_RADIAL_GRADIENT:for(var c=a.records,d=[],e=0,f=c.length;f>e;e++){var g=c[e],h=rgbaObjToStr(g.color);d.push({ratio:g.ratio/255,color:h})}var i,j=a.type===GRAPHICS_FILL_LINEAR_GRADIENT;i=j?buildLinearGradientFactory(d):buildRadialGradientFactory((0|a.focalPoint)/20,d),a.style=i;break;case GRAPHICS_FILL_REPEATING_BITMAP:case GRAPHICS_FILL_CLIPPED_BITMAP:case GRAPHICS_FILL_NONSMOOTHED_REPEATING_BITMAP:case GRAPHICS_FILL_NONSMOOTHED_CLIPPED_BITMAP:var k=b[a.bitmapId],l=a.type===GRAPHICS_FILL_REPEATING_BITMAP||a.type===GRAPHICS_FILL_NONSMOOTHED_REPEATING_BITMAP;a.style=buildBitmapPatternFactory(k.props.img,l?"repeat":"no-repeat");break;default:fail("invalid fill style","shape")}}function packageWave(a,b,c,d,e){var f=d>>3,g=c*b*f,h=c*f,i=a.length+(1&a.length),j=new ArrayBuffer(WaveHeader.length+i),k=new Uint8Array(j);if(k.set(WaveHeader),e)for(var l=0,m=WaveHeader.length;l<a.length;l+=2,m+=2)k[m]=a[l+1],k[m+1]=a[l];else k.set(a,WaveHeader.length);var n=new DataView(j);return n.setUint32(4,i+36,!0),n.setUint16(22,c,!0),n.setUint32(24,b,!0),n.setUint32(28,g,!0),n.setUint16(32,h,!0),n.setUint16(34,d,!0),n.setUint32(40,i,!0),{data:k,mimeType:"audio/wav"}}function defineSound(a){var b,c,d=a.soundType==SOUND_TYPE_STEREO?2:1,e=a.samplesCount,f=SOUND_RATES[a.soundRate],g=a.soundData;switch(a.soundFormat){case SOUND_FORMAT_PCM_BE:if(b=new Float32Array(e*d),a.soundSize==SOUND_SIZE_16_BIT){for(var h=0,i=0;h<b.length;h++,i+=2)b[h]=(g[i]<<24|g[i+1]<<16)/2147483648;c=packageWave(g,f,d,16,!0)}else{for(var h=0;h<b.length;h++)b[h]=(g[h]-128)/128;c=packageWave(g,f,d,8,!1)}break;case SOUND_FORMAT_PCM_LE:if(b=new Float32Array(e*d),a.soundSize==SOUND_SIZE_16_BIT){for(var h=0,i=0;h<b.length;h++,i+=2)b[h]=(g[i+1]<<24|g[i]<<16)/2147483648;c=packageWave(g,f,d,16,!1)}else{for(var h=0;h<b.length;h++)b[h]=(g[h]-128)/128;c=packageWave(g,f,d,8,!1)}break;case SOUND_FORMAT_MP3:c={data:new Uint8Array(g.subarray(2)),mimeType:"audio/mpeg"};break;case SOUND_FORMAT_ADPCM:var j=new Int16Array(e*d);decodeACPCMSoundData(g,j,d),b=new Float32Array(e*d);for(var h=0;h<b.length;h++)b[h]=j[h]/32768;c=packageWave(new Uint8Array(j.buffer),f,d,16,!new Uint8Array(new Uint16Array([1]).buffer)[0]);break;default:throw new Error("Unsupported audio format: "+a.soundFormat)}var k={type:"sound",id:a.id,sampleRate:f,channels:d,pcm:b};return c&&(k.packaged=c),k}function decodeACPCMSoundData(a,b,c){function d(b){for(;b>g;)f=f<<8|a[e++],g+=8;return g-=b,f>>>g&(1<<b)-1}for(var e=0,f=0,g=0,h=0,i=d(2),j=ACPCMIndexTables[i];h<b.length;){var k,l,m=b[h++]=d(16)<<16>>16,n=d(6);c>1&&(k=b[h++]=d(16)<<16>>16,l=d(6));for(var o=1<<i+1,p=0;4095>p;p++){for(var q=d(i+2),r=ACPCMStepSizeTable[n],s=0,t=o>>1;t;t>>=1,r>>=1)q&t&&(s+=r);if(m+=(q&o?-1:1)*(s+r),b[h++]=m=-32768>m?-32768:m>32767?32767:m,n+=j[q&~o],n=0>n?0:n>88?88:n,c>1){q=d(i+2),r=ACPCMStepSizeTable[l],s=0;for(var t=o>>1;t;t>>=1,r>>=1)q&t&&(s+=r);k+=(q&o?-1:1)*(s+r),b[h++]=k=-32768>k?-32768:k>32767?32767:k,l+=j[q&~o],l=0>l?0:l>88?88:l}}}}function SwfSoundStream(a,b,c){this.streamId=nextSoundStreamId++,this.samplesCount=a,this.sampleRate=b,this.channels=c,this.format=null,this.currentSample=0}function SwfSoundStream_decode_PCM(a){for(var b=new Float32Array(a.length),c=0;c<b.length;c++)b[c]=(a[c]-128)/128;return this.currentSample+=b.length/this.channels,{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}function SwfSoundStream_decode_PCM_be(a){for(var b=new Float32Array(a.length/2),c=0,d=0;c<b.length;c++,d+=2)b[c]=(a[d]<<24|a[d+1]<<16)/2147483648;return this.currentSample+=b.length/this.channels,{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}function SwfSoundStream_decode_PCM_le(a){for(var b=new Float32Array(a.length/2),c=0,d=0;c<b.length;c++,d+=2)b[c]=(a[d+1]<<24|a[d]<<16)/2147483648;return this.currentSample+=b.length/this.channels,{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}function SwfSoundStream_decode_MP3(a){var b=a[1]<<8|a[0],c=a[3]<<8|a[2];return this.currentSample+=b,{streamId:this.streamId,samplesCount:b,data:new Uint8Array(a.subarray(4)),seek:c}}function createSoundStream(a){var b=a.streamType==SOUND_TYPE_STEREO?2:1,c=a.samplesCount,d=SOUND_RATES[a.streamRate],e=new SwfSoundStream(c,d,b);switch(a.streamCompression){case SOUND_FORMAT_PCM_BE:e.format="wave",e.decode=a.soundSize==SOUND_SIZE_16_BIT?SwfSoundStream_decode_PCM_be:SwfSoundStream_decode_PCM;break;case SOUND_FORMAT_PCM_LE:e.format="wave",e.decode=a.soundSize==SOUND_SIZE_16_BIT?SwfSoundStream_decode_PCM_le:SwfSoundStream_decode_PCM;break;case SOUND_FORMAT_MP3:e.format="mp3",e.decode=SwfSoundStream_decode_MP3;break;default:throw new Error("Unsupported audio format: "+a.soundFormat)}return e}function defineText(a,b){var c=[];if(a.hasFont){var d=b[a.fontId];a.font=d.uniqueName,c.push(d.id)}var e={type:"text",id:a.id,variableName:a.variableName,tag:a};return c.length&&(e.require=c),e}function Session(a){if(this.id=a,"undefined"==typeof MP3Decoder)throw new Error("mp3 decoder is not available");var b=new MP3Decoder;b.onframedata=function(a,b,c,d){self.postMessage({sessionId:this.id,action:"frame",frameData:a,channels:b,sampleRate:c,bitRate:d})}.bind(this),b.onid3tag=function(a){self.postMessage({sessionId:this.id,action:"id3",id3Data:a})}.bind(this),this.decoder=b}function createMP3Worker(){var a=new Worker(SHUMWAY_ROOT+"swf/mp3worker.js");return a.addEventListener("message",function(a){"console"===a.data.action&&console[a.data.method].call(console,a.data.message)}),a}function MP3DecoderSession(){mp3Worker=mp3Worker||createMP3Worker();var a=nextSessionId++;this.id=a,this.onworkermessage=function(b){if(b.data.sessionId===a){var c=b.data.action;switch(c){case"closed":this.onclosed&&this.onclosed(),mp3Worker.removeEventListener("message",this.onworkermessage,!1);break;case"frame":this.onframedata(b.data.frameData,b.data.channels,b.data.sampleRate,b.data.bitRate);break;case"id3":this.onid3tag&&this.onid3tag(b.data.id3Data);break;case"error":this.onerror&&this.onerror(b.data.message)}}}.bind(this),mp3Worker.addEventListener("message",this.onworkermessage,!1),mp3Worker.postMessage({sessionId:a,action:"create"})}function isCanvasVisible(a){return a.ownerDocument.hidden?!1:a.mozVisible===!1?!1:!0}function visitContainer(a,b,c){var d=a._children;b.childrenStart(a);for(var e=0,f=d.length;f>e;e++){var g=d[e];g&&(b.ignoreVisibleAttribute||g._visible&&!g._maskedObject)&&b.visit(g,visitContainer,c)}b.childrenEnd(a)}function getBlendModeName(a){return BlendModeNameMap[a]||"normal"}function RenderVisitor(a,b,c,d){this.root=a,this.ctx=b,this.depth=0,this.invalidPath=c,this.refreshStage=d,this.clipDepth=null,this.clipStack=null}function RenderingColorTransform(){this.mode=null,this.transform=[1,1,1,1,0,0,0,0]}function RenderingContext(a,b){this.refreshStage=a===!0,this.invalidPath=b,this.isClippingMask=!1,this.colorTransform=new RenderingColorTransform,this.parentCtxs=[]}function renderDisplayObject(a,b,c){var d=a._currentTransform;if(d&&b.transform(d.a,d.b,d.c,d.d,d.tx/20,d.ty/20),renderAsWireframe.value){if(!a._invalid&&!c.refreshStage)return;if(a.getBounds){var e=a.getBounds(null);if(e&&e.xMax-e.xMin>0&&e.yMax-e.yMin>0){a._wireframeStrokeStyle||(a._wireframeStrokeStyle=randomStyle()),b.save(),b.strokeStyle=a._wireframeStrokeStyle;var f=e.xMin/20,g=e.yMin/20;b.strokeRect(f+.5,g+.5,e.xMax/20-f-1,e.yMax/20-g-1),b.restore()}}}else{if(1!==a._alpha&&(b.globalAlpha*=a._alpha),c.invalidPath&&!a._invalid&&!c.refreshStage)return;if(a._graphics){var h=a._graphics;if(h._bitmap)b.save(),b.translate(a._bbox.xMin/20,a._bbox.yMin/20),c.colorTransform.setAlpha(b,!0),b.drawImage(h._bitmap,0,0),b.restore();else{var i=a.ratio;void 0===i&&(i=0),h.draw(b,c.isClippingMask,i,c.colorTransform)}}a.draw&&a.draw(b,a.ratio,c.colorTransform,c.parentCtxs)}a._invalid=!1}function renderQuadTree(a,b){a.strokeRect(b.x/20,b.y/20,b.width/20,b.height/20);for(var c=b.nodes,d=0;d<c.length;d++)renderQuadTree(a,c[d])}function triggerSampling(a){samplesLeftPlusOne=-a-1}function sampleStart(){samplesLeftPlusOne&&0>samplesLeftPlusOne&&(samplesLeftPlusOne*=-1)}function sampleEnd(){samplesLeftPlusOne&&samplesLeftPlusOne--}function timelineEnter(a){timeline&&timeline.enter(a),hudTimeline&&hudTimeline.enter(a)}function timelineLeave(a){timeline&&timeline.leave(a),hudTimeline&&hudTimeline.leave(a)}function timelineWrapBroadcastMessage(a,b){timelineEnter(b),a.broadcastMessage(b),timelineLeave(b)}function initializeHUD(a,b){var c=document.createElement("canvas"),d=document.createElement("div");d.appendChild(c),d.style.position="absolute",d.style.top="0px",d.style.left="0px",d.style.width="100%",d.style.height="150px",d.style.backgroundColor="rgba(0, 0, 0, 0.4)",d.style.pointerEvents="none",b.parentElement.appendChild(d),hudTimeline=new Timeline(c),hudTimeline.setFrameRate(a._frameRate),hudTimeline.refreshEvery(10)}function createRenderDummyBalls(a,b){var c,d=10,e=1,f=b._concatenatedTransform,g=f.a,h=f.d;c=[];for(var i=0;10>i;i++)c.push({position:{x:d+Math.random()*((a.canvas.width-2*d)/g),y:d+Math.random()*((a.canvas.height-2*d)/h)},velocity:{x:e*(Math.random()-.5),y:e*(Math.random()-.5)}});
return a.fillStyle="black",a.lineWidth=2,a.fillRect(0,0,a.canvas.width,a.canvas.height),function(){a.fillStyle="black",a.fillRect(0,0,a.canvas.width,a.canvas.height),a.strokeStyle="green",c.forEach(function(b){var c=b.position,e=b.velocity;a.beginPath(),a.arc(c.x,c.y,d,0,2*Math.PI,!0),a.stroke();var f=c.x+e.x,i=c.y+e.y;(d>f||f>a.canvas.width/g-d)&&(e.x*=-1),(d>i||i>a.canvas.height/h-d)&&(e.y*=-1),c.x+=e.x,c.y+=e.y})}}function renderStage(a,b,c){function d(){f=b.canvas.width,g=b.canvas.height;var c=f/a._stageWidth*20,d=g/a._stageHeight*20;switch(a._scaleMode){case"exactFit":break;case"noBorder":c>d?d=c:c=d;break;case"noScale":var e=b.canvas._pixelRatio||1;c=e,d=e;break;case"showAll":d>c?d=c:c=d}var h,i,j=a._align;h=j.indexOf("L")>=0?0:j.indexOf("R")>=0?f-c*a._stageWidth/20:(f-c*a._stageWidth/20)/2,i=j.indexOf("T")>=0?0:j.indexOf("B")>=0?g-d*a._stageHeight/20:(g-d*a._stageHeight/20)/2,b.setTransform(c,0,0,d,h,i);var k=a._concatenatedTransform;k.a=c,k.d=d,k.tx=20*h,k.ty=20*i}function e(c,e){sampleStart();var f=!1;a._invalid&&(d(),a._invalid=!1,f=!0);var g=!1;if(a._mouseMoved?(a._mouseMoved=!1,g=a._mouseOver):a._handleMouseButtons(),c||f||g){FrameCounter.clear();var i=performance.now();timelineEnter("frame"),traceRenderer.value&&appendToFrameTerminal("Begin Frame #"+l++,"purple");var j=avm2.systemDomain;c&&(timelineEnter("events"),k?k=!1:(enableAdvanceFrame.value&&timelineWrapBroadcastMessage(j,"advanceFrame"),enableEnterFrame.value&&timelineWrapBroadcastMessage(j,"enterFrame"),enableConstructChildren.value&&timelineWrapBroadcastMessage(j,"constructChildren")),timelineWrapBroadcastMessage(j,"frameConstructed"),timelineWrapBroadcastMessage(j,"executeFrame"),timelineWrapBroadcastMessage(j,"exitFrame"),timelineLeave("events")),a._deferRenderEvent&&(a._deferRenderEvent=!1,j.broadcastMessage("render","render"));var o=isCanvasVisible(b.canvas)&&(f||c)&&(n||e||!skipFrameDraw.value);if(o&&!e&&skipFrameDraw.value&&h.shallSkipDraw&&(o=!1,h.skipDraw(),traceRenderer.value&&appendToFrameTerminal("Skip Frame Draw","red")),o){h.startDraw();var p=null;traceRenderer.value&&frameWriter.enter("> Invalidation"),timelineEnter("invalidate"),p=a._processInvalidations(f),timelineLeave("invalidate"),traceRenderer.value&&frameWriter.leave("< Invalidation"),disableRenderVisitor.value||p.isEmpty||(timelineEnter("render"),traceRenderer.value&&frameWriter.enter("> Rendering"),new RenderVisitor(a,b,p,f).start(),traceRenderer.value&&frameWriter.leave("< Rendering"),timelineLeave("render")),showQuadTree.value&&(b.strokeStyle="green",renderQuadTree(b,a._qtree)),p&&!f&&showRedrawRegions.value&&(b.strokeStyle="red",p.draw(b),b.stroke()),h.endDraw()}if(g&&!disableMouseVisitor.value&&(c&&timelineEnter("mouse"),traceRenderer.value&&frameWriter.enter("> Mouse Handling"),a._handleMouse(),traceRenderer.value&&frameWriter.leave("< Mouse Handling"),c&&timelineLeave("mouse"),b.canvas.style.cursor=a._cursor),traceRenderer.value){frameWriter.enter("> Frame Counters");for(var q in FrameCounter.counts)frameWriter.writeLn(q+": "+FrameCounter.counts[q]);frameWriter.leave("< Frame Counters");var r=performance.now()-i,s=1e3/r;m.push(s),traceRenderer.value&&appendToFrameTerminal("End Frame Time: "+r.toFixed(2)+" ("+s.toFixed(2)+" fps, "+m.average().toFixed(2)+" average fps)","purple")}timelineLeave("frame")}else traceRenderer.value&&appendToFrameTerminal("Skip Frame","black");sampleEnd()}var f,g;!timeline&&hud.value&&initializeHUD(a,b.canvas),d();var h=new FrameScheduler;a._frameScheduler=h;var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout,j=dummyAnimation.value&&createRenderDummyBalls(b,a),k=!0,l=0,m=new Shumway.Metrics.Average(120),n=!0;!function o(){var b=!0;if(c.onBeforeFrame){var d={cancel:!1};c.onBeforeFrame(d),b=!d.cancel}return j?(b&&(j(),c.onAfterFrame&&c.onAfterFrame()),void setTimeout(o)):(h.startFrame(a._frameRate),e(b,!1),h.endFrame(),n=!1,h.isOnTime||traceRenderer.value&&appendToFrameTerminal("Frame Is Late","red"),b&&c.onAfterFrame&&c.onAfterFrame(),renderingTerminated?void(c.onTerminated&&c.onTerminated()):void setTimeout(o,turboMode.value?0:h.nextFrameIn))}(),function p(){renderingTerminated||(n=!0,!a._invalid&&!a._mouseMoved||j||e(!1,!0),i(p))}()}function readTags(a,b,c,d,e,f){var g,h=a.tags,i=b.bytes,j=null;a._readTag&&(j=a._readTag,a._readTag=null);try{for(;b.pos<b.end;){g=b.pos,b.ensure(2);var k=readUi16(i,b);if(!k){d=!0;break}var l=k>>6,m=63&k;if(63===m&&(b.ensure(4),m=readUi32(i,b)),j){if(1===l&&1===j.code){j.repeat++,b.pos+=m;continue}h.push(j),e&&void 0!==j.id&&e(a),j=null}b.ensure(m);var n=b.substream(b.pos,b.pos+=m),o=n.bytes,p={code:l};if(39===l)p.type="sprite",p.id=readUi16(o,n),p.frameCount=readUi16(o,n),p.tags=[],readTags(p,n,c,!0);else if(1===l)p.repeat=1;else{var q=tagHandler[l];q&&q(o,n,p,c,l)}j=p}j&&d?(j.finalTag=!0,h.push(j),e&&e(a)):a._readTag=j}catch(r){if(r!==StreamNoDataError)throw f&&f(r),r;b.pos=g,a._readTag=j}}function HeadTailBuffer(a){this.bufferSize=a||16,this.buffer=new Uint8Array(this.bufferSize),this.pos=0}function CompressedPipe(a,b){this.target=a,this.length=b,this.initialize=!0,this.buffer=new HeadTailBuffer(8096),this.state={bitBuffer:0,bitLength:0,compression:{header:null,distanceTable:null,literalTable:null,sym:null,len:null,sym2:null}},this.output={data:new Uint8Array(b),available:0,completed:!1}}function BodyParser(a,b,c){this.swf={swfVersion:a,parseTime:0},this.buffer=new HeadTailBuffer(32768),this.initialize=!0,this.totalRead=0,this.length=b,this.options=c}function defineSymbol(a,b){var c;switch(a.code){case SWF_TAG_CODE_DEFINE_BITS:case SWF_TAG_CODE_DEFINE_BITS_JPEG2:case SWF_TAG_CODE_DEFINE_BITS_JPEG3:case SWF_TAG_CODE_DEFINE_BITS_JPEG4:case SWF_TAG_CODE_JPEG_TABLES:c=defineImage(a,b);break;case SWF_TAG_CODE_DEFINE_BITS_LOSSLESS:case SWF_TAG_CODE_DEFINE_BITS_LOSSLESS2:c=defineBitmap(a);break;case SWF_TAG_CODE_DEFINE_BUTTON:case SWF_TAG_CODE_DEFINE_BUTTON2:c=defineButton(a,b);break;case SWF_TAG_CODE_DEFINE_EDIT_TEXT:c=defineText(a,b);break;case SWF_TAG_CODE_DEFINE_FONT:case SWF_TAG_CODE_DEFINE_FONT2:case SWF_TAG_CODE_DEFINE_FONT3:case SWF_TAG_CODE_DEFINE_FONT4:c=defineFont(a,b);break;case SWF_TAG_CODE_DEFINE_MORPH_SHAPE:case SWF_TAG_CODE_DEFINE_MORPH_SHAPE2:case SWF_TAG_CODE_DEFINE_SHAPE:case SWF_TAG_CODE_DEFINE_SHAPE2:case SWF_TAG_CODE_DEFINE_SHAPE3:case SWF_TAG_CODE_DEFINE_SHAPE4:c=defineShape(a,b);break;case SWF_TAG_CODE_DEFINE_SOUND:c=defineSound(a,b);break;case SWF_TAG_CODE_DEFINE_BINARY_DATA:c={type:"binary",id:a.id,data:a.data};break;case SWF_TAG_CODE_DEFINE_SPRITE:for(var d={},e={type:"frame"},f=[],g=a.tags,h=null,i=0,j=null,k=0,l=g.length;l>k;k++){var m=g[k];switch(m.code){case SWF_TAG_CODE_DO_ACTION:h||(h=[]),h.push(i),h.push(m.actionsData);break;case SWF_TAG_CODE_START_SOUND:var n=e.startSounds||(e.startSounds=[]);n.push(m);break;case SWF_TAG_CODE_SOUND_STREAM_HEAD:try{j=createSoundStream(m),e.soundStream=j.info}catch(o){}break;case SWF_TAG_CODE_SOUND_STREAM_BLOCK:j&&(e.soundStreamBlock=j.decode(m.data));break;case SWF_TAG_CODE_FRAME_LABEL:e.labelName=m.name;break;case SWF_TAG_CODE_PLACE_OBJECT:case SWF_TAG_CODE_PLACE_OBJECT2:case SWF_TAG_CODE_PLACE_OBJECT3:d[m.depth]=m;break;case SWF_TAG_CODE_REMOVE_OBJECT:case SWF_TAG_CODE_REMOVE_OBJECT2:d[m.depth]=null;break;case SWF_TAG_CODE_SHOW_FRAME:i+=m.repeat,e.repeat=m.repeat,e.depths=d,f.push(e),d={},e={type:"frame"}}}c={type:"sprite",id:a.id,frameCount:a.frameCount,frames:f,frameScripts:h};break;case SWF_TAG_CODE_DEFINE_TEXT:case SWF_TAG_CODE_DEFINE_TEXT2:c=defineLabel(a,b)}return c?(c.isSymbol=!0,b[a.id]=c,c):{command:"error",message:"unknown symbol type: "+a.code}}function createParsingContext(a){var b={},c={},d={type:"frame"},e=0,f=null,g=0;return{onstart:function(b){a({command:"init",result:b})},onprogress:function(h){(Date.now()-g>1e3/24||h.bytesLoaded===h.bytesTotal)&&(a({command:"progress",result:{bytesLoaded:h.bytesLoaded,bytesTotal:h.bytesTotal}}),g=Date.now());for(var i=h.tags,j=i.length;j>e;e++){var k=i[e];if("id"in k){var l=defineSymbol(k,c);a(l,l.transferables)}else switch(k.code){case SWF_TAG_CODE_DEFINE_SCENE_AND_FRAME_LABEL_DATA:d.sceneData=k;break;case SWF_TAG_CODE_DEFINE_SCALING_GRID:var m={isSymbol:!0,id:k.symbolId,updates:{scale9Grid:k.splitter}};a(m);break;case SWF_TAG_CODE_DO_ABC:case SWF_TAG_CODE_DO_ABC_:var n=d.abcBlocks;n?n.push({data:k.data,flags:k.flags}):d.abcBlocks=[{data:k.data,flags:k.flags}];break;case SWF_TAG_CODE_DO_ACTION:var o=d.actionBlocks;o?o.push(k.actionsData):d.actionBlocks=[k.actionsData];break;case SWF_TAG_CODE_DO_INIT_ACTION:var p=d.initActionBlocks||(d.initActionBlocks=[]);p.push({spriteId:k.spriteId,actionsData:k.actionsData});break;case SWF_TAG_CODE_START_SOUND:var q=d.startSounds;q||(d.startSounds=q=[]),q.push(k);break;case SWF_TAG_CODE_SOUND_STREAM_HEAD:try{f=createSoundStream(k),d.soundStream=f.info}catch(r){}break;case SWF_TAG_CODE_SOUND_STREAM_BLOCK:f&&(d.soundStreamBlock=f.decode(k.data));break;case SWF_TAG_CODE_EXPORT_ASSETS:var s=d.exports;d.exports=s?s.concat(k.exports):k.exports.slice(0);break;case SWF_TAG_CODE_SYMBOL_CLASS:var t=d.symbolClasses;d.symbolClasses=t?t.concat(k.exports):k.exports.slice(0);break;case SWF_TAG_CODE_FRAME_LABEL:d.labelName=k.name;break;case SWF_TAG_CODE_PLACE_OBJECT:case SWF_TAG_CODE_PLACE_OBJECT2:case SWF_TAG_CODE_PLACE_OBJECT3:b[k.depth]=k;break;case SWF_TAG_CODE_REMOVE_OBJECT:case SWF_TAG_CODE_REMOVE_OBJECT2:b[k.depth]=null;break;case SWF_TAG_CODE_SET_BACKGROUND_COLOR:d.bgcolor=k.color;break;case SWF_TAG_CODE_SHOW_FRAME:d.repeat=k.repeat,d.depths=b,d.complete=!!k.finalTag,a(d),b={},d={type:"frame"}}}},oncomplete:function(b){a(b);var c;if("number"==typeof b.swfVersion){var d=b.bbox;c={topic:"parseInfo",parseTime:b.parseTime,bytesTotal:b.bytesTotal,swfVersion:b.swfVersion,frameRate:b.frameRate,width:(d.xMax-d.xMin)/20,height:(d.yMax-d.yMin)/20,isAvm2:!!b.fileAttributes.doAbc}}a({command:"complete",stats:c})},onexception:function(b){a({type:"exception",message:b.message,stack:b.stack})}}}function parseBytes(a,b){SWF.parse(a,createParsingContext(b))}function ResourceLoader(a){this.subscription=null;var b=this;isWorker?(this.messenger=a,a.onmessage=function(a){b.listener(a.data)}):this.messenger={postMessage:function(a){b.onmessage({data:a})}}}function ActionsDataStream(a,b){this.array=a,this.position=0,this.end=a.length,this.readString=b>=6?this.readUTF8String:this.readANSIString;var c=new ArrayBuffer(4);if(new Int32Array(c)[0]=1,!new Uint8Array(c)[0])throw new Error("big-endian platform")}function AS2ScopeListItem(a,b){this.scope=a,this.next=b}function AS2Context(a){this.swfVersion=a,this.globals=new avm1lib.AS2Globals(this),this.initialScope=new AS2ScopeListItem(this.globals,null),this.assets={},this.isActive=!1,this.executionProhibited=!1,this.abortExecutionAt=0,this.stackDepth=0,this.isTryCatchListening=!1,this.errorsIgnored=0,this.deferScriptExecution=!0,this.pendingScripts=[]}function AS2Error(a){this.error=a}function AS2CriticalError(a,b){this.message=a,this.error=b}function isAS2MovieClip(a){return"object"==typeof a&&a&&a instanceof avm1lib.AS2MovieClip}function as2GetType(a){if(null===a)return"null";var b=typeof a;return"function"===b?"object":"object"===b&&isAS2MovieClip(a)?"movieclip":b}function as2ToPrimitive(a){return"object"!==as2GetType(a)?a:a.valueOf()}function as2ToAddPrimitive(a){return"object"!==as2GetType(a)?a:a instanceof Date&&AS2Context.instance.swfVersion>=6?a.toString():a.valueOf()}function as2ToBoolean(a){switch(as2GetType(a)){default:case"undefined":case"null":return!1;case"boolean":return a;case"number":return 0!==a&&!isNaN(a);case"string":return 0!==a.length;case"movieclip":case"object":return!0}}function as2ToNumber(a){switch(a=as2ToPrimitive(a),as2GetType(a)){case"undefined":case"null":return AS2Context.instance.swfVersion>=7?0/0:0;case"boolean":return a?1:0;case"number":return a;case"string":return""===a&&AS2Context.instance.swfVersion<5?0:+a;default:return AS2Context.instance.swfVersion>=5?0/0:0}}function as2ToInteger(a){var b=as2ToNumber(a);return isNaN(b)?0:isFinite(b)&&0!==b?(0>b?-1:1)*Math.abs(b)|0:b}function as2ToInt32(a){var b=as2ToNumber(a);return isNaN(b)||!isFinite(b)||0===b?0:0|b}function as2ToString(a){switch(as2GetType(a)){case"undefined":return AS2Context.instance.swfVersion>=7?"undefined":"";case"null":return"null";case"boolean":return a?"true":"false";case"number":return a.toString();case"string":return a;case"movieclip":return a.$targetPath;case"object":var b=a.toString!==Function.prototype.toString?a.toString():a;return"string"==typeof b?b:"function"==typeof a?"[type Function]":"[type Object]"}}function as2Compare(a,b){var c=as2ToPrimitive(a),d=as2ToPrimitive(b);return"string"==typeof c&&"string"==typeof d?d>c:as2ToNumber(c)<as2ToNumber(d)}function as2InstanceOf(a,b){return a instanceof b?!0:!1}function as2ResolveProperty(a,b){var c=Multiname.getPublicQualifiedName(b);if(c in a)return b;if(isNumeric(b))return null;var d=c.toLowerCase();for(var e in a)e.toLowerCase()===d&&notImplemented("FIX THIS");return null}function as2GetPrototype(a){return a&&a.asGetPublicProperty("prototype")}function isAvm2Class(a){return"object"==typeof a&&null!==a&&"instanceConstructor"in a}function as2CreatePrototypeProxy(a){var b=a.asGetPublicProperty("prototype");return"undefined"==typeof Proxy?(console.error("ES6 proxies are not found"),b):Proxy.create({getOwnPropertyDescriptor:function(a){return Object.getOwnPropertyDescriptor(b,a)},getPropertyDescriptor:function(a){for(var c=b;c;c=Object.getPrototypeOf(c)){var d=Object.getOwnPropertyDescriptor(c,a);if(d)return d}},getOwnPropertyNames:function(){return Object.getOwnPropertyNames(b)},getPropertyNames:function(){for(var a=Object.getOwnPropertyNames(b),c=Object.getPrototypeOf(b);c;c=Object.getPrototypeOf(c))a=a.concat(Object.getOwnPropertyNames(c));return a},defineProperty:function(c,d){return d&&("function"==typeof d.value&&d.value._setClass&&d.value._setClass(a),"function"==typeof d.get&&d.get._setClass&&d.get._setClass(a),"function"==typeof d.set&&d.set._setClass&&d.set._setClass(a)),Object.defineProperty(b,c,d)},"delete":function(a){return delete b[a]},fix:function(){return void 0}})}function executeActions(a,b,c){if(!b.executionProhibited){var d=ActionTracerFactory.get(),e=b.initialScope.create(c),f=AS2Context.instance;try{AS2Context.instance=b,b.isActive=!0,b.abortExecutionAt=Date.now()+MAX_AVM1_HANG_TIMEOUT,b.errorsIgnored=0,b.defaultTarget=c,b.globals.asSetPublicProperty("this",c),d.message("ActionScript Execution Starts"),d.indent(),interpretActions(a,e,null,[])}catch(g){throw g instanceof AS2CriticalError&&(console.error("Disabling AVM1 execution"),b.executionProhibited=!0),g}finally{b.isActive=!1,d.unindent(),d.message("ActionScript Execution Stops"),AS2Context.instance=f}}}function lookupAS2Children(a,b,c){var d=a.split(/[\/.]/g);""===d[d.length-1]&&d.pop();var e=b;for((""===d[0]||"_level0"===d[0]||"_root"===d[0])&&(e=c,d.shift());d.length>0;){var f=e;if(e=e.$lookupChild(d[0]),!e)throw new Error(d[0]+" (expr "+a+") is not found in "+f._target);d.shift()}return e}function createBuiltinType(a,b){if(a===Array){var c=b;return 1==b.length&&"number"==typeof b[0]&&(c=[],c.length=b[0]),c}if(a===Boolean||a===Number||a===String||a===Function)return a.apply(null,b);if(a===Date)switch(b.length){case 0:return new Date;case 1:return new Date(b[0]);default:return new Date(b[0],b[1],b.length>2?b[2]:1,b.length>3?b[3]:0,b.length>4?b[4]:0,b.length>5?b[5]:0,b.length>6?b[6]:0)}return a===Object?{}:void 0}function interpretActions(a,b,c,d){function e(a){if(!a)return void(t.defaultTarget=y);try{t.defaultTarget=lookupAS2Children(a,w,v.asGetPublicProperty("_root"))}catch(b){throw t.defaultTarget=null,b}}function f(a,d,e,f){var g,h=function(){var a={};a.asSetPublicProperty("this",this),a.asSetPublicProperty("arguments",arguments),a.asSetPublicProperty("super",AS2_SUPER_STUB),a.asSetPublicProperty("__class",g);var h,i=b.create(a);for(h=0;h<arguments.length||h<d.length;h++)a.asSetPublicProperty(d[h],arguments[h]);var j=[];if(e)for(h=0;h<e.length;h++){var k=e[h];if(k)if("param"==k.type)j[h]=arguments[k.index];else switch(k.name){case"this":j[h]=this;break;case"arguments":j[h]=arguments;break;case"super":j[h]=AS2_SUPER_STUB;break;case"_global":j[h]=v;break;case"_parent":j[h]=y.asGetPublicProperty("_parent");break;case"_root":j[h]=v.asGetPublicProperty("_root")}}var l=AS2Context.instance,m=t.isActive;try{if(AS2Context.instance=t,m||(t.abortExecutionAt=Date.now()+MAX_AVM1_HANG_TIMEOUT,t.errorsIgnored=0,t.isActive=!0),t.defaultTarget=y,A.indent(),t.stackDepth++,t.stackDepth>=MAX_AVM1_STACK_LIMIT)throw new AS2CriticalError("long running script -- AVM1 recursion limit is reached");return interpretActions(f,i,c,j)}finally{t.isActive=m,t.stackDepth--,A.unindent(),t.defaultTarget=w,AS2Context.instance=l}};return g=h,h._setClass=function(a){g=a},h.instanceConstructor=h,h.debugName="avm1 "+(a||"<function>"),a&&(h.name=a),h}function g(a){for(var c=b;c;c=c.next)if(c.scope.asHasProperty(void 0,a,0))return c.scope.asSetPublicProperty(a,void 0),c.scope.asDeleteProperty(void 0,a,0);return!1}function h(a,b){var c,d,e;if(a.indexOf(":")>=0){var f=a.split(":");if(c=lookupAS2Children(f[0],w,v.asGetPublicProperty("_root")),!c)throw new Error(f[0]+" is undefined");d=f[1]}else if(a.indexOf(".")>=0){var g=a.split(".");for(d=g.pop(),c=v,e=0;e<g.length;e++)if(c=c.asGetPublicProperty(g[e])||c[g[e]],!c)throw new Error(g.slice(0,e+1)+" is undefined")}if(!c)return null;var h=as2ResolveProperty(c,d),i=null!==h;return i||b?{obj:c,name:h||d,resolved:i}:null}function i(){var a=y.asGetPublicProperty("this");if(a)return a;for(var c=b;c;c=c.next)if(W=as2ResolveProperty(c.scope,"this"),null!==W)return c.scope.asGetPublicProperty(W)}function j(a){if(y.asHasProperty(void 0,a,0))return y.asGetPublicProperty(a);var c=h(a);if(c)return c.obj.asGetPublicProperty(c.name);for(var d,e=i(),f=b;f;f=f.next)if(d=as2ResolveProperty(f.scope,a),null!==d)return f.scope.asGetPublicProperty(d);if(e&&(d=as2ResolveProperty(e,a)))return e.asGetPublicProperty(d);var g=isAS2MovieClip(w)&&w.$lookupChild(a);return g?g:void 0}function k(a,c){if(y.asHasProperty(void 0,a,0))return void y.asSetPublicProperty(a,c);var d=h(a,!0);if(d)return void d.obj.asSetPublicProperty(d.name,c);var e,f=i();if(f&&(e=as2ResolveProperty(f,a)))return f.asSetPublicProperty(e,c);for(var g=b;g.next;g=g.next)if(e=as2ResolveProperty(g.scope,a),null!==e)return g.scope.asSetPublicProperty(e,c);(f||y).asSetPublicProperty(a,c)}function l(a){var b=j(a);if(!(b instanceof Function))throw new Error('Function "'+a+'" is not found');return b}function m(a){var b=j(a);if(!(b instanceof Object))throw new Error('Object "'+a+'" is not found');return b}function n(a,e){var f=b.create(Object(a));interpretActions(e,f,c,d)}function o(a,e,f,g,h,i,j){var k=t.isTryCatchListening;try{t.isTryCatchListening=!0,interpretActions(h,b,c,d)}catch(l){if(t.isTryCatchListening=k,!f)throw l;if(!(l instanceof AS2Error))throw l;"string"==typeof g?y[g]=l.error:d[g]=l.error,interpretActions(i,b,c,d)}finally{t.isTryCatchListening=k,e&&interpretActions(j,b,c,d)}}function p(a,b){if(isNaN(a)||0>a||a>b||a!=(0|a))throw new Error("Invalid number of arguments: "+a)}function q(a){var b=+a.pop();p(b,a.length);for(var c=[],d=0;b>d;d++)c.push(a.pop());return c}function r(a){for(;a>0&&u.position<u.end;){var b=u.readUI8(),c=b>=128?u.readUI16():0;u.position+=c,a--}s=u.position}var s,t=AS2Context.instance,u=new ActionsDataStream(a,t.swfVersion),v=t.globals,w=t.defaultTarget,x=[],y=b.scope,z=t.swfVersion>=5,A=ActionTracerFactory.get();y.$nativeObject&&y.$nativeObject._deferScriptExecution&&(t.deferScriptExecution=!0);for(var B,C=!1;u.position<u.end;)try{for(var D=0,E=t.abortExecutionAt;u.position<u.end;){if(D++%100===0&&Date.now()>=E)throw new AS2CriticalError("long running script -- AVM1 instruction hang timeout");var F=u.readUI8(),G=F>=128?u.readUI16():0;s=u.position+G,B=0,A.print(u.position,F,x);var H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb;switch(0|F){case 129:H=u.readUI16();var lb=u.readUI8();s++,S=6===lb?"gotoAndPlay":"gotoAndStop",v[S](H+1);break;case 131:var mb=u.readString(),nb=u.readString();v.getURL(mb,nb);break;case 4:v.nextFrame();break;case 5:v.prevFrame();break;case 6:v.play();break;case 7:v.stop();break;case 8:v.toggleHighQuality();break;case 9:v.stopAllSounds();break;case 138:H=u.readUI16(),J=u.readUI8(),v.ifFrameLoaded(H)||r(J);break;case 139:U=u.readString(),e(U);break;case 140:var ob=u.readString();v.gotoLabel(ob);break;case 150:for(;u.position<s;){switch(I=u.readUI8()){case 0:Y=u.readString();break;case 1:Y=u.readFloat();break;case 2:Y=null;break;case 3:Y=void 0;break;case 4:Y=d[u.readUI8()];break;case 5:Y=u.readBoolean();break;case 6:Y=u.readDouble();break;case 7:Y=u.readInteger();break;case 8:Y=c[u.readUI8()];break;case 9:Y=c[u.readUI16()];break;default:throw new Error("Unknown value type: "+I)}x.push(Y)}break;case 23:x.pop();break;case 10:Z=as2ToNumber(x.pop()),$=as2ToNumber(x.pop()),x.push(Z+$);break;case 11:Z=as2ToNumber(x.pop()),$=as2ToNumber(x.pop()),x.push($-Z);break;case 12:Z=as2ToNumber(x.pop()),$=as2ToNumber(x.pop()),x.push(Z*$);break;case 13:Z=as2ToNumber(x.pop()),$=as2ToNumber(x.pop()),_=$/Z,x.push(z?_:isFinite(_)?_:"#ERROR#");break;case 14:Z=as2ToNumber(x.pop()),$=as2ToNumber(x.pop()),ab=Z==$,x.push(z?ab:ab?1:0);break;case 15:Z=as2ToNumber(x.pop()),$=as2ToNumber(x.pop()),ab=Z>$,x.push(z?ab:ab?1:0);break;case 16:Z=as2ToBoolean(x.pop()),$=as2ToBoolean(x.pop()),ab=Z&&$,x.push(z?ab:ab?1:0);break;case 17:Z=as2ToBoolean(x.pop()),$=as2ToBoolean(x.pop()),ab=Z||$,x.push(z?ab:ab?1:0);break;case 18:ab=!as2ToBoolean(x.pop()),x.push(z?ab:ab?1:0);break;case 19:bb=as2ToString(x.pop()),cb=as2ToString(x.pop()),ab=bb==cb,x.push(z?ab:ab?1:0);break;case 20:case 49:bb=as2ToString(x.pop()),x.push(v.length(bb));break;case 33:bb=as2ToString(x.pop()),cb=as2ToString(x.pop()),x.push(cb+bb);break;case 21:J=x.pop(),K=x.pop(),Y=as2ToString(x.pop()),x.push(v.substring(Y,K,J));break;case 53:J=x.pop(),K=x.pop(),Y=as2ToString(x.pop()),x.push(v.mbsubstring(Y,K,J));break;case 41:bb=as2ToString(x.pop()),cb=as2ToString(x.pop()),ab=bb>cb,x.push(z?ab:ab?1:0);break;case 24:x.push(v.int(x.pop()));break;case 50:x.push(v.chr(x.pop()));break;case 54:x.push(v.mbchr(x.pop()));break;case 51:x.push(v.ord(x.pop()));break;case 55:x.push(v.mbord(x.pop()));break;case 153:P=u.readSI16(),s+=P;break;case 157:P=u.readSI16(),ab=!!x.pop(),ab&&(s+=P);break;case 158:ob=x.pop(),v.call(ob);break;case 28:R=""+x.pop(),B++,x.push(j(R));break;case 29:Y=x.pop(),R=""+x.pop(),k(R,Y);break;case 154:hb=u.readUI8(),L=x.pop();var pb,qb=x.pop();1&hb?pb="GET":2&hb&&(pb="POST");var rb=64&hb;if(!rb){v.getURL(qb,L,pb);break}var sb=128&hb;sb?v.loadVariables(qb,L,pb):v.loadMovie(qb,L,pb);break;case 159:hb=u.readUI8();var tb=[x.pop()];2&hb&&tb.push(u.readUI16());var ub=1&hb?v.gotoAndPlay:v.gotoAndStop;ub.apply(v,tb);break;case 32:L=x.pop(),e(L);break;case 34:K=x.pop(),L=x.pop(),B++,x.push(v.getAS2Property(L,K));break;case 35:Y=x.pop(),K=x.pop(),L=x.pop(),v.setAS2Property(L,K,Y);break;case 36:var vb=x.pop();L=x.pop();var wb=x.pop();v.duplicateMovieClip(wb,L,vb);break;case 37:L=x.pop(),v.removeMovieClip(L);break;case 39:L=x.pop();var xb=x.pop(),yb=x.pop()?{y2:x.pop(),x2:x.pop(),y1:x.pop(),x1:x.pop()}:null;jb=[L,xb],yb&&(jb=jb.push(yb.x1,yb.y1,yb.x2,yb.y2)),v.startDrag.apply(v,jb);break;case 40:v.stopDrag();break;case 141:J=u.readUI8(),H=x.pop(),v.ifFrameLoaded(H)||r(J);break;case 38:Y=x.pop(),v.trace(Y);break;case 52:x.push(v.getTimer());break;case 48:x.push(v.random(x.pop()));break;case 61:T=x.pop(),eb=q(x),B++,fb=l(T),gb=fb.apply(y,eb),x.push(gb);break;case 82:if(S=x.pop(),db=x.pop(),eb=q(x),B++,null!==S&&void 0!==S&&""!==S){if(null===db||void 0===db)throw new Error("Cannot call method "+S+" of "+typeof db);if(db!==AS2_SUPER_STUB?L=Object(db):(L=as2GetPrototype(j("__class").__super),db=j("this")),W=as2ResolveProperty(L,S),null===W)throw new Error("Method "+S+" is not defined.");gb=L.asGetPublicProperty(W).apply(db,eb)}else gb=db!==AS2_SUPER_STUB?db.apply(db,eb):j("__class").__super.apply(j("this"),eb);x.push(gb);break;case 136:for(J=u.readUI16(),c=[],ib=0;J>ib;ib++)c.push(u.readString());break;case 155:for(T=u.readString(),J=u.readUI16(),eb=[],ib=0;J>ib;ib++)eb.push(u.readString());O=u.readUI16(),s+=O,fb=f(T,eb,null,u.readBytes(O)),T?y.asSetPublicProperty(T,fb):x.push(fb);break;case 60:Y=x.pop(),Q=x.pop(),y.asSetPublicProperty(Q,Y);break;case 65:Q=x.pop(),y.asSetPublicProperty(Q,void 0);break;case 58:Q=x.pop(),db=x.pop(),db.asSetPublicProperty(Q,void 0),x.push(db.asDeleteProperty(void 0,Q,0));break;case 59:Q=x.pop(),gb=g(Q),x.push(gb);break;case 70:X=x.pop(),x.push(null),db=m(X),forEachPublicProperty(db,function(a){x.push(a)});break;case 73:Z=x.pop(),$=x.pop(),x.push(Z==$);break;case 78:Q=x.pop(),db=x.pop(),"prototype"===Q?x.push(as2CreatePrototypeProxy(db)):(W=as2ResolveProperty(Object(db),Q),x.push(null===W?void 0:db.asGetPublicProperty(W)));break;case 66:db=q(x),x.push(db);break;case 67:for(J=+x.pop(),p(J,x.length>>1),db={},ib=0;J>ib;ib++)Y=x.pop(),Q=x.pop(),db.asSetPublicProperty(Q,Y);x.push(db);break;case 83:if(S=x.pop(),db=x.pop(),eb=q(x),B++,null!==S&&void 0!==S&&""!==S){if(W=as2ResolveProperty(db,S),null===W)throw new Error("Method "+S+" is not defined.");if(null===db||void 0===db)throw new Error("Cannot call new using method "+W+" of "+typeof db);M=db.asGetPublicProperty(W)}else{if(null===db||void 0===db)throw new Error("Cannot call new using "+typeof db);M=db}isAvm2Class(db)?gb=construct(db,eb):(gb=Object.create(as2GetPrototype(M)||as2GetPrototype(Object)),M.apply(gb,eb)),gb.constructor=M,x.push(gb);break;case 64:X=x.pop(),db=m(X),eb=q(x),B++,gb=createBuiltinType(db,eb),"undefined"==typeof gb&&(isAvm2Class(db)?gb=construct(db,eb):(gb=Object.create(as2GetPrototype(db)||as2GetPrototype(Object)),db.apply(gb,eb)),gb.constructor=db),x.push(gb);break;case 79:Y=x.pop(),Q=x.pop(),db=x.pop(),db.asSetPublicProperty(Q,Y);break;case 69:db=x.pop(),x.push("movieclip"===as2GetType(db)?db._target:void 0);break;case 148:O=u.readUI16(),db=x.pop(),s+=O,n(db,u.readBytes(O));break;case 74:x.push(as2ToNumber(x.pop()));break;case 75:x.push(as2ToString(x.pop()));break;case 68:db=x.pop(),gb=as2GetType(db),x.push(gb);break;case 71:Z=as2ToAddPrimitive(x.pop()),$=as2ToAddPrimitive(x.pop()),x.push("string"==typeof Z||"string"==typeof $?as2ToString($)+as2ToString(Z):as2ToNumber($)+as2ToNumber(Z));break;case 72:Z=x.pop(),$=x.pop(),x.push(as2Compare($,Z));break;case 63:Z=as2ToNumber(x.pop()),$=as2ToNumber(x.pop()),x.push($%Z);break;case 96:Z=as2ToInt32(x.pop()),$=as2ToInt32(x.pop()),x.push($&Z);break;case 99:Z=as2ToInt32(x.pop()),$=as2ToInt32(x.pop()),x.push($<<Z);break;case 97:Z=as2ToInt32(x.pop()),$=as2ToInt32(x.pop()),x.push($|Z);break;case 100:Z=as2ToInt32(x.pop()),$=as2ToInt32(x.pop()),x.push($>>Z);break;case 101:Z=as2ToInt32(x.pop()),$=as2ToInt32(x.pop()),x.push($>>>Z);break;case 98:Z=as2ToInt32(x.pop()),$=as2ToInt32(x.pop()),x.push($^Z);break;case 81:Z=as2ToNumber(x.pop()),Z--,x.push(Z);break;case 80:Z=as2ToNumber(x.pop()),Z++,x.push(Z);break;case 76:x.push(x[x.length-1]);break;case 62:return x.pop();case 77:x.push(x.pop(),x.pop());break;case 135:kb=u.readUI8(),d[kb]=x[x.length-1];break;case 84:N=x.pop(),db=x.pop(),x.push(as2InstanceOf(Object(db),N));break;case 85:db=x.pop(),x.push(null),forEachPublicProperty(db,function(a){x.push(a)});break;case 102:Z=x.pop(),$=x.pop(),x.push($===Z);break;case 103:Z=x.pop(),$=x.pop(),x.push(as2Compare(Z,$));break;case 104:bb=as2ToString(x.pop()),cb=as2ToString(x.pop()),ab=cb>bb,x.push(z?ab:ab?1:0);break;case 142:T=u.readString(),J=u.readUI16();{u.readUI8()}hb=u.readUI16();var zb=[];for(eb=[],ib=0;J>ib;ib++)kb=u.readUI8(),V=u.readString(),eb.push(V),kb&&(zb[kb]={type:"param",name:V,index:ib});O=u.readUI16(),s+=O;var Ab=1;1&hb&&(zb[Ab++]={type:"var",name:"this"}),4&hb&&(zb[Ab++]={type:"var",name:"arguments"}),16&hb&&(zb[Ab++]={type:"var",name:"super"}),64&hb&&(zb[Ab++]={type:"var",name:"_root"}),128&hb&&(zb[Ab++]={type:"var",name:"_parent"}),256&hb&&(zb[Ab++]={type:"var",name:"_global"}),fb=f(T,eb,zb,u.readBytes(O)),T?y.asSetPublicProperty(T,fb):x.push(fb);break;case 105:var Bb=x.pop();N=x.pop(),db=Object.create(Bb.traitsPrototype||as2GetPrototype(Bb),{constructor:{value:N,enumerable:!1}}),N.__super=Bb,N.prototype=db;break;case 43:db=x.pop(),N=x.pop(),x.push(as2InstanceOf(db,N)?db:null);break;case 44:N=x.pop(),J=+x.pop(),p(J,x.length);var Cb=[];for(ib=0;J>ib;ib++)Cb.push(x.pop());N.$interfaces=Cb;break;case 143:hb=u.readUI8();var Db=!!(4&hb),Eb=!!(2&hb),Fb=!!(1&hb),Gb=u.readUI16(),Hb=u.readUI16(),Ib=u.readUI16(),Jb=Db?u.readUI8():u.readString();s+=Gb+Hb+Ib,o(Db,Eb,Fb,Jb,u.readBytes(Gb),u.readBytes(Hb),u.readBytes(Ib));break;case 42:throw db=x.pop(),new AS2Error(db);case 45:eb=q(x),B++,gb=v.fscommand.apply(null,eb),x.push(gb);break;case 137:{u.readUI8()}break;case 0:return;default:throw new Error("Unknown action code: "+F)}u.position=s,C=!1}}catch(Kb){if(!AVM1_ERRORS_IGNORED&&!t.isTryCatchListening||Kb instanceof AS2CriticalError)throw Kb;if(Kb instanceof AS2Error)throw Kb;var Lb=1;if(TelemetryService.reportTelemetry({topic:"error",error:Lb}),u.position=s,B>0)for(;B--;)x.push(void 0);if(!C){if(t.errorsIgnored++>=MAX_AVM1_ERRORS_LIMIT)throw new AS2CriticalError("long running script -- AVM1 errors limit is reached");avm2.exceptions.push({source:"avm1",message:Kb.message,stack:Kb.stack}),C=!0}}}function log(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];jsGlobal.print(a)}function warn(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];inBrowser?console.warn(a):jsGlobal.print(a)}function time(a,b){for(var c=performance.now(),d=0;b>d;d++)a();var e=(performance.now()-c)/b;return console.info("Took: "+e.toFixed(2)+"ms."),e}function clamp(a,b,c){return b>a?b:a>c?c:a}function hasOwnProperty(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function isObject(a){return"object"==typeof a||"function"==typeof a}function isString(a){return"string"==typeof a}function isFunction(a){return"function"==typeof a}function isNumber(a){return"number"==typeof a}function toNumber(a){return+a}function setBitFlags(a,b,c){return c?a|b:a&~b}function getBitFlags(a,b){return!!(a&b)}function BitSetFunctor(a){function b(){this.count=0,this.dirty=0,this.size=g,this.bits=new Uint32Array(g>>d)}function c(){this.count=0,this.dirty=0,this.size=g,this.bits=0}var d=5,e=1<<d,f=e-1,g=a+(e-1)>>d<<d,h=g>>d===1,i=h?c:b;return i.ADDRESS_BITS_PER_WORD=d,i.BITS_PER_WORD=e,i.BIT_INDEX_MASK=f,i.singleword=h,b.prototype={recount:function(){if(this.dirty){for(var a=this.bits,b=0,c=0,d=a.length;d>c;c++){var e=a[c];e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),b+=16843009*(e+(e>>4)&252645135)>>24}this.count=b,this.dirty=0}},set:function(a){var b=a>>d,c=this.bits[b],e=c|1<<(a&f);this.bits[b]=e,this.dirty|=c^e},setAll:function(){for(var a=this.bits,b=0,c=a.length;c>b;b++)a[b]=4294967295;this.count=this.size,this.dirty=0},assign:function(a){this.count=a.count,this.dirty=a.dirty,this.size=a.size;for(var b=0,c=this.bits.length;c>b;b++)this.bits[b]=a.bits[b]},clear:function(a){var b=a>>d,c=this.bits[b],e=c&~(1<<(a&f));this.bits[b]=e,this.dirty|=c^e},get:function(a){var b=this.bits[a>>d];return 0!==(b&1<<(a&f))},clearAll:function(){for(var a=this.bits,b=0,c=a.length;c>b;b++)a[b]=0;this.count=0,this.dirty=0},_union:function(a){for(var b=this.dirty,c=this.bits,d=a.bits,e=0,f=c.length;f>e;e++){var g=c[e],h=g|d[e];c[e]=h,b|=g^h}this.dirty=b},intersect:function(a){for(var b=this.dirty,c=this.bits,d=a.bits,e=0,f=c.length;f>e;e++){var g=c[e],h=g&d[e];c[e]=h,b|=g^h}this.dirty=b},subtract:function(a){for(var b=this.dirty,c=this.bits,d=a.bits,e=0,f=c.length;f>e;e++){var g=c[e],h=g&~d[e];c[e]=h,b|=g^h}this.dirty=b},negate:function(){for(var a=this.dirty,b=this.bits,c=0,d=b.length;d>c;c++){var e=b[c],f=~e;b[c]=f,a|=e^f}this.dirty=a},forEach:function(a){for(var b=this.bits,c=0,d=b.length;d>c;c++){var f=b[c];if(f)for(var g=0;e>g;g++)f&1<<g&&a(c*e+g)
}},toArray:function(){for(var a=[],b=this.bits,c=0,d=b.length;d>c;c++){var f=b[c];if(f)for(var g=0;e>g;g++)f&1<<g&&a.push(c*e+g)}return a},equals:function(a){if(this.size!==a.size)return!1;for(var b=this.bits,c=a.bits,d=0,e=b.length;e>d;d++)if(b[d]!==c[d])return!1;return!0},contains:function(a){if(this.size!==a.size)return!1;for(var b=this.bits,c=a.bits,d=0,e=b.length;e>d;d++)if((b[d]|c[d])!==b[d])return!1;return!0},toBitString:function(b,c){b=b||"1",c=c||"0";for(var d="",e=0;a>e;e++)d+=this.get(e)?b:c;return d},length:a,toString:function(b){for(var c=[],d=0;a>d;d++)this.get(d)&&c.push(b?b[d]:d);return c.join(", ")},isEmpty:function(){return this.recount(),0===this.count},clone:function(){var a=new b;return a._union(this),a}},c.prototype={recount:function(){if(this.dirty){var a=0,b=this.bits;b-=b>>1&1431655765,b=(858993459&b)+(b>>2&858993459),a+=16843009*(b+(b>>4)&252645135)>>24,this.count=a,this.dirty=0}},set:function(a){var b=this.bits,c=b|1<<(a&f);this.bits=c,this.dirty|=b^c},setAll:function(){this.bits=4294967295,this.count=this.size,this.dirty=0},assign:function(a){this.count=a.count,this.dirty=a.dirty,this.size=a.size,this.bits=a.bits},clear:function(a){var b=this.bits,c=b&~(1<<(a&f));this.bits=c,this.dirty|=b^c},get:function(a){return 0!==(this.bits&1<<(a&f))},clearAll:function(){this.bits=0,this.count=0,this.dirty=0},_union:function(a){var b=this.bits,c=b|a.bits;this.bits=c,this.dirty=b^c},intersect:function(a){var b=this.bits,c=b&a.bits;this.bits=c,this.dirty=b^c},subtract:function(a){var b=this.bits,c=b&~a.bits;this.bits=c,this.dirty=b^c},negate:function(){var a=this.bits,b=~a;this.bits=b,this.dirty=a^b},forEach:function(a){var b=this.bits;if(b)for(var c=0;e>c;c++)b&1<<c&&a(c)},toArray:function(){var a=[],b=this.bits;if(b)for(var c=0;e>c;c++)b&1<<c&&a.push(c);return a},equals:function(a){return this.bits===a.bits},contains:function(a){var b=this.bits;return(b|a.bits)===b},isEmpty:function(){return this.recount(),0===this.count},clone:function(){var a=new c;return a._union(this),a},toBitString:b.prototype.toBitString,toString:b.prototype.toString,length:a},i}function lazyClass(a,b,c){Object.defineProperty(a,b,{get:function(){var d=performance.now(),e=c();return print("Initialized Class: "+b+" "+(performance.now()-d).toFixed(4)),Object.defineProperty(a,b,{value:e,writable:!0}),e},configurable:!0})}function objectConstantName(a){if(a.hasOwnProperty(OBJECT_NAME))return a[OBJECT_NAME];if(a instanceof LazyInitializer)return a.getName();var b,c=objectIDs++;return b=a instanceof Global?"$G"+c:a instanceof Multiname?"$M"+c:isClass(a)?"$C"+c:"$O"+c,Object.defineProperty(a,OBJECT_NAME,{value:b,writable:!1,enumerable:!1}),jsGlobal[b]=a,b}function resolveMultiname(a,b){return a.resolveMultinameProperty(b.namespaces,b.name,b.flags)}function asCheckVectorSetNumericProperty(a,b,c){(0>a||a>b||a===b&&c||!isNumeric(a))&&throwError("RangeError",Errors.OutOfRangeError,a,b)}function asCheckVectorGetNumericProperty(a,b){(0>a||a>=b||!isNumeric(a))&&throwError("RangeError",Errors.OutOfRangeError,a,b)}function arraySort(a,b){if(0===b.length)return a.sort();var c,d=0;return b[0]instanceof Function?c=b[0]:isNumber(b[0])&&(d=b[0]),isNumber(b[1])&&(d=b[1]),a.sort(function(a,b){return asCompare(a,b,d,c)}),a}function ArrayClass(a,b,c,d){var e=new Class("Array",Array,ApplicationDomain.passthroughCallable(Array));e.extendBuiltin(d);var f=!0,g=createEmptyObject();return e.native={"static":{_pop:function(a){return a.pop()},_reverse:function(a){return a.reverse()},_concat:function(a,b){return a.concat.apply(a,b)},_shift:function(a){return a.shift()},_slice:function(a,b,c){return a.slice(b,c)},_unshift:function(a,b){return a.unshift.apply(a,b)},_splice:function(a,b){return a.splice.apply(a,b)},_sort:function(a,b){if(0===b.length)return a.sort();var c,d=0;return b[0]instanceof Function?c=b[0]:isNumber(b[0])&&(d=b[0]),isNumber(b[1])&&(d=b[1]),a.sort(function(a,b){return asCompare(a,b,d,c)}),a},_sortOn:function(a,b,c){isString(b)&&(b=[b]),isNumber(c)&&(c=[c]);for(var d=b.length-1;d>=0;d--){var e=Multiname.getPublicQualifiedName(b[d]);if(f&&c[d]&SORT_NUMERIC){var h="var x = toNumber(a."+e+"), y = toNumber(b."+e+");";h+=c[d]&SORT_DESCENDING?"return x < y ? 1 : (x > y ? -1 : 0);":"return x < y ? -1 : (x > y ? 1 : 0);";var i=g[h];i||(i=g[h]=new Function("a","b",h)),a.sort(i)}else a.sort(function(a,b){return asCompare(a[e],b[e],0|c[d])})}return a},_indexOf:function(a,b,c){return a.indexOf(b,c)},_lastIndexOf:function(a,b,c){return a.lastIndexOf(b,c)},_every:function(a,b,c){for(var d=0;d<a.length;d++)if(b.call(c,a[d],d,a)!==!0)return!1;return!1},_filter:function(a,b,c){for(var d=[],e=0;e<a.length;e++)b.call(c,a[e],e,a)===!0&&d.push(a[e]);return d},_forEach:function(a,b,c){return a.forEach(b,c)},_map:function(a,b,c){return a.map(b,c)},_some:function(a,b,c){return a.some(b,c)}},instance:{pop:Array.prototype.pop,push:Array.prototype.push,unshift:Array.prototype.unshift,length:{get:function(){return this.length},set:function(a){this.length=a}}}},e.coerce=function(a){return a},e.isInstanceOf=function(){return!0},e}function ProxyClass(a,b,c,d){function e(){somewhatImplemented("Proxy")}var f=new Class("Proxy",e,ApplicationDomain.coerceCallable(e));return f.extendBuiltin(d),f}function isProxyObject(a){return a[VM_IS_PROXY]}function nameFromQualifiedName(a){if(isNumeric(a))return a;var b=Multiname.fromQualifiedName(a);return void 0===b?void 0:b.name}function hasNonProxyingCaller(){for(var a=arguments.callee,b=5,c=0;b>c&&a;c++){if(a===nonProxyingHasProperty)return!0;a=a.caller}return!1}function installProxyClassWrapper(a){function b(){c&&print("proxy create, class: "+a);var b=Object.create(d.prototype),e=Proxy.create({get:function(a,d){if(d===VM_IS_PROXY)return c&&print("proxy check"),!0;if(d===VM_CALL_PROXY)return c&&print("proxy get caller"),function(d,e,f){e=e?b:null,c&&print("proxy call, class: "+b.class+", mn: "+d+"hasNonProxyingCallerr: "+hasNonProxyingCaller());var g=Multiname.isQName(d)?d:b.resolveMultinameProperty(d.namespaces,d.name,d.flags),h=g?Multiname.getQualifiedName(g):Multiname.getPublicQualifiedName(d.name);return nameInTraits(b,h)?(c&&c&&print("> proxy pass through "+g),b.asOpenMethods&&b.asOpenMethods[h]?b.asOpenMethods[h].apply(a,f):void 0):b[proxyTrapQns.callProperty](d.name,f)};if(c&&print("proxy get, class: "+b.class+", qn: "+d+"hasNonProxyingCallerr: "+hasNonProxyingCaller()),!hasNonProxyingCaller()){var e=nameFromQualifiedName(d);if(void 0!==e&&!nameInTraits(b,d))return b[proxyTrapQns.getProperty](e)}return b.asOpenMethods&&b.asOpenMethods[d]?bindSafely(b.asOpenMethods[d],a):(c&&print("> proxy pass through "+d),b[d])},set:function(a,d,e){if(c&&print("proxy set, class: "+b.class+", qn: "+d+"hasNonProxyingCallerr: "+hasNonProxyingCaller()),!hasNonProxyingCaller()){var f=nameFromQualifiedName(d);if(void 0!==f&&!nameInTraits(b,d))return void b[proxyTrapQns.setProperty](f,e)}c&&print("> proxy pass through "+d),b[d]=e},has:function(a){if(c&&print("proxy has, class: "+b.class+", qn: "+a+"hasNonProxyingCallerr: "+hasNonProxyingCaller()),!hasNonProxyingCaller()){var d=nameFromQualifiedName(a);if(void 0!==d&&!nameInTraits(b,a))return b[proxyTrapQns.hasProperty](d)}return a in b},hasOwn:function(a){if(c&&print("proxy hasOwn, class: "+b.class+", qn: "+a+"hasNonProxyingCallerr: "+hasNonProxyingCaller()),!hasNonProxyingCaller()){var d=nameFromQualifiedName(a);if(void 0!==d&&!nameInTraits(b,a))return b[proxyTrapQns.hasProperty](d)}return c&&print("> proxy pass through "+a),!!Object.getOwnPropertyDescriptor(b,a)},enumerate:function(){notImplemented("enumerate")},keys:function(){notImplemented("keys")}},d.prototype);return d.apply(e,sliceArguments(arguments,0)),e}var c=!1;c&&print("proxy wrapping, class: "+a);var d=a.instanceConstructor;a.instanceConstructor=b}function DictionaryClass(a,b,c,d){function e(a){this.weakKeys=a,this.map=new WeakMap,a||(this.keys=[]),this.primitiveMap=createEmptyObject()}function f(a){return"string"==typeof a||"number"==typeof a?a:void 0}var g=new Class("Dictionary",e,ApplicationDomain.passthroughCallable(e));g.extendNative(d,e);var h=e.prototype;return defineNonEnumerableProperty(h,"asGetProperty",function(a,b){var c=f(b);return void 0!==c?this.primitiveMap[c]:this.map.get(Object(b))}),defineNonEnumerableProperty(h,"asGetResolvedStringProperty",asGetResolvedStringPropertyFallback),defineNonEnumerableProperty(h,"asSetProperty",function(a,b,c,d){var e=f(b);return void 0!==e?void(this.primitiveMap[e]=d):(this.map.set(Object(b),d),void(!this.weakKeys&&this.keys.indexOf(b)<0&&this.keys.push(b)))}),defineNonEnumerableProperty(h,"asCallProperty",function(){notImplemented("asCallProperty")}),defineNonEnumerableProperty(h,"asHasProperty",function(a,b){var c=f(b);return void 0!==c?c in this.primitiveMap:this.map.has(Object(b))}),defineNonEnumerableProperty(h,"asDeleteProperty",function(a,b){var c=f(b);void 0!==c&&delete this.primitiveMap[c],this.map.delete(Object(b));var d;return!this.weakKeys&&(d=this.keys.indexOf(b))>=0&&this.keys.splice(d,1),!0}),defineNonEnumerableProperty(h,"asGetEnumerableKeys",function(){if(h===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[];for(var b in this.primitiveMap)a.push(b);return this.weakKeys?a:a.concat(this.keys)}),g.native={instance:{init:function(){}}},g}function debugBreak(a){print("[91mdebugBreak: "+a+"[0m")}function getNative(a){for(var b=a.split("."),c=natives,d=0,e=b.length;e>d;d++)c=c&&c[b[d]];return c}function traceArray(a,b,c,d){0!==c.length&&(a.enter(b+" {"),c.forEach(function(b){b.trace(a,d)}),a.leave("}"))}function traceAbc(a,b){b.trace(a)}function traceOperand(a,b,c){var d=0;switch(a.size){case"s08":d=c.readS8();break;case"u08":d=c.readU8();break;case"s16":d=c.readS16();break;case"s24":d=c.readS24();break;case"u30":d=c.readU30();break;case"u32":d=c.readU32()}var e="";switch(a.type){case"":break;case"I":e=b.constantPool.ints[d];break;case"U":e=b.constantPool.uints[d];break;case"D":e=b.constantPool.doubles[d];break;case"S":e=b.constantPool.strings[d];break;case"N":e=b.constantPool.namespaces[d];break;case"CI":e=b.classes[d];break;case"M":return b.constantPool.multinames[d];default:e="?"}return a.name+":"+d+(""===e?"":" ("+e+")")}function traceOperands(a,b,c,d){d=d||!1;var e=c.position,f="";return null===a.operands?f="null":a.operands.forEach(function(d,e){f+=traceOperand(d,b,c),e<a.operands.length-1&&(f+=", ")}),d&&c.seek(e),f}function traceSource(a,b){var c=new SourceTracer(a);b.scripts.forEach(function(a){c.traceTraits(a.traits)})}function traceStatistics(a,b){var c=new Shumway.Metrics.Counter(!0),d=new Shumway.Metrics.Counter(!0),e=new Shumway.Metrics.Counter(!0),f=new Shumway.Metrics.Counter(!0),g={},h={},i={};b.classes.forEach(function(a){var b=a.instanceInfo.name.name;g[b]=!0}),b.scripts.forEach(function(a){a.traits.forEach(function(a){if(a.isClass()){var b=a.classInfo.instanceInfo.superName?a.classInfo.instanceInfo.superName.name:"?";b in g||d.count(b),a.classInfo.traits.forEach(function(a){a.isMethod()?h[a.name.name]=!0:i[a.name.name]=!0}),a.classInfo.instanceInfo.traits.forEach(function(a){!a.isMethod()||a.attributes&ATTR_Override?i[a.name.name]=!0:h[a.name.name]=!0})}})});var j=new Shumway.Metrics.Counter(!0);b.methods.forEach(function(a){function d(a){var c=0;switch(a.size){case"s08":c=k.readS8();break;case"u08":c=k.readU8();break;case"s16":c=k.readS16();break;case"s24":c=k.readS24();break;case"u30":c=k.readU30();break;case"u32":c=k.readU32()}var d="";switch(a.type){case"":break;case"I":d=b.constantPool.ints[c];break;case"U":d=b.constantPool.uints[c];break;case"D":d=b.constantPool.doubles[c];break;case"S":d=b.constantPool.strings[c];break;case"N":d=b.constantPool.namespaces[c];break;case"CI":d=b.classes[c];break;case"M":d=b.constantPool.multinames[c];break;default:d="?"}return d}if(a.code)for(var k=new AbcStream(a.code);k.remaining()>0;){var l=k.readU8(),m=opcodeTable[l],n=null;if(m)switch(j.count(m.name),m.operands&&(n=m.operands.map(d)),l){case OP_call:case OP_callmethod:continue;case OP_callproperty:case OP_callproplex:case OP_callpropvoid:case OP_callstatic:case OP_callsuper:case OP_callsupervoid:!n[0]||n[0].name in h||e.count(n[0].name);break;case OP_constructprop:!n[0]||n[0].name in g||c.count(n[0].name);break;case OP_getproperty:case OP_setproperty:!n[0]||n[0].name in i||f.count(n[0].name)}}}),a.writeLn(JSON.stringify({definedClasses:g,definedMethods:h,definedProperties:i,libraryClasses:c.counts,librarySuperClasses:d.counts,libraryMethods:e.counts,libraryProperties:f.counts,operations:j.counts},null,2))}function grabAbc(a){var b=libraryScripts[a];if(b){var c=b.offset,d=b.length;return new AbcFile(new Uint8Array(libraryAbcs,c,d),a)}return null}function createAVM2(a,b,c,d,e,f){function g(a){new BinaryFileReader(c).readAll(null,function(b){j=new AbcFile(new Uint8Array(b),"avm1.abc"),avm2.systemDomain.executeAbc(j),a()})}function h(){avm2.builtinsLoaded=!1,avm2.systemDomain.onMessage.register("classCreated",Stubs.onClassCreated),avm2.systemDomain.executeAbc(i),avm2.builtinsLoaded=!0,f(avm2)}avm2=new AVM2(d,e,g);var i,j;AVM2.loadPlayerglobal(b.abcs,b.catalog).then(function(){new BinaryFileReader(a).readAll(null,function(a){i=new AbcFile(new Uint8Array(a),"builtin.abc"),h()})})}function dataToRGB(a){return a[0]<<16|a[1]<<8|a[2]}function dataToARGB(a){return a[3]<<24|dataToRGB(a)}function createPatternStyle(a,b,c,d){var e=c===!1?"no-repeat":"repeat",f=factoryCtx.createPattern(a._drawable,e),g=b?{a:b.a,b:b.b,c:b.c,d:b.d,e:b.tx,f:b.ty}:{a:1,b:0,c:0,d:1,e:0,f:0};return{style:f,transform:g,smooth:d}}function createGradientStyle(a,b,c,d,e,f,g,h){null===a||void 0===a&&throwError("TypeError",Errors.NullPointerError,"type"),null===b||void 0===a&&throwError("TypeError",Errors.NullPointerError,"colors"),"linear"!==a&&"radial"!==a&&throwError("ArgumentError",Errors.InvalidEnumError,"type");for(var i=[],j=0,k=b.length;k>j;j++)i.push({ratio:d[j]/255,color:rgbIntAlphaToStr(b[j],c[j])});var l;l="linear"===a?buildLinearGradientFactory(i):buildRadialGradientFactory(h||0,i);var m=819.2,n=e?{a:m*e.a,b:m*e.b,c:m*e.c,d:m*e.d,e:e.tx,f:e.ty}:{a:m,b:0,c:0,d:m,e:0,f:0};return{style:l,transform:n}}function drawGraphicsData(a){if(null!==a)for(var b=0;b<a.length;b++){var c=a[b];flash.display.IGraphicsPath.class.isInstanceOf(c)?this._drawPathObject(c):flash.display.IGraphicsStroke.class.isInstanceOf(c)?this.beginStrokeObject(c):flash.display.IGraphicsFill.class.isInstanceOf(c)&&this.beginFillObject(c)}}function createAudioChannel(a,b){return WebAudioChannel.isSupported?new WebAudioChannel(a,b):void error("PCM data playback is not supported by the browser")}function AudioResampler(a,b){this.sourceRate=a,this.targetRate=b,this.tail=[],this.sourceOffset=0}function WebAudioChannel(a,b){var c=WebAudioChannel.context;c||(c="undefined"!=typeof AudioContext?new AudioContext:new webkitAudioContext,WebAudioChannel.context=c),this.context=c,this.contextSampleRate=c.sampleRate||44100,this.channels=b,this.sampleRate=a,this.contextSampleRate!=a&&(this.resampler=new AudioResampler(a,this.contextSampleRate),this.resampler.ondatarequested=function(a){this.requestData(a.data,a.count)}.bind(this))}function TextFieldContent(a){this.defaultTextFormat=a,this.textWidth=0,this.textHeight=0,this.condenseWhite=!1,this.wordWrap=!1,this.multiline=!1,this.textColor=null,this._text="",this._htmlText="",this._createTrunk(),this._textRuns=null,this._htmlParser=document.createElement("p"),this._measureCtx=document.createElement("canvas").getContext("2d")}function initDefaultListeners(a){var b=a.asGetPublicProperty("$defaultListeners");if(b)for(var c=0;c<b.length;c++){var d=b[c];d.asGetPublicProperty("setter").call(a,d.value)}}function bindNativeClassDefinition(a,b){natives[a]=function(a,c,d,e){var f=new Class(void 0,d,ApplicationDomain.coerceCallable);return f.extend(e),f.linkNatives(b),f}}!function(a){function b(a,b,c,g,h){if(void 0===g&&d("Missing required offset argument"),(0>g||g+c>a.byteLength)&&d("Invalid index: "+g),1===c||!!h===e){if((a.byteOffset+g)%c===0)return new b(a.buffer,a.byteOffset+g,1)[0];for(var i=0;c>i;i++)f[i]=a._bytes[g+i];return new b(f.buffer)[0]}for(var i=0;c>i;i++)f[c-i-1]=a._bytes[g+i];return new b(f.buffer)[0]}function c(a,b,c,g,h,i){if(void 0===g&&d("Missing required offset argument"),void 0===h&&d("Missing required value argument"),(0>g||g+c>a.byteLength)&&d("Invalid index: "+g),1===c||!!i===e)if((a.byteOffset+g)%c===0);else{new b(f.buffer)[0]=h;for(var j=0;c>j;j++)a._bytes[j+g]=f[j]}else{new b(f.buffer)[0]=h;for(var j=0;c>j;j++)a._bytes[g+j]=f[c-1-j]}}function d(a){throw new Error(a)}if(!a.DataView){a.ArrayBuffer||d("ArrayBuffer not supported"),Object.defineProperties||d("This module requires ECMAScript 5");var e=1===new Int8Array(new Int32Array([1]).buffer)[0],f=new Uint8Array(8);a.DataView=function(a,b,c){a instanceof ArrayBuffer||d("Bad ArrayBuffer"),b=b||0,c=c||a.byteLength-b,(0>b||0>c||b+c>a.byteLength)&&d("Illegal offset and/or length"),Object.defineProperties(this,{buffer:{value:a,enumerable:!1,writable:!1,configurable:!1},byteOffset:{value:b,enumerable:!1,writable:!1,configurable:!1},byteLength:{value:c,enumerable:!1,writable:!1,configurable:!1},_bytes:{value:new Uint8Array(a,b,c),enumerable:!1,writable:!1,configurable:!1}})},a.DataView.prototype={constructor:DataView,getInt8:function(a){return b(this,Int8Array,1,a)},getUint8:function(a){return b(this,Uint8Array,1,a)},getInt16:function(a,c){return b(this,Int16Array,2,a,c)},getUint16:function(a,c){return b(this,Uint16Array,2,a,c)},getInt32:function(a,c){return b(this,Int32Array,4,a,c)},getUint32:function(a,c){return b(this,Uint32Array,4,a,c)},getFloat32:function(a,c){return b(this,Float32Array,4,a,c)},getFloat64:function(a,c){return b(this,Float64Array,8,a,c)},setInt8:function(a,b){c(this,Int8Array,1,a,b)},setUint8:function(a,b){c(this,Uint8Array,1,a,b)},setInt16:function(a,b,d){c(this,Int16Array,2,a,b,d)},setUint16:function(a,b,d){c(this,Uint16Array,2,a,b,d)},setInt32:function(a,b,d){c(this,Int32Array,4,a,b,d)},setUint32:function(a,b,d){c(this,Uint32Array,4,a,b,d)},setFloat32:function(a,b,d){c(this,Float32Array,4,a,b,d)},setFloat64:function(a,b,d){c(this,Float64Array,8,a,b,d)}}}}(this),window.console;var ByteArray=ByteArray||function(){function a(b){if(b instanceof ByteArray)return b;var c=b||this.symbol&&this.symbol.data;c?(this.a=new ArrayBuffer(c.length),this.length=c.length,new Uint8Array(this.a).set(c)):(this.a=new ArrayBuffer(a.INITIAL_SIZE),this.length=0),this.position=0,this.cacheViews(),this.nativele=1===new Int8Array(new Int32Array([]).buffer)[0],this.le=this.nativele,this.objectEncoding=a.DEFAULT_OBJECT_ENCODING,this.bitBuffer=0,this.bitLength=0}function b(){runtime.throwErrorFromVM("flash.errors.EOFError","End of file was encountered.")}function c(){var a=Errors.ParamRangeError;runtime.throwErrorFromVM("RangeError",getErrorMessage(a.code),a.code)}function d(){var a=Errors.CompressedDataError;runtime.throwErrorFromVM("CompressedDataError",getErrorMessage(a.code),a.code)}function e(a,b,d){a!==clamp(a,b,d)&&c()}function f(a,c,d){a.position+d>a.length&&b();var e=a.view[c](a.position,a.le);return a.position+=d,e}function g(a,b,c,d){var e=a.position+c;a.ensureCapacity(e),a.view[b](a.position,d,a.le),a.position=e,e>a.length&&(a.length=e)}function h(a){for(var b=Math.max.apply(null,a),c=a.length,d=1<<b,e=new Uint32Array(d),f=0,g=1,h=2;b>=g;f<<=1,++g,h<<=1)for(var i=0;c>i;++i)if(a[i]===g){for(var j=0,k=0;g>k;++k)j=2*j+(f>>k&1);for(var k=j;d>k;k+=h)e[k]=g<<16|i;++f}return{codes:e,maxBits:b}}function i(a,b){var c=j(a,3);switch(c>>1){case 0:a.bitBuffer=a.bitLength=0;var e=a.readUnsignedShort(),f=a.readUnsignedShort();(65535&~f)!==e&&d(),b.writeBytes(a,a.position,e),a.position+=e;break;case 1:k(a,b,y,v);break;case 2:for(var g=[],i=j(a,5)+257,m=j(a,5)+1,n=i+m,p=j(a,4)+4,q=0;19>q;++q)g[o[q]]=p>q?j(a,3):0;var r=h(g);g=[];for(var q=0,s=0;n>q;){var t=1,u=l(a,r);switch(u){case 16:t=j(a,2)+3,u=s;break;case 17:t=j(a,3)+3,u=0;break;case 18:t=j(a,7)+11,u=0;break;default:s=u}for(;t--;)g[q++]=u}var w=h(g.splice(i,m)),x=h(g);k(a,b,x,w);break;default:fail("unknown block type","inflate")}}function j(a,b){for(var c=a.bitBuffer,d=a.bitLength;b>d;)c|=a.readUnsignedByte()<<d,d+=8;return a.bitBuffer=c>>>b,a.bitLength=d-b,c&(1<<b)-1}function k(a,b,c,d){for(var e;256!==(e=l(a,c));)if(256>e)b.writeUnsignedByte(e);else{e-=257;var f=w[e]+j(a,x[e]);e=l(a,d);var g=p[e]+j(a,q[e]);b.writeBytes(b,b.position-g,f)}}function l(a,b){for(var c=a.bitBuffer,e=a.bitLength,f=b.maxBits;f>e;)c|=a.readUnsignedByte()<<e,e+=8;var g=b.codes[c&(1<<f)-1],h=g>>16;return h||d(),a.bitBuffer=c>>>h,a.bitLength=e-h,65535&g}function m(a,b,c){for(var d=1,e=0,f=b;c>f;++f)d=(d+(255&a[f]))%65521,e=(e+d)%65521;return e<<16|d}a.INITIAL_SIZE=128,a.DEFAULT_OBJECT_ENCODING=3;var n=a.prototype;n.cacheViews=function(){var a=this.a;this.int8v=new Int8Array(a),this.uint8v=new Uint8Array(a),this.view=new DataView(a)},n.getBytes=function(){return new Uint8Array(this.a,0,this.length)},n.ensureCapacity=function(a){var b=this.a;if(b.byteLength<a){for(var c=b.byteLength;a>c;)c*=2;var d=new ArrayBuffer(c),e=this.int8v;this.a=d,this.cacheViews(),this.int8v.set(e)}},n.clear=function(){this.length=0,this.position=0},n.readBoolean=function(){return this.position+1>this.length&&b(),0!==this.int8v[this.position++]},n.readByte=function(){return this.position+1>this.length&&b(),this.int8v[this.position++]},n.readUnsignedByte=function(){return this.position+1>this.length&&b(),this.uint8v[this.position++]},n.readBytes=function(a,c,d){var e=this.position;c||(c=0),d||(d=this.length-e),e+d>this.length&&b(),a.length<c+d&&(a.ensureCapacity(c+d),a.length=c+d),a.int8v.set(new Int8Array(this.a,e,d),c),this.position+=d},n.writeBoolean=function(a){var b=this.position+1;this.ensureCapacity(b),this.int8v[this.position++]=a?1:0,b>this.length&&(this.length=b)},n.writeByte=function(a){var b=this.position+1;this.ensureCapacity(b),this.int8v[this.position++]=a,b>this.length&&(this.length=b)},n.writeUnsignedByte=function(a){var b=this.position+1;this.ensureCapacity(b),this.uint8v[this.position++]=a,b>this.length&&(this.length=b)},n.writeRawBytes=function(a){var b=this.position+a.length;this.ensureCapacity(b),this.int8v.set(a,this.position),this.position=b,b>this.length&&(this.length=b)},n.readRawBytes=function(){return new Int8Array(this.a,0,this.length)},n.writeBytes=function(a,b,c){arguments.length<2&&(b=0),arguments.length<3&&(c=0),e(b,0,a.length),e(b+c,0,a.length),0===c&&(c=a.length-b),this.writeRawBytes(new Int8Array(a.a,b,c))},n.readDouble=function(){return f(this,"getFloat64",8)},n.readFloat=function(){return f(this,"getFloat32",4)},n.readInt=function(){return f(this,"getInt32",4)},n.readShort=function(){return f(this,"getInt16",2)},n.readUnsignedInt=function(){return f(this,"getUint32",4)},n.readUnsignedShort=function(){return f(this,"getUint16",2)},n.writeDouble=function(a){g(this,"setFloat64",8,a)},n.writeFloat=function(a){g(this,"setFloat32",4,a)},n.writeInt=function(a){g(this,"setInt32",4,a)},n.writeShort=function(a){g(this,"setInt16",2,a)},n.writeUnsignedInt=function(a){g(this,"setUint32",4,a)},n.writeUnsignedShort=function(a){g(this,"setUint16",2,a)};for(var o=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=[],q=[],r=0,s=0,t=1;30>r;++r)p[r]=t,t+=1<<(q[r]=~~((s+=r>2?1:0)/2));for(var u=[],r=0;32>r;++r)u[r]=5;for(var v=h(u),w=[],x=[],r=0,s=0,t=3;29>r;++r)w[r]=t-(28==r?1:0),t+=1<<(x[r]=~~((s+=r>4?1:0)/4%6));for(var r=0;288>r;++r)u[r]=144>r||r>279?8:256>r?9:7;var y=h(u);return n.compress=function(a){this.position=0;var b=new ByteArray;switch(a){case"zlib":b.writeUnsignedByte(120),b.writeUnsignedByte(156);case"deflate":b.le=!0;var c=this.length;for(b.ensureCapacity(c+5*Math.ceil(c/65535)+4);c>65535;)b.writeUnsignedByte(0),b.writeUnsignedShort(65535),b.writeUnsignedShort(0),b.writeBytes(this,this.position,65535),this.position+=65535,c-=65535;b.writeUnsignedByte(0),b.writeUnsignedShort(c),b.writeUnsignedShort(65535&~c),b.writeBytes(this,this.position,c),"zlib"===a&&b.writeUnsignedInt(m(this.uint8v,0,this.length));break;default:return}this.ensureCapacity(b.uint8v.length),this.uint8v.set(b.uint8v),this.length=b.length,this.position=0},n.uncompress=function(a){var b=new ByteArray;switch(a){case"zlib":var c=this.readUnsignedShort();(2048!==(3840&c)||c%31!==0||32&c)&&d();case"deflate":var e=this.le;for(this.le=!0;this.position<this.length-6;)i(this,b);this.le=e;break;default:return}this.ensureCapacity(b.uint8v.length),this.uint8v.set(b.uint8v),this.length=b.length,this.position=0},a}(),Shumway;!function(a){!function(a){var b=function(){function a(a,b,c,d){this.shortName=a,this.longName=b,this.type=c,d=d||{},this.positional=d.positional,this.parseFn=d.parse,this.value=d.defaultValue}return a.prototype.parse=function(a){this.value="boolean"===this.type?a:"number"===this.type?parseInt(a,10):a,this.parseFn&&this.parseFn(this.value)},a}();a.Argument=b;var c=function(){function a(){this.args=[]}return a.prototype.addArgument=function(a,c,d,e){var f=new b(a,c,d,e);return this.args.push(f),f},a.prototype.addBoundOption=function(a){var c={parse:function(b){a.value=b}};this.args.push(new b(a.shortName,a.longName,a.type,c))},a.prototype.addBoundOptionSet=function(a){var b=this;a.options.forEach(function(a){a instanceof d?b.addBoundOptionSet(a):b.addBoundOption(a)})},a.prototype.getUsage=function(){var a="";return this.args.forEach(function(b){a+=b.positional?b.longName:"[-"+b.shortName+"|--"+b.longName+("boolean"===b.type?"":" "+b.type[0].toUpperCase())+"]",a+=" "}),a},a.prototype.parse=function(a){var b={},c=[];this.args.forEach(function(a){a.positional?c.push(a):(b["-"+a.shortName]=a,b["--"+a.longName]=a)});for(var d=[];a.length;){var e=a.shift(),f=null,g=e;if("--"==e){d=d.concat(a);break}if("-"==e.slice(0,1)||"--"==e.slice(0,2)){if(f=b[e],!f)continue;g="boolean"!==f.type?a.shift():!0}else c.length?f=c.shift():d.push(g);f&&f.parse(g)}return d},a}();a.ArgumentParser=c;var d=function(){function a(a){this.name=a,this.options=[]}return a.prototype.register=function(a){return this.options.push(a),a},a.prototype.trace=function(a){a.enter(this.name+" {"),this.options.forEach(function(b){b.trace(a)}),a.leave("}")},a}();a.OptionSet=d;var e=function(){function a(a,b,c,d,e){this.longName=b,this.shortName=a,this.type=c,this.defaultValue=d,this.value=d,this.description=e}return a.prototype.parse=function(a){this.value=a},a.prototype.trace=function(a){a.writeLn(("-"+this.shortName+"|--"+this.longName).padRight(" ",30)+" = "+this.type+" "+this.value+" ["+this.defaultValue+"] ("+this.description+")")},a}();a.Option=e}(a.Options||(a.Options={}));a.Options}(Shumway||(Shumway={})),"undefined"!=typeof exports&&(exports.Shumway=Shumway);var ArgumentParser=Shumway.Options.ArgumentParser,Option=Shumway.Options.Option,OptionSet=Shumway.Options.OptionSet,Option=Shumway.Options.Option,OptionSet=Shumway.Options.OptionSet,coreOptions=new OptionSet("Core Options"),Timeline=function(){function a(a){this.depth=0,this.start=0,this.index=0,this.marks=new Shumway.CircularBuffer(Int32Array),this.times=new Shumway.CircularBuffer(Float64Array),this.frameRate=12,this.maxFrameTime=2e3/this.frameRate,this.refreshFrequency=10,this.refreshCounter=0,this.count=0,this.kinds=createEmptyObject(),this.kindCount=0,this.canvas=a,this.context=a.getContext("2d",{original:!0}),this.fillStyles=["rgb(85, 152, 213)","#bfd8a7","#d906d7"],window.addEventListener("resize",this.resizeHandler.bind(this),!1),this.resizeHandler()}var b="rgba(255,255,255, 0.075)",c="rgba(0,0,0, 0.85)",d="rgb(255,64,0)",e="#ccc";a.prototype.setFrameRate=function(a){this.frameRate=a,this.maxFrameTime=2e3/a},a.prototype.refreshEvery=function(a){this.refreshFrequency=a,this.refreshCounter=0};var f=-1091633152,g=-559087616;return a.prototype.registerKind=function(a,b){void 0===this.kinds[a]?(this.fillStyles[this.kindCount]=b,this.kinds[a]=this.kindCount++):this.fillStyles[this.kinds[a]]=b},a.prototype.getKind=function(a){return void 0===this.kinds[a]&&(this.kinds[a]=this.kindCount++,this.kindCount>this.fillStyles.length&&this.fillStyles.push(randomStyle())),this.kinds[a]},a.prototype.enter=function(a){this.depth++,this.marks.write(f|this.getKind(a)),this.times.write(performance.now())},a.prototype.leave=function(a){this.marks.write(g|this.getKind(a)),this.times.write(performance.now()),this.depth--,0===this.depth&&(this.count++,++this.refreshCounter==this.refreshFrequency&&(this.refreshCounter=0,this.paint()))},a.prototype.gatherFrames=function(a){var b=[],c=[],d=this.times;return a++,this.marks.forEachInReverse(function(e,h){var i=d.get(h);if((4294901760&e)===f){var j=b.pop();if(j.startTime=i,b.length){var k=b.top();k.children?k.children.push(j):k.children=[j]}else c.length&&!c[0].total&&(c[0].total=c[0].startTime-i),c.unshift(j)}else if((4294901760&e)===g){if(c.length>a)return!0;b.push({kind:65535&e,endTime:i})}}),c},a.prototype.resizeHandler=function(){var a=this.canvas.parentElement;this.cw=a.offsetWidth,this.ch=a.offsetHeight-1;var b=window.devicePixelRatio||1,c=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1;if(b!==c){var d=b/c;this.canvas.width=this.cw*d,this.canvas.height=this.ch*d,this.canvas.style.width=this.cw+"px",this.canvas.style.height=this.ch+"px",this.context.scale(d,d)}else this.canvas.width=this.cw,this.canvas.height=this.ch;this.context.font='10px Consolas, "Liberation Mono", Courier, monospace'},a.prototype.paint=function(){function a(b,c){var d=b.endTime-b.startTime,e=b.startTime-c;if(j.fillStyle=l[b.kind],j.fillRect(m,e,f,d),b.children)for(var g=b.children,h=0,i=g.length;i>h;h++)a(g[h],c)}var f=10,g=1,h=this.cw/(f+g)|0,i=this.gatherFrames(h),j=this.context,k=this.maxFrameTime,l=this.fillStyles;j.clearRect(0,0,this.cw,this.ch);var m,n=0,o=0,p=0,q=0;j.save(),j.translate(0,this.ch),j.scale(1,-this.ch/k);for(var r=0;r<i.length-1;r++){var s=i[r];n+=s.endTime-s.startTime,o++,s.total&&(p+=s.total,q++),m=r*(f+g),j.fillStyle=b,j.fillRect(m,0,f,i[r+1].startTime-s.startTime),a(s,s.startTime)}var t=1e3/this.frameRate;j.beginPath(),j.lineWidth=.5,j.moveTo(0,t),j.lineTo(this.cw,t),j.strokeStyle=d,j.stroke(),j.restore(),j.fillStyle=c,j.fillRect(0,0,this.cw,20);var u,v=this.count,w=Math.round(1e3*o/n),x=Math.round(1e3*q/p),y=5;u=5,j.fillStyle=e,j.fillText(v,u,13),u+=j.measureText(v).width+y,j.fillText(w,u,13),u+=j.measureText(w).width+y,j.fillText(x,u,13);var z=u+j.measureText(x).width+y;u=this.cw;for(var A in this.kinds)j.fillStyle=this.fillStyles[this.getKind(A)],u-=j.measureText(A).width+y,u>z&&this.context.fillText(A,u,13)},a}(),create=Object.create,defineProperty=Object.defineProperty,keys=Object.keys,isArray=Array.isArray,fromCharCode=String.fromCharCode,logE=Math.log,max=Math.max,min=Math.min,pow=Math.pow,push=Array.prototype.push,slice=Array.prototype.slice,splice=Array.prototype.splice;!function functionNameSupport(){eval("function t() {} t.name === 't'")||Object.defineProperty(Function.prototype,"name",{get:function(){if(this.__name)return this.__name;var a=/function\s([^\(]+)/.exec(this.toString()),b=a&&"anonymous"!==a[1]?a[1]:null;return this.__name=b,b},configurable:!0,enumerable:!1})}();var randomStyleCache,nextStyle=0;!function(){function a(a){if("function"!=typeof a)throw new TypeError("Invalid deferred constructor");var b=n(),c=new a(b),d=b.resolve;if("function"!=typeof d)throw new TypeError("Invalid resolve construction function");var e=b.reject;if("function"!=typeof e)throw new TypeError("Invalid reject construction function");return{promise:c,resolve:d,reject:e}}function b(a,b){if("object"!=typeof a||null===a)return!1;try{var c=a.then;if("function"!=typeof c)return!1;{c.call(a,b.resolve,b.reject)}}catch(d){var e=b.reject;e(d)}return!0}function c(a){return"object"==typeof a&&null!==a&&"undefined"!=typeof a.promiseStatus}function d(a,b){if("unresolved"===a.promiseStatus){var c=a.rejectReactions;a.result=b,a.resolveReactions=void 0,a.rejectReactions=void 0,a.promiseStatus="has-rejection",f(c,b)}}function e(a,b){if("unresolved"===a.promiseStatus){var c=a.resolveReactions;
a.result=b,a.resolveReactions=void 0,a.rejectReactions=void 0,a.promiseStatus="has-resolution",f(c,b)}}function f(a,b){for(var c=0;c<a.length;c++)g({reaction:a[c],argument:b})}function g(a){0===s.length&&setTimeout(i,0),s.push(a)}function h(a,c){var d,e,f=a.deferred,g=a.handler;try{d=g(c)}catch(h){var i=f.reject;return i(h)}if(d===f.promise){var i=f.reject;return i(new TypeError("Self resolution"))}try{if(e=b(d,f),!e){var j=f.resolve;return j(d)}}catch(h){var i=f.reject;return i(h)}}function i(){for(;s.length>0;){var a=s[0];try{h(a.reaction,a.argument)}catch(b){"function"==typeof q.onerror&&q.onerror(b)}s.shift()}}function j(a){throw a}function k(a){return a}function l(a){return function(b){d(a,b)}}function m(a){return function(b){e(a,b)}}function n(){var a=function(b,c){a.resolve=b,a.reject=c};return a}function o(d,e,f){return function(g){if(g===d)return f(new TypeError("Self resolution"));var h=d.promiseConstructor;if(c(g)){var i=g.promiseConstructor;if(i===h)return g.then(e,f)}var j=a(h),k=b(g,j);if(k){var l=j.promise;return l.then(e,f)}return e(g)}}function p(a,b,c,d){return function(e){b[a]=e,d.countdown--,0===d.countdown&&c.resolve(b)}}function q(a){if("function"!=typeof a)throw new TypeError("resolver is not a function");var b=this;if("object"!=typeof b)throw new TypeError("Promise to initialize is not an object");b.promiseStatus="unresolved",b.resolveReactions=[],b.rejectReactions=[],b.result=void 0;var c=m(b),e=l(b);try{{a(c,e)}}catch(f){d(b,f)}return b.promiseConstructor=q,b}var r=Function("return this")();if(r.Promise)return"function"!=typeof r.Promise.all&&(r.Promise.all=function(a){var b,c,d=0,e=[],f=new r.Promise(function(a,d){b=a,c=d});return a.forEach(function(a,f){d++,a.then(function(a){e[f]=a,d--,0===d&&b(e)},c)}),0===d&&b(e),f}),void("function"!=typeof r.Promise.resolve&&(r.Promise.resolve=function(a){return new r.Promise(function(b){b(a)})}));var s=[];q.all=function(b){var c=a(this),d=[],e={countdown:0},f=0;return b.forEach(function(a){var b=this.cast(a),g=p(f,d,c,e);b.then(g,c.reject),f++,e.countdown++},this),0===f&&c.resolve(d),c.promise},q.cast=function(b){if(c(b))return b;var d=a(this);return d.resolve(b),d.promise},q.reject=function(b){{var c=a(this);c.reject(b)}return c.promise},q.resolve=function(b){{var c=a(this);c.resolve(b)}return c.promise},q.prototype={"catch":function(a){this.then(void 0,a)},then:function(b,d){var e=this;if(!c(e))throw new TypeError("this is not a Promises");var f=e.promiseConstructor,h=a(f),i="function"==typeof d?d:j,l="function"==typeof b?b:k,m=o(e,l,i),n={deferred:h,handler:m},p={deferred:h,handler:i};switch(e.promiseStatus){case"unresolved":e.resolveReactions.push(n),e.rejectReactions.push(p);break;case"has-resolution":var q=e.result;g({reaction:n,argument:q});break;case"has-rejection":var r=e.result;g({reaction:p,argument:r})}return h.promise}},r.Promise=q}();var QuadTree=function(a,b,c,d,e){this.x=0|a,this.y=0|b,this.width=0|c,this.height=0|d,e?(this.root=e.root,this.parent=e,this.level=e.level+1):(this.root=this,this.parent=null,this.level=0),this.reset()};QuadTree.prototype.reset=function(){this.stuckObjects=null,this.objects=null,this.nodes=[]},QuadTree.prototype._findIndex=function(a,b,c,d){var e=this.x+(this.width/2|0),f=this.y+(this.height/2|0),g=f>c&&f>d,h=c>f;if(e>a&&e>b){if(g)return 1;if(h)return 2}else if(a>e){if(g)return 0;if(h)return 3}return-1},QuadTree.prototype.insert=function(a){var b=this.nodes;if(b.length){var c=this._findIndex(a.xMin,a.xMax,a.yMin,a.yMax);return void(c>-1?b[c].insert(a):(a.prev=null,this.stuckObjects?(a.next=this.stuckObjects,this.stuckObjects.prev=a):a.next=null,this.stuckObjects=a,a.parent=this))}var d=1,e=this.objects;if(e){for(;e.next;)d++,e=e.next;a.prev=e,a.next=null,e.next=a}else a.prev=null,a.next=null,this.objects=a;if(d>4&&this.level<10){for(this._subdivide(),e=this.objects;e;){var f=e.next;this.insert(e),e=f}return void(this.objects=null)}a.parent=this},QuadTree.prototype.update=function(a){var b=a.parent;if(b){if(a.xMin>=b.x&&a.xMax<=b.x+b.width&&a.yMin>=b.y&&a.yMax<=b.y+b.height){if(b.nodes.length){var c=this._findIndex(a.xMin,a.xMax,a.yMin,a.yMax);c>-1&&(b.remove(a),b=this.nodes[c],b.insert(a))}else b.remove(a),b.insert(a);return}b.remove(a)}this.root.insert(a)},QuadTree.prototype.remove=function(a){var b=a.prev,c=a.next;if(b)b.next=c,a.prev=null;else{var d=a.parent;d.objects===a?d.objects=c:d.stuckObjects===a&&(d.stuckObjects=c)}c&&(c.prev=b,a.next=null),a.parent=null},QuadTree.prototype.retrieve=function(a,b,c,d){var e=[],f=[],g=this;do{if(g.nodes.length){var h=g._findIndex(a,b,c,d);h>-1?e.push(g.nodes[h]):e.push.apply(e,g.nodes)}for(var i=g.objects,j=0;2>j;j++){for(;i;)i.xMin>b||i.xMax<a||i.yMin>d||i.yMax<c||f.push(i),i=i.next;i=g.stuckObjects}g=e.pop()}while(g);return f},QuadTree.prototype._subdivide=function(){var a=this.width/2|0,b=this.height/2|0,c=this.x+a,d=this.y+b;this.nodes[0]=new QuadTree(c,this.y,a,b,this),this.nodes[1]=new QuadTree(this.x,this.y,a,b,this),this.nodes[2]=new QuadTree(this.x,d,a,b,this),this.nodes[3]=new QuadTree(c,d,a,b,this)};var RegionCluster=function(){this.regions=[]};RegionCluster.prototype.reset=function(){this.regions.length=0},RegionCluster.prototype.insert=function(a){var b=this.regions;if(b.length<3)return void b.push({xMin:a.xMin,xMax:a.xMax,yMin:a.yMin,yMax:a.yMax});var c=a,d=b[0],e=b[1],f=b[2],g=(max(c.xMax,d.xMax)-min(c.xMin,d.xMin))*(max(c.yMax,d.yMax)-min(c.yMin,d.yMin)),h=b[0],i=(max(c.xMax,e.xMax)-min(c.xMin,e.xMin))*(max(c.yMax,e.yMax)-min(c.yMin,e.yMin)),j=(max(c.xMax,f.xMax)-min(c.xMin,f.xMin))*(max(c.yMax,f.yMax)-min(c.yMin,f.yMin));g>i&&(g=i,h=e),g>j&&(g=j,h=f);var k=(max(d.xMax,e.xMax)-min(d.xMin,e.xMin))*(max(d.yMax,e.yMax)-min(d.yMin,e.yMin)),l=(max(d.xMax,f.xMax)-min(d.xMin,f.xMin))*(max(d.yMax,f.yMax)-min(d.yMin,f.yMin)),m=(max(e.xMax,f.xMax)-min(e.xMin,f.xMin))*(max(e.yMax,f.yMax)-min(e.yMin,f.yMin));if(k>g&&l>g&&m>g)return c.xMin<h.xMin&&(h.xMin=c.xMin),c.xMax>h.xMax&&(h.xMax=c.xMax),c.yMin<h.yMin&&(h.yMin=c.yMin),void(c.yMax>h.yMax&&(h.yMax=c.yMax));h=b[0];var n=b[1];k>l&&(k=l,n=b[2]),k>m&&(h=b[1],n=b[2]),n.xMin<h.xMin&&(h.xMin=n.xMin),n.xMax>h.xMax&&(h.xMax=n.xMax),n.yMin<h.yMin&&(h.yMin=n.yMin),n.yMax>h.yMax&&(h.yMax=n.yMax),n.xMin=c.xMin,n.xMax=c.xMax,n.yMin=c.yMin,n.yMax=c.yMax},RegionCluster.prototype.retrieve=function(){return this.regions};var EXTERNAL_INTERFACE_FEATURE=1,CLIPBOARD_FEATURE=2,SHAREDOBJECT_FEATURE=3,VIDEO_FEATURE=4,SOUND_FEATURE=5,NETCONNECTION_FEATURE=6;this.performance||(this.performance={}),this.performance.now||(this.performance.now=Date.now);var SWF_TAG_CODE_CSM_TEXT_SETTINGS=74,SWF_TAG_CODE_DEFINE_BINARY_DATA=87,SWF_TAG_CODE_DEFINE_BITS=6,SWF_TAG_CODE_DEFINE_BITS_JPEG2=21,SWF_TAG_CODE_DEFINE_BITS_JPEG3=35,SWF_TAG_CODE_DEFINE_BITS_JPEG4=90,SWF_TAG_CODE_DEFINE_BITS_LOSSLESS=20,SWF_TAG_CODE_DEFINE_BITS_LOSSLESS2=36,SWF_TAG_CODE_DEFINE_BUTTON=7,SWF_TAG_CODE_DEFINE_BUTTON2=34,SWF_TAG_CODE_DEFINE_BUTTON_CXFORM=23,SWF_TAG_CODE_DEFINE_BUTTON_SOUND=17,SWF_TAG_CODE_DEFINE_EDIT_TEXT=37,SWF_TAG_CODE_DEFINE_FONT=10,SWF_TAG_CODE_DEFINE_FONT2=48,SWF_TAG_CODE_DEFINE_FONT3=75,SWF_TAG_CODE_DEFINE_FONT4=91,SWF_TAG_CODE_DEFINE_FONT_ALIGN_ZONES=73,SWF_TAG_CODE_DEFINE_FONT_INFO=13,SWF_TAG_CODE_DEFINE_FONT_INFO2=62,SWF_TAG_CODE_DEFINE_FONT_NAME=88,SWF_TAG_CODE_DEFINE_MORPH_SHAPE=46,SWF_TAG_CODE_DEFINE_MORPH_SHAPE2=84,SWF_TAG_CODE_DEFINE_SCALING_GRID=78,SWF_TAG_CODE_DEFINE_SCENE_AND_FRAME_LABEL_DATA=86,SWF_TAG_CODE_DEFINE_SHAPE=2,SWF_TAG_CODE_DEFINE_SHAPE2=22,SWF_TAG_CODE_DEFINE_SHAPE3=32,SWF_TAG_CODE_DEFINE_SHAPE4=83,SWF_TAG_CODE_DEFINE_SOUND=14,SWF_TAG_CODE_DEFINE_SPRITE=39,SWF_TAG_CODE_DEFINE_TEXT=11,SWF_TAG_CODE_DEFINE_TEXT2=33,SWF_TAG_CODE_DEFINE_VIDEO_STREAM=60,SWF_TAG_CODE_DO_ABC=82,SWF_TAG_CODE_DO_ABC_=72,SWF_TAG_CODE_DO_ACTION=12,SWF_TAG_CODE_DO_INIT_ACTION=59,SWF_TAG_CODE_ENABLE_DEBUGGER=58,SWF_TAG_CODE_ENABLE_DEBUGGER2=64,SWF_TAG_CODE_END=0,SWF_TAG_CODE_EXPORT_ASSETS=56,SWF_TAG_CODE_FILE_ATTRIBUTES=69,SWF_TAG_CODE_FRAME_LABEL=43,SWF_TAG_CODE_IMPORT_ASSETS=57,SWF_TAG_CODE_IMPORT_ASSETS2=71,SWF_TAG_CODE_JPEG_TABLES=8,SWF_TAG_CODE_METADATA=77,SWF_TAG_CODE_PLACE_OBJECT=4,SWF_TAG_CODE_PLACE_OBJECT2=26,SWF_TAG_CODE_PLACE_OBJECT3=70,SWF_TAG_CODE_PROTECT=24,SWF_TAG_CODE_REMOVE_OBJECT=5,SWF_TAG_CODE_REMOVE_OBJECT2=28,SWF_TAG_CODE_SCRIPT_LIMITS=65,SWF_TAG_CODE_SET_BACKGROUND_COLOR=9,SWF_TAG_CODE_SET_TAB_INDEX=66,SWF_TAG_CODE_SHOW_FRAME=1,SWF_TAG_CODE_SOUND_STREAM_BLOCK=19,SWF_TAG_CODE_SOUND_STREAM_HEAD=18,SWF_TAG_CODE_SOUND_STREAM_HEAD2=45,SWF_TAG_CODE_START_SOUND=15,SWF_TAG_CODE_START_SOUND2=89,SWF_TAG_CODE_SYMBOL_CLASS=76,SWF_TAG_CODE_VIDEO_FRAME=61;self.SWF={};for(var codeLengthOrder=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],distanceCodes=[],distanceExtraBits=[],i=0,j=0,code=1;30>i;++i)distanceCodes[i]=code,code+=1<<(distanceExtraBits[i]=~~((j+=i>2?1:0)/2));for(var bitLengths=[],i=0;32>i;++i)bitLengths[i]=5;for(var fixedDistanceTable=makeHuffmanTable(bitLengths),lengthCodes=[],lengthExtraBits=[],i=0,j=0,code=3;29>i;++i)lengthCodes[i]=code-(28==i?1:0),code+=1<<(lengthExtraBits[i]=~~((j+=i>4?1:0)/4%6));for(var i=0;288>i;++i)bitLengths[i]=144>i||i>279?8:256>i?9:7;for(var fixedLiteralTable=makeHuffmanTable(bitLengths),InflateNoDataError={},StreamNoDataError={},Stream=function(){function a(){this.bitBuffer=this.bitLength=0}function b(a){if(this.pos+a>this.end)throw StreamNoDataError}function c(){return this.end-this.pos}function d(a,b){var c=new f(this.bytes);return c.pos=a,c.end=b,c}function e(a){var b=this.bytes,c=this.end+a.length;if(c>b.length)throw"stream buffer overfow";b.set(a,this.end),this.end=c}function f(f,g,h,i){void 0===g&&(g=0),f.buffer instanceof ArrayBuffer&&(g+=f.byteOffset,f=f.buffer),void 0===h&&(h=f.byteLength-g),void 0===i&&(i=h);var j=new Uint8Array(f,g,i),k=new DataView(f,g,i);return k.bytes=j,k.pos=0,k.end=h,k.bitBuffer=0,k.bitLength=0,k.align=a,k.ensure=b,k.remaining=c,k.substream=d,k.push=e,k}return f}(),FORMAT_COLORMAPPED=3,FORMAT_15BPP=4,FORMAT_24BPP=5,FACTOR_5BBP=255/31,crcTable=[],i=0;256>i;i++){for(var c=i,h=0;8>h;h++)c=1&c?3988292384^c>>1&2147483647:c>>1&2147483647;crcTable[i]=c}var nextFontId=1,GRAPHICS_FILL_CLIPPED_BITMAP=65,GRAPHICS_FILL_FOCAL_RADIAL_GRADIENT=19,GRAPHICS_FILL_LINEAR_GRADIENT=16,GRAPHICS_FILL_NONSMOOTHED_CLIPPED_BITMAP=67,GRAPHICS_FILL_NONSMOOTHED_REPEATING_BITMAP=66,GRAPHICS_FILL_RADIAL_GRADIENT=18,GRAPHICS_FILL_REPEATING_BITMAP=64,GRAPHICS_FILL_SOLID=0,CAPS_STYLE_TYPES=["round","none","square"],JOIN_STYLE_TYPES=["round","bevel","miter"];SegmentedPath.prototype={addSegment:function(a,b,c){var d={commands:a,data:b,morphData:c,prev:this._head,next:null};return this._head&&(this._head.next=d),this._head=d,d},removeSegment:function(a){a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev)},insertSegment:function(a,b){var c=b.prev;a.prev=c,a.next=b,c&&(c.next=a),b.prev=a},head:function(){return this._head},segmentsConnect:function(a,b){var c=a.data.length;return a.data[c-2]===b.data[0]&&a.data[c-1]===b.data[1]}};var SHAPE_MOVE_TO=1,SHAPE_LINE_TO=2,SHAPE_CURVE_TO=3,SHAPE_WIDE_MOVE_TO=4,SHAPE_WIDE_LINE_TO=5,SHAPE_CUBIC_CURVE_TO=6,SHAPE_CIRCLE=7,SHAPE_ELLIPSE=8;ShapePath.prototype={get isEmpty(){return 0===this.commands.length},moveTo:function(a,b){return this.commands[this.commands.length-1]===SHAPE_MOVE_TO?(this.data[this.data.length-2]=a,void(this.data[this.data.length-1]=b)):(this.commands.push(SHAPE_MOVE_TO),void this.data.push(a,b))},lineTo:function(a,b){this.commands.push(SHAPE_LINE_TO),this.data.push(a,b)},curveTo:function(a,b,c,d){this.commands.push(SHAPE_CURVE_TO),this.data.push(a,b,c,d)},cubicCurveTo:function(a,b,c,d,e,f){this.commands.push(SHAPE_CUBIC_CURVE_TO),this.data.push(a,b,c,d,e,f)},rect:function(a,b,c,d){var e=a+c,f=b+d;this.commands.push(SHAPE_MOVE_TO,SHAPE_LINE_TO,SHAPE_LINE_TO,SHAPE_LINE_TO,SHAPE_LINE_TO),this.data.push(a,b,e,b,e,f,a,f,a,b)},circle:function(a,b,c){this.commands.push(SHAPE_CIRCLE),this.data.push(a,b,c)},ellipse:function(a,b,c,d){this.commands.push(SHAPE_ELLIPSE),this.data.push(a,b,c,d)},draw:function(a,b,c,d){if(!b||this.fillStyle){a.beginPath();var e=this.commands,f=this.data,g=this.morphData,h=!1,i=0,j=0;if(this.isMorph)for(var k=0,l=0;k<e.length;k++)switch(e[k]){case SHAPE_MOVE_TO:a.moveTo(morph(f[l]/20,g[l++]/20,c),morph(f[l]/20,g[l++]/20,c));break;case SHAPE_LINE_TO:a.lineTo(morph(f[l]/20,g[l++]/20,c),morph(f[l]/20,g[l++]/20,c));break;case SHAPE_CURVE_TO:a.quadraticCurveTo(morph(f[l]/20,g[l++]/20,c),morph(f[l]/20,g[l++]/20,c),morph(f[l]/20,g[l++]/20,c),morph(f[l]/20,g[l++]/20,c));break;default:console.warn("Drawing command not supported for morph shapes: "+e[k])}else for(var k=0,l=0;k<e.length;k++)switch(e[k]){case SHAPE_MOVE_TO:h=!0,i=f[l++]/20,j=f[l++]/20,a.moveTo(i,j);break;case SHAPE_WIDE_MOVE_TO:a.moveTo(f[l++]/20,f[l++]/20),l+=2;break;case SHAPE_LINE_TO:a.lineTo(f[l++]/20,f[l++]/20);break;case SHAPE_WIDE_LINE_TO:a.lineTo(f[l++]/20,f[l++]/20),l+=2;break;case SHAPE_CURVE_TO:a.quadraticCurveTo(f[l++]/20,f[l++]/20,f[l++]/20,f[l++]/20);break;case SHAPE_CUBIC_CURVE_TO:a.bezierCurveTo(f[l++]/20,f[l++]/20,f[l++]/20,f[l++]/20,f[l++]/20,f[l++]/20);break;case SHAPE_CIRCLE:h&&(a.lineTo(i,j),h=!1),a.moveTo((f[l]+f[l+2])/20,f[l+1]/20),a.arc(f[l++]/20,f[l++]/20,f[l++]/20,0,2*Math.PI,!1);break;case SHAPE_ELLIPSE:h&&(a.lineTo(i,j),h=!1);var m,n=f[l++],o=f[l++],p=f[l++],q=f[l++];if(p!==q){a.save();var r;p>q?(r=p/q,m=q,n/=r,a.scale(r,1)):(r=q/p,m=p,o/=r,a.scale(1,r))}a.moveTo((n+m)/20,o/20),a.arc(n/20,o/20,m/20,0,2*Math.PI,!1),p!==q&&a.restore();break;default:if(0===e[k]&&k===e.length-1)break;console.warn("Unknown drawing command encountered: "+e[k])}if(b)a.fill();else{var s=this.fillStyle;if(s){d.setFillStyle(a,s.style),a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=s.smooth;var t=s.transform;a.save(),d.setAlpha(a),t&&a.transform(t.a,t.b,t.c,t.d,t.e/20,t.f/20),a.fill(),a.restore()}var u=this.lineStyle;u&&(d.setStrokeStyle(a,u.style),a.save(),d.setAlpha(a),a.lineWidth=Math.max(u.width/20,1),a.lineCap=u.lineCap,a.lineJoin=u.lineJoin,a.miterLimit=u.miterLimit,a.stroke(),a.restore())}a.closePath()}},isPointInPath:function(a,b){if(!this.fillStyle&&!this.lineStyle)return!1;var c=this.strokeBounds||this.bounds||this._calculateBounds();return a<c.xMin||a>c.xMax||b<c.yMin||b>c.yMax?!1:this.fillStyle&&this.isPointInFill(a,b)?!0:this.lineStyle&&void 0!==this.lineStyle.width&&this.isPointInStroke(a,b)},isPointInFill:function(a,b){for(var c,d,e,f,g,h,i=this.commands,j=this.data,k=i.length,l=!1,m=0,n=0,o=0,p=0,q=!1,r=0,s=0,t=0,u=0;k>t;t++){switch(i[t]){case SHAPE_WIDE_MOVE_TO:u+=2;case SHAPE_MOVE_TO:o=j[u++],p=j[u++],q&&intersectsLine(a,b,m,n,r,s)&&(l=!l),q=!0,r=o,s=p;break;case SHAPE_WIDE_LINE_TO:u+=2;case SHAPE_LINE_TO:o=j[u++],p=j[u++],intersectsLine(a,b,m,n,o,p)&&(l=!l);break;case SHAPE_CURVE_TO:if(e=j[u++],f=j[u++],o=j[u++],p=j[u++],f>b==n>b&&p>b==n>b)break;if(m>=a&&e>=a&&o>=a){l=!l;break}var v=n-2*f+p,w=n-b,x=2*(f-n),y=x*x-4*v*w;if(0>y)break;y=Math.sqrt(y),v=1/(v+v);var z=(y-x)*v,A=(-x-y)*v;z>=0&&1>=z&&quadraticBezier(m,e,o,z)>a&&(l=!l),A>=0&&1>=A&&quadraticBezier(m,e,o,A)>a&&(l=!l);break;case SHAPE_CUBIC_CURVE_TO:e=j[u++],f=j[u++];var B=j[u++],C=j[u++];if(o=j[u++],p=j[u++],f>b==n>b&&C>b==n>b&&p>b==n>b)break;if(m>=a&&e>=a&&B>=a&&o>=a){l=!l;break}for(var D=cubicXAtY(m,n,e,f,B,C,o,p,b),E=D.length;E--;)D[E]>=a&&(l=!l);break;case SHAPE_CIRCLE:o=j[u++],p=j[u++];var F=j[u++];c=a-o,d=b-p,F*F>c*c+d*d&&(l=!l),o+=F;break;case SHAPE_ELLIPSE:e=j[u++],f=j[u++],g=j[u++],h=j[u++],c=a-e,d=b-f,1>=c*c/(g*g)+d*d/(h*h)&&(l=!l),o=e+g,p=f;break;default:inWorker||console.warn("Drawing command not handled in isPointInPath: "+i[t])}m=o,n=p}return q&&intersectsLine(a,b,m,n,r,s)&&(l=!l),l},isPointInStroke:function(a,b){for(var c,d,e,f,g,h,i,j,k,l=this.commands,m=this.data,n=l.length,o=this.lineStyle.width,p=o/2,q=p*p,r=a-p,s=a+p,t=b-p,u=b+p,v=0,w=0,x=0,y=0,z=0,A=0;n>z;z++){switch(l[z]){case SHAPE_WIDE_MOVE_TO:A+=2;case SHAPE_MOVE_TO:x=m[A++],y=m[A++];break;case SHAPE_WIDE_LINE_TO:A+=2;case SHAPE_LINE_TO:if(x=m[A++],y=m[A++],v===x&&w===y)break;if(v>s&&x>s||r>v&&r>x||w>u&&y>u||t>w&&t>y)break;if(x===v||y===w)return!0;if(k=((a-v)*(x-v)+(b-w)*(y-w))/distanceSq(v,w,x,y),0>k){if(distanceSq(a,b,v,w)<=q)return!0;break}if(k>1){if(distanceSq(a,b,x,y)<=q)return!0;break}if(distanceSq(a,b,v+k*(x-v),w+k*(y-w))<=q)return!0;break;case SHAPE_CURVE_TO:e=m[A++],f=m[A++],x=m[A++],y=m[A++];var B=quadraticBezierExtreme(v,e,x);if(v>s&&B>s&&x>s||r>v&&r>B&&r>x)break;var C=quadraticBezierExtreme(w,f,y);if(w>u&&C>u&&y>u||t>w&&t>C&&t>y)break;for(k=0;1>k;k+=.02)if(i=quadraticBezier(v,e,x,k),!(r>i||i>s)&&(j=quadraticBezier(w,f,y,k),!(t>j||j>u)&&q>(a-i)*(a-i)+(b-j)*(b-j)))return!0;break;case SHAPE_CUBIC_CURVE_TO:e=m[A++],f=m[A++];var D=m[A++],E=m[A++];x=m[A++],y=m[A++];for(var F=cubicBezierExtremes(v,e,D,x);F.length<2;)F.push(x);if(v>s&&x>s&&s<F[0]&&s<F[1]||r>v&&r>x&&r>F[0]&&r>F[1])break;for(var G=cubicBezierExtremes(w,f,E,y);G.length<2;)G.push(y);if(w>u&&y>u&&u<G[0]&&u<G[1]||t>w&&t>y&&t>G[0]&&t>G[1])break;for(k=0;1>k;k+=.02)if(i=cubicBezier(v,e,D,x,k),!(r>i||i>s)&&(j=cubicBezier(w,f,E,y,k),!(t>j||j>u)&&q>(a-i)*(a-i)+(b-j)*(b-j)))return!0;break;case SHAPE_CIRCLE:e=m[A++],f=m[A++];var H=m[A++];if(x=e+H,y=f,e-H>s||r>e+H||f-H>u||t>f+H)break;c=a-e,d=b-f;var I=H-p,J=H+p,K=c*c+d*d;if(K>=I*I&&J*J>=K)return!0;break;case SHAPE_ELLIPSE:if(e=m[A++],f=m[A++],g=m[A++],h=m[A++],x=e+g,y=f,c=Math.abs(a-e),d=Math.abs(b-f),c-=p,d-=p,c*c/(g*g)+d*d/(h*h)>1)break;if(c+=o,d+=o,c*c/(g*g)+d*d/(h*h)>1)return!0;break;default:inWorker||console.warn("Drawing command not handled in isPointInPath: "+l[z])}v=x,w=y}return!1},getBounds:function(a){var b=a?this.strokeBounds:this.bounds;return b||(this._calculateBounds(),b=a?this.strokeBounds:this.bounds),b},_calculateBounds:function(){var a,b=this.commands,c=this.data,d=b.length;a=b[0]===SHAPE_MOVE_TO||b[0]>SHAPE_CUBIC_CURVE_TO?{xMin:c[0],yMin:c[1]}:{xMin:0,yMin:0},a.xMax=a.xMin,a.yMax=a.yMin;for(var e=a.xMin,f=a.yMin,g=0,h=0;d>g;g++){var i,j,k,l;switch(b[g]){case SHAPE_WIDE_MOVE_TO:h+=2;case SHAPE_MOVE_TO:i=c[h++],j=c[h++],extendBoundsByPoint(a,i,j);break;case SHAPE_WIDE_LINE_TO:h+=2;case SHAPE_LINE_TO:i=c[h++],j=c[h++],extendBoundsByPoint(a,i,j);break;case SHAPE_CURVE_TO:k=c[h++],l=c[h++],i=c[h++],j=c[h++],extendBoundsByPoint(a,i,j),(e>k||k>i)&&extendBoundsByX(a,quadraticBezierExtreme(e,k,i)),(f>l||l>j)&&extendBoundsByY(a,quadraticBezierExtreme(f,l,j));break;case SHAPE_CUBIC_CURVE_TO:k=c[h++],l=c[h++];var m=c[h++],n=c[h++];i=c[h++],j=c[h++],extendBoundsByPoint(a,i,j);var o,p;if(e>k||e>m||k>i||m>i)for(o=cubicBezierExtremes(e,k,m,i),p=o.length;p--;)extendBoundsByX(a,o[p]);if(f>l||f>n||l>j||n>j)for(o=cubicBezierExtremes(f,l,n,j),p=o.length;p--;)extendBoundsByY(a,o[p]);break;case SHAPE_CIRCLE:i=c[h++],j=c[h++];var q=c[h++];extendBoundsByPoint(a,i-q,j-q),extendBoundsByPoint(a,i+q,j+q),i+=q;break;case SHAPE_ELLIPSE:i=c[h++],j=c[h++];var r=c[h++],s=c[h++];extendBoundsByPoint(a,i-r,j-s),extendBoundsByPoint(a,i+r,j+s),i+=r;break;default:inWorker||console.warn("Drawing command not handled in bounds calculation: "+b[g])}e=i,f=j}if(this.bounds=a,this.lineStyle){var t=this.lineStyle.width/2;return this.strokeBounds={xMin:a.xMin-t,yMin:a.yMin-t,xMax:a.xMax+t,yMax:a.yMax+t},this.strokeBounds}return this.strokeBounds=a,a},serialize:function(){var a="{";return this.fillStyle&&(a+='"fill":'+JSON.stringify(this.fillStyle)+","),this.lineStyle&&(a+='"stroke":'+JSON.stringify(this.lineStyle)+","),a+='"commands":['+Array.apply([],this.commands).join()+"],",a+='"data":['+Array.apply([],this.data).join()+"]",a+"}"}},ShapePath.fromPlainObject=function(a){var b=new ShapePath(a.fill||null,a.stroke||null);return b.commands=new Uint8Array(a.commands),b.data=new Int32Array(a.data),inWorker||finishShapePath(b),b};var inWorker="undefined"==typeof window,factoryCtx=inWorker?null:document.createElement("canvas").getContext("2d"),SOUND_SIZE_8_BIT=0,SOUND_SIZE_16_BIT=1,SOUND_TYPE_MONO=0,SOUND_TYPE_STEREO=1,SOUND_FORMAT_PCM_BE=0,SOUND_FORMAT_ADPCM=1,SOUND_FORMAT_MP3=2,SOUND_FORMAT_PCM_LE=3,SOUND_FORMAT_NELLYMOSER_16=4,SOUND_FORMAT_NELLYMOSER_8=5,SOUND_FORMAT_NELLYMOSER=6,SOUND_FORMAT_SPEEX=11,SOUND_RATES=[5512,11250,22500,44100],WaveHeader=new Uint8Array([82,73,70,70,0,0,0,0,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,0,0,0,0]),ACPCMIndexTables=[[-1,2],[-1,-1,2,4],[-1,-1,-1,-1,2,4,6,8],[-1,-1,-1,-1,-1,-1,-1,-1,1,2,4,6,8,10,13,16]],ACPCMStepSizeTable=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],nextSoundStreamId=0;SwfSoundStream.prototype={get info(){return{samplesCount:this.samplesCount,sampleRate:this.sampleRate,channels:this.channels,format:this.format,streamId:this.streamId}},decode:function(){throw new Error("SwfSoundStream.decode: not implemented")}};var isWorker="undefined"==typeof window;if(isWorker){importScripts("../../../lib/mp3/mp3.js"),self.addEventListener("message",function(a){var b=a.data,c=b.sessionId;try{switch(b.action){case"create":var d=new Session(c);sessions[c]=d;break;case"close":var d=sessions[c];d&&(d.close(),sessions[c]=null);break;case"decode":var d=sessions[c];if(!d)throw new Error("mp3 decoding session is unavailable");d.decode(b.data)}}catch(e){self.postMessage({sessionId:c,action:"error",message:e.message})}},!1);var sessions={};Session.prototype={decode:function(a){this.decoder.push(a)},close:function(){self.postMessage({sessionId:this.id,action:"closed"})}},self.console={log:function(a){self.postMessage({action:"console",method:"log",message:a})},error:function(a){self.postMessage({action:"console",method:"error",message:a})}}}else{var mp3Worker,nextSessionId=0;MP3DecoderSession.prototype={pushAsync:function(a){mp3Worker.postMessage({sessionId:this.id,action:"decode",data:a})},close:function(){mp3Worker.postMessage({sessionId:this.id,action:"close"})}},MP3DecoderSession.processAll=function(a,b){var c=8e3,d=new Float32Array(c),e=0,f=[],g=!1,h=new MP3DecoderSession;h.onframedata=function(a){var b=a.length+e;if(b>c){do c*=2;while(b>c);var f=new Float32Array(c);f.set(d),d=f}d.set(a,e),e+=a.length},h.onid3tag=function(a){f.push(a)},h.onclosed=function(){g||b(d.subarray(0,e),f)},h.onerror=function(a){g||(g=!0,b(null,null,a))},h.pushAsync(a),h.close()}}SWF.embed=function(a,b,c,d){function e(a,b){if(1===l)return g.width=0|a,void(g.height=0|b);var c=Math.floor(a*l),d=Math.floor(b*l);g.style.width=c/l+"px",g.style.height=d/l+"px",g.width=c,g.height=d}function f(a){e(a.clientWidth,a.clientHeight),k._invalid=!0}var g=b.createElement("canvas"),h=g.getContext("2d"),i=new flash.display.Loader,j=i._contentLoaderInfo,k=new flash.display.Stage,l=1,m=forceHidpi.value;return k._loader=i,j._parameters=d.movieParams,j._url=d.url||("string"==typeof a?a:null),j._loaderURL=d.loaderURL||j._url,i._parent=k,i._stage=k,j._addEventListener("init",function(){(m||j._swfVersion>=18)&&(l="devicePixelRatio"in window?window.devicePixelRatio:1),g._pixelRatio=l,k._contentsScaleFactor=l,c.clientHeight?(f(c),window.addEventListener("resize",function(){f(c)})):e(k._stageWidth/20,k._stageHeight/20),c.setAttribute("style","position: relative"),g.addEventListener("click",function(){ShumwayKeyboardListener.focus=k,k._mouseTarget._dispatchEvent("click")}),g.addEventListener("dblclick",function(){k._mouseTarget._doubleClickEnabled&&k._mouseTarget._dispatchEvent("doubleClick")}),g.addEventListener("mousedown",function(){k._mouseEvents.push("mousedown")}),g.addEventListener("mousemove",function(a){var b=this,c=0,d=0;if(b.offsetParent)do c+=b.offsetLeft,d+=b.offsetTop;while(b=b.offsetParent);var e=k._concatenatedTransform,f=((a.pageX-c)*l-e.tx/20)/e.a,g=((a.pageY-d)*l-e.ty/20)/e.d;(f!==k._mouseX||g!==k._mouseY)&&(k._mouseMoved=!0,k._mouseX=20*f,k._mouseY=20*g)}),g.addEventListener("mouseup",function(){k._mouseEvents.push("mouseup")}),g.addEventListener("mouseover",function(){k._mouseMoved=!0,k._mouseOver=!0}),g.addEventListener("mouseout",function(){k._mouseMoved=!0,k._mouseOver=!1}),window.addEventListener("message",function(a){var b=a.data;if("object"==typeof b&&null!==b){var c=b.type;switch(c){case"mousemove":case"mouseup":case"mousedown":var d="mousemove"===c;k._mouseMoved=!0,k._mouseOver=!0,k._mouseX=20*b.x,k._mouseY=20*b.y,d||k._mouseEvents.push(c);break;case"mouseover":case"mouseout":k._mouseMoved=!0,k._mouseOver="mouseover"===c;break;case"keyup":case"keydown":k._dispatchEvent(new flash.events.KeyboardEvent("keyup"===c?"keyUp":"keyDown",!0,!1,b.charCode,b.keyCode,b.keyLocation,b.ctrlKey||!1,b.altKey||!1,b.shiftKey||!1))}}},!1);var a=j._backgroundColor;if(d.objectParams){var b;if(d.objectParams.bgcolor&&(b=/#([0-9A-F]{6})/i.exec(d.objectParams.bgcolor))){var n=parseInt(b[1],16);a={red:n>>16&255,green:n>>8&255,blue:255&n,alpha:255}}"transparent"===d.objectParams.wmode&&(a={red:0,green:0,blue:0,alpha:0})}k._color=a,h.fillStyle=rgbaObjToStr(a),h.fillRect(0,0,g.width,g.height);var o=i._content;o._dispatchEvent("added",void 0,!0),o._dispatchEvent("addedToStage"),c.appendChild(g),k._domContainer=c,d.onStageInitialized&&d.onStageInitialized(k);var p=d.startPromise||Promise.resolve();p.then(function(){renderStage(k,h,d)})}),d.onParsed&&j._addEventListener("parsed",function(){d.onParsed()}),d.onComplete&&j._addEventListener("complete",function(){d.onComplete()}),i._load("string"==typeof a?new flash.net.URLRequest(a):a),i};var rendererOptions=coreOptions.register(new OptionSet("Renderer Options")),traceRenderer=rendererOptions.register(new Option("tr","traceRenderer","number",0,"trace renderer execution")),disableRenderVisitor=rendererOptions.register(new Option("drv","disableRenderVisitor","boolean",!1,"disable render visitor")),disableMouseVisitor=rendererOptions.register(new Option("dmv","disableMouseVisitor","boolean",!1,"disable mouse visitor")),showRedrawRegions=rendererOptions.register(new Option("rr","showRedrawRegions","boolean",!1,"show redraw regions")),renderAsWireframe=rendererOptions.register(new Option("raw","renderAsWireframe","boolean",!1,"render as wireframe")),showQuadTree=rendererOptions.register(new Option("qt","showQuadTree","boolean",!1,"show quad tree")),turboMode=rendererOptions.register(new Option("","turbo","boolean",!1,"turbo mode")),forceHidpi=rendererOptions.register(new Option("","forceHidpi","boolean",!1,"force hidpi")),skipFrameDraw=rendererOptions.register(new Option("","skipFrameDraw","boolean",!1,"skip frame when not on time")),hud=rendererOptions.register(new Option("","hud","boolean",!1,"show hud mode")),dummyAnimation=rendererOptions.register(new Option("","dummy","boolean",!1,"show test balls animation")),enableConstructChildren=rendererOptions.register(new Option("","constructChildren","boolean",!0,"Construct Children")),enableEnterFrame=rendererOptions.register(new Option("","enterFrame","boolean",!0,"Enter Frame")),enableAdvanceFrame=rendererOptions.register(new Option("","advanceFrame","boolean",!0,"Advance Frame")),CanvasCache={cache:[],getCanvas:function(a){var b=this.cache.shift();return b||(b={canvas:document.createElement("canvas")},b.ctx=b.canvas.getContext("2d")),b.canvas.width=a.width,b.canvas.height=a.height,b.ctx.save(),b},releaseCanvas:function(a){a.ctx.restore(),this.cache.push(a)}},BlendModeNameMap={normal:"normal",multiply:"multiply",screen:"screen",lighten:"lighten",darken:"darken",difference:"difference",overlay:"overlay",hardlight:"hard-light"};RenderVisitor.prototype={ignoreVisibleAttribute:!1,start:function(){visitContainer(this.root,this,new RenderingContext(this.refreshStage,this.invalidPath))},startFragment:function(a){var b=this.root,c=b._currentTransform,d=c;a&&(d=b._currentTransform={a:a.a,b:a.b,c:a.c,d:a.d,tx:20*a.tx|0,ty:20*a.ty|0},b._invalidateTransform());var e;d&&(e=new flash.geom.Matrix(d.a,d.b,d.c,d.d,d.tx/20,d.ty/20),e.invert(),this.ctx.save(),this.ctx.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),this.visit(b,visitContainer,new RenderingContext(this.refreshStage,this.invalidPath)),d&&this.ctx.restore(),a&&(b._currentTransform=c,b._invalidateTransform())},childrenStart:function(){if(0===this.depth){var a=this.ctx;a.save(),!this.invalidPath||this.refreshStage||renderAsWireframe.value||(this.invalidPath.draw(a,!1,0,null),a.clip());var b=this.root._color;b&&(b.alpha<255&&a.clearRect(0,0,a.canvas.width,a.canvas.height),b.alpha>0&&(a.fillStyle=rgbaObjToStr(b),!this.invalidPath||this.refreshStage||renderAsWireframe.value?a.fillRect(0,0,a.canvas.width,a.canvas.height):a.fill())),a.mozFillRule="evenodd"}this.depth++,this.clipDepth&&this.clipDepth.length>0&&(this.clipStack={depth:this.depth,clip:this.clipDepth,next:this.clipStack},this.clipDepth=null)},childrenEnd:function(){if(this.clipDepth){for(;this.clipDepth.length>0;){var a=this.clipDepth.pop();this.clipEnd(a),this.ctx=a.ctx}this.clipDepth=null}this.clipStack&&this.clipStack.depth===this.depth&&(this.clipDepth=this.clipStack.clip,this.clipStack=this.clipStack.next),this.depth--,0===this.depth&&(this.ctx.restore(),this.invalidPath=null)},visit:function(a,b,c){var d=this.ctx,e=c.isClippingMask,f=c.colorTransform,g=e===!0;if(a._cxform&&(c.colorTransform=f.applyCXForm(a._cxform)),!g){for(;this.clipDepth&&this.clipDepth.length>0&&a._depth>this.clipDepth[0].clipDepth;){var h=this.clipDepth.shift();this.clipEnd(h),c.parentCtxs.shift(),d=this.ctx=h.ctx}if(this.clipDepth&&this.clipDepth.length>0&&a._depth<=this.clipDepth[0].clipDepth&&(d=this.ctx=this.clipDepth[0].maskee.ctx),a._clipDepth){c.isClippingMask=g=!0;var h=this.clipStart(a);this.clipDepth?this.clipDepth.unshift(h):this.clipDepth=[h],c.parentCtxs.unshift(d),d=this.ctx=h.mask.ctx}}if(g&&a._isContainer){d.save(),renderDisplayObject(a,d,c);for(var i=0,j=a._children.length;j>i;i++){var k=a._children[i];k&&(this.ignoreVisibleAttribute||k._visible&&!k._maskedObject)&&this.visit(k,b,c)}return d.restore(),d.fill(),c.isClippingMask=e,void(c.colorTransform=f)}if(d.save(),d.globalCompositeOperation=getBlendModeName(a._blendMode),a._mask){var l=this.clipStart(a),m=l.mask,n=l.maskee;c.parentCtxs.push(d);var o=this.clipDepth;this.clipDepth=null,this.ctx=m.ctx,this.visit(a._mask,b,new RenderingContext(this.refreshStage)),this.ctx=d,this.clipDepth=o,renderDisplayObject(a,n.ctx,c),a._isContainer&&(this.ctx=n.ctx,b(a,this,c),this.ctx=d),c.parentCtxs.pop(),this.clipEnd(l)}else renderDisplayObject(a,d,c),a._isContainer&&b(a,this,c);d.restore(),g&&d.fill(),c.isClippingMask=e,c.colorTransform=f},clipStart:function(a){var b=a._parent._getConcatenatedTransform(null,!0),c=b.tx/20,d=b.ty/20,e=CanvasCache.getCanvas(this.ctx.canvas);e.ctx.setTransform(b.a,b.b,b.c,b.d,c,d);var f=CanvasCache.getCanvas(this.ctx.canvas);f.ctx.setTransform(b.a,b.b,b.c,b.d,c,d);var g={ctx:this.ctx,mask:e,maskee:f,clipDepth:a._clipDepth};return g},clipEnd:function(a){var b=a.ctx,c=a.mask,d=a.maskee;d.ctx.globalCompositeOperation="destination-in",d.ctx.setTransform(1,0,0,1,0,0),d.ctx.drawImage(c.canvas,0,0),b.save(),b.setTransform(1,0,0,1,0,0),b.drawImage(d.canvas,0,0),b.restore(),CanvasCache.releaseCanvas(c),CanvasCache.releaseCanvas(d)}},RenderingColorTransform.prototype={applyCXForm:function(a){var b=this.transform;b=[b[0]*a.redMultiplier/256,b[1]*a.greenMultiplier/256,b[2]*a.blueMultiplier/256,b[3]*a.alphaMultiplier/256,b[4]*a.redMultiplier/256+a.redOffset,b[5]*a.greenMultiplier/256+a.greenOffset,b[6]*a.blueMultiplier/256+a.blueOffset,b[7]*a.alphaMultiplier/256+a.alphaOffset];var c,d=1e-4;c=Math.abs(b[0]-1)<d&&Math.abs(b[1]-1)<d&&Math.abs(b[2]-1)<d&&b[3]>=0&&Math.abs(b[4])<d&&Math.abs(b[5])<d&&Math.abs(b[6])<d&&Math.abs(b[7])<d?Math.abs(b[3]-1)<d?null:"simple":"complex";var e=Object.create(RenderingColorTransform.prototype);return e.mode=c,e.transform=b,e},setFillStyle:function(a,b){"complex"===this.mode?b="function"==typeof b?b(a,this):this.convertColor(b):"number"==typeof b?b=this.convertNumericColor(b):"function"==typeof b&&(b=b.defaultFillStyle),a.fillStyle=b
},setStrokeStyle:function(a,b){"complex"===this.mode?b="function"==typeof b?b(a,this):this.convertColor(b):"number"==typeof b?b=this.convertNumericColor(b):"function"==typeof b&&(b=b.defaultFillStyle),a.strokeStyle=b},addGradientColorStop:function(a,b,c){"complex"===this.mode?c=this.convertColor(c):"number"==typeof c&&(c=this.convertNumericColor(c)),a.addColorStop(b,c)},setAlpha:function(a,b){if("simple"===this.mode||b){var c=this.transform;a.globalAlpha=Math.min(1,Math.max(0,a.globalAlpha*c[3]))}},convertNumericColor:function(a){return"#"+(16777216|a).toString(16).substr(1)},convertColor:function(a){var b,c=this.transform;switch(typeof a){case"string":if("#"===a[0]&&(b=[void 0,parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16),1]),b=b||/rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)/.exec(a),!b)return a;break;case"number":b=[a,a>>16&255,a>>8&255,255&a,1];break;default:return a}var d=0|Math.min(255,Math.max(0,b[1]*c[0]+c[4])),e=0|Math.min(255,Math.max(0,b[2]*c[1]+c[5])),f=0|Math.min(255,Math.max(0,b[3]*c[2]+c[6])),g=Math.min(1,Math.max(0,b[4]*c[3]+c[7]/256));return"rgba("+d+","+e+","+f+","+g+")"},getTransformFingerprint:function(){return this.transform.join("|")}};var renderingTerminated=!1,samplesLeftPlusOne=0,timeline,hudTimeline,FrameScheduler=function(){function a(){this._drawStats=[],this._drawStatsSum=0,this._drawStarted=0,this._drawsSkipped=0,this._expectedNextFrameAt=performance.now(),this._onTime=!0,this._trackDelta=!1,this._delta=0,this._onTimeDelta=0}var b=50,c=2,d=4,e=.9;return a.prototype={get shallSkipDraw(){if(this._drawsSkipped>=c)return!1;var a=this._drawStats.length<b?0:this._drawStatsSum/this._drawStats.length,e=performance.now()+a;return e+d>this._expectedNextFrameAt},get nextFrameIn(){return Math.max(0,this._expectedNextFrameAt-performance.now())},get isOnTime(){return this._onTime},startFrame:function(a){var b=1e3/a,c=b,d=this._onTimeDelta+this._delta;0!==d&&(0>d?c*=e:d>0&&(c/=e),this._onTimeDelta+=b-c),this._expectedNextFrameAt+=c,this._onTime=!0},endFrame:function(){var a=performance.now()+d;a>this._expectedNextFrameAt&&(this._trackDelta&&(this._onTimeDelta+=this._expectedNextFrameAt-a),this._expectedNextFrameAt=a,this._onTime=!1)},startDraw:function(){this._drawsSkipped=0,this._drawStarted=performance.now()},endDraw:function(){var a=performance.now()-this._drawStarted;for(this._drawStats.push(a),this._drawStatsSum+=a;this._drawStats.length>b;)this._drawStatsSum-=this._drawStats.shift()},skipDraw:function(){this._drawsSkipped++},setDelta:function(a){this._trackDelta&&(this._delta=a)},startTrackDelta:function(){this._trackDelta=!0},endTrackDelta:function(){this._trackDelta&&(this._trackDelta=!1,this._delta=0,this._onTimeDelta=0)}},a}(),tagHandler=function(){function a(a,b,c,d,e){c||(c={}),c.id=readUi16(a,b);var f=c.bbox={};z(a,b,f,d,e);var g=c.isMorph=46===e||84===e;if(g){var h=c.bboxMorph={};z(a,b,h,d,e)}var i=c.hasStrokes=83===e||84===e;if(i){var j=c.strokeBbox={};if(z(a,b,j,d,e),g){var k=c.strokeBboxMorph={};z(a,b,k,d,e)}{readUb(a,b,5)}c.fillWinding=readUb(a,b,1),c.nonScalingStrokes=readUb(a,b,1),c.scalingStrokes=readUb(a,b,1)}return g?(c.offsetMorph=readUi32(a,b),J(a,b,c,d,e,g,i)):K(a,b,c,d,e,g,i),c}function b(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(c||(c={}),e>4){if(f=e>26?readUi16(a,b):readUi8(a,b),g=c.hasEvents=f>>7&1,h=c.clip=f>>6&1,i=c.hasName=f>>5&1,j=c.hasRatio=f>>4&1,k=c.hasCxform=f>>3&1,l=c.hasMatrix=f>>2&1,m=c.place=f>>1&1,n=c.move=1&f,70===e?(o=c.hasBackgroundColor=f>>15&1,p=c.hasVisibility=f>>14&1,q=c.hasImage=f>>12&1,r=c.hasClassName=f>>11&1,s=c.cache=f>>10&1,t=c.blend=f>>9&1,u=c.hasFilters=f>>8&1):(s=c.cache=0,t=c.blend=0,u=c.hasFilters=0),c.depth=readUi16(a,b),r&&(c.className=readString(a,b,0)),m&&(c.symbolId=readUi16(a,b)),l){var w=c.matrix={};E(a,b,w,d,e)}if(k){var x=c.cxform={};F(a,b,x,d,e)}if(j&&(c.ratio=readUi16(a,b)),i&&(c.name=readString(a,b,0)),h&&(c.clipDepth=readUi16(a,b)),u)for(var y=readUi8(a,b),z=c.filters=[],A=y;A--;){var B={};Z(a,b,B,d,e),z.push(B)}if(t&&(c.blendMode=readUi8(a,b)),s&&(c.bmpCache=readUi8(a,b)),g){{readUi16(a,b)}if(d>=6){readUi32(a,b)}else{readUi16(a,b)}var D=c.events=[];do{var G={},H=$(a,b,G,d,e);v=H.eoe,D.push(G)}while(!v)}if(o){var I=c.backgroundColor={};C(a,b,I,d,e)}p&&(c.visibility=readUi8(a,b))}else{c.place=1,c.symbolId=readUi16(a,b),c.depth=readUi16(a,b),c.hasMatrix=1;var J=c.matrix={};if(E(a,b,J,d,e),b.remaining()){c.hasCxform=1;var K=c.cxform={};F(a,b,K,d,e)}}return c}function c(a,b,c,d,e){return c||(c={}),5===e&&(c.symbolId=readUi16(a,b)),c.depth=readUi16(a,b),c}function d(a,b,c,d,e){var f;if(c||(c={}),c.id=readUi16(a,b),e>21){var g=readUi32(a,b);90===e&&(c.deblock=readFixed8(a,b)),f=c.imgData=readBinary(a,b,g),c.alphaData=readBinary(a,b,0)}else f=c.imgData=readBinary(a,b,0);switch(f[0]<<8|f[1]){case 65496:case 65497:c.mimeType="image/jpeg";break;case 35152:c.mimeType="image/png";break;case 18249:c.mimeType="image/gif";break;default:c.mimeType="application/octet-stream"}return 6===e&&(c.incomplete=1),c}function e(a,b,c,d,e){var f,g,h,i;if(c||(c={}),c.id=readUi16(a,b),7==e){var j=c.characters=[];do{var k={},l=fb(a,b,k,d,e);f=l.eob,j.push(k)}while(!f);c.actionsData=readBinary(a,b,0)}else{var m=readUi8(a,b);c.trackAsMenu=m>>7&1;var n=readUi16(a,b),o=c.characters=[];do{var p={},q=readUi8(a,b),f=p.eob=!q;if(d>=8?(i=p.blend=q>>5&1,g=p.hasFilters=q>>4&1):(i=p.blend=0,g=p.hasFilters=0),p.stateHitTest=q>>3&1,p.stateDown=q>>2&1,p.stateOver=q>>1&1,p.stateUp=1&q,!f){p.symbolId=readUi16(a,b),p.depth=readUi16(a,b);var r=p.matrix={};if(E(a,b,r,d,e),34===e){var s=p.cxform={};F(a,b,s,d,e)}if(g)for(var h=readUi8(a,b),t=c.filters=[],u=h;u--;){var v={};Z(a,b,v,d,e),t.push(v)}i&&(p.blendMode=readUi8(a,b))}o.push(p)}while(!f);if(n){var w=c.buttonActions=[];do{var x={};gb(a,b,x,d,e),w.push(x)}while(b.remaining()>0)}}return c}function f(a,b,c){return c||(c={}),c.id=0,c.imgData=readBinary(a,b,0),c.mimeType="application/octet-stream",c}function g(a,b,c,d,e){c||(c={});var f=c.color={};return A(a,b,f,d,e),c}function h(a,b,c){c||(c={}),c.id=readUi16(a,b);readUi32(a,b);return c.data=readBinary(a,b,0),c}function i(a,b,c,d,e){c||(c={}),c.id=readUi16(a,b);for(var f=readUi16(a,b),g=c.glyphCount=f/2,h=[],i=g-1;i--;)h.push(readUi16(a,b));c.offsets=[f].concat(h);for(var j=c.glyphs=[],k=g;k--;){var l={};hb(a,b,l,d,e),j.push(l)}return c}function j(a,b,c,d,e){var f;c||(c={}),c.id=readUi16(a,b);var g=c.bbox={};z(a,b,g,d,e);var h=c.matrix={};E(a,b,h,d,e);var i=c.glyphBits=readUi8(a,b),j=c.advanceBits=readUi8(a,b),k=c.records=[];do{var l={},m=cb(a,b,l,d,e,i,j);f=m.eot,k.push(l)}while(!f);return c}function k(a,b,c,d,e){return c||(c={}),59===e&&(c.spriteId=readUi16(a,b)),c.actionsData=readBinary(a,b,0),c}function l(a,b,c){c||(c={}),c.id=readUi16(a,b);var d=readUi8(a,b);return c.soundFormat=d>>4&15,c.soundRate=d>>2&3,c.soundSize=d>>1&1,c.soundType=1&d,c.samplesCount=readUi32(a,b),c.soundData=readBinary(a,b,0),c}function m(a,b,c,d,e){c||(c={}),15==e&&(c.soundId=readUi16(a,b)),89==e&&(c.soundClassName=readString(a,b,0));var f=c.soundInfo={};return eb(a,b,f,d,e),c}function n(a,b,c){c||(c={});var d=readUi8(a,b);c.playbackRate=d>>2&3,c.playbackSize=d>>1&1,c.playbackType=1&d;var e=readUi8(a,b),f=c.streamCompression=e>>4&15;return c.streamRate=e>>2&3,c.streamSize=e>>1&1,c.streamType=1&e,c.samplesCount=readUi32(a,b),2==f&&(c.latencySeek=readSi16(a,b)),c}function o(a,b,c){return c||(c={}),c.data=readBinary(a,b,0),c}function p(a,b,c,d,e){c||(c={}),c.id=readUi16(a,b);var f=c.format=readUi8(a,b);return c.width=readUi16(a,b),c.height=readUi16(a,b),c.hasAlpha=36===e,3===f&&(c.colorTableSize=readUi8(a,b)),c.bmpData=readBinary(a,b,0),c}function q(a,b,c,d,e){c||(c={}),c.id=readUi16(a,b);var f=c.bbox={};z(a,b,f,d,e);var g=readUi16(a,b),h=c.hasText=g>>7&1;c.wordWrap=g>>6&1,c.multiline=g>>5&1,c.password=g>>4&1,c.readonly=g>>3&1;var i=c.hasColor=g>>2&1,j=c.hasMaxLength=g>>1&1,k=c.hasFont=1&g,l=c.hasFontClass=g>>15&1;c.autoSize=g>>14&1;var m=c.hasLayout=g>>13&1;if(c.noSelect=g>>12&1,c.border=g>>11&1,c.wasStatic=g>>10&1,c.html=g>>9&1,c.useOutlines=g>>8&1,k&&(c.fontId=readUi16(a,b)),l&&(c.fontClass=readString(a,b,0)),k&&(c.fontHeight=readUi16(a,b)),i){var n=c.color={};B(a,b,n,d,e)}return j&&(c.maxLength=readUi16(a,b)),m&&(c.align=readUi8(a,b),c.leftMargin=readUi16(a,b),c.rightMargin=readUi16(a,b),c.indent=readSi16(a,b),c.leading=readSi16(a,b)),c.variableName=readString(a,b,0),h&&(c.initialText=readString(a,b,0)),c}function r(a,b,c){return c||(c={}),c.name=readString(a,b,0),c}function s(a,b,c,d,e){c||(c={}),c.id=readUi16(a,b);var f=c.hasLayout=readUb(a,b,1);if(d>5)c.shiftJis=readUb(a,b,1);else{readUb(a,b,1)}c.smallText=readUb(a,b,1),c.ansi=readUb(a,b,1);var g=c.wideOffset=readUb(a,b,1),h=c.wide=readUb(a,b,1);if(c.italic=readUb(a,b,1),c.bold=readUb(a,b,1),d>5)c.language=readUi8(a,b);else{{readUi8(a,b)}c.language=0}var i=readUi8(a,b);c.name=readString(a,b,i),75===e&&(c.resolution=20);var j=c.glyphCount=readUi16(a,b);if(g){for(var k=c.offsets=[],l=j;l--;)k.push(readUi32(a,b));c.mapOffset=readUi32(a,b)}else{for(var m=c.offsets=[],n=j;n--;)m.push(readUi16(a,b));c.mapOffset=readUi16(a,b)}for(var o=c.glyphs=[],p=j;p--;){var q={};hb(a,b,q,d,e),o.push(q)}if(h)for(var r=c.codes=[],s=j;s--;)r.push(readUi16(a,b));else for(var t=c.codes=[],u=j;u--;)t.push(readUi8(a,b));if(f){c.ascent=readUi16(a,b),c.descent=readUi16(a,b),c.leading=readSi16(a,b);for(var v=c.advance=[],w=j;w--;)v.push(readSi16(a,b));for(var x=c.bbox=[],y=j;y--;){var A={};z(a,b,A,d,e),x.push(A)}for(var B=readUi16(a,b),C=c.kerning=[],D=B;D--;){var E={};_(a,b,E,d,e,h),C.push(E)}}return c}function t(a,b,c){c||(c={});readUb(a,b,1);c.useDirectBlit=readUb(a,b,1),c.useGpu=readUb(a,b,1),c.hasMetadata=readUb(a,b,1),c.doAbc=readUb(a,b,1),c.noCrossDomainCaching=readUb(a,b,1),c.relativeUrls=readUb(a,b,1),c.network=readUb(a,b,1);readUb(a,b,24);return c}function u(a,b,c,d,e){return c||(c={}),c.flags=82===e?readUi32(a,b):0,c.name=82===e?readString(a,b,0):"",c.data=readBinary(a,b,0),c}function v(a,b,c){c||(c={});for(var d=readUi16(a,b),e=c.exports=[],f=d;f--;){var g={};g.symbolId=readUi16(a,b),g.className=readString(a,b,0),e.push(g)}return c}function w(a,b,c){c||(c={});for(var d=readUi16(a,b),e=c.exports=[],f=d;f--;){var g={};g.symbolId=readUi16(a,b),g.className=readString(a,b,0),e.push(g)}return c}function x(a,b,c,d,e){c||(c={}),c.symbolId=readUi16(a,b);var f=c.splitter={};return z(a,b,f,d,e),c}function y(a,b,c){c||(c={});for(var d=readEncodedU32(a,b),e=c.scenes=[],f=d;f--;){var g={};g.offset=readEncodedU32(a,b),g.name=readString(a,b,0),e.push(g)}for(var h=readEncodedU32(a,b),i=c.labels=[],j=h;j--;){var k={};k.frame=readEncodedU32(a,b),k.name=readString(a,b,0),i.push(k)}return c}function z(a,b,c){align(a,b);var d=readUb(a,b,5),e=readSb(a,b,d),f=readSb(a,b,d),g=readSb(a,b,d),h=readSb(a,b,d);c.xMin=e,c.xMax=f,c.yMin=g,c.yMax=h,align(a,b)}function A(a,b,c){c.red=readUi8(a,b),c.green=readUi8(a,b),c.blue=readUi8(a,b),c.alpha=255}function B(a,b,c){c.red=readUi8(a,b),c.green=readUi8(a,b),c.blue=readUi8(a,b),c.alpha=readUi8(a,b)}function C(a,b,c){c.alpha=readUi8(a,b),c.red=readUi8(a,b),c.green=readUi8(a,b),c.blue=readUi8(a,b)}function D(a,b,c,d,e,f){if(e>22||f){var g=c.color={};B(a,b,g,d,e)}else{var h=c.color={};A(a,b,h,d,e)}if(f){var i=c.colorMorph={};B(a,b,i,d,e)}}function E(a,b,c){align(a,b);var d=readUb(a,b,1);if(d){var e=readUb(a,b,5);c.a=readFb(a,b,e),c.d=readFb(a,b,e)}else c.a=1,c.d=1;var f=readUb(a,b,1);if(f){var e=readUb(a,b,5);c.b=readFb(a,b,e),c.c=readFb(a,b,e)}else c.b=0,c.c=0;var e=readUb(a,b,5),g=readSb(a,b,e),h=readSb(a,b,e);c.tx=g,c.ty=h,align(a,b)}function F(a,b,c,d,e){align(a,b);var f=readUb(a,b,1),g=readUb(a,b,1),h=readUb(a,b,4);g?(c.redMultiplier=readSb(a,b,h),c.greenMultiplier=readSb(a,b,h),c.blueMultiplier=readSb(a,b,h),c.alphaMultiplier=e>4?readSb(a,b,h):256):(c.redMultiplier=256,c.greenMultiplier=256,c.blueMultiplier=256,c.alphaMultiplier=256),f?(c.redOffset=readSb(a,b,h),c.greenOffset=readSb(a,b,h),c.blueOffset=readSb(a,b,h),c.alphaOffset=e>4?readSb(a,b,h):0):(c.redOffset=0,c.greenOffset=0,c.blueOffset=0,c.alphaOffset=0),align(a,b)}function G(a,b,c,d,e,f,g){var h=c.matrix={};if(E(a,b,h,d,e),f){var i=c.matrixMorph={};E(a,b,i,d,e)}H(a,b,c,d,e,f,g)}function H(a,b,c,d,e,f,g){if(83===e)c.spreadMode=readUb(a,b,2),c.interpolationMode=readUb(a,b,2);else{readUb(a,b,4)}for(var h=c.count=readUb(a,b,4),i=c.records=[],j=h;j--;){var k={};I(a,b,k,d,e,f),i.push(k)}19===g&&(c.focalPoint=readFixed8(a,b),f&&(c.focalPointMorph=readFixed8(a,b)))}function I(a,b,c,d,e,f){if(c.ratio=readUi8(a,b),e>22){var g=c.color={};B(a,b,g,d,e)}else{var h=c.color={};A(a,b,h,d,e)}if(f){c.ratioMorph=readUi8(a,b);var i=c.colorMorph={};B(a,b,i,d,e)}}function J(a,b,c,d,e,f,g){var h,i,j=O(a,b,c,d,e,f,g),k=j.lineBits,l=j.fillBits,m=c.records=[];do{var n={},j=L(a,b,n,d,e,f,l,k,g,i),h=j.eos,l=(j.flags,j.type,j.fillBits),k=j.lineBits,i=j.bits;m.push(n)}while(!h);var j=R(a,b,c,d,e),l=j.fillBits,k=j.lineBits,o=c.recordsMorph=[];do{var p={},j=L(a,b,p,d,e,f,l,k,g,i);h=j.eos;var l=(j.flags,j.type,j.fillBits),k=j.lineBits;i=j.bits,o.push(p)}while(!h)}function K(a,b,c,d,e,f,g){var h,i=O(a,b,c,d,e,f,g),j=i.fillBits,k=i.lineBits,l=c.records=[];do{var m={},i=L(a,b,m,d,e,f,j,k,g,n);h=i.eos;var j=(i.flags,i.type,i.fillBits),k=i.lineBits,n=i.bits;l.push(m)}while(!h)}function L(a,b,c,d,e,f,g,h,i,j){var k=c.type=readUb(a,b,1),l=readUb(a,b,5),m=c.eos=!(k||l);if(k)var n=M(a,b,c,d,e,l,j),j=n.bits;else var n=N(a,b,c,d,e,l,f,g,h,i,j),g=n.fillBits,h=n.lineBits,j=n.bits;return{type:k,flags:l,eos:m,fillBits:g,lineBits:h,bits:j}}function M(a,b,c,d,e,f,g){var h=0,i=0,g=0,j=0,k=0;return h=c.isStraight=f>>4,i=15&f,g=i+2,h?(j=c.isGeneral=readUb(a,b,1),j?(c.deltaX=readSb(a,b,g),c.deltaY=readSb(a,b,g)):(k=c.isVertical=readUb(a,b,1),k?c.deltaY=readSb(a,b,g):c.deltaX=readSb(a,b,g))):(c.controlDeltaX=readSb(a,b,g),c.controlDeltaY=readSb(a,b,g),c.anchorDeltaX=readSb(a,b,g),c.anchorDeltaY=readSb(a,b,g)),{bits:g}}function N(a,b,c,d,e,f,g,h,i,j,k){var l=0,m=0,n=0,o=0,p=0;if(l=c.hasNewStyles=e>2?f>>4:0,m=c.hasLineStyle=f>>3&1,n=c.hasFillStyle1=f>>2&1,o=c.hasFillStyle0=f>>1&1,p=c.move=1&f,p&&(k=readUb(a,b,5),c.moveX=readSb(a,b,k),c.moveY=readSb(a,b,k)),o&&(c.fillStyle0=readUb(a,b,h)),n&&(c.fillStyle1=readUb(a,b,h)),m&&(c.lineStyle=readUb(a,b,i)),l)var q=O(a,b,c,d,e,g,j),i=q.lineBits,h=q.fillBits;return{lineBits:i,fillBits:h,bits:k}}function O(a,b,c,d,e,f,g){P(a,b,c,d,e,f),Q(a,b,c,d,e,f,g);var h=R(a,b,c,d,e),i=h.fillBits,j=h.lineBits;return{fillBits:i,lineBits:j}}function P(a,b,c,d,e,f){var g,h=readUi8(a,b);g=e>2&&255===h?readUi16(a,b):h;for(var i=c.fillStyles=[],j=g;j--;){var k={};S(a,b,k,d,e,f),i.push(k)}}function Q(a,b,c,d,e,f,g){var h,i=readUi8(a,b);h=e>2&&255===i?readUi16(a,b):i;for(var j=c.lineStyles=[],k=h;k--;){var l={};T(a,b,l,d,e,f,g),j.push(l)}}function R(a,b){align(a,b);var c=readUb(a,b,4),d=readUb(a,b,4);return{fillBits:c,lineBits:d}}function S(a,b,c,d,e,f){var g=c.type=readUi8(a,b);switch(g){case 0:D(a,b,c,d,e,f);break;case 16:case 18:case 19:G(a,b,c,d,e,f,g);break;case 64:case 65:case 66:case 67:U(a,b,c,d,e,f,g)}}function T(a,b,c,d,e,f,g){if(c.width=readUi16(a,b),f&&(c.widthMorph=readUi16(a,b)),g){align(a,b),c.startCapStyle=readUb(a,b,2);var h=c.joinStyle=readUb(a,b,2),i=c.hasFill=readUb(a,b,1);c.noHscale=readUb(a,b,1),c.noVscale=readUb(a,b,1),c.pixelHinting=readUb(a,b,1);{readUb(a,b,5)}if(c.noClose=readUb(a,b,1),c.endCapStyle=readUb(a,b,2),2===h&&(c.miterLimitFactor=readFixed8(a,b)),i){var j=c.fillStyle={};S(a,b,j,d,e,f)}else{var k=c.color={};if(B(a,b,k,d,e),f){var l=c.colorMorph={};B(a,b,l,d,e)}}}else{if(e>22){var m=c.color={};B(a,b,m,d,e)}else{var n=c.color={};A(a,b,n,d,e)}if(f){var o=c.colorMorph={};B(a,b,o,d,e)}}}function U(a,b,c,d,e,f,g){c.bitmapId=readUi16(a,b);var h=c.matrix={};if(E(a,b,h,d,e),f){var i=c.matrixMorph={};E(a,b,i,d,e)}c.condition=64===g||67===g}function V(a,b,c,d,e,f){var g;g=4===f||7===f?readUi8(a,b):1;for(var h=c.colors=[],i=g;i--;){var j={};B(a,b,j,d,e),h.push(j)}if(3===f){var k=c.higlightColor={};B(a,b,k,d,e)}if(4===f||7===f)for(var l=c.ratios=[],m=g;m--;)l.push(readUi8(a,b));if(c.blurX=readFixed(a,b),c.blurY=readFixed(a,b),2!==f&&(c.angle=readFixed(a,b),c.distance=readFixed(a,b)),c.strength=readFixed8(a,b),c.innerShadow=readUb(a,b,1),c.knockout=readUb(a,b,1),c.compositeSource=readUb(a,b,1),3===f)c.onTop=readUb(a,b,1);else{readUb(a,b,1)}if(4===f||7===f)c.passes=readUb(a,b,4);else{readUb(a,b,4)}}function W(a,b,c){c.blurX=readFixed(a,b),c.blurY=readFixed(a,b),c.passes=readUb(a,b,5);readUb(a,b,3)}function X(a,b,c,d,e){var f=c.columns=readUi8(a,b),g=c.rows=readUi8(a,b);c.divisor=readFloat(a,b),c.bias=readFloat(a,b);for(var h=c.weights=[],i=f*g;i--;)h.push(readFloat(a,b));var j=c.defaultColor={};B(a,b,j,d,e);readUb(a,b,6);c.clamp=readUb(a,b,1),c.preserveAlpha=readUb(a,b,1)}function Y(a,b,c){for(var d=c.matrix=[],e=20;e--;)d.push(readFloat(a,b))}function Z(a,b,c,d,e){var f=c.type=readUi8(a,b);switch(f){case 0:case 2:case 3:case 4:case 7:V(a,b,c,d,e,f);break;case 1:W(a,b,c,d,e);break;case 5:X(a,b,c,d,e);break;case 6:Y(a,b,c,d,e)}}function $(a,b,c,d){var e,f;e=d>=6?readUi32(a,b):readUi16(a,b);var g=c.eoe=!e;if(c.onKeyUp=e>>7&1,c.onKeyDown=e>>6&1,c.onMouseUp=e>>5&1,c.onMouseDown=e>>4&1,c.onMouseMove=e>>3&1,c.onUnload=e>>2&1,c.onEnterFrame=e>>1&1,c.onLoad=1&e,d>=6&&(c.onDragOver=e>>15&1,c.onRollOut=e>>14&1,c.onRollOver=e>>13&1,c.onReleaseOutside=e>>12&1,c.onRelease=e>>11&1,c.onPress=e>>10&1,c.onInitialize=e>>9&1,c.onData=e>>8&1,c.onConstruct=d>=7?e>>18&1:0,f=c.keyPress=e>>17&1,c.onDragOut=e>>16&1),!g){var h=c.length=readUi32(a,b);f&&(c.keyCode=readUi8(a,b)),c.actionsData=readBinary(a,b,h-(f?1:0))}return{eoe:g}}function _(a,b,c,d,e,f){f?(c.code1=readUi16(a,b),c.code2=readUi16(a,b)):(c.code1=readUi8(a,b),c.code2=readUi8(a,b)),c.adjustment=readUi16(a,b)}function ab(a,b,c,d,e,f,g){c.glyphIndex=readUb(a,b,f),c.advance=readSb(a,b,g)}function bb(a,b,c,d,e,f){var g=c.hasFont=f>>3&1,h=c.hasColor=f>>2&1,i=c.hasMoveY=f>>1&1,j=c.hasMoveX=1&f;if(g&&(c.fontId=readUi16(a,b)),h)if(33===e){var k=c.color={};B(a,b,k,d,e)}else{var l=c.color={};A(a,b,l,d,e)}j&&(c.moveX=readSi16(a,b)),i&&(c.moveY=readSi16(a,b)),g&&(c.fontHeight=readUi16(a,b))}function cb(a,b,c,d,e,f,g){var h;align(a,b);var i=readUb(a,b,8),j=c.eot=!i;if(bb(a,b,c,d,e,i),!j){var k=readUi8(a,b);h=c.glyphCount=d>6?k:127&k;for(var l=c.entries=[],m=h;m--;){var n={};ab(a,b,n,d,e,f,g),l.push(n)}}return{eot:j}}function db(a,b,c){c.pos44=readUi32(a,b),c.volumeLeft=readUi16(a,b),c.volumeRight=readUi16(a,b)}function eb(a,b,c,d,e){readUb(a,b,2);c.stop=readUb(a,b,1),c.noMultiple=readUb(a,b,1);var f=c.hasEnvelope=readUb(a,b,1),g=c.hasLoops=readUb(a,b,1),h=c.hasOutPoint=readUb(a,b,1),i=c.hasInPoint=readUb(a,b,1);if(i&&(c.inPoint=readUi32(a,b)),h&&(c.outPoint=readUi32(a,b)),g&&(c.loopCount=readUi16(a,b)),f)for(var j=c.envelopeCount=readUi8(a,b),k=c.envelopes=[],l=j;l--;){var m={};db(a,b,m,d,e),k.push(m)}}function fb(a,b,c,d,e){var f,g,h=readUi8(a,b),i=c.eob=!h;if(d>=8?(g=c.blend=h>>5&1,f=c.hasFilters=h>>4&1):(g=c.blend=0,f=c.hasFilters=0),c.stateHitTest=h>>3&1,c.stateDown=h>>2&1,c.stateOver=h>>1&1,c.stateUp=1&h,!i){c.symbolId=readUi16(a,b),c.depth=readUi16(a,b);var j=c.matrix={};if(E(a,b,j,d,e),34===e){var k=c.cxform={};F(a,b,k,d,e)}if(f){c.filterCount=readUi8(a,b);var l=c.filters={};Z(a,b,l,d,e)}g&&(c.blendMode=readUi8(a,b))}return{eob:i}}function gb(a,b,c){var d=readUi16(a,b),e=readUi16(a,b);c.idleToOverDown=e>>7&1,c.outDownToIdle=e>>6&1,c.outDownToOverDown=e>>5&1,c.overDownToOutDown=e>>4&1,c.overDownToOverUp=e>>3&1,c.overUpToOverDown=e>>2&1,c.overUpToIdle=e>>1&1,c.idleToOverUp=1&e,c.mouseEventFlags=511&e,c.keyPress=e>>9&127,c.overDownToIdle=e>>8&1,c.actionsData=d?readBinary(a,b,d-4):readBinary(a,b,0)}function hb(a,b,c,d,e){var f,g=R(a,b,c,d,e),h=g.fillBits,i=g.lineBits,j=c.records=[];do{var k={},l=!1,m=!1,g=L(a,b,k,d,e,l,h,i,m,n);f=g.eos;var h=g.fillBits,i=g.lineBits,n=n;j.push(k)}while(!f)}return{0:void 0,1:void 0,2:a,4:b,5:c,6:d,7:e,8:f,9:g,10:i,11:j,12:k,13:void 0,14:l,15:m,17:void 0,18:n,19:o,20:p,21:d,22:a,23:void 0,24:void 0,26:b,28:c,32:a,33:j,34:e,35:d,36:p,37:q,39:void 0,43:r,45:n,46:a,48:s,56:v,57:void 0,58:void 0,59:k,60:void 0,61:void 0,62:void 0,64:void 0,65:void 0,66:void 0,69:t,70:b,71:void 0,72:u,73:void 0,74:void 0,75:s,76:w,77:void 0,78:x,82:u,83:a,84:a,86:y,87:h,88:void 0,89:m,90:d,91:void 0}}(this),readHeader=function(a,b,c){c||(c={});var d=c.bbox={};align(a,b);var e=readUb(a,b,5),f=readSb(a,b,e),g=readSb(a,b,e),h=readSb(a,b,e),i=readSb(a,b,e);d.xMin=f,d.xMax=g,d.yMin=h,d.yMax=i,align(a,b);var j=readUi8(a,b);return c.frameRate=readUi8(a,b)+j/256,c.frameCount=readUi16(a,b),c};HeadTailBuffer.prototype={push:function(a,b){var c=this.pos+a.length;if(this.bufferSize<c){for(var d=this.bufferSize;c>d;)d<<=1;var e=new Uint8Array(d);this.bufferSize>0&&e.set(this.buffer),this.buffer=e,this.bufferSize=d}return this.buffer.set(a,this.pos),this.pos+=a.length,b?this.pos>=b:void 0},getHead:function(a){return this.buffer.subarray(0,a)},getTail:function(a){return this.buffer.subarray(a,this.pos)},removeHead:function(a){var b=this.getTail(a);this.buffer=new Uint8Array(this.bufferSize),this.buffer.set(b),this.pos=b.length},get arrayBuffer(){return this.buffer.buffer},get length(){return this.pos},createStream:function(){return new Stream(this.arrayBuffer,0,this.length)}},CompressedPipe.prototype={push:function(a,b){var c=this.buffer;if(this.initialize){if(!c.push(a,2))return;var d=c.getHead(2);verifyDeflateHeader(d),c.removeHead(2),this.initialize=!1}else c.push(a);var e=c.createStream();e.bitBuffer=this.state.bitBuffer,e.bitLength=this.state.bitLength;var f=this.output,g=f.available;try{do inflateBlock(e,f,this.state.compression);while(e.pos<c.length&&!f.completed)}catch(h){if(h!==InflateNoDataError)throw h}finally{this.state.bitBuffer=e.bitBuffer,this.state.bitLength=e.bitLength}c.removeHead(e.pos),this.target.push(f.data.subarray(g,f.available),b)}},BodyParser.prototype={push:function(a,b){if(0!==a.length){var c,d=this.swf,e=d.swfVersion,f=this.buffer,g=this.options;if(this.initialize){var h=27;if(!f.push(a,h))return;c=f.createStream();var i=c.bytes;readHeader(i,c,d);var j=readUi16(i,c),k=4;if(j==(SWF_TAG_CODE_FILE_ATTRIBUTES<<6|k)){c.ensure(k);var l=c.substream(c.pos,c.pos+=k),m=tagHandler[SWF_TAG_CODE_FILE_ATTRIBUTES],n={code:SWF_TAG_CODE_FILE_ATTRIBUTES};m(l.bytes,l,n,e,SWF_TAG_CODE_FILE_ATTRIBUTES),d.fileAttributes=n}else c.pos-=2,d.fileAttributes={};g.onstart&&g.onstart(d),d.tags=[],this.initialize=!1}else f.push(a),c=f.createStream();var o=!1;b&&(d.bytesLoaded=b.bytesLoaded,d.bytesTotal=b.bytesTotal,o=b.bytesLoaded>=b.bytesTotal);var p=performance.now();readTags(d,c,e,o,g.onprogress,g.onexception),d.parseTime+=performance.now()-p;var q=c.pos;f.removeHead(q),this.totalRead+=q,g.oncomplete&&d.tags[d.tags.length-1].finalTag&&g.oncomplete(d)}}},SWF.parseAsync=function(a){function b(b,c,f){var g=d.createStream();g.pos+=4;var h=readUi32(null,g),i=h-8,j=new BodyParser(c,i,a);b&&(j=new CompressedPipe(j,i)),j.push(d.getTail(8),f),e.target=j}function c(b,c,d){var f=new Uint8Array(c);f.set(b);var g=b.length;e.target={push:function(a){f.set(a,g),g+=a.length},close:function(){var b,c={};b="image/jpeg"==d?parseJpegChunks(c,f):[f];var e={type:"image",props:c,data:new Blob(b,{type:d})};a.oncomplete&&a.oncomplete(e)}}}var d=new HeadTailBuffer,e={push:function(a,e){if(void 0!==this.target)return this.target.push(a,e);if(!d.push(a,8))return null;var f=d.getHead(8),g=f[0],h=f[1],i=f[2];if((70===g||67===g)&&87===h&&83===i){var j=f[3],k=67===g;return b(k,j,e),void(d=null)}var l,m=!1;255===g&&216===h&&255===i?(m=!0,l="image/jpeg"):137===g&&80===h&&78===i&&(m=!0,l="image/png"),m&&c(a,e.bytesTotal,l),d=null},close:function(){if(d){var b={command:"empty",data:d.buffer.subarray(0,d.pos)};a.oncomplete&&a.oncomplete(b)}void 0!==this.target&&this.target.close&&this.target.close()}};return e},SWF.parse=function(a,b){b||(b={});var c=SWF.parseAsync(b),d=new Uint8Array(a),e={bytesLoaded:d.length,bytesTotal:d.length};c.push(d,e),c.close()};var $RELEASE=!1,isWorker="undefined"==typeof window;if(ResourceLoader.prototype={terminate:function(){this.messenger=null,this.listener=null},onmessage:function(a){this.listener(a.data)},postMessage:function(a){this.listener&&this.listener(a)},listener:function(a){this.subscription?this.subscription.callback(a.data,a.progress):"pipe:"===a?(this.subscription={subscribe:function(a){this.callback=a}},this.parseLoadedData(this.messenger,this.subscription)):this.parseLoadedData(this.messenger,a)},parseLoadedData:function(a,b){function c(b,c){try{a.postMessage(b,c)}catch(d){if("DataCloneError"!=d)throw d;a.postMessage(b)}}if(b instanceof ArrayBuffer)parseBytes(b,c);else if("subscribe"in b){var d=SWF.parseAsync(createParsingContext(c));b.subscribe(function(a,b){a?d.push(a,b):d.close()})}else if("undefined"!=typeof FileReaderSync){var e=new FileReaderSync,f=e.readAsArrayBuffer(b);parseBytes(f,c)}else{var e=new FileReader;e.onload=function(){parseBytes(this.result,c)},e.readAsArrayBuffer(b)}}},isWorker)var loader=new ResourceLoader(this);ActionsDataStream.prototype={readUI8:function(){return this.array[this.position++]},readUI16:function(){var a=this.position,b=this.array,c=b[a+1]<<8|b[a];return this.position=a+2,c},readSI16:function(){var a=this.position,b=this.array,c=b[a+1]<<8|b[a];return this.position=a+2,32768>c?c:c-65536},readInteger:function(){var a=this.position,b=this.array,c=b[a]|b[a+1]<<8|b[a+2]<<16|b[a+3]<<24;return this.position=a+4,c},readFloat:function(){var a=this.position,b=this.array,c=new ArrayBuffer(4),d=new Uint8Array(c);return d[0]=b[a],d[1]=b[a+1],d[2]=b[a+2],d[3]=b[a+3],this.position=a+4,new Float32Array(c)[0]},readDouble:function(){var a=this.position,b=this.array,c=new ArrayBuffer(8),d=new Uint8Array(c);return d[4]=b[a],d[5]=b[a+1],d[6]=b[a+2],d[7]=b[a+3],d[0]=b[a+4],d[1]=b[a+5],d[2]=b[a+6],d[3]=b[a+7],this.position=a+8,new Float64Array(c)[0]},readBoolean:function(){return!!this.readUI8()},readANSIString:function(){for(var a,b="";a=this.readUI8();)b+=String.fromCharCode(a);return b},readUTF8String:function(){for(var a,b="";a=this.readUI8();)if(128>a)b+=String.fromCharCode(a);else{if(128===(192&a))throw new Error("Invalid UTF8 encoding");var c=192,d=5;do{var e=c>>1|128;if((a&e)===c)break;c=e,--d}while(d>=0);for(var f=a&(1<<d)-1,g=5;g>=d;--g){if(a=this.readUI8(),128!==(192&a))throw new Error("Invalid UTF8 encoding");f=f<<6|63&a}b+=f>=65536?String.fromCharCode(f-65536>>10&1023|55296,1023&f|56320):String.fromCharCode(f)}return b},readBytes:function(a){var b=this.position,c=Math.max(this.end-b,0);a>c&&(a=c);var d=this.array.subarray(b,b+a);return this.position=b+a,d}},"undefined"!=typeof GLOBAL&&(GLOBAL.ActionsDataStream=ActionsDataStream);var AVM1_TRACE_ENABLED=!1,AVM1_ERRORS_IGNORED=!0,MAX_AVM1_HANG_TIMEOUT=1e3,MAX_AVM1_ERRORS_LIMIT=1e3,MAX_AVM1_STACK_LIMIT=256;AS2ScopeListItem.prototype={create:function(a){return new AS2ScopeListItem(a,this)}},AS2Context.instance=null,AS2Context.prototype={addAsset:function(a,b){this.assets[a]=b},resolveTarget:function(a){if(a?"string"==typeof a&&(a=lookupAS2Children(a,this.defaultTarget,this.globals.asGetPublicProperty("_root"))):a=this.defaultTarget,"object"!=typeof a||null===a||!("$nativeObject"in a))throw new Error("Invalid AS2 target object: "+Object.prototype.toString.call(a));return a},resolveLevel:function(a){return this.resolveTarget(this.globals["_level"+a])},addToPendingScripts:function(a){return this.deferScriptExecution?void this.pendingScripts.push(a):a()},flushPendingScripts:function(){for(var a=this.pendingScripts;a.length;)a.shift()();this.deferScriptExecution=!1}},AS2CriticalError.prototype=Object.create(Error.prototype);var AS2_SUPER_STUB={},ActionTracerFactory=function(){function a(){}var b=0,c={print:function(a,c,d){for(var e=[],f=0;f<d.length;f++){var g=d[f];e.push(g&&"object"==typeof g?"["+(g.constructor&&g.constructor.name?g.constructor.name:"Object")+"]":g)}var h=new Array(b+1).join("..");console.log("AVM1 trace: "+h+a+": "+ActionNamesMap[c]+"("+c.toString(16)+"), stack="+e)},indent:function(){b++},unindent:function(){b--},message:function(a){console.log("AVM1 trace: ------- "+a)}},d={print:function(){},indent:function(){},unindent:function(){},message:function(){}};return a.get=function(){return AVM1_TRACE_ENABLED?c:d},a}(),ActionNamesMap={0:"EOA",4:"ActionNextFrame",5:"ActionPreviousFrame",6:"ActionPlay",7:"ActionStop",8:"ActionToggleQuality",9:"ActionStopSounds",10:"ActionAdd",11:"ActionSubtract",12:"ActionMultiply",13:"ActionDivide",14:"ActionEquals",15:"ActionLess",16:"ActionAnd",17:"ActionOr",18:"ActionNot",19:"ActionStringEquals",20:"ActionStringLength",21:"ActionStringExtract",23:"ActionPop",24:"ActionToInteger",28:"ActionGetVariable",29:"ActionSetVariable",32:"ActionSetTarget2",33:"ActionStringAdd",34:"ActionGetProperty",35:"ActionSetProperty",36:"ActionCloneSprite",37:"ActionRemoveSprite",38:"ActionTrace",39:"ActionStartDrag",40:"ActionEndDrag",41:"ActionStringLess",42:"ActionThrow",43:"ActionCastOp",44:"ActionImplementsOp",45:"ActionFSCommand2",48:"ActionRandomNumber",49:"ActionMBStringLength",50:"ActionCharToAscii",51:"ActionAsciiToChar",52:"ActionGetTime",53:"ActionMBStringExtrac",54:"ActionMBCharToAscii",55:"ActionMBAsciiToChar",58:"ActionDelete",59:"ActionDelete2",60:"ActionDefineLocal",61:"ActionCallFunction",62:"ActionReturn",63:"ActionModulo",64:"ActionNewObject",65:"ActionDefineLocal2",66:"ActionInitArray",67:"ActionInitObject",68:"ActionTypeOf",69:"ActionTargetPath",70:"ActionEnumerate",71:"ActionAdd2",72:"ActionLess2",73:"ActionEquals2",74:"ActionToNumber",75:"ActionToString",76:"ActionPushDuplicate",77:"ActionStackSwap",78:"ActionGetMember",79:"ActionSetMember",80:"ActionIncrement",81:"ActionDecrement",82:"ActionCallMethod",83:"ActionNewMethod",84:"ActionInstanceOf",85:"ActionEnumerate2",96:"ActionBitAnd",97:"ActionBitOr",98:"ActionBitXor",99:"ActionBitLShift",100:"ActionBitRShift",101:"ActionBitURShift",102:"ActionStrictEquals",103:"ActionGreater",104:"ActionStringGreater",105:"ActionExtends",129:"ActionGotoFrame",131:"ActionGetURL",135:"ActionStoreRegister",136:"ActionConstantPool",137:"ActionStrictMode",138:"ActionWaitForFrame",139:"ActionSetTarget",140:"ActionGoToLabel",141:"ActionWaitForFrame2",142:"ActionDefineFunction",143:"ActionTry",148:"ActionWith",150:"ActionPush",153:"ActionJump",154:"ActionGetURL2",155:"ActionDefineFunction",157:"ActionIf",158:"ActionCall",159:"ActionGotoFrame2"};"undefined"!=typeof GLOBAL&&(GLOBAL.createBuiltinType=createBuiltinType,GLOBAL.executeActions=executeActions,GLOBAL.AS2Context=AS2Context);var jsGlobal=function(){return this||(1,eval)("this")}(),inBrowser="undefined"!=typeof console,release=!0,debug=!1;jsGlobal.performance||(jsGlobal.performance={}),jsGlobal.performance.now||(jsGlobal.performance.now=dateNow);var Shumway;!function(a){function b(a){return"string"==typeof a}function c(a){return"function"==typeof a}function d(a){return"number"==typeof a}function e(a){return"number"==typeof a||"string"==typeof a}function f(a){return"object"==typeof a||"function"==typeof a}function g(a){return+a}function h(a){return String(Number(a))===a}function i(a){return"number"==typeof a?!0:"string"==typeof a?j(a)||h(a):void m.notImplemented(typeof a)}function j(b){var c=0;if("number"==typeof b)return c=0|b,b===c&&c>=0?!0:b>>>0===b;if("string"!=typeof b)return!1;var d=b.length;if(0===d)return!1;if("0"===b)return!0;if(d>a.UINT32_CHAR_BUFFER_LENGTH)return!1;var e=0;if(c=b.charCodeAt(e++)-48,1>c||c>9)return!1;for(var f=0,g=0;d>e;){if(g=b.charCodeAt(e++)-48,0>g||g>9)return!1;f=c,c=10*c+g}return f<a.UINT32_MAX_DIV_10||f===a.UINT32_MAX_DIV_10&&g<=a.UINT32_MAX_MOD_10?!0:!1}function k(a){return void 0==a}function l(){return performance.now()}!function(a){a[a._0=48]="_0",a[a._1=49]="_1",a[a._2=50]="_2",a[a._3=51]="_3",a[a._4=52]="_4",a[a._5=53]="_5",a[a._6=54]="_6",a[a._7=55]="_7",a[a._8=56]="_8",a[a._9=57]="_9"}(a.CharacterCodes||(a.CharacterCodes={}));a.CharacterCodes;a.UINT32_CHAR_BUFFER_LENGTH=10,a.UINT32_MAX=4294967295,a.UINT32_MAX_DIV_10=429496729,a.UINT32_MAX_MOD_10=5,a.isString=b,a.isFunction=c,a.isNumber=d,a.isNumberOrString=e,a.isObject=f,a.toNumber=g,a.isNumericString=h,a.isNumeric=i,a.isIndex=j,a.isNullOrUndefined=k,function(a){function b(){try{throw new Error
}catch(a){return a.stack?a.stack.split("\n").slice(2).join("\n"):""}}function c(b){throw inBrowser||warn(a.backtrace()),new Error(b)}function d(b){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];if(""===b&&(b=!0),!b){var e=Array.prototype.slice.call(arguments);e.shift(),a.error(e.join(""))}}function e(b,c){b||a.error("NotImplemented: "+c)}function f(){}function g(){}function h(){}function i(b){a.warning("somewhatImplemented: "+b)}function j(b){a.assert(!1,"Unexpected: "+b)}a.backtrace=b,a.error=c,a.assert=d,a.assertNotImplemented=e,a.warning=f,a.notUsed=g,a.notImplemented=h,a.somewhatImplemented=i,a.unexpected=j}(a.Debug||(a.Debug={}));var m=a.Debug;a.getTicks=l,function(a){function b(a,b,c){for(var d=b-1;d>=0;d--)c[d]=a.pop();c.length=b}a.popManyInto=b}(a.ArrayUtilities||(a.ArrayUtilities={}));a.ArrayUtilities;!function(b){function c(b){return a.isNullOrUndefined(b)||a.isObject(b)?b:Object(b)}function d(a){var b=Object.prototype.hasOwnProperty,c=[];for(var d in a)b.call(a,d)&&c.push([d,a[d]]);return c}function e(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function f(){return Object.create(null)}function g(){return Object.create(null)}function h(){return[]}function i(a,b,c){Object.defineProperty(a,b,{value:c,writable:!1,configurable:!0,enumerable:!1})}function j(a){for(var c=b.createMap(),d=Object.getOwnPropertyNames(a),e=0;e<d.length;e++)c[d[e]]=Object.getOwnPropertyDescriptor(a,d[e]);return c}function k(a){var c=b.createEmptyObject();for(var d in a)c[d]=a[d];return c}function l(a,b){for(var c in b)a[c]=b[c]}function m(a,b){for(var c={};a;){var d=Object.getOwnPropertyDescriptor(a,b);if(d&&(c.get=c.get||d.get,c.set=c.set||d.set),c.get&&c.set)break;a=Object.getPrototypeOf(a)}return c}function o(a,c,d,e){var f=b.getLatestGetterOrSetterPropertyDescriptor(a,c);f.configurable=!0,f.enumerable=!1,e?f.get=d:f.set=d,Object.defineProperty(a,c,f)}function p(a,b,c){Object.defineProperty(a,b,{get:c,configurable:!0,enumerable:!1})}function q(a,b,c){Object.defineProperty(a,b,{set:c,configurable:!0,enumerable:!1})}function r(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,configurable:!0,enumerable:!1})}function s(a,b,c){Object.defineProperty(a,b,{get:n.makeForwardingGetter(c),set:n.makeForwardingSetter(c),writable:!0,configurable:!0,enumerable:!1})}function t(a,c,d){b.defineNonEnumerableProperty(a,c,d)}b.boxValue=c,b.toKeyValueArray=d,b.hasOwnProperty=e,b.createEmptyObject=f,b.createMap=g,b.createArrayMap=h,b.defineReadOnlyProperty=i,b.getOwnPropertyDescriptors=j,b.cloneObject=k,b.copyProperties=l,b.getLatestGetterOrSetterPropertyDescriptor=m,b.defineNonEnumerableGetterOrSetter=o,b.defineNonEnumerableGetter=p,b.defineNonEnumerableSetter=q,b.defineNonEnumerableProperty=r,b.defineNonEnumerableForwardingProperty=s,b.defineNewNonEnumerableProperty=t}(a.ObjectUtilities||(a.ObjectUtilities={}));a.ObjectUtilities;!function(a){function b(a){return new Function('return this["'+a+'"]')}function c(a){return new Function("value",'this["'+a+'"] = value;')}function d(a,b){var c=a.bind(b);return c.boundTo=b,c}a.makeForwardingGetter=b,a.makeForwardingSetter=c,a.bindSafely=d}(a.FunctionUtilities||(a.FunctionUtilities={}));var n=a.FunctionUtilities;!function(a){function b(a){return"string"==typeof a?'"'+a+'"':"number"==typeof a||"boolean"==typeof a?String(a):typeof a}function c(a){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c.join(", ")}function d(a){for(var b=new Uint8Array(4*a.length),c=0,d=0,e=a.length;e>d;d++){var f=a.charCodeAt(d);if(127>=f)b[c++]=f;else{if(f>=55296&&56319>=f){var g=a.charCodeAt(d+1);g>=56320&&57343>=g&&(f=((1023&f)<<10)+(1023&g)+65536,++d)}0!==(4292870144&f)?(b[c++]=248|f>>>24&3,b[c++]=128|f>>>18&63,b[c++]=128|f>>>12&63,b[c++]=128|f>>>6&63,b[c++]=128|63&f):0!==(4294901760&f)?(b[c++]=240|f>>>18&7,b[c++]=128|f>>>12&63,b[c++]=128|f>>>6&63,b[c++]=128|63&f):0!==(4294965248&f)?(b[c++]=224|f>>>12&15,b[c++]=128|f>>>6&63,b[c++]=128|63&f):(b[c++]=192|f>>>6&31,b[c++]=128|63&f)}}return b.subarray(0,c)}function e(a){for(var b=0,c="";b<a.length;){var d=255&a[b++];if(127>=d)c+=String.fromCharCode(d);else{var e=192,f=5;do{var g=e>>1|128;if((d&g)===e)break;e=e>>1|128,--f}while(f>=0);if(0>=f){c+=String.fromCharCode(d);continue}for(var h=d&(1<<f)-1,i=!1,j=5;j>=f;--j){var k=a[b++];if(128!=(192&k)){i=!0;break}h=h<<6|63&k}if(i){for(var l=b-(7-j);b>l;++l)c+=String.fromCharCode(255&a[l]);continue}c+=h>=65536?String.fromCharCode(h-65536>>10&1023|55296,1023&h|56320):String.fromCharCode(h)}}return c}function f(a){for(var b,c,d,e,f,g="",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(a),j=i.byteLength,k=j%3,l=j-k,m=0;l>m;m+=3)f=i[m]<<16|i[m+1]<<8|i[m+2],b=(16515072&f)>>18,c=(258048&f)>>12,d=(4032&f)>>6,e=63&f,g+=h[b]+h[c]+h[d]+h[e];return 1==k?(f=i[l],b=(252&f)>>2,c=(3&f)<<4,g+=h[b]+h[c]+"=="):2==k&&(f=i[l]<<8|i[l+1],b=(64512&f)>>10,c=(1008&f)>>4,d=(15&f)<<2,g+=h[b]+h[c]+h[d]+"="),g}function g(a){return void 0!==a&&(a=a.replace(/[^\w$]/gi,"$"),/^\d/.test(a)&&(a="$"+a)),a}function h(a){for(var b="",c=16384,d=0;d<a.length;d+=c){var e=Math.min(a.length-d,c);b+=String.fromCharCode.apply(null,a.subarray(d,d+e))}return b}function i(a){for(var b=m,c=32-o.leadingZeros(a),d=Math.ceil(c/6),e=b[d],f=d-1;f>=0;f--){var g=6*f;e+=b[a>>g&63]}return e}function j(a){return m[a]}function k(a){var b=a.charCodeAt(0);return b>=65&&90>=b?b-65:b>=97&&122>=b?b-71:b>=48&&57>=b?b+4:36===b?62:95===b?63:void 0}function l(b){for(var c=a.fromEncoding(b[0]),d=0,e=0;c>e;e++){var f=6*(c-e-1);d|=a.fromEncoding(b[1+e])<<f}return d}a.toSafeString=b,a.toSafeArrayString=c,a.utf8decode=d,a.utf8encode=e,a.base64ArrayBuffer=f,a.escapeString=g,a.fromCharCodeArray=h;var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_";a.variableLengthEncodeInt32=i,a.toEncoding=j,a.fromEncoding=k,a.variableLengthDecodeInt32=l}(a.StringUtilities||(a.StringUtilities={}));a.StringUtilities;!function(a){function b(a,b,c){var f,g,h,i=d,j=e,k=1732584193,l=-271733879,m=-1732584194,n=271733878,o=c+72&-64,p=new Uint8Array(o);for(f=0;c>f;++f)p[f]=a[b++];for(p[f++]=128,h=o-8;h>f;)p[f++]=0;p[f++]=c<<3&255,p[f++]=c>>5&255,p[f++]=c>>13&255,p[f++]=c>>21&255,p[f++]=c>>>29&255,p[f++]=0,p[f++]=0,p[f++]=0;var q=new Int32Array(16);for(f=0;o>f;){for(g=0;16>g;++g,f+=4)q[g]=p[f]|p[f+1]<<8|p[f+2]<<16|p[f+3]<<24;var r,s,t=k,u=l,v=m,w=n;for(g=0;64>g;++g){16>g?(r=u&v|~u&w,s=g):32>g?(r=w&u|~w&v,s=5*g+1&15):48>g?(r=u^v^w,s=3*g+5&15):(r=v^(u|~w),s=7*g&15);var x=w,y=t+r+j[g]+q[s]|0,z=i[g];w=v,v=u,u=u+(y<<z|y>>>32-z)|0,t=x}k=k+t|0,l=l+u|0,m=m+v|0,n=n+w|0}return k}function c(a,b,c){for(var d=1,e=0,f=b+c,g=b;f>g;++g)d=(d+(255&a[g]))%65521,e=(e+d)%65521;return e<<16|d}var d=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),e=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);a.hashBytesTo32BitsMD5=b,a.hashBytesTo32BitsAdler=c}(a.HashUtilities||(a.HashUtilities={}));a.HashUtilities;!function(a){function b(a){return a-=a>>1&1431655765,a=(858993459&a)+(a>>2&858993459),16843009*(a+(a>>4)&252645135)>>24}function c(a){return a-=a>>1&1431655765,a=(858993459&a)+(a>>2&858993459),16843009*(a+(a>>4)&252645135)>>24}function d(b){return b|=b>>1,b|=b>>2,b|=b>>4,b|=b>>8,b|=b>>16,32-a.ones(b)}function e(b){return a.ones((b&-b)-1)}function f(a,b){for(var c="",a=0;a<b.length;a++)a&1<<a&&(c+=b[a]+" ");return 0===c.length?"":c.trim()}function g(a){return a&&0===(a&a-1)}a.bitCount=b,a.ones=c,a.leadingZeros=d,a.trailingZeros=e,a.getFlags=f,a.isPowerOfTwo=g}(a.IntegerUtilities||(a.IntegerUtilities={}));var o=a.IntegerUtilities,p=function(){function a(b,c){"undefined"==typeof b&&(b=!1),this._tab="  ",this._padding="",this._suppressOutput=b,this._out=c||a._consoleOutFn}return a.prototype.writeLn=function(a){this._suppressOutput||this._out(this._padding+a)},a.prototype.writeLns=function(a){for(var b=a.split("\n"),c=0;c<b.length;c++)this.writeLn(b[c])},a.prototype.debugLn=function(b){this.colorLn(a.PURPLE,b)},a.prototype.yellowLn=function(b){this.colorLn(a.YELLOW,b)},a.prototype.greenLn=function(b){this.colorLn(a.GREEN,b)},a.prototype.redLn=function(b){this.colorLn(a.RED,b)},a.prototype.colorLn=function(b,c){this._suppressOutput||this._out(inBrowser?this._padding+c:this._padding+b+c+a.ENDC)},a.prototype.enter=function(a){this._suppressOutput||this._out(this._padding+a),this.indent()},a.prototype.leaveAndEnter=function(a){this.leave(a),this.indent()},a.prototype.leave=function(a){this.outdent(),this._suppressOutput||this._out(this._padding+a)},a.prototype.indent=function(){this._padding+=this._tab},a.prototype.outdent=function(){this._padding.length>0&&(this._padding=this._padding.substring(0,this._padding.length-this._tab.length))},a.prototype.writeArray=function(a,b,c){"undefined"==typeof b&&(b=!1),"undefined"==typeof c&&(c=!1),b=b||!1;for(var d=0,e=a.length;e>d;d++){var f="";b&&(f=null===a[d]?"null":void 0===a[d]?"undefined":a[d].constructor.name,f+=" ");var g=c?"":(""+d).padRight(" ",4);this.writeLn(g+f+a[d])}},a.PURPLE="[94m",a.YELLOW="[93m",a.GREEN="[92m",a.RED="[91m",a.ENDC="[0m",a._consoleOutFn=print,a}();a.IndentingWriter=p;var q=function(){function a(a,b){this.value=a,this.next=b}return a}(),r=function(){function a(a){this._compare=a,this._head=null,this._length=0}return a.prototype.push=function(a){if(this._length++,!this._head)return void(this._head=new q(a,null));for(var b=this._head,c=null,d=new q(a,null),e=this._compare;b;){if(e(b.value,d.value)>0)return void(c?(d.next=b,c.next=d):(d.next=this._head,this._head=d));c=b,b=b.next}c.next=d},a.prototype.forEach=function(b){for(var c=this._head,d=null;c;){var e=b(c.value);if(e===a.RETURN)return;e===a.DELETE?c=d?d.next=c.next:this._head=this._head.next:(d=c,c=c.next)}},a.prototype.isEmpty=function(){return!this._head},a.prototype.pop=function(){if(!this._head)return void 0;this._length--;var a=this._head;return this._head=this._head.next,a.value},a.prototype.contains=function(a){for(var b=this._head;b;){if(b.value===a)return!0;b=b.next}return!1},a.prototype.toString=function(){for(var a="[",b=this._head;b;)a+=b.value.toString(),b=b.next,b&&(a+=",");return a+="]"},a.RETURN=1,a.DELETE=2,a}();a.SortedList=r;var s=4095,t=4096,u=function(){function a(a){this.index=0,this.start=0,this.array=new a(t)}return a.prototype.get=function(a){return this.array[a]},a.prototype.forEachInReverse=function(a){if(!this.isEmpty())for(var b=0===this.index?t-1:this.index-1;b!==this.start&&!a(this.array[b],b);)b=0===b?t-1:b-1},a.prototype.write=function(a){this.array[this.index]=a,this.index=this.index+1&s,this.index===this.start&&(this.start=this.start+1&s)},a.prototype.isFull=function(){return(this.index+1&s)===this.start},a.prototype.isEmpty=function(){return this.index===this.start},a}();a.CircularBuffer=u}(Shumway||(Shumway={}));var assert=Shumway.Debug.assert,IndentingWriter=Shumway.IndentingWriter,assert=Shumway.Debug.assert,$DEBUG,release=!0,c4CoerceNonPrimitiveParameters=!1,c4CoerceNonPrimitive=!1,c4AsTypeLate=!0,error=Shumway.Debug.error,assertNotImplemented=Shumway.Debug.assertNotImplemented,warning=Shumway.Debug.warning,notImplemented=Shumway.Debug.notImplemented,somewhatImplemented=Shumway.Debug.somewhatImplemented,unexpected=Shumway.Debug.unexpected,defineReadOnlyProperty=Shumway.ObjectUtilities.defineReadOnlyProperty,createEmptyObject=Shumway.ObjectUtilities.createEmptyObject,makeForwardingGetter=Shumway.FunctionUtilities.makeForwardingGetter,makeForwardingSetter=Shumway.FunctionUtilities.makeForwardingSetter,bindSafely=Shumway.FunctionUtilities.bindSafely,cloneObject=Shumway.ObjectUtilities.cloneObject,copyProperties=Shumway.ObjectUtilities.copyProperties,toSafeString=Shumway.StringUtilities.toSafeString,toSafeArrayString=Shumway.StringUtilities.toSafeArrayString,getLatestGetterOrSetterPropertyDescriptor=Shumway.ObjectUtilities.getLatestGetterOrSetterPropertyDescriptor,defineNonEnumerableGetterOrSetter=Shumway.ObjectUtilities.defineNonEnumerableGetterOrSetter,defineNonEnumerableGetter=Shumway.ObjectUtilities.defineNonEnumerableGetter,defineNonEnumerableSetter=Shumway.ObjectUtilities.defineNonEnumerableSetter,defineNonEnumerableProperty=Shumway.ObjectUtilities.defineNonEnumerableProperty,defineNonEnumerableForwardingProperty=Shumway.ObjectUtilities.defineNonEnumerableForwardingProperty,defineNewNonEnumerableProperty=Shumway.ObjectUtilities.defineNewNonEnumerableProperty,isNumeric=Shumway.isNumeric,isNullOrUndefined=Shumway.isNullOrUndefined,isPowerOfTwo=Shumway.IntegerUtilities.isPowerOfTwo,fromCharCodeArray=Shumway.StringUtilities.fromCharCodeArray,toKeyValueArray=Shumway.ObjectUtilities.toKeyValueArray,boxValue=Shumway.ObjectUtilities.boxValue;!function(){function a(a,b,c){a[b]||Object.defineProperty(a,b,{value:c,writable:!0,configurable:!0,enumerable:!1})}function b(a){return a.replace(/\033\[[0-9]*m/g,"")}var c=String.prototype;a(c,"padRight",function(a,c){var d=this,e=b(d).length;if(!a||e>=c)return d;for(var f=(c-e)/a.length,g=0;f>g;g++)d+=a;return d}),a(c,"padLeft",function(a,b){var c=this,d=c.length;if(!a||d>=b)return c;for(var e=(b-d)/a.length,f=0;e>f;f++)c=a+c;return c}),a(c,"trim",function(){return this.replace(/^\s+|\s+$/g,"")}),a(c,"endsWith",function(a){return-1!==this.indexOf(a,this.length-a.length)});var d=Array.prototype;a(d,"popMany",function(a){var b=this.length-a,c=this.slice(b,this.length);return this.splice(b,a),c}),a(d,"pushMany",function(a){for(var b=0;b<a.length;b++)this.push(a[b])}),a(d,"clone",function(){return this.slice(0)}),a(d,"first",function(){return this[0]}),a(d,"last",function(){return this[this.length-1]}),a(d,"peek",function(){return this[this.length-1]}),a(d,"empty",function(){return 0===this.length}),a(d,"pushUnique",function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return;this.push(a)});var e;"undefined"!=typeof Map&&(e=new Map).clear?a(d,"unique",function(){for(var a=[],b=0;b<this.length;b++)e.has(this[b])||(a.push(this[b]),e.set(this[b],!0));return e.clear(),a}):a(d,"unique",function(){for(var a=[],b=0;b<this.length;b++)a.pushUnique(this[b]);return a}),a(d,"replace",function(a,b){if(a===b)return 0;for(var c=0,d=0;d<this.length;d++)this[d]===a&&(this[d]=b,c++);return c}),a(d,"count",function(a){for(var b=0,c=0;c<this.length;c++)this[c]===a&&b++;return b}),a(d,"notEmpty",function(){return this.length>0}),a(d,"contains",function(a){return this.indexOf(a)>=0}),a(d,"top",function(){return this.length&&this[this.length-1]}),a(d,"mapWithIndex",function(a){for(var b=[],c=0;c<this.length;c++)b.push(a(this[c],c));return b})}();var utf8decode=Shumway.StringUtilities.utf8decode,utf8encode=Shumway.StringUtilities.utf8encode,escapeString=Shumway.StringUtilities.escapeString,bitCount=Shumway.IntegerUtilities.bitCount,ones=Shumway.IntegerUtilities.ones,leadingZeros=Shumway.IntegerUtilities.leadingZeros,trailingZeros=Shumway.IntegerUtilities.trailingZeros,getFlags=Shumway.IntegerUtilities.getFlags,Map=function(){function a(){this.elements={}}return a.prototype.set=function(a,b){this.elements[a]=b},a.prototype.get=function(a){return this.has(a)?this.elements[a]:void 0},a.prototype.has=function(a){return Object.prototype.hasOwnProperty.call(this.elements,a)},a.prototype.remove=function(a){this.has(a)&&delete this.elements[a]},a}();!function(){function a(){this.id="$weakmap"+b++}if("function"!=typeof this.WeakMap){var b=0;a.prototype={has:function(a){return a.hasOwnProperty(this.id)},get:function(a,b){return a.hasOwnProperty(this.id)?a[this.id]:b},set:function(a,b){Object.defineProperty(a,this.id,{value:b,enumerable:!1,configurable:!0})}},this.WeakMap=a}}();var Callback=function(){function a(){this.queues={}}return a.prototype.register=function(a,b){var c=this.queues[a];if(c){if(c.indexOf(b)>-1)return}else c=this.queues[a]=[];c.push(b)},a.prototype.unregister=function(a,b){var c=this.queues[a];if(c){var d=c.indexOf(b);-1!==d&&c.splice(d,1),0===c.length&&(this.queues[a]=null)}},a.prototype.notify=function(a,b){var c=this.queues[a];if(c){c=c.slice();for(var b=sliceArguments(arguments,0),d=0;d<c.length;d++){var e=c[d];e.apply(null,b)}}},a.prototype.notify1=function(a,b){var c=this.queues[a];if(c){c=c.slice();for(var d=0;d<c.length;d++){var e=c[d];e(a,b)}}},a}(),hashBytesTo32BitsAdler=Shumway.HashUtilities.hashBytesTo32BitsAdler,hashBytesTo32BitsMD5=Shumway.HashUtilities.hashBytesTo32BitsMD5,variableLengthEncodeInt32=Shumway.StringUtilities.variableLengthEncodeInt32,fromEncoding=Shumway.StringUtilities.fromEncoding,variableLengthDecodeIdentifier=Shumway.StringUtilities.variableLengthDecodeInt32,toEncoding=Shumway.StringUtilities.toEncoding,Shumway;!function(a){!function(a){var b=function(){function a(a,b,c,d){this.shortName=a,this.longName=b,this.type=c,d=d||{},this.positional=d.positional,this.parseFn=d.parse,this.value=d.defaultValue}return a.prototype.parse=function(a){this.value="boolean"===this.type?a:"number"===this.type?parseInt(a,10):a,this.parseFn&&this.parseFn(this.value)},a}();a.Argument=b;var c=function(){function a(){this.args=[]}return a.prototype.addArgument=function(a,c,d,e){var f=new b(a,c,d,e);return this.args.push(f),f},a.prototype.addBoundOption=function(a){var c={parse:function(b){a.value=b}};this.args.push(new b(a.shortName,a.longName,a.type,c))},a.prototype.addBoundOptionSet=function(a){var b=this;a.options.forEach(function(a){a instanceof d?b.addBoundOptionSet(a):b.addBoundOption(a)})},a.prototype.getUsage=function(){var a="";return this.args.forEach(function(b){a+=b.positional?b.longName:"[-"+b.shortName+"|--"+b.longName+("boolean"===b.type?"":" "+b.type[0].toUpperCase())+"]",a+=" "}),a},a.prototype.parse=function(a){var b={},c=[];this.args.forEach(function(a){a.positional?c.push(a):(b["-"+a.shortName]=a,b["--"+a.longName]=a)});for(var d=[];a.length;){var e=a.shift(),f=null,g=e;if("--"==e){d=d.concat(a);break}if("-"==e.slice(0,1)||"--"==e.slice(0,2)){if(f=b[e],!f)continue;g="boolean"!==f.type?a.shift():!0}else c.length?f=c.shift():d.push(g);f&&f.parse(g)}return d},a}();a.ArgumentParser=c;var d=function(){function a(a){this.name=a,this.options=[]}return a.prototype.register=function(a){return this.options.push(a),a},a.prototype.trace=function(a){a.enter(this.name+" {"),this.options.forEach(function(b){b.trace(a)}),a.leave("}")},a}();a.OptionSet=d;var e=function(){function a(a,b,c,d,e){this.longName=b,this.shortName=a,this.type=c,this.defaultValue=d,this.value=d,this.description=e}return a.prototype.parse=function(a){this.value=a},a.prototype.trace=function(a){a.writeLn(("-"+this.shortName+"|--"+this.longName).padRight(" ",30)+" = "+this.type+" "+this.value+" ["+this.defaultValue+"] ("+this.description+")")},a}();a.Option=e}(a.Options||(a.Options={}));a.Options}(Shumway||(Shumway={})),"undefined"!=typeof exports&&(exports.Shumway=Shumway);var ArgumentParser=Shumway.Options.ArgumentParser,Option=Shumway.Options.Option,OptionSet=Shumway.Options.OptionSet,ArgumentParser=Shumway.Options.ArgumentParser,Option=Shumway.Options.Option,OptionSet=Shumway.Options.OptionSet,Shumway;!function(a){!function(b){var c=function(){function b(b,c){this._parent=b,this._timers=a.ObjectUtilities.createMap(),this._name=c,this._begin=0,this._last=0,this._total=0,this._count=0}return b.time=function(a,c){b.start(a),c(),b.stop()},b.start=function(a){b._top=b._top._timers[a]||(b._top._timers[a]=new b(b._top,a)),b._top.start();var c=b._flat._timers[a]||(b._flat._timers[a]=new b(b._flat,a));c.start(),b._flatStack.push(c)},b.stop=function(){b._top.stop(),b._top=b._top._parent,b._flatStack.pop().stop()},b.stopStart=function(a){b.stop(),b.start(a)},b.prototype.start=function(){this._begin=a.getTicks()},b.prototype.stop=function(){this._last=a.getTicks()-this._begin,this._total+=this._last,this._count+=1},b.prototype.toJSON=function(){return{name:this._name,total:this._total,timers:this._timers}},b.prototype.trace=function(a){a.enter(this._name+": "+this._total.toFixed(2)+" ms, count: "+this._count+", average: "+(this._total/this._count).toFixed(2)+" ms");for(var b in this._timers)this._timers[b].trace(a);a.outdent()},b.trace=function(a){b._base.trace(a),b._flat.trace(a)},b._base=new b(null,"Total"),b._top=b._base,b._flat=new b(null,"Flat"),b._flatStack=[],b}();b.Timer=c;var d=function(){function b(a){this._enabled=a,this.clear()}return b.prototype.setEnabled=function(a){this._enabled=a},b.prototype.clear=function(){this._counts=a.ObjectUtilities.createMap()},b.prototype.toJSON=function(){return{counts:this._counts}},b.prototype.count=function(a,b){return"undefined"==typeof b&&(b=1),this._enabled?(void 0===this._counts[a]&&(this._counts[a]=0),this._counts[a]+=b,this._counts[a]):void 0},b.prototype.trace=function(a){for(var b in this._counts)a.writeLn(b+": "+this._counts[b])},b.prototype.traceSorted=function(a){var b=[];for(var c in this._counts)b.push([c,this._counts[c]]);b.sort(function(a,b){return b[1]-a[1]}),b.forEach(function(b){a.writeLn(b[0]+": "+b[1])})},b}();b.Counter=d;var e=function(){function a(a){this._samples=new Float64Array(a),this._count=0,this._index=0}return a.prototype.push=function(a){this._count<this._samples.length&&this._count++,this._index++,this._samples[this._index%this._samples.length]=a},a.prototype.average=function(){for(var a=0,b=0;b<this._count;b++)a+=this._samples[b];return a/this._count},a}();b.Average=e}(a.Metrics||(a.Metrics={}));a.Metrics}(Shumway||(Shumway={}));var Timer=Shumway.Metrics.Timer,Counter=new Shumway.Metrics.Counter(!0),Timer=Shumway.Metrics.Timer,Counter=new Shumway.Metrics.Counter(!0),FrameCounter=new Shumway.Metrics.Counter(!0),systemOptions=new OptionSet("System Options"),disassemble=systemOptions.register(new Option("d","disassemble","boolean",!1,"disassemble")),traceLevel=systemOptions.register(new Option("t","traceLevel","number",0,"trace level"));window.print=function(){};var CONSTANT_Undefined=0,CONSTANT_Utf8=1,CONSTANT_Float=2,CONSTANT_Int=3,CONSTANT_UInt=4,CONSTANT_PrivateNs=5,CONSTANT_Double=6,CONSTANT_QName=7,CONSTANT_Namespace=8,CONSTANT_Multiname=9,CONSTANT_False=10,CONSTANT_True=11,CONSTANT_Null=12,CONSTANT_QNameA=13,CONSTANT_MultinameA=14,CONSTANT_RTQName=15,CONSTANT_RTQNameA=16,CONSTANT_RTQNameL=17,CONSTANT_RTQNameLA=18,CONSTANT_NameL=19,CONSTANT_NameLA=20,CONSTANT_NamespaceSet=21,CONSTANT_PackageNamespace=22,CONSTANT_PackageInternalNs=23,CONSTANT_ProtectedNamespace=24,CONSTANT_ExplicitNamespace=25,CONSTANT_StaticProtectedNs=26,CONSTANT_MultinameL=27,CONSTANT_MultinameLA=28,CONSTANT_TypeName=29,CONSTANT_ClassSealed=1,CONSTANT_ClassFinal=2,CONSTANT_ClassInterface=4,CONSTANT_ClassProtectedNs=8,TRAIT_Slot=0,TRAIT_Method=1,TRAIT_Getter=2,TRAIT_Setter=3,TRAIT_Class=4,TRAIT_Function=5,TRAIT_Const=6,ATTR_Final=1,ATTR_Override=2,ATTR_Metadata=4,SLOT_var=0,SLOT_method=1,SLOT_getter=2,SLOT_setter=3,SLOT_class=4,SLOT_function=6,METHOD_Arguments=1,METHOD_Activation=2,METHOD_Needrest=4,METHOD_HasOptional=8,METHOD_IgnoreRest=16,METHOD_Native=32,METHOD_Setsdxns=64,METHOD_HasParamNames=128,OP_bkpt=1,OP_nop=2,OP_throw=3,OP_getsuper=4,OP_setsuper=5,OP_dxns=6,OP_dxnslate=7,OP_kill=8,OP_label=9,OP_lf32x4=10,OP_sf32x4=11,OP_ifnlt=12,OP_ifnle=13,OP_ifngt=14,OP_ifnge=15,OP_jump=16,OP_iftrue=17,OP_iffalse=18,OP_ifeq=19,OP_ifne=20,OP_iflt=21,OP_ifle=22,OP_ifgt=23,OP_ifge=24,OP_ifstricteq=25,OP_ifstrictne=26,OP_lookupswitch=27,OP_pushwith=28,OP_popscope=29,OP_nextname=30,OP_hasnext=31,OP_pushnull=32,OP_pushundefined=33,OP_pushfloat=34,OP_nextvalue=35,OP_pushbyte=36,OP_pushshort=37,OP_pushtrue=38,OP_pushfalse=39,OP_pushnan=40,OP_pop=41,OP_dup=42,OP_swap=43,OP_pushstring=44,OP_pushint=45,OP_pushuint=46,OP_pushdouble=47,OP_pushscope=48,OP_pushnamespace=49,OP_hasnext2=50,OP_li8=53,OP_li16=54,OP_li32=55,OP_lf32=56,OP_lf64=57,OP_si8=58,OP_si16=59,OP_si32=60,OP_sf32=61,OP_sf64=62,OP_newfunction=64,OP_call=65,OP_construct=66,OP_callmethod=67,OP_callstatic=68,OP_callsuper=69,OP_callproperty=70,OP_returnvoid=71,OP_returnvalue=72,OP_constructsuper=73,OP_constructprop=74,OP_callsuperid=75,OP_callproplex=76,OP_callinterface=77,OP_callsupervoid=78,OP_callpropvoid=79,OP_sxi1=80,OP_sxi8=81,OP_sxi16=82,OP_applytype=83,OP_pushfloat4=84,OP_newobject=85,OP_newarray=86,OP_newactivation=87,OP_newclass=88,OP_getdescendants=89,OP_newcatch=90,OP_findpropstrict=93,OP_findproperty=94,OP_finddef=95,OP_getlex=96,OP_setproperty=97,OP_getlocal=98,OP_setlocal=99,OP_getglobalscope=100,OP_getscopeobject=101,OP_getproperty=102,OP_getouterscope=103,OP_initproperty=104,OP_setpropertylate=105,OP_deleteproperty=106,OP_deletepropertylate=107,OP_getslot=108,OP_setslot=109,OP_getglobalslot=110,OP_setglobalslot=111,OP_convert_s=112,OP_esc_xelem=113,OP_esc_xattr=114,OP_convert_i=115,OP_convert_u=116,OP_convert_d=117,OP_convert_b=118,OP_convert_o=119,OP_checkfilter=120,OP_convert_f=121,OP_unplus=122,OP_convert_f4=123,OP_coerce=128,OP_coerce_b=129,OP_coerce_a=130,OP_coerce_i=131,OP_coerce_d=132,OP_coerce_s=133,OP_astype=134,OP_astypelate=135,OP_coerce_u=136,OP_coerce_o=137,OP_negate=144,OP_increment=145,OP_inclocal=146,OP_decrement=147,OP_declocal=148,OP_typeof=149,OP_not=150,OP_bitnot=151,OP_add=160,OP_subtract=161,OP_multiply=162,OP_divide=163,OP_modulo=164,OP_lshift=165,OP_rshift=166,OP_urshift=167,OP_bitand=168,OP_bitor=169,OP_bitxor=170,OP_equals=171,OP_strictequals=172,OP_lessthan=173,OP_lessequals=174,OP_greaterthan=175,OP_greaterequals=176,OP_instanceof=177,OP_istype=178,OP_istypelate=179,OP_in=180,OP_increment_i=192,OP_decrement_i=193,OP_inclocal_i=194,OP_declocal_i=195,OP_negate_i=196,OP_add_i=197,OP_subtract_i=198,OP_multiply_i=199,OP_getlocal0=208,OP_getlocal1=209,OP_getlocal2=210,OP_getlocal3=211,OP_setlocal0=212,OP_setlocal1=213,OP_setlocal2=214,OP_setlocal3=215,OP_invalid=237,OP_debug=239,OP_debugline=240,OP_debugfile=241,OP_bkptline=242,OP_timestamp=243,INT_MIN_VALUE=-2147483648,INT_MAX_VALUE=2147483647,UINT_MIN_VALUE=0,UINT_MAX_VALUE=4294967295,SORT_CASEINSENSITIVE=1,SORT_DESCENDING=2,SORT_UNIQUESORT=4,SORT_RETURNINDEXEDARRAY=8,SORT_NUMERIC=16,Shumway;!function(a){!function(b){function c(c){if(!a.AVM2.Runtime.debuggerMode.value)return"Error #"+c;for(var d in b.Errors)if(b.Errors[d].code==c)return"Error #"+c+": "+b.Errors[d].message;return"Error #"+c+": (unknown)"}function d(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];var d=a.message;return Array.prototype.slice.call(arguments,1).forEach(function(a,b){d=d.replace("%"+(b+1),a)}),"Error #"+a.code+": "+d}function e(c){if(!c.type)return c.message.indexOf("is not a function")>=0?d(b.Errors.CallOfNonFunctionError,"value"):c.message;switch(c.type){case"undefined_method":return d(b.Errors.CallOfNonFunctionError,"value");default:throw a.Debug.notImplemented(c.type)}}b.Errors={CallOfNonFunctionError:{code:1006,message:"%1 is not a function."},ConvertNullToObjectError:{code:1009,message:"Cannot access a property or method of a null object reference."},ConvertUndefinedToObjectError:{code:1010,message:"A term is undefined and has no properties."},ClassNotFoundError:{code:1014,message:"Class %1 could not be found."},CheckTypeFailedError:{code:1034,message:"Type Coercion failed: cannot convert %1 to %2."},WrongArgumentCountError:{code:1063,message:"Argument count mismatch on %1. Expected %2, got %3."},XMLMarkupMustBeWellFormed:{code:1088,message:"The markup in the document following the root element must be well-formed."},OutOfRangeError:{code:1125,message:"The index %1 is out of range %2."},VectorFixedError:{code:1126,message:"Cannot change the length of a fixed Vector."},InvalidParamError:{code:2004,message:"One of the parameters is invalid."},ParamRangeError:{code:2006,message:"The supplied index is out of bounds."},NullPointerError:{code:2007,message:"Parameter %1 must be non-null."},InvalidEnumError:{code:2008,message:"Parameter %1 must be one of the accepted values."},ArgumentError:{code:2015,message:"Invalid BitmapData."},CompressedDataError:{code:2058,message:"There was an error decompressing the data."},SocketConnectError:{code:2011,message:"Socket connection failed to %1:%2."},CantAddSelfError:{code:2024,message:"An object cannot be added as a child of itself."},NotAChildError:{code:2025,message:"The supplied DisplayObject must be a child of the caller."},ExternalInterfaceNotAvailableError:{code:2067,message:"The ExternalInterface is not available in this container. ExternalInterface requires Internet Explorer ActiveX, Firefox, Mozilla 1.7.5 and greater, or other browsers that support NPRuntime."}},b.getErrorMessage=c,b.formatErrorMessage=d,b.translateErrorMessage=e}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={}));var Errors=Shumway.AVM2.Errors,getErrorMessage=Shumway.AVM2.getErrorMessage,formatErrorMessage=Shumway.AVM2.formatErrorMessage,translateErrorMessage=Shumway.AVM2.translateErrorMessage,Errors=Shumway.AVM2.Errors,getErrorMessage=Shumway.AVM2.getErrorMessage,formatErrorMessage=Shumway.AVM2.formatErrorMessage,translateErrorMessage=Shumway.AVM2.translateErrorMessage,Shumway;!function(a){!function(a){function b(b){return a.opcodeTable[b].name}a.opcodeTable=[null,{name:"bkpt",canThrow:!1,operands:[]},{name:"nop",canThrow:!1,operands:[]},{name:"throw",canThrow:!0,operands:[]},{name:"getsuper",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"setsuper",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"dxns",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"dxnslate",canThrow:!0,operands:[]},{name:"kill",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},{name:"label",canThrow:!1,operands:[]},{name:"lf32x4",canThrow:!0,operands:[]},{name:"sf32x4",canThrow:!0,operands:[]},{name:"ifnlt",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifnle",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifngt",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifnge",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"jump",canThrow:!1,operands:[{name:"offset",size:"s24",type:""}]},{name:"iftrue",canThrow:!1,operands:[{name:"offset",size:"s24",type:""}]},{name:"iffalse",canThrow:!1,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifeq",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifne",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"iflt",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifle",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifgt",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifge",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifstricteq",canThrow:!1,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifstrictne",canThrow:!1,operands:[{name:"offset",size:"s24",type:""}]},{name:"lookupswitch",canThrow:!1,operands:null},{name:"pushwith",canThrow:!1,operands:[]},{name:"popscope",canThrow:!1,operands:[]},{name:"nextname",canThrow:!0,operands:[]},{name:"hasnext",canThrow:!0,operands:[]},{name:"pushnull",canThrow:!1,operands:[]},{name:"pushundefined",canThrow:!1,operands:[]},null,{name:"nextvalue",canThrow:!0,operands:[]},{name:"pushbyte",canThrow:!1,operands:[{name:"value",size:"s08",type:""}]},{name:"pushshort",canThrow:!1,operands:[{name:"value",size:"s16",type:""}]},{name:"pushtrue",canThrow:!1,operands:[]},{name:"pushfalse",canThrow:!1,operands:[]},{name:"pushnan",canThrow:!1,operands:[]},{name:"pop",canThrow:!1,operands:[]},{name:"dup",canThrow:!1,operands:[]},{name:"swap",canThrow:!1,operands:[]},{name:"pushstring",canThrow:!1,operands:[{name:"index",size:"u30",type:"S"}]},{name:"pushint",canThrow:!1,operands:[{name:"index",size:"u30",type:"I"}]},{name:"pushuint",canThrow:!1,operands:[{name:"index",size:"u30",type:"U"}]},{name:"pushdouble",canThrow:!1,operands:[{name:"index",size:"u30",type:"D"}]},{name:"pushscope",canThrow:!1,operands:[]},{name:"pushnamespace",canThrow:!1,operands:[{name:"index",size:"u30",type:"N"}]},{name:"hasnext2",canThrow:!0,operands:[{name:"object",size:"u30",type:""},{name:"index",size:"u30",type:""}]},{name:"lix8",canThrow:!0,operands:null},{name:"lix16",canThrow:!0,operands:null},{name:"li8",canThrow:!0,operands:[]},{name:"li16",canThrow:!0,operands:[]},{name:"li32",canThrow:!0,operands:[]},{name:"lf32",canThrow:!0,operands:[]},{name:"lf64",canThrow:!0,operands:[]},{name:"si8",canThrow:!0,operands:[]},{name:"si16",canThrow:!0,operands:[]},{name:"si32",canThrow:!0,operands:[]},{name:"sf32",canThrow:!0,operands:[]},{name:"sf64",canThrow:!0,operands:[]},null,{name:"newfunction",canThrow:!0,operands:[{name:"index",size:"u30",type:"MI"}]},{name:"call",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"construct",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"callmethod",canThrow:!0,operands:[{name:"index",size:"u30",type:""},{name:"argCount",size:"u30",type:""}]},{name:"callstatic",canThrow:!0,operands:[{name:"index",size:"u30",type:"MI"},{name:"argCount",size:"u30",type:""}]},{name:"callsuper",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"callproperty",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"returnvoid",canThrow:!1,operands:[]},{name:"returnvalue",canThrow:!0,operands:[]},{name:"constructsuper",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"constructprop",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"callsuperid",canThrow:!0,operands:null},{name:"callproplex",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"callinterface",canThrow:!0,operands:null},{name:"callsupervoid",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"callpropvoid",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"sxi1",canThrow:!1,operands:[]},{name:"sxi8",canThrow:!1,operands:[]},{name:"sxi16",canThrow:!1,operands:[]},{name:"applytype",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"pushfloat4",canThrow:!1,operands:null},{name:"newobject",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"newarray",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"newactivation",canThrow:!0,operands:[]},{name:"newclass",canThrow:!0,operands:[{name:"index",size:"u30",type:"CI"}]},{name:"getdescendants",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"newcatch",canThrow:!0,operands:[{name:"index",size:"u30",type:"EI"}]},{name:"findpropglobalstrict",canThrow:!0,operands:null},{name:"findpropglobal",canThrow:!0,operands:null},{name:"findpropstrict",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"findproperty",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"finddef",canThrow:!0,operands:null},{name:"getlex",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"setproperty",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"getlocal",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},{name:"setlocal",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},{name:"getglobalscope",canThrow:!1,operands:[]},{name:"getscopeobject",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},{name:"getproperty",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"getouterscope",canThrow:!1,operands:null},{name:"initproperty",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},null,{name:"deleteproperty",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},null,{name:"getslot",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"setslot",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"getglobalslot",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},{name:"setglobalslot",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},{name:"convert_s",canThrow:!0,operands:[]},{name:"esc_xelem",canThrow:!0,operands:[]},{name:"esc_xattr",canThrow:!0,operands:[]},{name:"convert_i",canThrow:!0,operands:[]},{name:"convert_u",canThrow:!0,operands:[]},{name:"convert_d",canThrow:!0,operands:[]},{name:"convert_b",canThrow:!0,operands:[]},{name:"convert_o",canThrow:!0,operands:[]},{name:"checkfilter",canThrow:!0,operands:[]},{name:"convert_f",canThrow:!0,operands:[]},{name:"unplus",canThrow:!0,operands:[]},{name:"convert_f4",canThrow:!0,operands:[]},null,null,null,null,{name:"coerce",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"coerce_b",canThrow:!0,operands:[]},{name:"coerce_a",canThrow:!0,operands:[]},{name:"coerce_i",canThrow:!0,operands:[]},{name:"coerce_d",canThrow:!0,operands:[]},{name:"coerce_s",canThrow:!0,operands:[]},{name:"astype",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"astypelate",canThrow:!0,operands:[]},{name:"coerce_u",canThrow:!0,operands:[]},{name:"coerce_o",canThrow:!0,operands:[]},null,null,null,null,null,null,{name:"negate",canThrow:!0,operands:[]},{name:"increment",canThrow:!0,operands:[]},{name:"inclocal",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"decrement",canThrow:!0,operands:[]},{name:"declocal",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"typeof",canThrow:!1,operands:[]},{name:"not",canThrow:!1,operands:[]},{name:"bitnot",canThrow:!0,operands:[]},null,null,null,null,null,null,null,null,{name:"add",canThrow:!0,operands:[]},{name:"subtract",canThrow:!0,operands:[]},{name:"multiply",canThrow:!0,operands:[]},{name:"divide",canThrow:!0,operands:[]},{name:"modulo",canThrow:!0,operands:[]},{name:"lshift",canThrow:!0,operands:[]},{name:"rshift",canThrow:!0,operands:[]},{name:"urshift",canThrow:!0,operands:[]},{name:"bitand",canThrow:!0,operands:[]},{name:"bitor",canThrow:!0,operands:[]},{name:"bitxor",canThrow:!0,operands:[]},{name:"equals",canThrow:!0,operands:[]},{name:"strictequals",canThrow:!0,operands:[]},{name:"lessthan",canThrow:!0,operands:[]},{name:"lessequals",canThrow:!0,operands:[]},{name:"greaterthan",canThrow:!0,operands:[]},{name:"greaterequals",canThrow:!0,operands:[]},{name:"instanceof",canThrow:!0,operands:[]},{name:"istype",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"istypelate",canThrow:!0,operands:[]},{name:"in",canThrow:!0,operands:[]},null,null,null,null,null,null,null,null,null,null,null,{name:"increment_i",canThrow:!0,operands:[]},{name:"decrement_i",canThrow:!0,operands:[]},{name:"inclocal_i",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"declocal_i",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"negate_i",canThrow:!0,operands:[]},{name:"add_i",canThrow:!0,operands:[]},{name:"subtract_i",canThrow:!0,operands:[]},{name:"multiply_i",canThrow:!0,operands:[]},null,null,null,null,null,null,null,null,{name:"getlocal0",canThrow:!1,operands:[]},{name:"getlocal1",canThrow:!1,operands:[]},{name:"getlocal2",canThrow:!1,operands:[]},{name:"getlocal3",canThrow:!1,operands:[]},{name:"setlocal0",canThrow:!1,operands:[]},{name:"setlocal1",canThrow:!1,operands:[]},{name:"setlocal2",canThrow:!1,operands:[]},{name:"setlocal3",canThrow:!1,operands:[]},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,{name:"invalid",canThrow:!1,operands:[]},null,{name:"debug",canThrow:!0,operands:[{name:"debugType",size:"u08",type:""},{name:"index",size:"u30",type:"S"},{name:"reg",size:"u08",type:""},{name:"extra",size:"u30",type:""}]},{name:"debugline",canThrow:!0,operands:[{name:"lineNumber",size:"u30",type:""}]},{name:"debugfile",canThrow:!0,operands:[{name:"index",size:"u30",type:"S"}]},null,null,null,null,null,null,null,null,null,null,null,null,null,null],a.opcodeName=b
}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={}));var opcodeTable=Shumway.AVM2.opcodeTable,opcodeName=Shumway.AVM2.opcodeName,opcodeTable=Shumway.AVM2.opcodeTable,opcodeName=Shumway.AVM2.opcodeName,__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},Shumway;!function(a){!function(b){!function(b){var c=a.Metrics.Timer,d=(a.isString,a.isNumber,a.isNumeric),e=a.isObject,f=null;"undefined"!=typeof TextDecoder&&(f=new TextDecoder);var g=function(){function b(a){this._bytes=a;try{this._view=new DataView(a.buffer,a.byteOffset)}catch(b){var c=new Uint8Array(a.v),d=new Uint8Array(c.buffer,a.i);this._bytes=d,this._view=new DataView(d.buffer,a.i)}this._position=0}return b._getResultBuffer=function(a){return(!b._resultBuffer||b._resultBuffer.length<a)&&(b._resultBuffer=new Int32Array(2*a)),b._resultBuffer},Object.defineProperty(b.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),b.prototype.remaining=function(){return this._bytes.length-this._position},b.prototype.seek=function(a){this._position=a},b.prototype.readU8=function(){return this._bytes[this._position++]},b.prototype.readU8s=function(a){var b=new Uint8Array(a);return b.set(this._bytes.subarray(this._position,this._position+a),0),this._position+=a,b},b.prototype.readS8=function(){return this._bytes[this._position++]<<24>>24},b.prototype.readU32=function(){return this.readS32()>>>0},b.prototype.readU30=function(){var a=this.readU32();return 3221225472&a?a:a},b.prototype.readU30Unsafe=function(){return this.readU32()},b.prototype.readS16=function(){return this.readU30Unsafe()<<16>>16},b.prototype.readS32=function(){var a=this.readU8();return 128&a&&(a=127&a|this.readU8()<<7,16384&a&&(a=16383&a|this.readU8()<<14,2097152&a&&(a=2097151&a|this.readU8()<<21,268435456&a&&(a=268435455&a|this.readU8()<<28,a=4294967295&a)))),a},b.prototype.readWord=function(){var a=this._view.getUint32(this._position,!0);return this._position+=4,a},b.prototype.readS24=function(){var a=this.readU8()|this.readU8()<<8|this.readU8()<<16;return a<<8>>8},b.prototype.readDouble=function(){var a=this._view.getFloat64(this._position,!0);return this._position+=8,a},b.prototype.readUTFString=function(c){if(f){var d=this._position;return this._position+=c,f.decode(this._bytes.subarray(d,d+c))}for(var e=this._position,g=e+c,h=this._bytes,i=0,j=b._getResultBuffer(2*c);g>e;){var k=h[e++];if(127>=k)j[i++]=k;else if(k>=192){var l=0;224>k?l=(31&k)<<6|63&h[e++]:240>k?l=(15&k)<<12|(63&h[e++])<<6|63&h[e++]:(l=((7&k)<<18|(63&h[e++])<<12|(63&h[e++])<<6|63&h[e++])-65536,j[i++]=((1047552&l)>>>10)+55296,l=(1023&l)+56320),j[i++]=l}}return this._position=e,a.StringUtilities.fromCharCodeArray(j.subarray(0,i))},b._resultBuffer=new Int32Array(256),b}();b.AbcStream=g;var h=function(){function a(a,b,c){this.name=a,this.type=b,this.value=c}return a}();b.Parameter=h;var i=function(){function b(a,b,c){var d=a.constantPool,e=a.methods,f=a.classes,g=a.metadata;this.holder=c,this.name=d.multinames[b.readU30()];var h=b.readU8();this.kind=15&h,this.attributes=h>>4&15;try{switch(this.kind){case 0:case 6:this.slotId=b.readU30(),this.typeName=d.multinames[b.readU30()];var i=b.readU30();this.value=void 0,0!==i&&(this.hasDefaultValue=!0,this.value=d.getValue(b.readU8(),i));break;case 1:case 3:case 2:this.dispId=b.readU30(),this.methodInfo=e[b.readU30()],this.methodInfo.name=this.name,o.attachHolder(this.methodInfo,this.holder),this.methodInfo.abc=a;break;case 4:this.slotId=b.readU30(),this.classInfo=f[b.readU30()];break;case 5:}}catch(j){}if(4&this.attributes){for(var k,l=0,m=b.readU30();m>l;l++){var n=g[b.readU30()];"__go_to_definition_help"!==n.name&&"__go_to_ctor_definition_help"!==n.name&&(k||(k={}),k[n.name]=n)}k&&(this.isClass()&&(this.classInfo.metadata=k),this.metadata=k)}}return b.prototype.isSlot=function(){return 0===this.kind},b.prototype.isConst=function(){return 6===this.kind},b.prototype.isMethod=function(){return 1===this.kind},b.prototype.isClass=function(){return 4===this.kind},b.prototype.isGetter=function(){return 2===this.kind},b.prototype.isSetter=function(){return 3===this.kind},b.prototype.isProtected=function(){return this.name.namespaces[0].isProtected()},b.prototype.kindName=function(){switch(this.kind){case 0:return"Slot";case 6:return"Const";case 1:return"Method";case 3:return"Setter";case 2:return"Getter";case 4:return"Class";case 5:return"Function"}a.Debug.unexpected()},b.prototype.isOverride=function(){return 2&this.attributes},b.prototype.isFinal=function(){return 1&this.attributes},b.prototype.toString=function(){var b=a.IntegerUtilities.getFlags(this.attributes,"final|override|metadata".split("|"));switch(b&&(b+=" "),b+=q.getQualifiedName(this.name),this.kind){case 0:case 6:return b+", typeName: "+this.typeName+", slotId: "+this.slotId+", value: "+this.value;case 1:case 3:case 2:return b+", "+this.kindName()+": "+this.methodInfo.name;case 4:return b+", slotId: "+this.slotId+", class: "+this.classInfo;case 5:}},b.parseTraits=function(a,c,d){for(var e=c.readU30(),f=[],g=arguments[3],h=0;e>h;h++)f.push(g?new b(a,c,d,"test"):new b(a,c,d));return f},b}();b.Trait=i;var j=function(){function a(a,b){this.abc=a,this.index=b}return a}();b.Info=j;var k=function(b){function c(a,d,e){b.call(this,a,d);var f=a.constantPool,g=e.readU30();this.returnType=f.multinames[e.readU30()],this.parameters=[];for(var i=0;g>i;i++)this.parameters.push(new h(void 0,f.multinames[e.readU30()],void 0));this.debugName=f.strings[e.readU30()],this.flags=e.readU8();var j=0;if(8&this.flags){j=e.readU30();for(var i=g-j;g>i;i++){var k=e.readU30();this.parameters[i].value=f.getValue(e.readU8(),k)}}if(128&this.flags)for(var i=0;g>i;i++)e.readU30(),this.parameters[i].name=c._getParameterName(i);else for(var i=0;g>i;i++)this.parameters[i].name=c._getParameterName(i)}return __extends(c,b),c._getParameterName=function(a){return String.fromCharCode("A".charCodeAt(0)+a)},c.prototype.toString=function(){var b=a.IntegerUtilities.getFlags(this.flags,"NEED_ARGUMENTS|NEED_ACTIVATION|NEED_REST|HAS_OPTIONAL|||SET_DXN|HAS_PARAM_NAMES".split("|"));return(b?b+" ":"")+this.name},c.prototype.hasOptional=function(){return!!(8&this.flags)},c.prototype.needsActivation=function(){return!!(2&this.flags)},c.prototype.needsRest=function(){return!!(4&this.flags)},c.prototype.needsArguments=function(){return!!(1&this.flags)},c.prototype.isNative=function(){return!!(32&this.flags)},c.prototype.isClassMember=function(){return this.holder instanceof m},c.prototype.isInstanceMember=function(){return this.holder instanceof l},c.prototype.isScriptMember=function(){return this.holder instanceof n},c.parseException=function(a,b){var c=a.constantPool.multinames,d={start:b.readU30(),end:b.readU30(),target:b.readU30(),typeName:c[b.readU30()],varName:c[b.readU30()]};return d},c.parseBody=function(a,b){var d=(a.constantPool,a.methods),e=b.readU30(),f=d[e];f.index=e,f.hasBody=!0,f.hash=a.hash+196608+e,f.maxStack=b.readU30(),f.localCount=b.readU30(),f.initScopeDepth=b.readU30(),f.maxScopeDepth=b.readU30(),f.code=b.readU8s(b.readU30());for(var g=[],h=b.readU30(),j=0;h>j;++j)g.push(c.parseException(a,b));f.exceptions=g,f.traits=i.parseTraits(a,b,f,"test")},c.prototype.hasExceptions=function(){return this.exceptions.length>0},c}(j);b.MethodInfo=k;var l=function(b){function c(a,d,e){b.call(this,a,d),this.runtimeId=c.nextID++;var f=a.constantPool,g=a.methods;this.name=f.multinames[e.readU30()],this.superName=f.multinames[e.readU30()],this.flags=e.readU8(),this.protectedNs=void 0,8&this.flags&&(this.protectedNs=f.namespaces[e.readU30()]);var h=e.readU30();this.interfaces=[];for(var j=0;h>j;j++)this.interfaces[j]=f.multinames[e.readU30()];this.init=g[e.readU30()],this.init.isInstanceInitializer=!0,this.init.name=this.name,o.attachHolder(this.init,this),this.traits=i.parseTraits(a,e,this)}return __extends(c,b),c.prototype.toString=function(){var b=a.IntegerUtilities.getFlags(8&this.flags,"sealed|final|interface|protected".split("|")),c=(b?b+" ":"")+this.name;return this.superName&&(c+=" extends "+this.superName),c},c.prototype.isFinal=function(){return!!(2&this.flags)},c.prototype.isSealed=function(){return!!(1&this.flags)},c.prototype.isInterface=function(){return!!(4&this.flags)},c.nextID=1,c}(j);b.InstanceInfo=l;var m=function(a){function b(c,d,e){a.call(this,c,d),this.runtimeId=b.nextID++,this.abc=c,this.hash=c.hash+65536+d,this.index=d,this.init=c.methods[e.readU30()],this.init.isClassInitializer=!0,o.attachHolder(this.init,this),this.traits=i.parseTraits(c,e,this),this.instanceInfo=c.instances[d],this.instanceInfo.classInfo=this,this.defaultValue=b._getDefaultValue(this.instanceInfo.name)}return __extends(b,a),b._getDefaultValue=function(a){return q.getQualifiedName(a)===q.Int||q.getQualifiedName(a)===q.Uint?0:q.getQualifiedName(a)===q.Number?0/0:q.getQualifiedName(a)===q.Boolean?!1:null},b.prototype.toString=function(){return this.instanceInfo.name.toString()},b.nextID=1,b}(j);b.ClassInfo=m;var n=function(a){function b(b,c,d){a.call(this,b,c),this.runtimeId=m.nextID++,this.hash=b.hash+131072+c,this.name=b.name+"$script"+c,this.init=b.methods[d.readU30()],this.init.isScriptInitializer=!0,o.attachHolder(this.init,this),this.traits=i.parseTraits(b,d,this)}return __extends(b,a),Object.defineProperty(b.prototype,"entryPoint",{get:function(){return this.init},enumerable:!0,configurable:!0}),b.prototype.toString=function(){return this.name},b.nextID=1,b}(j);b.ScriptInfo=n;var o=function(){function b(d,e,f){"undefined"==typeof f&&(f=0),c.start("Parse ABC"),this.name=e,this.env={};var h;f||(c.start("Adler"),h=a.HashUtilities.hashBytesTo32BitsAdler(d,0,d.length),c.stop()),this.hash=f?f:h;var i,j,o=new g(d);for(b._checkMagic(o),c.start("Parse constantPool"),this.constantPool=new s(o,this),c.stop(),c.start("Parse Method Infos"),this.methods=[],i=o.readU30(),j=0;i>j;++j)this.methods.push(new k(this,j,o));for(c.stop(),c.start("Parse MetaData Infos"),this.metadata=[],i=o.readU30(),j=0;i>j;++j)this.metadata.push(new r(this,o));for(c.stop(),c.start("Parse Instance Infos"),this.instances=[],i=o.readU30(),j=0;i>j;++j)this.instances.push(new l(this,j,o));for(c.stop(),c.start("Parse Class Infos"),this.classes=[],j=0;i>j;++j)this.classes.push(new m(this,j,o));for(c.stop(),c.start("Parse Script Infos"),this.scripts=[],i=o.readU30(),j=0;i>j;++j)this.scripts.push(new n(this,j,o));for(c.stop(),c.start("Parse Method Body Info"),i=o.readU30(),j=0;i>j;++j)k.parseBody(this,o);c.stop()}return b._checkMagic=function(a){var b=a.readWord(),c=3014671;if(c>b)throw new Error("Invalid ABC File (magic = "+Number(b).toString(16)+")")},Object.defineProperty(b.prototype,"lastScript",{get:function(){return this.scripts[this.scripts.length-1]},enumerable:!0,configurable:!0}),b.attachHolder=function(a,b){a.holder=b},b.prototype.toString=function(){return this.name},b}();b.AbcFile=o;var p=function(){function b(a,b,c,d){"undefined"==typeof b&&(b=""),void 0===b&&(b=""),void 0!==c&&(this.prefix=c),this.kind=a,this.uri=b,this._buildNamespace(d)}return b.prototype._buildNamespace=function(a){if(22===this.kind&&(this.kind=8),this.isPublic()&&this.uri){var c=this.uri.length-1,d=this.uri.charCodeAt(c);d>b._MIN_API_MARK&&(this.uri=this.uri.substring(0,c-1))}else this.isUnique()&&(this.uri="private "+a);this.qualifiedName=b._qualifyNamespace(this.kind,this.uri,this.prefix?this.prefix:"")},b._hashNamespace=function(c,d,e){var f=new Int32Array(1+d.length+e.length),g=0;f[g++]=c;var h=b._knownURIs.indexOf(d);if(h>=0)return c<<2|h;for(var i=0;i<d.length;i++)f[g++]=d.charCodeAt(i);for(var i=0;i<e.length;i++)f[g++]=e.charCodeAt(i);return a.HashUtilities.hashBytesTo32BitsMD5(f,0,g)},b._qualifyNamespace=function(c,d,e){var f=c+d,g=b._mangledNamespaceCache[f];return g?g:(g=a.StringUtilities.variableLengthEncodeInt32(b._hashNamespace(c,d,e)),b._mangledNamespaceMap[g]={kind:c,uri:d,prefix:e},b._mangledNamespaceCache[f]=g,g)},b.fromQualifiedName=function(c){var d=a.StringUtilities.fromEncoding(c[0]),e=c.substring(0,d+1),f=b._mangledNamespaceMap[e];return new b(f.kind,f.uri,f.prefix)},b.kindFromString=function(a){for(var c in b._kinds)if(b._kinds[c]===a)return c;return!0},b.createNamespace=function(a,c){return new b(8,a,c)},b.parse=function(a,c,d){var e=c.readU8(),f=a.strings[c.readU30()];return new b(e,f,void 0,d)},b.prototype.isPublic=function(){return 8===this.kind||22===this.kind},b.prototype.isProtected=function(){return 24===this.kind},b.prototype.isUnique=function(){return 5===this.kind&&!this.uri},b.prototype.isDynamic=function(){return this.isPublic()&&!this.uri},b.prototype.getURI=function(){return this.uri},b.prototype.toString=function(){return b._kinds[this.kind]+(this.uri?" "+this.uri:"")},b.prototype.clone=function(){var a=Object.create(b.prototype);return a.kind=this.kind,a.uri=this.uri,a.prefix=this.prefix,a.qualifiedName=this.qualifiedName,a},b.prototype.isEqualTo=function(a){return this.qualifiedName===a.qualifiedName},b.prototype.inNamespaceSet=function(a){for(var b=0;b<a.length;b++)if(a[b].qualifiedName===this.qualifiedName)return!0;return!1},b.prototype.getAccessModifier=function(){return b._kinds[this.kind]},b.prototype.getQualifiedName=function(){return this.qualifiedName},b.fromSimpleName=function(a){if(a in b._simpleNameCache)return b._simpleNameCache[a];var c;return c=0===a.indexOf("[")?a.substring(1,a.length-1).split(","):[a],b._simpleNameCache[a]=c.map(function(a){a=a.trim();var c,d;if(a.indexOf(" ")>0)c=a.substring(0,a.indexOf(" ")).trim(),d=a.substring(a.indexOf(" ")+1).trim();else{var e=b._kinds;a===e[8]||a===e[23]||a===e[5]||a===e[24]||a===e[25]||a===e[26]?(c=a,d=""):(c=b._publicPrefix,d=a)}return new b(b.kindFromString(c),d)})},b._publicPrefix="public",b._kinds=function(){var c=a.ObjectUtilities.createMap();return c[8]=b._publicPrefix,c[23]="packageInternal",c[5]="private",c[24]="protected",c[25]="explicit",c[26]="staticProtected",c}(),b._MIN_API_MARK=58004,b._MAX_API_MARK=63743,b._knownURIs=[""],b._mangledNamespaceCache=a.ObjectUtilities.createMap(),b._mangledNamespaceMap=a.ObjectUtilities.createMap(),b.PUBLIC=new b(8),b.PROTECTED=new b(24),b.PROXY=new b(8,"http://www.adobe.com/2006/actionscript/flash/proxy"),b._simpleNameCache=a.ObjectUtilities.createMap(),b}();b.Namespace=p;var q=function(){function b(a,c,d){"undefined"==typeof d&&(d=0),this.runtimeId=b._nextID++,this.namespaces=a,this.name=c,this.flags=d}return b.parse=function(c,d,e,f){var g,h=0,i=d.readU8(),j=[],k=0;switch(i){case 7:case 13:h=d.readU30(),h?j=[c.namespaces[h]]:k&=~b.RUNTIME_NAME,h=d.readU30(),h&&(g=c.strings[h]);break;case 15:case 16:h=d.readU30(),h?g=c.strings[h]:k&=~b.RUNTIME_NAME,k|=b.RUNTIME_NAMESPACE;break;case 17:case 18:k|=b.RUNTIME_NAMESPACE,k|=b.RUNTIME_NAME;break;case 9:case 14:h=d.readU30(),h?g=c.strings[h]:k&=~b.RUNTIME_NAME,h=d.readU30(),j=c.namespaceSets[h];break;case 27:case 28:k|=b.RUNTIME_NAME,h=d.readU30(),j=c.namespaceSets[h];break;case 29:var l=d.readU32();e[l]&&(j=e[l].namespaces,g=e[l].name);var m=(d.readU32(),d.readU32()),n=new b(j,g,k);return n.typeParameter=e[m],e[l]||f.push({multiname:n,index:l}),n;default:a.Debug.unexpected()}switch(i){case 13:case 16:case 18:case 14:case 28:k|=b.ATTRIBUTE}return new b(j,g,k)},b.isMultiname=function(a){return"number"==typeof a||"string"==typeof a||a instanceof b||a instanceof Number},b.needsResolution=function(a){return a instanceof b&&a.namespaces.length>1},b.isQName=function(a){return a instanceof b?a.namespaces&&1===a.namespaces.length:!0},b.isRuntimeName=function(a){return a instanceof b&&a.isRuntimeName()},b.isRuntimeNamespace=function(a){return a instanceof b&&a.isRuntimeNamespace()},b.isRuntime=function(a){return a instanceof b&&a.isRuntimeName()||a.isRuntimeNamespace()},b.getQualifiedName=function(a){if(a instanceof b){if(void 0!==a.qualifiedName)return a.qualifiedName;var c=String(a.name);if(d(c)&&a.namespaces[0].isPublic())return a.qualifiedName=c;a=a.qualifiedName=b.qualifyName(a.namespaces[0],c)}return a},b.qualifyName=function(a,b){return"$"+a.qualifiedName+b},b.stripPublicQualifier=function(a){var b="$"+p.PUBLIC.qualifiedName,c=a.indexOf(b);return 0!==c?void 0:a.substring(b.length)},b.fromQualifiedName=function(a){if(a instanceof b)return a;if(d(a))return new b([p.PUBLIC],a);if("$"===a[0]){var c=p.fromQualifiedName(a.substring(1));return new b([c],a.substring(1+c.qualifiedName.length))}},b.getNameFromPublicQualifiedName=function(a){var c=b.fromQualifiedName(a);return c.name},b.getFullQualifiedName=function(a){var c=b.getQualifiedName(a);return a instanceof b&&a.typeParameter&&(c+="$"+b.getFullQualifiedName(a.typeParameter)),c},b.getPublicQualifiedName=function(c){return d(c)?a.toNumber(c):null!==c&&e(c)?c:b.qualifyName(p.PUBLIC,c)},b.isPublicQualifiedName=function(a){return"number"==typeof a||d(a)||1===a.indexOf(p.PUBLIC.qualifiedName)},b.getAccessModifier=function(a){return"number"==typeof a||"string"==typeof a||a instanceof Number?"public":a.namespaces[0].getAccessModifier()},b.isNumeric=function(a){return"number"==typeof a?!0:"string"==typeof a?d(a):!isNaN(parseInt(b.getName(a),10))},b.getName=function(a){return a.getName()},b.isAnyName=function(a){return"object"==typeof a&&!a.isRuntimeName()&&!a.name},b.fromSimpleName=function(a){if(a in b._simpleNameCache)return b._simpleNameCache[a];var c,d,e;return c=a.lastIndexOf("."),0>=c&&(c=a.lastIndexOf(" ")),c>0&&c<a.length-1?(d=a.substring(c+1).trim(),e=a.substring(0,c).trim()):(d=a,e=""),b._simpleNameCache[a]=new b(p.fromSimpleName(e),d)},b.prototype.getQName=function(c){this._qualifiedNameCache||(this._qualifiedNameCache=a.ObjectUtilities.createArrayMap());var d=this._qualifiedNameCache[c];return d||(d=this._qualifiedNameCache[c]=new b([this.namespaces[c]],this.name,this.flags)),d},b.prototype.hasQName=function(a){if(this.name!==a.name)return!1;for(var b=0;b<this.namespaces.length;b++)if(this.namespaces[b].isEqualTo(a.namespaces[0]))return!0;return!1},b.prototype.isAttribute=function(){return this.flags&b.ATTRIBUTE},b.prototype.isAnyName=function(){return b.isAnyName(this)},b.prototype.isAnyNamespace=function(){return!this.isRuntimeNamespace()&&(0===this.namespaces.length||this.isAnyName()&&1!==this.namespaces.length)},b.prototype.isRuntimeName=function(){return!!(this.flags&b.RUNTIME_NAME)},b.prototype.isRuntimeNamespace=function(){return!!(this.flags&b.RUNTIME_NAMESPACE)},b.prototype.isRuntime=function(){return!!(this.flags&(b.RUNTIME_NAME|b.RUNTIME_NAMESPACE))},b.prototype.isQName=function(){return 1===this.namespaces.length&&!this.isAnyName()},b.prototype.hasTypeParameter=function(){return!!this.typeParameter},b.prototype.getName=function(){return this.name},b.prototype.getOriginalName=function(){var a=this.namespaces[0].uri;return a&&(a+="."),a+this.name},b.prototype.getNamespace=function(){return this.namespaces[0]},b.prototype.nameToString=function(){if(this.isAnyName())return"*";var a=this.getName();return this.isRuntimeName()?"[]":a},b.prototype.hasObjectName=function(){return"object"==typeof this.name},b.prototype.toString=function(){var a=this.isAttribute()?"@":"";if(this.isAnyNamespace())a+="*::"+this.nameToString();else if(this.isRuntimeNamespace())a+="[]::"+this.nameToString();else if(1===this.namespaces.length&&this.isQName())a+=this.namespaces[0].toString()+"::",a+=this.nameToString();else{a+="{";for(var b=0,c=this.namespaces.length;c>b;b++)a+=this.namespaces[b].toString(),c>b+1&&(a+=",");a+="}::"+this.nameToString()}return this.hasTypeParameter()&&(a+="<"+this.typeParameter.toString()+">"),a},b.ATTRIBUTE=1,b.RUNTIME_NAMESPACE=2,b.RUNTIME_NAME=4,b._nextID=0,b._simpleNameCache=a.ObjectUtilities.createMap(),b.Int=b.getPublicQualifiedName("int"),b.Uint=b.getPublicQualifiedName("uint"),b.Class=b.getPublicQualifiedName("Class"),b.Array=b.getPublicQualifiedName("Array"),b.Object=b.getPublicQualifiedName("Object"),b.String=b.getPublicQualifiedName("String"),b.Number=b.getPublicQualifiedName("Number"),b.Boolean=b.getPublicQualifiedName("Boolean"),b.Function=b.getPublicQualifiedName("Function"),b.XML=b.getPublicQualifiedName("XML"),b.XMLList=b.getPublicQualifiedName("XMLList"),b.TEMPORARY=new b([],""),b}();b.Multiname=q;var r=function(){function a(a,b){for(var c=a.constantPool.strings,d=this.name=c[b.readU30()],e=b.readU30(),f=[],g=[],h=0;e>h;h++)f[h]=c[b.readU30()];for(var h=0;e>h;h++){var i=f[h];g[h]={key:i,value:c[b.readU30()]},i&&"native"===d&&(this[i]=g[h].value)}this.value=g}return a.prototype.toString=function(){return"["+this.name+"]"},a}();b.MetaDataInfo=r,function(a){a[a.Undefined=0]="Undefined",a[a.Utf8=1]="Utf8",a[a.Float=2]="Float",a[a.Int=3]="Int",a[a.UInt=4]="UInt",a[a.PrivateNs=5]="PrivateNs",a[a.Double=6]="Double",a[a.QName=7]="QName",a[a.Namespace=8]="Namespace",a[a.Multiname=9]="Multiname",a[a.False=10]="False",a[a.True=11]="True",a[a.Null=12]="Null",a[a.QNameA=13]="QNameA",a[a.MultinameA=14]="MultinameA",a[a.RTQName=15]="RTQName",a[a.RTQNameA=16]="RTQNameA",a[a.RTQNameL=17]="RTQNameL",a[a.RTQNameLA=18]="RTQNameLA",a[a.NameL=19]="NameL",a[a.NameLA=20]="NameLA",a[a.NamespaceSet=21]="NamespaceSet",a[a.PackageNamespace=22]="PackageNamespace",a[a.PackageInternalNs=23]="PackageInternalNs",a[a.ProtectedNamespace=24]="ProtectedNamespace",a[a.ExplicitNamespace=25]="ExplicitNamespace",a[a.StaticProtectedNs=26]="StaticProtectedNs",a[a.MultinameL=27]="MultinameL",a[a.MultinameLA=28]="MultinameLA",a[a.TypeName=29]="TypeName",a[a.ClassSealed=1]="ClassSealed",a[a.ClassFinal=2]="ClassFinal",a[a.ClassInterface=4]="ClassInterface",a[a.ClassProtectedNs=8]="ClassProtectedNs"}(b.CONSTANT||(b.CONSTANT={}));b.CONSTANT;!function(a){a[a.Arguments=1]="Arguments",a[a.Activation=2]="Activation",a[a.Needrest=4]="Needrest",a[a.HasOptional=8]="HasOptional",a[a.IgnoreRest=16]="IgnoreRest",a[a.Native=32]="Native",a[a.Setsdxns=64]="Setsdxns",a[a.HasParamNames=128]="HasParamNames"}(b.METHOD||(b.METHOD={}));b.METHOD;!function(a){a[a.Slot=0]="Slot",a[a.Method=1]="Method",a[a.Getter=2]="Getter",a[a.Setter=3]="Setter",a[a.Class=4]="Class",a[a.Function=5]="Function",a[a.Const=6]="Const"}(b.TRAIT||(b.TRAIT={}));b.TRAIT;!function(a){a[a.Final=1]="Final",a[a.Override=2]="Override",a[a.Metadata=4]="Metadata"}(b.ATTR||(b.ATTR={}));b.ATTR;!function(a){a[a.CASEINSENSITIVE=1]="CASEINSENSITIVE",a[a.DESCENDING=2]="DESCENDING",a[a.UNIQUESORT=4]="UNIQUESORT",a[a.RETURNINDEXEDARRAY=8]="RETURNINDEXEDARRAY",a[a.NUMERIC=16]="NUMERIC"}(b.SORT||(b.SORT={}));b.SORT;!function(a){a[a.bkpt=1]="bkpt",a[a.nop=2]="nop",a[a["throw"]=3]="throw",a[a.getsuper=4]="getsuper",a[a.setsuper=5]="setsuper",a[a.dxns=6]="dxns",a[a.dxnslate=7]="dxnslate",a[a.kill=8]="kill",a[a.label=9]="label",a[a.lf32x4=10]="lf32x4",a[a.sf32x4=11]="sf32x4",a[a.ifnlt=12]="ifnlt",a[a.ifnle=13]="ifnle",a[a.ifngt=14]="ifngt",a[a.ifnge=15]="ifnge",a[a.jump=16]="jump",a[a.iftrue=17]="iftrue",a[a.iffalse=18]="iffalse",a[a.ifeq=19]="ifeq",a[a.ifne=20]="ifne",a[a.iflt=21]="iflt",a[a.ifle=22]="ifle",a[a.ifgt=23]="ifgt",a[a.ifge=24]="ifge",a[a.ifstricteq=25]="ifstricteq",a[a.ifstrictne=26]="ifstrictne",a[a.lookupswitch=27]="lookupswitch",a[a.pushwith=28]="pushwith",a[a.popscope=29]="popscope",a[a.nextname=30]="nextname",a[a.hasnext=31]="hasnext",a[a.pushnull=32]="pushnull",a[a.c=33]="c",a[a.pushundefined=33]="pushundefined",a[a.pushfloat=34]="pushfloat",a[a.nextvalue=35]="nextvalue",a[a.pushbyte=36]="pushbyte",a[a.pushshort=37]="pushshort",a[a.pushtrue=38]="pushtrue",a[a.pushfalse=39]="pushfalse",a[a.pushnan=40]="pushnan",a[a.pop=41]="pop",a[a.dup=42]="dup",a[a.swap=43]="swap",a[a.pushstring=44]="pushstring",a[a.pushint=45]="pushint",a[a.pushuint=46]="pushuint",a[a.pushdouble=47]="pushdouble",a[a.pushscope=48]="pushscope",a[a.pushnamespace=49]="pushnamespace",a[a.hasnext2=50]="hasnext2",a[a.li8=53]="li8",a[a.li16=54]="li16",a[a.li32=55]="li32",a[a.lf32=56]="lf32",a[a.lf64=57]="lf64",a[a.si8=58]="si8",a[a.si16=59]="si16",a[a.si32=60]="si32",a[a.sf32=61]="sf32",a[a.sf64=62]="sf64",a[a.newfunction=64]="newfunction",a[a.call=65]="call",a[a.construct=66]="construct",a[a.callmethod=67]="callmethod",a[a.callstatic=68]="callstatic",a[a.callsuper=69]="callsuper",a[a.callproperty=70]="callproperty",a[a.returnvoid=71]="returnvoid",a[a.returnvalue=72]="returnvalue",a[a.constructsuper=73]="constructsuper",a[a.constructprop=74]="constructprop",a[a.callsuperid=75]="callsuperid",a[a.callproplex=76]="callproplex",a[a.callinterface=77]="callinterface",a[a.callsupervoid=78]="callsupervoid",a[a.callpropvoid=79]="callpropvoid",a[a.sxi1=80]="sxi1",a[a.sxi8=81]="sxi8",a[a.sxi16=82]="sxi16",a[a.applytype=83]="applytype",a[a.pushfloat4=84]="pushfloat4",a[a.newobject=85]="newobject",a[a.newarray=86]="newarray",a[a.newactivation=87]="newactivation",a[a.newclass=88]="newclass",a[a.getdescendants=89]="getdescendants",a[a.newcatch=90]="newcatch",a[a.findpropstrict=93]="findpropstrict",a[a.findproperty=94]="findproperty",a[a.finddef=95]="finddef",a[a.getlex=96]="getlex",a[a.setproperty=97]="setproperty",a[a.getlocal=98]="getlocal",a[a.setlocal=99]="setlocal",a[a.getglobalscope=100]="getglobalscope",a[a.getscopeobject=101]="getscopeobject",a[a.getproperty=102]="getproperty",a[a.getouterscope=103]="getouterscope",a[a.initproperty=104]="initproperty",a[a.setpropertylate=105]="setpropertylate",a[a.deleteproperty=106]="deleteproperty",a[a.deletepropertylate=107]="deletepropertylate",a[a.getslot=108]="getslot",a[a.setslot=109]="setslot",a[a.getglobalslot=110]="getglobalslot",a[a.setglobalslot=111]="setglobalslot",a[a.convert_s=112]="convert_s",a[a.esc_xelem=113]="esc_xelem",a[a.esc_xattr=114]="esc_xattr",a[a.convert_i=115]="convert_i",a[a.convert_u=116]="convert_u",a[a.convert_d=117]="convert_d",a[a.convert_b=118]="convert_b",a[a.convert_o=119]="convert_o",a[a.checkfilter=120]="checkfilter",a[a.convert_f=121]="convert_f",a[a.unplus=122]="unplus",a[a.convert_f4=123]="convert_f4",a[a.coerce=128]="coerce",a[a.coerce_b=129]="coerce_b",a[a.coerce_a=130]="coerce_a",a[a.coerce_i=131]="coerce_i",a[a.coerce_d=132]="coerce_d",a[a.coerce_s=133]="coerce_s",a[a.astype=134]="astype",a[a.astypelate=135]="astypelate",a[a.coerce_u=136]="coerce_u",a[a.coerce_o=137]="coerce_o",a[a.negate=144]="negate",a[a.increment=145]="increment",a[a.inclocal=146]="inclocal",a[a.decrement=147]="decrement",a[a.declocal=148]="declocal",a[a["typeof"]=149]="typeof",a[a.not=150]="not",a[a.bitnot=151]="bitnot",a[a.add=160]="add",a[a.subtract=161]="subtract",a[a.multiply=162]="multiply",a[a.divide=163]="divide",a[a.modulo=164]="modulo",a[a.lshift=165]="lshift",a[a.rshift=166]="rshift",a[a.urshift=167]="urshift",a[a.bitand=168]="bitand",a[a.bitor=169]="bitor",a[a.bitxor=170]="bitxor",a[a.equals=171]="equals",a[a.strictequals=172]="strictequals",a[a.lessthan=173]="lessthan",a[a.lessequals=174]="lessequals",a[a.greaterthan=175]="greaterthan",a[a.greaterequals=176]="greaterequals",a[a["instanceof"]=177]="instanceof",a[a.istype=178]="istype",a[a.istypelate=179]="istypelate",a[a["in"]=180]="in",a[a.increment_i=192]="increment_i",a[a.decrement_i=193]="decrement_i",a[a.inclocal_i=194]="inclocal_i",a[a.declocal_i=195]="declocal_i",a[a.negate_i=196]="negate_i",a[a.add_i=197]="add_i",a[a.subtract_i=198]="subtract_i",a[a.multiply_i=199]="multiply_i",a[a.getlocal0=208]="getlocal0",a[a.getlocal1=209]="getlocal1",a[a.getlocal2=210]="getlocal2",a[a.getlocal3=211]="getlocal3",a[a.setlocal0=212]="setlocal0",a[a.setlocal1=213]="setlocal1",a[a.setlocal2=214]="setlocal2",a[a.setlocal3=215]="setlocal3",a[a.invalid=237]="invalid",a[a.debug=239]="debug",a[a.debugline=240]="debugline",a[a.debugfile=241]="debugfile",a[a.bkptline=242]="bkptline",a[a.timestamp=243]="timestamp"}(b.OP||(b.OP={}));var s=(b.OP,function(){function b(a,d){var e,f=[0];e=a.readU30();for(var g=1;e>g;++g)f.push(a.readS32());var h=[0];e=a.readU30();for(var g=1;e>g;++g)h.push(a.readU32());var i=[0/0];e=a.readU30();for(var g=1;e>g;++g)i.push(a.readDouble());c.start("Parse Strings");var j=[""];e=a.readU30();for(var g=1;e>g;++g)j.push(a.readUTFString(a.readU30()));this.positionAfterUTFStrings=a.position,c.stop(),this.ints=f,this.uints=h,this.doubles=i,this.strings=j,c.start("Parse Namespaces");var k=[void 0];e=a.readU30();for(var g=1;e>g;++g)k.push(p.parse(this,a,d.hash+g));c.stop(),c.start("Parse Namespace Sets");var l=[void 0];e=a.readU30();for(var g=1;e>g;++g){var m=a.readU30(),n=[];n.runtimeId=b._nextNamespaceSetID++;for(var o=0;m>o;++o)n.push(k[a.readU30()]);l.push(n)}c.stop(),this.namespaces=k,this.namespaceSets=l,c.start("Parse Multinames");var r=[void 0],s=[];e=a.readU30();for(var g=1;e>g;++g)r.push(q.parse(this,a,r,s));c.stop(),this.multinames=r}return b.prototype.getValue=function(b,c){switch(b){case 3:return this.ints[c];case 4:return this.uints[c];case 6:return this.doubles[c];case 1:return this.strings[c];case 11:return!0;case 10:return!1;case 12:return null;case 0:return void 0;case 8:case 23:return this.namespaces[c];case 7:case 14:case 15:case 16:case 17:case 18:case 19:case 20:return this.multinames[c];case 2:a.Debug.warning("TODO: CONSTANT.Float may be deprecated?")}},b._nextNamespaceSetID=1,b}());b.ConstantPool=s}(b.ABC||(b.ABC={}));b.ABC}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={}));var AbcFile=Shumway.AVM2.ABC.AbcFile,AbcStream=Shumway.AVM2.ABC.AbcStream,ConstantPool=Shumway.AVM2.ABC.ConstantPool,ClassInfo=Shumway.AVM2.ABC.ClassInfo,MetaDataInfo=Shumway.AVM2.ABC.MetaDataInfo,InstanceInfo=Shumway.AVM2.ABC.InstanceInfo,ScriptInfo=Shumway.AVM2.ABC.ScriptInfo,Trait=Shumway.AVM2.ABC.Trait,MethodInfo=Shumway.AVM2.ABC.MethodInfo,Multiname=Shumway.AVM2.ABC.Multiname,ASNamespace=Shumway.AVM2.ABC.Namespace,AbcFile=Shumway.AVM2.ABC.AbcFile,AbcStream=Shumway.AVM2.ABC.AbcStream,ConstantPool=Shumway.AVM2.ABC.ConstantPool,ClassInfo=Shumway.AVM2.ABC.ClassInfo,MetaDataInfo=Shumway.AVM2.ABC.MetaDataInfo,InstanceInfo=Shumway.AVM2.ABC.InstanceInfo,ScriptInfo=Shumway.AVM2.ABC.ScriptInfo,Trait=Shumway.AVM2.ABC.Trait,MethodInfo=Shumway.AVM2.ABC.MethodInfo,Multiname=Shumway.AVM2.ABC.Multiname,ASNamespace=Shumway.AVM2.ABC.Namespace,Bytecode=function(){function a(a){var b=a.readU8();this.op=b,this.originalPosition=a.position;var c=Shumway.AVM2.opcodeTable[b];c||unexpected("Unknown Op "+b),this.canThrow=c.canThrow;var d,e;switch(b){case OP_lookupswitch:var f=a.readS24();this.offsets=[];var e=a.readU30()+1;for(d=0;e>d;d++)this.offsets.push(a.readS24());this.offsets.push(f);break;default:for(d=0,e=c.operands.length;e>d;d++){var g=c.operands[d];switch(g.size){case"u08":this[g.name]=a.readU8();break;case"s08":this[g.name]=a.readS8();break;case"s16":this[g.name]=a.readS16();break;case"s24":this[g.name]=a.readS24();break;case"u30":this[g.name]=a.readU30();break;case"u32":this[g.name]=a.readU32();break;default:unexpected()}}}}return a.prototype={makeBlockHead:function(a){return this.succs?a:(this.bid=a,this.succs=[],this.preds=[],this.dominatees=[],a+1)},trace:function(a){this.succs&&a.writeLn("#"+this.bid)},toString:function(a){var b,c,d=Shumway.AVM2.opcodeTable[this.op],e=d.name.padRight(" ",20);if(this.op===OP_lookupswitch)for(e+="targets:",b=0,c=this.targets.length;c>b;b++)e+=(b>0?",":"")+this.targets[b].position;else for(b=0,c=d.operands.length;c>b;b++){var f=d.operands[b];if("offset"===f.name)e+="target:"+this.target.position;else{e+=f.name+": ";var g=this[f.name];if(a)switch(f.type){case"":e+=g;break;case"I":e+=a.constantPool.ints[g];break;case"U":e+=a.constantPool.uints[g];break;case"D":e+=a.constantPool.doubles[g];break;case"S":e+=a.constantPool.strings[g];break;case"N":e+=a.constantPool.namespaces[g];break;case"CI":e+=a.classes[g];break;case"M":e+=a.constantPool.multinames[g];break;default:e+="?"}else e+=g}c-1>b&&(e+=", ")}return e}},a}(),Analysis=function(){function a(a,b){var c=BitSetFunctor(a),d=c.ADDRESS_BITS_PER_WORD,e=c.BITS_PER_WORD,f=c.BIT_INDEX_MASK;c.singleton=function(a){var b=new c;return b.set(a.bid),b.count=1,b.dirty=0,b},c.fromBlocks=function(a){var b=new c;return b.setBlocks(a),b};var g=c.prototype;return c.singleword?(g.forEachBlock=function(a){var c=b,d=this.bits;if(d)for(var f=0;e>f;f++)d&1<<f&&a(c[f])},g.choose=function(){var a=b,c=this.bits;
if(c)for(var d=0;e>d;d++)if(c&1<<d)return a[d]},g.members=function(){var a=b,c=[],d=this.bits;if(d)for(var f=0;e>f;f++)d&1<<f&&c.push(a[f]);return c},g.setBlocks=function(a){for(var b=this.bits,c=0,d=a.length;d>c;c++){var e=a[c].bid;b|=1<<(e&f)}this.bits=b}):(g.forEachBlock=function(a){for(var c=b,d=this.bits,f=0,g=d.length;g>f;f++){var h=d[f];if(h)for(var i=0;e>i;i++)h&1<<i&&a(c[f*e+i])}},g.choose=function(){for(var a=b,c=this.bits,d=0,f=c.length;f>d;d++){var g=c[d];if(g)for(var h=0;e>h;h++)if(g&1<<h)return a[d*e+h]}},g.members=function(){for(var a=b,c=[],d=this.bits,f=0,g=d.length;g>f;f++){var h=d[f];if(h)for(var i=0;e>i;i++)h&1<<i&&c.push(a[f*e+i])}return c},g.setBlocks=function(a){for(var b=this.bits,c=0,e=a.length;e>c;c++){var g=a[c].bid;b[g>>d]|=1<<(g&f)}}),c}function b(a){Counter.count("Analysis"),this.method=a,this.method.code&&(Timer.start("Normalize"),this.normalizeBytecode(),Timer.stop())}return b.prototype={normalizeBytecode:function(){function a(a,b){if(a&&a[b])return a[b];var c=Object.create(Bytecode.prototype);return c.op=OP_invalid,c.position=b,a&&(a[b]=c),c}function b(a){0!==a--&&a<d.parameters.length&&(d.parameters[a].isUsed=!0)}for(var c,d=this.method,e=[],f=[],g=new AbcStream(this.method.code);g.remaining()>0;){var h=g.position;switch(c=new Bytecode(g),c.op){case OP_nop:case OP_label:e[h]=f.length;continue;case OP_lookupswitch:this.method.hasLookupSwitches=!0,c.targets=[];for(var i=c.offsets,j=0,k=i.length;k>j;j++)i[j]+=h;break;case OP_jump:case OP_iflt:case OP_ifnlt:case OP_ifle:case OP_ifnle:case OP_ifgt:case OP_ifngt:case OP_ifge:case OP_ifnge:case OP_ifeq:case OP_ifne:case OP_ifstricteq:case OP_ifstrictne:case OP_iftrue:case OP_iffalse:c.offset+=g.position;break;case OP_getlocal0:case OP_getlocal1:case OP_getlocal2:case OP_getlocal3:b(c.op-OP_getlocal0);break;case OP_getlocal:b(c.index)}c.position=f.length,e[h]=f.length,f.push(c)}for(var l,m={},n=0,o=f.length;o>n;n++)switch(c=f[n],c.op){case OP_lookupswitch:for(var i=c.offsets,j=0,k=i.length;k>j;j++)l=e[i[j]],c.targets.push(f[l]||a(m,i[j])),i[j]=l;break;case OP_jump:case OP_iflt:case OP_ifnlt:case OP_ifle:case OP_ifnle:case OP_ifgt:case OP_ifngt:case OP_ifge:case OP_ifnge:case OP_ifeq:case OP_ifne:case OP_ifstricteq:case OP_ifstrictne:case OP_iftrue:case OP_iffalse:l=e[c.offset],c.target=f[l]||a(m,c.offset),c.offset=l}this.bytecodes=f;for(var p=this.method.exceptions,j=0,k=p.length;k>j;j++){var q=p[j];q.start=e[q.start],q.end=e[q.end],q.offset=e[q.target],q.target=f[q.offset],q.target.exception=q}},detectBasicBlocks:function(){function b(a){for(var b=[],c=0,d=g.length;d>c;c++){var e=g[c];a.position>=e.start&&a.end.position<=e.end&&b.push(e.target)}return b}var c,d,e,f=this.bytecodes,g=this.method.exceptions,h=g.length>0,i={},j=0;for(j=f[0].makeBlockHead(j),d=0,e=f.length-1;e>d;d++)switch(c=f[d],c.op){case OP_returnvoid:case OP_returnvalue:case OP_throw:j=f[d+1].makeBlockHead(j);break;case OP_lookupswitch:for(var k=c.targets,l=0,m=k.length;m>l;l++)j=k[l].makeBlockHead(j);j=f[d+1].makeBlockHead(j);break;case OP_jump:case OP_iflt:case OP_ifnlt:case OP_ifle:case OP_ifnle:case OP_ifgt:case OP_ifngt:case OP_ifge:case OP_ifnge:case OP_ifeq:case OP_ifne:case OP_ifstricteq:case OP_ifstrictne:case OP_iftrue:case OP_iffalse:j=c.target.makeBlockHead(j),j=f[d+1].makeBlockHead(j)}switch(c=f[e],c.op){case OP_returnvoid:case OP_returnvalue:case OP_throw:break;case OP_lookupswitch:for(var k=c.targets,l=0,m=k.length;m>l;l++)j=k[l].makeBlockHead(j);break;case OP_jump:j=c.target.makeBlockHead(j);break;case OP_iflt:case OP_ifnlt:case OP_ifle:case OP_ifnle:case OP_ifgt:case OP_ifngt:case OP_ifge:case OP_ifnge:case OP_ifeq:case OP_ifne:case OP_ifstricteq:case OP_ifstrictne:case OP_iftrue:case OP_iffalse:j=c.target.makeBlockHead(j),f[d+1]=getInvalidTarget(null,d+1),j=f[d+1].makeBlockHead(j)}if(h)for(var l=0,m=g.length;m>l;l++){var n=g[l],o=f[n.start],p=f[n.end+1];j=o.makeBlockHead(j),p&&(j=p.makeBlockHead(j)),j=n.target.makeBlockHead(j)}var q=f[0];for(d=1,e=f.length;e>d;d++)if(f[d].succs){i[q.bid]=q,c=f[d-1],q.end=c;var r=f[d];switch(c.op){case OP_returnvoid:case OP_returnvalue:case OP_throw:break;case OP_lookupswitch:for(var l=0,m=c.targets.length;m>l;l++)q.succs.push(c.targets[l]);break;case OP_jump:q.succs.push(c.target);break;case OP_iflt:case OP_ifnlt:case OP_ifle:case OP_ifnle:case OP_ifgt:case OP_ifngt:case OP_ifge:case OP_ifnge:case OP_ifeq:case OP_ifne:case OP_ifstricteq:case OP_ifstrictne:case OP_iftrue:case OP_iffalse:q.succs.push(c.target),c.target!==r&&q.succs.push(r);break;default:q.succs.push(r)}if(h){var k=b(q);q.hasCatches=k.length>0,q.succs.push.apply(q.succs,k)}q=r}switch(i[q.bid]=q,c=f[e-1],c.op){case OP_lookupswitch:for(var l=0,m=c.targets.length;m>l;l++)q.succs.push(c.targets[l]);break;case OP_jump:q.succs.push(c.target)}q.end=c,this.BlockSet=a(j,i)},normalizeReachableBlocks:function(){var a,b=this.bytecodes[0],c=1,d=2,e=this.BlockSet,f=[],g={},h={},i=[b];for(h[b.bid]=!0;a=i.top();)if(g[a.bid]){if(g[a.bid]===c){g[a.bid]=d,f.push(a);for(var j=a.succs,k=0,l=j.length;l>k;k++)j[k].preds.push(a)}h[a.bid]=!1,i.pop()}else{g[a.bid]=c,h[a.bid]=!0;for(var j=a.succs,k=0,l=j.length;l>k;k++){var m=j[k];h[m.bid]&&(a.spbacks||(a.spbacks=new e),a.spbacks.set(m.bid)),!g[m.bid]&&i.push(m)}}this.blocks=f.reverse()},computeDominance:function(){function a(a,b,c){for(var d=b,e=c;d!==e;){for(;d>e;)d=a[d];for(;e>d;)e=a[e]}return d}var b=this.blocks,c=b.length,d=new Array(c);d[0]=0;for(var e={},f=0;c>f;f++)e[b[f].bid]=f;for(var g=!0;g;){g=!1;for(var f=1;c>f;f++){var h=b[f].preds,i=h.length,j=e[h[0].bid];if(!(j in d))for(var k=1;i>k&&(j=e[h[k].bid],!(j in d));k++);for(var k=0;i>k;k++){var l=e[h[k].bid];l!==j&&l in d&&(j=a(d,l,j))}d[f]!==j&&(d[f]=j,g=!0)}}b[0].dominator=b[0];for(var m,f=1;c>f;f++){m=b[f];var n=b[d[f]];m.dominator=n,n.dominatees.push(m),m.npreds=m.preds.length}var o=[b[0]];for(b[0].level||(b[0].level=0);m=o.shift();){for(var p=m.dominatees,k=0,i=p.length;i>k;k++)p[k].level=m.level+1;o.push.apply(o,p)}},analyzeControlFlow:function(){return this.detectBasicBlocks(),this.normalizeReachableBlocks(),this.computeDominance(),this.analyzedControlFlow=!0,!0},markLoops:function(){function a(a){for(var b,c,d,e=1,f={},g={},h=[],i=[],j=[],k=a.level+1,l=[a];b=l.top();)if(f[b.bid]){if(i.peek()===b){i.pop();var m=[];do c=h.pop(),g[c.bid]=!0,m.push(c);while(c!==b);(m.length>1||c.spbacks&&c.spbacks.get(c.bid))&&j.push(m)}l.pop()}else{f[b.bid]=e++,h.push(b),i.push(b);for(var n=b.succs,o=0,p=n.length;p>o;o++)if(d=n[o],!(d.level<k)){var q=d.bid;if(f[q]){if(!g[q])for(;f[i.peek().bid]>f[q];)i.pop()}else l.push(d)}}return j}function b(a){for(var b=new d,c=0,e=a.length;e>c;c++){var f=a[c],g=f.spbacks;if(g)for(var h=f.succs,i=0,j=h.length;j>i;i++){var k=h[i];g.get(k.bid)&&b.set(k.dominator.bid)}}return b.members()}function c(a,b){var c=new d;c.setBlocks(a),c.recount(),this.id=b,this.body=c,this.exit=new d,this.save={},this.head=new d,this.npreds=0}if(!this.analyzedControlFlow&&!this.analyzeControlFlow())return!1;var d=this.BlockSet,e=b(this.blocks);if(e.length<=0)return this.markedLoops=!0,!0;for(var f=e.sort(function(a,b){return a.level-b.level}),g=0,h=f.length-1;h>=0;h--){var i=f[h],j=a(i);if(0!==j.length)for(var k=0,l=j.length;l>k;k++){for(var m=j[k],n=new c(m,g++),o=0,p=m.length;p>o;o++){var q=m[o];if(q.level===i.level+1&&!q.loop){q.loop=n,n.head.set(q.bid);for(var r=q.preds,s=0,t=r.length;t>s;s++)n.body.get(r[s].bid)&&q.npreds--;n.npreds+=q.npreds}}for(var o=0,p=m.length;p>o;o++){var q=m[o];q.level===i.level+1&&(q.npreds=n.npreds)}n.head.recount()}}return this.markedLoops=!0,!0}},b}();!function(a){function b(a){for(var b=["leadingComments","loc"];a;)a.fields&&(b=a.fields.concat(b)),a=a.extends?e[a.extends]:null;return b}function c(a){return"_"+a}function d(f,g){if(!a[f]){for(var h=b(g),i=[],j=['this.type = "'+f+'";'],k=0,l=h.length;l>k;k++){var m=h[k];"@"===m.charAt(0)&&(h[k]=m=m.substr(1),i.push(m)),j.push("this."+m+" = _"+m+";")}var n=new Function(h.map(c),j.join("\n"));if(g.extends){var o=d(g.extends,e[g.extends]);n.prototype=Object.create(o.prototype)}Object.defineProperty(n.prototype,"_children",{value:i,writable:!0,configurable:!0,enumerable:!1}),a[f]=n}return a[f]}var e=a.lang={Node:{},Program:{"extends":"Node",fields:["@body"]},Statement:{"extends":"Node"},EmptyStatement:{"extends":"Statement"},BlockStatement:{"extends":"Statement",fields:["@body"]},ExpressionStatement:{"extends":"Statement",fields:["@expression"]},IfStatement:{"extends":"Statement",fields:["@test","@consequent","@alternate"]},LabeledStatement:{"extends":"Statement",fields:["@label","@body"]},BreakStatement:{"extends":"Statement",fields:["@label"]},ContinueStatement:{"extends":"Statement",fields:["@label"]},WithStatement:{"extends":"Statement",fields:["@object","@body"]},SwitchStatement:{"extends":"Statement",fields:["@discriminant","@cases","lexical"]},ReturnStatement:{"extends":"Statement",fields:["@argument"]},ThrowStatement:{"extends":"Statement",fields:["@argument"]},TryStatement:{"extends":"Statement",fields:["@block","@handlers","@finalizer"]},WhileStatement:{"extends":"Statement",fields:["@test","@body"]},DoWhileStatement:{"extends":"Statement",fields:["@body","@test"]},ForStatement:{"extends":"Statement",fields:["@init","@test","@update","@body"]},ForInStatement:{"extends":"Statement",fields:["@left","@right","@body","each"]},LetStatement:{"extends":"Statement",fields:["@head","@body"]},DebuggerStatement:{"extends":"Statement"},Declaration:{"extends":"Statement"},FunctionDeclaration:{"extends":"Declaration",fields:["@id","@params","@body","@decltype","generator","expression","@modifiers"]},VariableDeclaration:{"extends":"Declaration",fields:["kind","@declarations"]},VariableDeclarator:{"extends":"Node",fields:["@id","@init","@decltype","@arguments"]},Expression:{"extends":"Pattern"},ThisExpression:{"extends":"Expression"},ArrayExpression:{"extends":"Expression",fields:["@elements"]},ObjectExpression:{"extends":"Expression",fields:["@properties"]},Property:{"extends":"Node",fields:["@key","@value","kind"]},FunctionExpression:{"extends":"Expression",fields:["@id","@params","@body","@decltype","generator","expression"]},SequenceExpression:{"extends":"Expression",fields:["@expressions"]},UnaryExpression:{"extends":"Expression",fields:["operator","@argument","prefix"]},BinaryExpression:{"extends":"Expression",fields:["operator","@left","@right"]},AssignmentExpression:{"extends":"Expression",fields:["@left","operator","@right"]},UpdateExpression:{"extends":"Expression",fields:["operator","@argument","prefix"]},LogicalExpression:{"extends":"Expression",fields:["operator","@left","@right"]},ConditionalExpression:{"extends":"Expression",fields:["@test","@consequent","@alternate"]},NewExpression:{"extends":"Expression",fields:["@callee","@arguments"]},CallExpression:{"extends":"Expression",fields:["@callee","@arguments"]},MemberExpression:{"extends":"Expression",fields:["@object","@property","computed","kind"]},YieldExpression:{"extends":"Expression",fields:["@argument"]},ComprehensionExpression:{"extends":"Expression",fields:["@blocks","@filter"]},GeneratorExpression:{"extends":"Expression",fields:["@blocks","@filter"]},LetExpression:{"extends":"Expression",fields:["@head","@body"]},Pattern:{"extends":"Node"},ObjectPattern:{"extends":"Pattern",fields:["@properties"]},ArrayPattern:{"extends":"Pattern",fields:["@elements"]},SwitchCase:{"extends":"Node",fields:["@test","@consequent"]},CatchClause:{"extends":"Node",fields:["@param","@guard","@body"]},Identifier:{"extends":"Expression",fields:["name","kind"]},Literal:{"extends":"Expression",fields:["value"]},Type:{"extends":"Node"},PointerType:{"extends":"Type",fields:["@base"]},ArrayType:{"extends":"PointerType",fields:["length"]},StructType:{"extends":"Type",fields:["@id","@members","isUnion"]},MemberDeclarator:{"extends":"Node",fields:["modifiers","@declarator"]},ArrowType:{"extends":"Type",fields:["@params","@return"]},TypeIdentifier:{"extends":"Type",fields:["name"]},TypeAliasDirective:{"extends":"Node",fields:["@original","@alias"]},CastExpression:{"extends":"Expression",fields:["@as","@argument"]}};a.allFields=b;for(var f in e)d(f,e[f]);a.makePass=function(a,b){return function(c){for(var d,e,f,g=this._children,h=0,i=g.length;i>h;h++)if(f=this[g[h]])if(f instanceof Array){e=this[g[h]]=[];for(var j=0,k=f.length;k>j;j++)f[j]?"function"==typeof f[j][a]&&(d=f[j][a](c),null!==d&&e.push(d)):e.push(f[j])}else"function"==typeof f[a]&&(d=f[a](c),this[g[h]]=null===d?void 0:d);return"function"==typeof this[b]?(c.logger&&"undefined"!=typeof this.loc?(c.logger.push(this),d=this[b](c),c.logger.pop()):d=this[b](c),null===d?null:d?d:this):this}},a.makePass=function(a,b,c){return function(d){for(var e,f,g,h,i,j=this._children,k=0,l=j.length;l>k;k++)if(h=c?j.length-1-k:k,g=this[j[h]])if(g instanceof Array){f=this[j[h]]=[];for(var m,m=0,n=g.length;n>m;m++)i=c?g.length-1-m:m,g[i]?"function"==typeof g[i][a]&&(e=g[i][a](d),null!==e&&(c?f.unshift(e):f.push(e))):c?f.unshift(g[i]):f.push(g[i])}else"function"==typeof g[a]&&(e=g[a](d),this[j[h]]=null===e?void 0:e);return"function"==typeof this[b]?(d.logger&&"undefined"!=typeof this.loc?(d.logger.push(this),e=this[b](d),d.logger.pop()):e=this[b](d),null===e?null:e?e:this):this}},a.lift=function g(c){if(!c)return c;if(c instanceof Array)return c.map(function(a){return a?g(a):a});var d=c.type,f=a[d];if(!f)throw new Error("unknown node type `"+d+"'");var h=new f;h.loc=c.loc;for(var i=b(e[d]),j=0,k=i.length;k>j;j++){var l;"@"===i[j].charAt(0)?(l=i[j].substr(1),c[l]&&(h[l]=g(c[l]))):(l=i[j],h[l]=c[l])}return h},a.flatten=function h(a){if(!a)return a;if(a instanceof Array)return a.map(function(a){return h(a)});for(var c=a.type,d={type:c},f=b(e[c]),g=0,i=f.length;i>g;g++){var j;"@"===f[g].charAt(0)?(j=f[g].substr(1),d[j]=a[j]?h(a[j]):null):(j=f[g],d[j]=a[j])}return d}}("undefined"==typeof exports?estransform={}:exports),function(a){function b(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0}}}function c(a){var b,c=a.length,d=[];for(b=0;c>b;b+=1)d[b]=a.charAt(b);return d}function d(a,b){var c="";for(b|=0;b>0;b>>>=1,a+=a)1&b&&(c+=a);return c}function e(a){var b,c;return b=a.length,c=a.charAt(b-1),"\r"===c||"\n"===c}function f(a){var b,c,d={};for(b in a)a.hasOwnProperty(b)&&(c=a[b],d[b]="object"==typeof c&&null!==c?f(c):c);return d}function g(a,b){function c(a){return"object"==typeof a&&a instanceof Object&&!(a instanceof RegExp)}var d,e;for(d in b)b.hasOwnProperty(d)&&(e=b[d],c(e)?c(a[d])?g(a[d],e):a[d]=g({},e):a[d]=e);return a}function h(a){var b,c,d,e,f;if(a!==a)throw new Error("Numeric literal whose value is NaN");if(0>1/a)throw new Error("Numeric literal whose value is negative");if(a===1/0)return O?"null":P?"1e400":"1e+400";if(b=""+a,!P||b.length<3)return b;for(c=b.indexOf("."),O||"0"!==b.charAt(0)||1!==c||(c=0,b=b.slice(1)),d=b,b=b.replace("e+","e"),e=0,(f=d.indexOf("e"))>0&&(e=+d.slice(f+1),d=d.slice(0,f)),c>=0&&(e-=d.length-c-1,d=+(d.slice(0,c)+d.slice(c+1))+""),f=0;"0"===d.charAt(d.length+f-1);)f-=1;return 0!==f&&(e-=f,d=d.slice(0,f)),0!==e&&(d+="e"+e),(d.length<b.length||Q&&a>1e12&&Math.floor(a)===a&&(d="0x"+a.toString(16)).length<b.length)&&+d===a&&(b=d),b}function i(a,b){var c=a.charCodeAt(0),d=c.toString(16),e="\\";switch(a){case"\b":e+="b";break;case"\f":e+="f";break;case"	":e+="t";break;default:e+=O||c>255?"u"+"0000".slice(d.length)+d:"\x00"===a&&"0123456789".indexOf(b)<0?"0":""===a?"v":"x"+"00".slice(d.length)+d}return e}function j(a){var b="\\";switch(a){case"\\":b+="\\";break;case"\n":b+="n";break;case"\r":b+="r";break;case"\u2028":b+="u2028";break;case"\u2029":b+="u2029";break;default:throw new Error("Incorrectly classified character")}return b}function k(a){var b,d,e,f,g="",h=0,k=0;for("undefined"==typeof a[0]&&(a=c(a)),b=0,d=a.length;d>b;b+=1){if(e=a[b],"'"===e)h+=1;else if('"'===e)k+=1;else if("/"===e&&O)g+="\\";else{if("\\\n\r\u2028\u2029".indexOf(e)>=0){g+=j(e);continue}if(O&&" ">e||!(O||S||e>=" "&&"~">=e)){g+=i(e,a[b+1]);continue}}g+=e}for(f=!("double"===R||"auto"===R&&h>k),a=g,g=f?"'":'"',"undefined"==typeof a[0]&&(a=c(a)),b=0,d=a.length;d>b;b+=1)e=a[b],("'"===e&&f||'"'===e&&!f)&&(g+="\\"),g+=e;return g+(f?"'":'"')}function l(a){return"	\f Â ".indexOf(a)>=0||a.charCodeAt(0)>=5760&&"áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€ï»¿".indexOf(a)>=0}function m(a){return"\n\r\u2028\u2029".indexOf(a)>=0}function n(a){return"$"===a||"_"===a||"\\"===a||a>="a"&&"z">=a||a>="A"&&"Z">=a||a>="0"&&"9">=a||a.charCodeAt(0)>=128&&I.NonAsciiIdentifierPart.test(a)}function o(a,b){var c=a.charAt(a.length-1),d=b.charAt(0);return("+"===c||"-"===c)&&c===d||n(c)&&n(d)?a+" "+b:l(c)||m(c)||l(d)||m(d)?a+b:a+U+b}function p(a){return M+a}function q(a){var b;for(b=a.length-1;b>=0&&!m(a.charAt(b));b-=1);return a.length-1-b}function r(a,b){var c,d,e,f,g,h,i;for(c=a.split(/\r\n|[\r\n]/),h=Number.MAX_VALUE,d=1,e=c.length;e>d;d+=1){for(f=c[d],g=0;g<f.length&&l(f[g]);)g+=1;h>g&&(h=g)}for("undefined"!=typeof b?(i=M,"*"===c[1][h]&&(b+=" "),M=b):(h%2===1&&(h-=1),i=M),d=1,e=c.length;e>d;d+=1)c[d]=p(c[d].slice(h));return M=i,c.join("\n")}function s(a,b){return"Line"===a.type?e(a.value)?"//"+a.value:"//"+a.value+"\n":X.format.indent.adjustMultilineComment&&/[\n\r]/.test(a.value)?r("/*"+a.value+"*/",b):"/*"+a.value+"*/"}function t(a,b){var c,f,g,h,i,j,k;if(a.leadingComments){for(h=b,g=a.leadingComments[0],b=s(g),e(b)||(b+="\n"),c=1,f=a.leadingComments.length;f>c;c+=1)g=a.leadingComments[c],k=s(g),e(k)||(k+="\n"),b+=p(k);b+=p(h)}if(a.trailingComments)for(i=!e(b),j=d(" ",q(M+b+N)),c=0,f=a.trailingComments.length;f>c;c+=1)g=a.trailingComments[c],i?(b+=0===c?N:j,b+=s(g,j)):b+=p(s(g)),c===f-1||e(b)||(b+="\n");return b}function u(a,b,c){return c>b?"("+a+")":a}function v(a,b){var c,d,e;return e=!X.comment||!a.leadingComments,a.type===F.BlockStatement&&e?U+z(a):a.type===F.EmptyStatement&&e?";":(c=M,M+=N,d=T+p(z(a,{semicolonOptional:b})),M=c,d)}function w(a,b){return a.type!==F.BlockStatement||X.comment&&a.leadingComments||e(b)?e(b)?p(""):(""===T?" ":T)+p(""):U}function x(a){var b,c,d;for(b="(",c=0,d=a.params.length;d>c;c+=1)b+=a.params[c].name,d>c+1&&(b+=","+U);return b+")"+v(a.body)}function y(a,b){var c,d,f,g,i,j,l,m,n,q,r;switch(d=b.precedence,n=b.allowIn,q=b.allowCall,a.type){case F.SequenceExpression:for(c="",n|=G.Sequence<d,i=0,j=a.expressions.length;j>i;i+=1)c+=y(a.expressions[i],{precedence:G.Assignment,allowIn:n,allowCall:!0}),j>i+1&&(c+=","+U);c=u(c,G.Sequence,d);break;case F.AssignmentExpression:n|=G.Assignment<d,c=u(y(a.left,{precedence:G.Call,allowIn:n,allowCall:!0})+U+a.operator+U+y(a.right,{precedence:G.Assignment,allowIn:n,allowCall:!0}),G.Assignment,d);break;case F.ConditionalExpression:n|=G.Conditional<d,c=u(y(a.test,{precedence:G.LogicalOR,allowIn:n,allowCall:!0})+U+"?"+U+y(a.consequent,{precedence:G.Assignment,allowIn:n,allowCall:!0})+U+":"+U+y(a.alternate,{precedence:G.Assignment,allowIn:n,allowCall:!0}),G.Conditional,d);break;case F.LogicalExpression:case F.BinaryExpression:f=H[a.operator],n|=d>f,c=o(y(a.left,{precedence:f,allowIn:n,allowCall:!0}),a.operator),m=y(a.right,{precedence:f+1,allowIn:n,allowCall:!0}),"/"===a.operator&&"/"===c.charAt(c.length-1)?c+=" "+m:c=o(c,m),c="in"!==a.operator||n?u(c,f,d):"("+c+")";break;case F.CallExpression:for(c=y(a.callee,{precedence:G.Call,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!1}),c+="(",i=0,j=a.arguments.length;j>i;i+=1)c+=y(a.arguments[i],{precedence:G.Assignment,allowIn:!0,allowCall:!0}),j>i+1&&(c+=","+U);c+=")",c=q?u(c,G.Call,d):"("+c+")";break;case F.NewExpression:if(j=a.arguments.length,r=void 0===b.allowUnparenthesizedNew||b.allowUnparenthesizedNew,c=o("new",y(a.callee,{precedence:G.New,allowIn:!0,allowCall:!1,allowUnparenthesizedNew:r&&!V&&0===j})),!r||V||j>0){for(c+="(",i=0;j>i;i+=1)c+=y(a.arguments[i],{precedence:G.Assignment,allowIn:!0,allowCall:!0}),j>i+1&&(c+=","+U);c+=")"}c=u(c,G.New,d);break;case F.MemberExpression:c=y(a.object,{precedence:G.Call,allowIn:!0,allowCall:q,allowUnparenthesizedNew:!1}),a.computed?c+="["+y(a.property,{precedence:G.Sequence,allowIn:!0,allowCall:q})+"]":(a.object.type===F.Literal&&"number"==typeof a.object.value&&c.indexOf(".")<0&&(/[eExX]/.test(c)||c.length>=2&&"0"===c[0]||(c+=".")),c+="."+a.property.name),c=u(c,G.Member,d);break;case F.UnaryExpression:m=y(a.argument,{precedence:G.Unary+(a.argument.type===F.UnaryExpression&&a.operator.length<3&&a.argument.operator===a.operator?1:0),allowIn:!0,allowCall:!0}),""===U?c=o(a.operator,m):(c=a.operator,c.length>2&&(c+=" "),c+=m),c=u(c,G.Unary,d);break;case F.UpdateExpression:c=a.prefix?u(a.operator+y(a.argument,{precedence:G.Unary,allowIn:!0,allowCall:!0}),G.Unary,d):u(y(a.argument,{precedence:G.Postfix,allowIn:!0,allowCall:!0})+a.operator,G.Postfix,d);break;case F.FunctionExpression:c="function",c+=a.id?" "+a.id.name:U,c+=x(a);break;case F.ArrayExpression:if(!a.elements.length){c="[]";break}for(c="["+T,g=M,M+=N,i=0,j=a.elements.length;j>i;i+=1)a.elements[i]?c+=p(y(a.elements[i],{precedence:G.Assignment,allowIn:!0,allowCall:!0})):(c+=p(""),i+1===j&&(c+=",")),j>i+1&&(c+=","+T);M=g,e(c)||(c+=T),c+=p("]");break;case F.Property:c="get"===a.kind||"set"===a.kind?a.kind+" "+y(a.key,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+x(a.value):y(a.key,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+":"+U+y(a.value,{precedence:G.Assignment,allowIn:!0,allowCall:!0});break;case F.ObjectExpression:if(!a.properties.length){c="{}";break}for(c="{"+T,g=M,M+=N,i=0,j=a.properties.length;j>i;i+=1)c+=p(y(a.properties[i],{precedence:G.Sequence,allowIn:!0,allowCall:!0})),j>i+1&&(c+=","+T);M=g,e(c)||(c+=T),c+=p("}");break;case F.ThisExpression:c="this";break;case F.Identifier:c=a.name;break;case F.Literal:if(a.hasOwnProperty("raw")&&Y)try{if(l=Y(a.raw).body[0].expression,l.type===F.Literal&&l.value===a.value){c=a.raw;break}}catch(s){}if(null===a.value){c="null";break}if("string"==typeof a.value){c=k(a.value);break}if("number"==typeof a.value){c=h(a.value);break}c=a.value.toString()}if(void 0===c)throw new Error("Unknown expression type: "+a.type);return c}function z(a,b){var c,d,f,g,h,i,j,k;switch(i=!0,k=";",b&&(i=void 0===b.allowIn||b.allowIn,W||b.semicolonOptional!==!0||(k="")),a.type){case F.BlockStatement:for(f="{"+T,g=M,M+=N,c=0,d=a.body.length;d>c;c+=1)j=p(z(a.body[c],{semicolonOptional:c===d-1})),f+=j,e(j)||(f+=T);M=g,f+=p("}");break;case F.BreakStatement:f=a.label?"break "+a.label.name+k:"break"+k;break;case F.ContinueStatement:f=a.label?"continue "+a.label.name+k:"continue"+k;break;case F.DoWhileStatement:f=o("do",v(a.body)),f+=w(a.body,f),f+="while"+U+"("+y(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")"+k;break;case F.CatchClause:g=M,M+=N,f="catch"+U+"("+y(a.param,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")",M=g,f+=v(a.body);break;case F.DebuggerStatement:f="debugger"+k;break;case F.EmptyStatement:f=";";break;case F.ExpressionStatement:f=y(a.expression,{precedence:G.Sequence,allowIn:!0,allowCall:!0}),"{"===f.charAt(0)||"function"===f.slice(0,8)&&" (".indexOf(f.charAt(8))>=0?f="("+f+")"+k:f+=k;break;case F.VariableDeclarator:f=a.init?a.id.name+U+"="+U+y(a.init,{precedence:G.Assignment,allowIn:i,allowCall:!0}):a.id.name;break;case F.VariableDeclaration:if(f=a.kind,1===a.declarations.length&&a.declarations[0].init&&a.declarations[0].init.type===F.FunctionExpression)f+=" "+z(a.declarations[0],{allowIn:i});else{for(g=M,M+=N,h=a.declarations[0],f+=X.comment&&h.leadingComments?"\n"+p(z(h,{allowIn:i})):" "+z(h,{allowIn:i}),c=1,d=a.declarations.length;d>c;c+=1)h=a.declarations[c],f+=X.comment&&h.leadingComments?","+T+p(z(h,{allowIn:i})):","+U+z(h,{allowIn:i});M=g}f+=k;break;case F.ThrowStatement:f=o("throw",y(a.argument,{precedence:G.Sequence,allowIn:!0,allowCall:!0}))+k;break;case F.TryStatement:for(f="try"+v(a.block),f+=w(a.block,f),c=0,d=a.handlers.length;d>c;c+=1)f+=z(a.handlers[c]),(a.finalizer||c+1!==d)&&(f+=w(a.handlers[c].body,f));a.finalizer&&(f+="finally"+v(a.finalizer));break;case F.SwitchStatement:if(g=M,M+=N,f="switch"+U+"("+y(a.discriminant,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")"+U+"{"+T,M=g,a.cases)for(c=0,d=a.cases.length;d>c;c+=1)j=p(z(a.cases[c],{semicolonOptional:c===d-1})),f+=j,e(j)||(f+=T);f+=p("}");break;case F.SwitchCase:for(g=M,M+=N,f=a.test?o("case",y(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0}))+":":"default:",c=0,d=a.consequent.length,d&&a.consequent[0].type===F.BlockStatement&&(j=v(a.consequent[0]),f+=j,c=1),c===d||e(f)||(f+=T);d>c;c+=1)j=p(z(a.consequent[c],{semicolonOptional:c===d-1&&""===k})),f+=j,c+1===d||e(j)||(f+=T);M=g;break;case F.IfStatement:g=M,M+=N,a.alternate?a.alternate.type===F.IfStatement?(f="if"+U+"("+y(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")",M=g,f+=v(a.consequent),f+=w(a.consequent,f),f+="else "+z(a.alternate)):(f="if"+U+"("+y(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")",M=g,f+=v(a.consequent),f+=w(a.consequent,f),f+="else",f=o(f,v(a.alternate,""===k))):(f="if"+U+"("+y(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")",M=g,f+=v(a.consequent,""===k));break;case F.ForStatement:g=M,M+=N,f="for"+U+"(",f+=a.init?a.init.type===F.VariableDeclaration?z(a.init,{allowIn:!1}):y(a.init,{precedence:G.Sequence,allowIn:!1,allowCall:!0})+";":";",f+=a.test?U+y(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+";":";",f+=a.update?U+y(a.update,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")":")",M=g,f+=v(a.body,""===k);break;case F.ForInStatement:f="for"+U+"(",a.left.type===F.VariableDeclaration?(g=M,M+=N+N,f+=a.left.kind+" "+z(a.left.declarations[0],{allowIn:!1}),M=g):(g=M,M+=N,f+=y(a.left,{precedence:G.Call,allowIn:!0,allowCall:!0}),M=g),g=M,M+=N,f=o(f,"in"),f=o(f,y(a.right,{precedence:G.Sequence,allowIn:!0,allowCall:!0}))+")",M=g,f+=v(a.body,""===k);break;case F.LabeledStatement:f=a.label.name+":"+v(a.body,""===k);break;case F.Program:for(f="",c=0,d=a.body.length;d>c;c+=1)j=p(z(a.body[c],{semicolonOptional:c===d-1})),f+=j,d>c+1&&!e(j)&&(f+=T);break;case F.FunctionDeclaration:f="function"+U,a.id&&(f+=(""===U?" ":"")+a.id.name),f+=x(a);break;case F.ReturnStatement:f=a.argument?o("return",y(a.argument,{precedence:G.Sequence,allowIn:!0,allowCall:!0}))+k:"return"+k;break;case F.WhileStatement:g=M,M+=N,f="while"+U+"("+y(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")",M=g,f+=v(a.body,""===k);break;case F.WithStatement:g=M,M+=N,f="with"+U+"("+y(a.object,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")",M=g,f+=v(a.body,""===k)}if(void 0===f)throw new Error("Unknown statement type: "+a.type);return X.comment?t(a,f):f}function A(a,c){var e=b();switch("undefined"!=typeof c?("string"==typeof c.indent&&(e.format.indent.style=c.indent),"number"==typeof c.base&&(e.format.indent.base=c.base),c=g(e,c),N=c.format.indent.style,M="string"==typeof c.base?c.base:d(N,c.format.indent.base)):(c=e,N=c.format.indent.style,M=d(N,c.format.indent.base)),O=c.format.json,P=c.format.renumber,Q=O?!1:c.format.hexadecimal,R=O?"double":c.format.quotes,S=c.format.escapeless,c.format.compact?T=U=N=M="":(T="\n",U=" "),V=c.format.parentheses,W=c.format.semicolons,Y=O?null:c.parse,X=c,a.type){case F.BlockStatement:case F.BreakStatement:case F.CatchClause:case F.ContinueStatement:case F.DoWhileStatement:case F.DebuggerStatement:case F.EmptyStatement:case F.ExpressionStatement:case F.ForStatement:case F.ForInStatement:case F.FunctionDeclaration:case F.IfStatement:case F.LabeledStatement:case F.Program:case F.ReturnStatement:case F.SwitchStatement:case F.SwitchCase:case F.ThrowStatement:case F.TryStatement:case F.VariableDeclaration:case F.VariableDeclarator:case F.WhileStatement:case F.WithStatement:return z(a);case F.AssignmentExpression:case F.ArrayExpression:case F.BinaryExpression:case F.CallExpression:case F.ConditionalExpression:case F.FunctionExpression:case F.Identifier:case F.Literal:case F.LogicalExpression:case F.MemberExpression:case F.NewExpression:case F.ObjectExpression:case F.Property:case F.SequenceExpression:case F.ThisExpression:case F.UnaryExpression:case F.UpdateExpression:return y(a,{precedence:G.Sequence,allowIn:!0,allowCall:!0})}throw new Error("Unknown node type: "+a.type)}function B(a,b){var c,d,e,f,g,h,i,j;for(c=[a],d=[];c.length;)if(e=c.pop()){if(f=b.enter?b.enter(e):void 0,f===K.Break)return;if(c.push(null),d.push(e),f!==K.Skip)for(i=J[e.type],g=i.length;(g-=1)>=0;)if(j=e[i[g]])if(L(j))for(h=j.length;(h-=1)>=0;)j[h]&&c.push(j[h]);else c.push(j)}else if(e=d.pop(),f=b.leave?b.leave(e):void 0,f===K.Break)return}function C(a,b){var c,d,e,f;for(d=a.length,e=0;d;)c=d>>>1,f=e+c,b(a[f])?d=c:(e=f+1,d-=c+1);return e}function D(a,b){var c,d;return c=C(b,function(b){return b.range[0]>a.range[0]}),a.extendedRange=[a.range[0],a.range[1]],c!==b.length&&(a.extendedRange[1]=b[c].range[0]),c-=1,c>=0&&(c<b.length?a.extendedRange[0]=b[c].range[1]:d.length&&(a.extendedRange[1]=b[b.length-1].range[0])),a}function E(a,b,c){var d,e,g,h=[];if(!a.range)throw new Error("attachComments needs range information");if(!c.length){if(b.length){for(g=0,e=b.length;e>g;g+=1)d=f(b[g]),d.extendedRange=[0,a.range[0]],h.push(d);a.leadingComments=h}return a}for(g=0,e=b.length;e>g;g+=1)h.push(D(f(b[g]),c));return B(a,{cursor:0,enter:function(a){for(var b;this.cursor<h.length&&(b=h[this.cursor],!(b.extendedRange[1]>a.range[0]));)b.extendedRange[1]===a.range[0]?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.push(b),h.splice(this.cursor,1)):this.cursor+=1;return this.cursor===h.length?K.Break:h[this.cursor].extendedRange[0]>a.range[1]?K.Skip:void 0}}),B(a,{cursor:0,leave:function(a){for(var b;this.cursor<h.length&&(b=h[this.cursor],!(a.range[1]<b.extendedRange[0]));)a.range[1]===b.extendedRange[0]?(a.trailingComments||(a.trailingComments=[]),a.trailingComments.push(b),h.splice(this.cursor,1)):this.cursor+=1;return this.cursor===h.length?K.Break:h[this.cursor].extendedRange[0]>a.range[1]?K.Skip:void 0}}),a}var F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y;F={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},G={Sequence:0,Assignment:1,Conditional:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,Member:17,Primary:18},H={"||":G.LogicalOR,"&&":G.LogicalAND,"|":G.BitwiseOR,"^":G.BitwiseXOR,"&":G.BitwiseAND,"==":G.Equality,"!=":G.Equality,"===":G.Equality,"!==":G.Equality,"<":G.Relational,">":G.Relational,"<=":G.Relational,">=":G.Relational,"in":G.Relational,"instanceof":G.Relational,"<<":G.BitwiseSHIFT,">>":G.BitwiseSHIFT,">>>":G.BitwiseSHIFT,"+":G.Additive,"-":G.Additive,"*":G.Multiplicative,"%":G.Multiplicative,"/":G.Multiplicative},I={NonAsciiIdentifierPart:new RegExp("[ÂªÂµÂºÃ€-Ã–Ã˜-Ã¶Ã¸-ËË†-Ë‘Ë -Ë¤Ë¬Ë®Ì€-Í´Í¶Í·Íº-Í½Î†Îˆ-ÎŠÎŒÎŽ-Î¡Î£-ÏµÏ·-ÒÒƒ-Ò‡ÒŠ-Ô§Ô±-Õ–Õ™Õ¡-Ö‡Ö‘-Ö½Ö¿××‚×„×…×‡×-×ª×°-×²Ø-ØšØ -Ù©Ù®-Û“Û•-ÛœÛŸ-Û¨Ûª-Û¼Û¿Ü-ÝŠÝ-Þ±ß€-ßµßºà €-à ­à¡€-à¡›à¢ à¢¢-à¢¬à£¤-à£¾à¤€-à¥£à¥¦-à¥¯à¥±-à¥·à¥¹-à¥¿à¦-à¦ƒà¦…-à¦Œà¦à¦à¦“-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦¼-à§„à§‡à§ˆà§‹-à§Žà§—à§œà§à§Ÿ-à§£à§¦-à§±à¨-à¨ƒà¨…-à¨Šà¨à¨à¨“-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à¨¼à¨¾-à©‚à©‡à©ˆà©‹-à©à©‘à©™-à©œà©žà©¦-à©µàª-àªƒàª…-àªàª-àª‘àª“-àª¨àªª-àª°àª²àª³àªµ-àª¹àª¼-à«…à«‡-à«‰à«‹-à«à«à« -à«£à«¦-à«¯à¬-à¬ƒà¬…-à¬Œà¬à¬à¬“-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬¼-à­„à­‡à­ˆà­‹-à­à­–à­—à­œà­à­Ÿ-à­£à­¦-à­¯à­±à®‚à®ƒà®…-à®Šà®Ž-à®à®’-à®•à®™à®šà®œà®žà®Ÿà®£à®¤à®¨-à®ªà®®-à®¹à®¾-à¯‚à¯†-à¯ˆà¯Š-à¯à¯à¯—à¯¦-à¯¯à°-à°ƒà°…-à°Œà°Ž-à°à°’-à°¨à°ª-à°³à°µ-à°¹à°½-à±„à±†-à±ˆà±Š-à±à±•à±–à±˜à±™à± -à±£à±¦-à±¯à²‚à²ƒà²…-à²Œà²Ž-à²à²’-à²¨à²ª-à²³à²µ-à²¹à²¼-à³„à³†-à³ˆà³Š-à³à³•à³–à³žà³ -à³£à³¦-à³¯à³±à³²à´‚à´ƒà´…-à´Œà´Ž-à´à´’-à´ºà´½-àµ„àµ†-àµˆàµŠ-àµŽàµ—àµ -àµ£àµ¦-àµ¯àµº-àµ¿à¶‚à¶ƒà¶…-à¶–à¶š-à¶±à¶³-à¶»à¶½à·€-à·†à·Šà·-à·”à·–à·˜-à·Ÿà·²à·³à¸-à¸ºà¹€-à¹Žà¹-à¹™àºàº‚àº„àº‡àºˆàºŠàºàº”-àº—àº™-àºŸàº¡-àº£àº¥àº§àºªàº«àº­-àº¹àº»-àº½à»€-à»„à»†à»ˆ-à»à»-à»™à»œ-à»Ÿà¼€à¼˜à¼™à¼ -à¼©à¼µà¼·à¼¹à¼¾-à½‡à½‰-à½¬à½±-à¾„à¾†-à¾—à¾™-à¾¼à¿†á€€-á‰á-á‚á‚ -áƒ…áƒ‡áƒáƒ-áƒºáƒ¼-á‰ˆá‰Š-á‰á‰-á‰–á‰˜á‰š-á‰á‰ -áŠˆáŠŠ-áŠáŠ-áŠ°áŠ²-áŠµáŠ¸-áŠ¾á‹€á‹‚-á‹…á‹ˆ-á‹–á‹˜-áŒáŒ’-áŒ•áŒ˜-ášá-áŸáŽ€-áŽáŽ -á´á-á™¬á™¯-á™¿áš-áššáš -á›ªá›®-á›°áœ€-áœŒáœŽ-áœ”áœ -áœ´á€-á“á -á¬á®-á°á²á³áž€-áŸ“áŸ—áŸœáŸáŸ -áŸ©á ‹-á á -á ™á  -á¡·á¢€-á¢ªá¢°-á£µá¤€-á¤œá¤ -á¤«á¤°-á¤»á¥†-á¥­á¥°-á¥´á¦€-á¦«á¦°-á§‰á§-á§™á¨€-á¨›á¨ -á©žá© -á©¼á©¿-áª‰áª-áª™áª§á¬€-á­‹á­-á­™á­«-á­³á®€-á¯³á°€-á°·á±€-á±‰á±-á±½á³-á³’á³”-á³¶á´€-á·¦á·¼-á¼•á¼˜-á¼á¼ -á½…á½ˆ-á½á½-á½—á½™á½›á½á½Ÿ-á½½á¾€-á¾´á¾¶-á¾¼á¾¾á¿‚-á¿„á¿†-á¿Œá¿-á¿“á¿–-á¿›á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â€Œâ€â€¿â€â”â±â¿â‚-â‚œâƒ-âƒœâƒ¡âƒ¥-âƒ°â„‚â„‡â„Š-â„“â„•â„™-â„â„¤â„¦â„¨â„ª-â„­â„¯-â„¹â„¼-â„¿â……-â…‰â…Žâ… -â†ˆâ°€-â°®â°°-â±žâ± -â³¤â³«-â³³â´€-â´¥â´§â´­â´°-âµ§âµ¯âµ¿-â¶–â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·€-â·†â·ˆ-â·Žâ·-â·–â·˜-â·žâ· -â·¿â¸¯ã€…-ã€‡ã€¡-ã€¯ã€±-ã€µã€¸-ã€¼ã-ã‚–ã‚™ã‚šã‚-ã‚Ÿã‚¡-ãƒºãƒ¼-ãƒ¿ã„…-ã„­ã„±-ã†Žã† -ã†ºã‡°-ã‡¿ã€-ä¶µä¸€-é¿Œê€€-ê’Œê“-ê“½ê”€-ê˜Œê˜-ê˜«ê™€-ê™¯ê™´-ê™½ê™¿-êš—êšŸ-ê›±êœ—-êœŸêœ¢-êžˆêž‹-êžŽêž-êž“êž -êžªêŸ¸-ê §ê¡€-ê¡³ê¢€-ê£„ê£-ê£™ê£ -ê£·ê£»ê¤€-ê¤­ê¤°-ê¥“ê¥ -ê¥¼ê¦€-ê§€ê§-ê§™ê¨€-ê¨¶ê©€-ê©ê©-ê©™ê© -ê©¶ê©ºê©»êª€-ê«‚ê«›-ê«ê« -ê«¯ê«²-ê«¶ê¬-ê¬†ê¬‰-ê¬Žê¬‘-ê¬–ê¬ -ê¬¦ê¬¨-ê¬®ê¯€-ê¯ªê¯¬ê¯­ê¯°-ê¯¹ê°€-íž£íž°-íŸ†íŸ‹-íŸ»ï¤€-ï©­ï©°-ï«™ï¬€-ï¬†ï¬“-ï¬—ï¬-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­€ï­ï­ƒï­„ï­†-ï®±ï¯“-ï´½ïµ-ï¶ï¶’-ï·‡ï·°-ï·»ï¸€-ï¸ï¸ -ï¸¦ï¸³ï¸´ï¹-ï¹ï¹°-ï¹´ï¹¶-ï»¼ï¼-ï¼™ï¼¡-ï¼ºï¼¿ï½-ï½šï½¦-ï¾¾ï¿‚-ï¿‡ï¿Š-ï¿ï¿’-ï¿—ï¿š-ï¿œ]")},L=Array.isArray,L||(L=function(a){return"[object Array]"===Object.prototype.toString.call(a)
}),J={AssignmentExpression:["left","right"],ArrayExpression:["elements"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DoWhileStatement:["body","test"],DebuggerStatement:[],EmptyStatement:[],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SwitchStatement:["descriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],PointerType:["base"],StructType:["id","fields"],FieldDeclarator:["id","decltype"],ArrowType:["params","return"],TypeIdentifier:[],TypeAliasDirective:["original","alias"],CastExpression:["as","argument"]},K={Break:1,Skip:2},a.version="0.0.6-dev",a.generate=A,a.traverse=B,a.attachComments=E}("undefined"==typeof exports?escodegen={}:exports);var verifierOptions=systemOptions.register(new OptionSet("Verifier Options")),verifierTraceLevel=verifierOptions.register(new Option("tv","tv","number",0,"Verifier Trace Level")),Type=function(){function a(){unexpected("Type is Abstract")}a.prototype.equals=function(a){return this===a},a.prototype.merge=function(a){unexpected("Merging "+this+" with "+a)},a.cache={name:{},classInfo:[],instanceInfo:[],scriptInfo:[],methodInfo:[]},a.from=function(b,c){var d=null;return b instanceof ClassInfo?d=a.cache.classInfo:b instanceof InstanceInfo?d=a.cache.instanceInfo:b instanceof ScriptInfo&&(d=a.cache.scriptInfo),d?d[b.runtimeId]||(d[b.runtimeId]=new TraitsType(b,c)):b instanceof ActivationInfo?new TraitsType(b.methodInfo):b instanceof Global?new TraitsType(b.scriptInfo):b instanceof Interface?new TraitsType(b.classInfo,c):b instanceof MethodInfo?new MethodType(b):c&&b instanceof Class?a.from(b.classInfo,c):Type.Any},a.fromSimpleName=function(a,b){return Type.fromName(Multiname.fromSimpleName(a),b)},a.fromName=function(b,c){if(void 0===b)return Type.Undefined;var d=Multiname.isQName(b)?Multiname.getFullQualifiedName(b):void 0;if(d){var e=a.cache.name[d];if(e)return e}return d===Multiname.getPublicQualifiedName("void")?Type.Void:(e=c.findClassInfo(b),e=e?a.from(e,c):Type.Any,b.hasTypeParameter()&&(e=new ParameterizedType(e,a.fromName(b.typeParameter,c))),a.cache.name[d]=e)},a.prototype.applyType=function(a){return new ParameterizedType(this,a)},a.prototype.toString=function(){return"[type]"},a.prototype.isNumeric=function(){return this===Type.Int||this===Type.Uint||this===Type.Number},a.prototype.isString=function(){return this===Type.String},a.prototype.isDirectlyReadable=function(){return this===Type.Array},a.prototype.isIndexedReadable=function(){return this.isParameterizedType()},a.prototype.isDirectlyWriteable=function(){return this===Type.Array},a.prototype.isIndexedWriteable=function(){return this.isParameterizedType()},a.prototype.isVector=function(){return this.isParameterizedType()},a.prototype.isNotDirectlyIndexable=function(){return this===Type.Any||this===Type.XML||this===Type.XMLList||this===Type.Dictionary},a.prototype.isParameterizedType=function(){return this instanceof ParameterizedType},a.prototype.instanceType=function(){return this},a.prototype.getTrait=function(){return null},a.prototype.super=function(){unexpected("Can't call super on "+this)},a.prototype.isSubtypeOf=function(a){return this===a||this.equals(a)?!0:this.merge(a)===this};var b=!1;return a.initializeTypes=function(c){b||(a.Any=new AtomType("Any"),a.Null=new AtomType("Null"),a.Undefined=new AtomType("Undefined"),a.Void=new AtomType("Void"),a.Int=Type.fromSimpleName("int",c).instanceType(),a.Uint=Type.fromSimpleName("uint",c).instanceType(),a.Class=Type.fromSimpleName("Class",c).instanceType(),a.Array=Type.fromSimpleName("Array",c).instanceType(),a.Object=Type.fromSimpleName("Object",c).instanceType(),a.String=Type.fromSimpleName("String",c).instanceType(),a.Number=Type.fromSimpleName("Number",c).instanceType(),a.Boolean=Type.fromSimpleName("Boolean",c).instanceType(),a.Function=Type.fromSimpleName("Function",c).instanceType(),a.XML=Type.fromSimpleName("XML",c).instanceType(),a.XMLList=Type.fromSimpleName("XMLList",c).instanceType(),a.Dictionary=Type.fromSimpleName("flash.utils.Dictionary",c).instanceType(),b=!0)},a}(),AtomType=function(){function a(a){this.name=a}return a.prototype=Object.create(Type.prototype),a.prototype.toString=function(){return this===Type.Any?"?":this===Type.Undefined?"_":this===Type.Null?"X":this===Type.Void?"V":void unexpected()},a.prototype.merge=function(a){return a instanceof TraitsType?Type.Any:this===a?this:this===Type.Any||a===Type.Any?Type.Any:Type.Any},a}(),MethodType=function(){function a(a){this.methodInfo=a}return a.prototype=Object.create(Type.prototype),a.prototype.toString=function(){return"MT "+this.methodInfo},a}(),TraitsType=function(){function a(a,b){this.object=a,this.traits=a.traits,this.domain=b,this.object instanceof InstanceInfo}function b(a){return a instanceof ScriptInfo?"SI":a instanceof ClassInfo?"CI:"+a.instanceInfo.name.name:a instanceof InstanceInfo?"II:"+a.name.name:a instanceof MethodInfo?"MI":a instanceof ActivationInfo?"AC":void 0}function c(a,b){for(var c=a.length-1;c>=0;c--)if(a[c].slotId===b)return a[c];unexpected("Cannot find trait with slotId: "+b+" in "+a)}function d(a,b,c){var e,f=!c;if(Multiname.isQName(b)){for(var g=Multiname.getQualifiedName(b),h=0,i=a.length;i>h;h++)if(e=a[h],Multiname.getQualifiedName(e.name)===g){if(c&&e.isGetter()||f&&e.isSetter())continue;return e}}else{if(b instanceof MultinameType)return;for(var j,h=0,i=b.namespaces.length;i>h;h++){var g=b.getQName(h);if(b.namespaces[h].isDynamic())j=g;else if(e=d(a,g,c))return e}if(j)return d(a,j,c)}}return a.prototype=Object.create(Type.prototype),a.prototype.getTrait=function(a,b,c){if(a instanceof MultinameType)return null;if(a.isAttribute())return null;if(c&&(this.isInstanceInfo()||this.isClassInfo())){var e=this;do{var f=e.getTrait(a,b,!1);f||(e=e.super())}while(!f&&e);return f}return d(this.traits,a,b)},a.prototype.getTraitAt=function(a){return this.object instanceof ScriptInfo||this.object instanceof MethodInfo?c(this.traits,a):void 0},a.prototype.toString=function(){switch(this){case Type.Int:return"I";case Type.Uint:return"U";case Type.Array:return"A";case Type.Object:return"O";case Type.String:return"S";case Type.Number:return"N";case Type.Boolean:return"B";case Type.Function:return"F"}return b(this.object)},a.prototype.instanceType=function(){return this.instanceCache||(this.instanceCache=Type.from(this.object.instanceInfo,this.domain))},a.prototype.classType=function(){return this.instanceCache||(this.instanceCache=Type.from(this.object.classInfo,this.domain))},a.prototype.super=function(){if(this.object instanceof ClassInfo)return Type.Class;if(this.object.superName){var a=Type.fromName(this.object.superName,this.domain).instanceType();return a}return null},a.prototype.isScriptInfo=function(){return this.object instanceof ScriptInfo},a.prototype.isClassInfo=function(){return this.object instanceof ClassInfo},a.prototype.isInstanceInfo=function(){return this.object instanceof InstanceInfo},a.prototype.isInstanceOrClassInfo=function(){return this.isInstanceInfo()||this.isClassInfo()},a.prototype.equals=function(a){return this.traits===a.traits},a.prototype.merge=function(a){if(a instanceof TraitsType){if(this.equals(a))return this;if(this.isNumeric()&&a.isNumeric())return Type.Number;if(this.isInstanceInfo()&&a.isInstanceInfo()){for(var b=[],c=this;c;c=c.super())b.push(c);for(var c=a;c;c=c.super())for(var d=0;d<b.length;d++)if(b[d].equals(c))return c;return Type.Object}}return Type.Any},a}(),MultinameType=function(){function a(a,b,c){this.namespaces=a,this.name=b,this.flags=c}return a.prototype=Object.create(Type.prototype),a.prototype.toString=function(){return"MN"},a}(),ParameterizedType=function(){function a(a,b){this.type=a,this.parameter=b}return a.prototype=Object.create(Type.prototype),a.prototype.toString=function(){return this.type+"<"+this.parameter+">"},a.prototype.instanceType=function(){return new ParameterizedType(this.type.instanceType(),this.parameter.instanceType())},a.prototype.equals=function(a){return a instanceof ParameterizedType?this.type.equals(a.type)&&this.parameter.equals(a.parameter):!1},a.prototype.merge=function(a){return a instanceof TraitsType&&this.equals(a)?this:Type.Any},a}(),TypeInformation=function(){function a(){}return a.prototype.toString=function(){return toKeyValueArray(this).map(function(a){return a[0]+": "+a[1]}).join(" | ")},a}(),Verifier=function(){function a(a){this.name="VerifierError",this.message=a||""}function b(){this.writer=new IndentingWriter}var c=function(){function a(){this.id=f+=1,this.stack=[],this.scope=[],this.local=[]}function b(a,b){if(a.length!=b.length)return!1;for(var c=a.length-1;c>=0;c--)if(!a[c].equals(b[c]))return!1;return!0}function d(a,b){if(a.length!=b.length)return!1;for(var c=a.length-1;c>=0;c--)if(a[c]!==b[c]&&!a[c].equals(b[c])&&a[c].merge(b[c])!==a[c])return!1;return!0}function e(a,b){for(var c=a.length-1;c>=0;c--)a[c]!==b[c]&&(a[c]=a[c].merge(b[c]))}var f=0;return a.prototype.clone=function(){var a=new c;return a.originalId=this.id,a.stack=this.stack.slice(0),a.scope=this.scope.slice(0),a.local=this.local.slice(0),a},a.prototype.trace=function(a){a.writeLn(this.toString())},a.prototype.toString=function(){return"<"+this.id+(this.originalId?":"+this.originalId:"")+", L["+this.local.join(", ")+"], S["+this.stack.join(", ")+"], $["+this.scope.join(", ")+"]>"},a.prototype.equals=function(a){return b(this.stack,a.stack)&&b(this.scope,a.scope)&&b(this.local,a.local)},a.prototype.isSubset=function(a){return d(this.stack,a.stack)&&d(this.scope,a.scope)&&d(this.local,a.local)},a.prototype.merge=function(a){e(this.local,a.local),e(this.stack,a.stack),e(this.scope,a.scope)},a}(),d=function(){function b(a,b,c){this.savedScope=c,this.methodInfo=a,this.domain=b,this.writer=new IndentingWriter,this.returnType=Type.Undefined}return b.prototype.verify=function(){var a=this.methodInfo,b=verifierTraceLevel.value?this.writer:null,d=a.analysis.blocks;d.forEach(function(a){a.entryState=a.exitState=null}),b&&this.methodInfo.trace(b);var e=new c;this.thisType=a.holder?Type.from(a.holder,this.domain):Type.Any,e.local.push(this.thisType);for(var f=0;f<a.parameters.length;f++)e.local.push(Type.fromName(a.parameters[f].type,this.domain).instanceType());var g=a.localCount-a.parameters.length-1;(a.needsRest()||a.needsArguments())&&(e.local.push(Type.Array),g-=1);for(var f=0;g>f;f++)e.local.push(Type.Undefined);b&&e.trace(b);for(var h=0,i=d.length;i>h;h++)d[h].bdo=h;var j=new Shumway.SortedList(function(a,b){return a.bdo-b.bdo});for(d[0].entryState=e,j.push(d[0]);!j.isEmpty();){var k=j.pop(),l=k.exitState=k.entryState.clone();this.verifyBlock(k,l),k.succs.forEach(function(a){return j.contains(a)?(b&&b.writeLn("Forward Merged Block: "+a.bid+" "+l.toString()+" with "+a.entryState.toString()),a.entryState.merge(l),void(b&&b.writeLn("Merged State: "+a.entryState))):a.entryState?void(a.entryState.isSubset(l)||(b&&b.writeLn("Backward Merged Block: "+k.bid+" with "+a.bid+" "+l.toString()+" with "+a.entryState.toString()),a.entryState.merge(l),j.push(a),b&&b.writeLn("Merged State: "+a.entryState))):(a.entryState=l.clone(),j.push(a),void(b&&b.writeLn("Added Block: "+a.bid+" to worklist: "+a.entryState.toString())))})}b&&b.writeLn("Inferred return type: "+this.returnType),this.methodInfo.inferredReturnType=this.returnType},b.prototype.verifyBlock=function(b,c){function d(a){return a instanceof TraitsType||a instanceof ParameterizedType?a===Type.Function||a===Type.Class||a===Type.Object?Type.Object:a.instanceType():Type.Any}function e(){return n.ti||(n.ti=new TypeInformation)}function f(a){e().type=a,z.push(a)}function g(){return z.pop()}function h(a){if(a instanceof MultinameType)return"Array"===a.name,Type.Any;for(var b=A.length-1;b>=-w.length;b--){var c=b>=0?A[b]:w[w.length+b];if(!(c instanceof TraitsType))return"Array"===a.name,Type.Any;var d=c.getTrait(a,!1,!0);if(d)return e().scopeDepth=A.length-b-1,(c.isClassInfo()||c.isScriptInfo())&&(e().object=LazyInitializer.create(c.object)),c}var f=D.findDefiningScript(a,!1);return f?(e().object=LazyInitializer.create(f.script),Type.from(f.script,D)):("Array"===a.name,Type.Any)}function i(){var a=E[n.index];if(a.isRuntime()){var b=a.namespaces,c=a.name;return a.isRuntimeName()&&(c=g()),a.isRuntimeNamespace()&&(b=[g()]),new MultinameType(b,c,a.flags)}return a}function j(a){if(a instanceof TraitsType){var b=a.getTraitAt(n.index);if(B&&B.debugLn("accessSlot() -> "+b),b){if(e().trait=b,b.isSlot())return Type.fromName(b.typeName,D).instanceType();if(b.isClass())return Type.from(b.classInfo,D)}}return Type.Any}function k(a){return a instanceof Multiname&&Multiname.isNumeric(a)||a instanceof MultinameType&&a.name instanceof TraitsType&&a.name.isNumeric()}function l(a,b){if(a instanceof TraitsType||a instanceof ParameterizedType){var c=a.getTrait(b,!1,!0);if(B&&B.debugLn("getProperty("+b+") -> "+c),c){if(e().trait=c,c.isSlot()||c.isConst())return Type.fromName(c.typeName,D).instanceType();if(c.isGetter())return Type.fromName(c.methodInfo.returnType,D).instanceType();if(c.isClass())return Type.from(c.classInfo,D);if(c.isMethod())return Type.from(c.methodInfo,D)}else a.isDirectlyReadable()&&b instanceof Multiname&&(e().propertyQName=Multiname.getPublicQualifiedName(b.name));if(k(b))if(a.isIndexedReadable()){if(e().isIndexedReadable=!0,a.isVector())return a.parameter}else a.isDirectlyReadable()&&(e().isDirectlyReadable=!0)}return Type.Any}function m(a,b){if(a instanceof TraitsType||a instanceof ParameterizedType){var c=a.getTrait(b,!0,!0);B&&B.debugLn("setProperty("+b+") -> "+c),c?e().trait=c:a.isDirectlyWriteable()&&b instanceof Multiname&&(e().propertyQName=Multiname.getPublicQualifiedName(b.name)),k(b)&&(a.isDirectlyWriteable()?e().isDirectlyWriteable=!0:a.isVector()&&(e().isIndexedWriteable=!0))}}var n,o,p,q,r,s,t,u,v,w=this.savedScope,x=w[0],y=c.local,z=c.stack,A=c.scope,B=verifierTraceLevel.value?this.writer:null,C=this.methodInfo.analysis.bytecodes,D=this.domain,E=this.methodInfo.abc.constantPool.multinames,F=this.methodInfo;B&&B.enter("verifyBlock: "+b.bid+", range: ["+b.position+", "+b.end.position+"], entryState: "+c.toString()+" {");for(var G=b.position,H=b.end.position;H>=G;G++){n=C[G];var I=n.op;switch(B&&verifierTraceLevel.value>1&&B.writeLn(("stateBefore: "+c.toString()+" $$["+w.join(", ")+"]").padRight(" ",100)+" : "+G+", "+n.toString(F.abc)),I){case 1:break;case 3:g();break;case 4:q=i(),o=g(),e().baseClass=LazyInitializer.create(this.thisType.super().classType().object),f(l(o.super(),q));break;case 5:t=g(),q=i(),o=g(),e().baseClass=LazyInitializer.create(this.thisType.super().classType().object),m(o.super(),q,t);break;case 6:notImplemented(n);break;case 7:notImplemented(n);break;case 8:c.local[n.index]=Type.Undefined;break;case 10:notImplemented(n);break;case 11:notImplemented(n);break;case 12:case 24:case 13:case 23:case 14:case 22:case 15:case 21:case 19:case 20:case 25:case 26:g(),g();break;case 16:break;case 17:case 18:g();break;case 27:g(Type.Int);break;case 29:A.pop();break;case 30:case 35:g(Type.Int),g(),f(Type.Any);break;case 31:f(Type.Boolean);break;case 50:f(Type.Boolean);break;case 32:f(Type.Null);break;case 33:f(Type.Undefined);break;case 34:notImplemented(n);break;case 36:f(Type.Int);break;case 37:f(Type.Int);break;case 44:f(Type.String);break;case 45:f(Type.Int);break;case 46:f(Type.Uint);break;case 47:f(Type.Number);break;case 38:f(Type.Boolean);break;case 39:f(Type.Boolean);break;case 40:f(Type.Number);break;case 41:g();break;case 42:t=g(),f(t),f(t);break;case 43:r=g(),s=g(),f(r),f(s);break;case 28:g(),A.push(Type.Any);break;case 48:A.push(g());break;case 49:notImplemented(n);break;case 53:case 54:case 55:f(Type.Int);break;case 56:case 57:f(Type.Number);break;case 58:case 59:case 60:g(Type.Int);break;case 61:case 62:g(Type.Number);break;case 64:f(Type.Function);break;case 65:z.popMany(n.argCount),o=g(),p=g(),f(Type.Any);break;case 67:throw new a("callmethod");case 68:notImplemented(n);break;case 69:case 78:case 79:case 70:case 76:if(z.popMany(n.argCount),q=i(),o=g(),(I===OP_callsuper||I===OP_callsupervoid)&&(o=this.thisType.super(),e().baseClass=LazyInitializer.create(this.thisType.super().classType().object)),u=l(o,q),I===OP_callpropvoid||I===OP_callsupervoid)break;v=u instanceof MethodType?Type.fromName(u.methodInfo.returnType,D).instanceType():u instanceof TraitsType&&u.isClassInfo()?u.instanceType():Type.Any,f(v);break;case 71:this.returnType.merge(Type.Undefined);break;case 72:if(u=g(),F.returnType){var J=Type.fromName(F.returnType,this.domain).instanceType();J.isSubtypeOf(u)&&(e().noCoercionNeeded=!0)}break;case 73:z.popMany(n.argCount),z.pop(),this.thisType.isInstanceInfo()&&this.thisType.super()===Type.Object?e().noCallSuperNeeded=!0:e().baseClass=LazyInitializer.create(this.thisType.super().classType().object);break;case 66:z.popMany(n.argCount),f(d(g()));break;case 74:z.popMany(n.argCount),q=i(),f(d(l(z.pop(),q)));break;case 75:notImplemented(n);break;case 77:notImplemented(n);break;case 80:case 81:case 82:break;case 83:t=g(),o=g(),f(o===Type.Any?Type.Any:o.applyType(t));break;case 84:notImplemented(n);break;case 85:z.popMany(2*n.argCount),f(Type.Object);break;case 86:z.popMany(n.argCount),f(Type.Array);break;case 87:f(Type.from(new ActivationInfo(this.methodInfo)));break;case 88:f(Type.Any);break;case 89:i(),g(),f(Type.XMLList);break;case 90:f(Type.Any);break;case 93:f(h(i(),!0));break;case 94:f(h(i(),!1));break;case 95:notImplemented(n);break;case 96:q=i(),f(l(h(q,!0),q));break;case 104:case 97:t=g(),q=i(),o=g(),m(o,q,t,n);break;case 98:f(y[n.index]);break;case 99:y[n.index]=g();break;case 100:f(x),e().object=LazyInitializer.create(x.object);break;case 101:f(A[n.index]);break;case 102:q=i(),o=g(),f(l(o,q));break;case 103:notImplemented(n);break;case 105:notImplemented(n);break;case 106:i(),g(),f(Type.Boolean);break;case 107:notImplemented(n);break;case 108:f(j(g()));break;case 109:t=g(),o=g(),j(o);break;case 110:notImplemented(n);break;case 111:notImplemented(n);break;case 112:g(),f(Type.String);break;case 113:g(),f(Type.String);break;case 114:g(),f(Type.String);break;case 131:case 115:g(),f(Type.Int);break;case 136:case 116:g(),f(Type.Uint);break;case 132:case 117:g(),f(Type.Number);break;case 129:case 118:g(),f(Type.Boolean);break;case 119:notImplemented(n);break;case 120:break;case 121:g(),f(Type.Number);break;case 122:notImplemented(n);break;case 123:notImplemented(n);break;case 128:u=g();var J=Type.fromName(E[n.index],this.domain).instanceType();J.isSubtypeOf(u)&&(e().noCoercionNeeded=!0),f(J);break;case 130:break;case 133:g(),f(Type.String);break;case 134:notImplemented(n);break;case 135:u=g(),g(),f(u instanceof TraitsType?u.instanceType():Type.Any);break;case 137:notImplemented(n);break;case 144:case 145:case 147:g(),f(Type.Number);break;case 146:case 148:y[n.index]=Type.Number;break;case 149:g(),f(Type.String);break;case 150:g(),f(Type.Boolean);break;case 160:s=g(),r=g(),f(r.isNumeric()&&s.isNumeric()?Type.Number:r===Type.String||s===Type.String?Type.String:Type.Any);break;case 161:case 162:case 163:case 164:g(),g(),f(Type.Number);break;case 168:case 169:case 170:case 165:case 166:case 167:g(),g(),f(Type.Int);break;case 151:g(),f(Type.Int);break;case 171:case 172:case 173:case 174:case 175:case 176:case 177:case 180:g(),g(),f(Type.Boolean);break;case 178:g(),f(Type.Boolean);break;case 179:g(),g(),f(Type.Boolean);break;case 194:case 195:y[n.index]=Type.Int;break;case 193:case 192:case 196:g(),f(Type.Int);break;case 197:case 198:case 199:g(),g(),f(Type.Int);break;case 208:case 209:case 210:case 211:f(y[I-OP_getlocal0]);break;case 212:case 213:case 214:case 215:y[I-OP_setlocal0]=g();break;case 239:break;case 240:break;case 241:break;case 242:break;case 243:break;default:console.info("Not Implemented: "+n)}B&&n.ti&&B.debugLn("> TI: "+n.ti)}B&&(B.leave("}"),B.writeLn("verifiedBlock: "+b.bid+", range: ["+b.position+", "+b.end.position+"], exitState: "+c.toString()))},b}();return b.prototype.verifyMethod=function(b,c){try{var e=b.abc.applicationDomain,f=c.getScopeObjects();f[f.length-1]||(b.holder instanceof InstanceInfo?f[f.length-1]=b.holder.classInfo:b.holder instanceof ClassInfo&&(f[f.length-1]=b.holder));var g=f.map(function(a){return a instanceof MethodInfo?Type.from(new ActivationInfo(a)):Type.from(a,e)});new d(b,b.abc.applicationDomain,g).verify(),b.verified=!0,Counter.count("Verifier: Methods")}catch(h){if(h instanceof a)return;throw h}},b}();!function(a){function b(a,b){return Object.create(a.prototype,{nodeName:{value:b}})}function c(a){var b,c=!1;return a instanceof Y?a.value instanceof Multiname?a.value.name:a.value:a instanceof R?a.name:a instanceof Q?(b="|"+a.id+"|",c?PURPLE+b+ENDC:b):a instanceof n?(b="{"+a.id+"}",c?RED+b+ENDC:b):a instanceof U?a.type===U.Type.STORE?(b="["+a.id+"->"+a.argument.id+"]",c?YELLOW+b+ENDC:b):(b="("+a.id+")",c?GREEN+b+ENDC:b):a instanceof v?(b="("+a.id+")",c?GREEN+b+ENDC:b):a instanceof m?a.id:void unexpected(a+" "+typeof a)}function d(a){return a.id}function e(a,b){for(var c=0;c<a.length;c++)b(a[c])}function f(a){return!g(a)}function g(a){return a instanceof Q}function h(a){return a instanceof Y}function i(a){return a instanceof v}function j(a,b){return a instanceof U&&(!b||a.type===b)}var k=!1,l=[],m=function(){function a(){this.id=l[l.length-1]+=1}return a.prototype.nodeName="Node",a.prototype.visitInputs=function(){},a}(),n=function(){function a(){this.id=l[l.length-1]+=1}return a.prototype=b(m,"Control"),a.prototype.nodeName="Control",a.prototype.visitInputs=function(){},a}(),o=function(){function a(a){this.predecessors=a?[a]:[],this.id=l[l.length-1]+=1}return a.prototype=b(n,"Region"),a.prototype.nodeName="Region",a.prototype.visitInputs=function(a){e(this.predecessors,a)},a}(),p=function(){function a(a){this.control=this,this.predecessors=a?[a]:[],this.scope=void 0,this.domain=void 0,this.id=l[l.length-1]+=1}return a.prototype=b(o,"Start"),a.prototype.nodeName="Start",a.prototype.visitInputs=function(a){e(this.predecessors,a),a(this.scope),a(this.domain)},a}(),q=function(){function a(a){this.control=a,this.id=l[l.length-1]+=1}return a.prototype=b(n,"End"),a.prototype.nodeName="End",a.prototype.visitInputs=function(a){a(this.control)},a}(),r=function(){function a(a,b,c){this.control=a,this.store=b,this.argument=c,this.id=l[l.length-1]+=1}return a.prototype=b(q,"Stop"),a.prototype.nodeName="Stop",a.prototype.visitInputs=function(a){a(this.control),a(this.store),a(this.argument)},a}(),s=function(){function a(a,b){this.control=a,this.predicate=b,this.id=l[l.length-1]+=1}return a.prototype=b(q,"If"),a.prototype.nodeName="If",a.prototype.visitInputs=function(a){a(this.control),a(this.predicate)},a}(),t=function(){function a(a,b){this.control=a,this.determinant=b,this.id=l[l.length-1]+=1}return a.prototype=b(q,"Switch"),a.prototype.nodeName="Switch",a.prototype.visitInputs=function(a){a(this.control),a(this.determinant)},a}(),u=function(){function a(a){this.control=a,this.id=l[l.length-1]+=1}return a.prototype=b(q,"Jump"),a.prototype.nodeName="Jump",a.prototype.visitInputs=function(a){a(this.control)},a}(),v=function(){function a(){this.id=l[l.length-1]+=1}return a.prototype=b(m,"Value"),a.prototype.nodeName="Value",a.prototype.visitInputs=function(){},a}(),w=function(){function a(a,b){this.control=a,this.store=b,this.loads=void 0,this.id=l[l.length-1]+=1}return a.prototype=b(v,"StoreDependent"),a.prototype.nodeName="StoreDependent",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a)},a}(),x=function(){function a(a,b,c,d,e,f){this.control=a,this.store=b,this.loads=void 0,this.callee=c,this.object=d,this.args=e,this.flags=f,this.id=l[l.length-1]+=1}return a.prototype=b(w,"Call"),a.prototype.nodeName="Call",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.callee),this.object&&a(this.object),e(this.args,a)},a}(),y=function(){function a(a,b,c,d,e,f){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.args=e,this.flags=f,this.id=l[l.length-1]+=1}return a.prototype=b(w,"CallProperty"),a.prototype.nodeName="CallProperty",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name),e(this.args,a)},a}(),z=function(){function a(a,b,c,d,e,f,g){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.args=e,this.flags=f,this.isLex=g,this.id=l[l.length-1]+=1}return a.prototype=b(y,"ASCallProperty"),a.prototype.nodeName="ASCallProperty",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name),e(this.args,a)},a}(),A=function(){function a(a,b,c,d,e,f,g){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.args=e,this.flags=f,this.scope=g,this.id=l[l.length-1]+=1}return a.prototype=b(y,"ASCallSuper"),a.prototype.nodeName="ASCallSuper",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name),e(this.args,a),a(this.scope)},a}(),B=function(){function a(a,b,c,d){this.control=a,this.store=b,this.loads=void 0,this.callee=c,this.args=d,this.id=l[l.length-1]+=1}return a.prototype=b(w,"New"),a.prototype.nodeName="New",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.callee),e(this.args,a)},a}(),C=function(){function a(a,b,c,d){this.control=a,this.store=b,this.loads=void 0,this.callee=c,this.args=d,this.id=l[l.length-1]+=1}return a.prototype=b(B,"ASNew"),a.prototype.nodeName="ASNew",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.callee),e(this.args,a)},a}(),D=function(){function a(a,b,c,d){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.id=l[l.length-1]+=1}return a.prototype=b(w,"GetProperty"),a.prototype.nodeName="GetProperty",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name)},a}(),E=function(){function a(a,b,c,d,e){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.flags=e,this.id=l[l.length-1]+=1}return a.prototype=b(D,"ASGetProperty"),a.prototype.nodeName="ASGetProperty",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name)},a}(),F=function(){function a(a,b,c,d){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.id=l[l.length-1]+=1}return a.prototype=b(D,"ASGetDescendants"),a.prototype.nodeName="ASGetDescendants",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name)},a}(),G=function(){function a(a,b,c,d){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.id=l[l.length-1]+=1}return a.prototype=b(D,"ASHasProperty"),a.prototype.nodeName="ASHasProperty",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name)},a}(),H=function(){function a(a,b,c,d){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.id=l[l.length-1]+=1}return a.prototype=b(D,"ASGetSlot"),a.prototype.nodeName="ASGetSlot",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name)},a}(),I=function(){function a(a,b,c,d,e){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.scope=e,this.id=l[l.length-1]+=1}return a.prototype=b(D,"ASGetSuper"),a.prototype.nodeName="ASGetSuper",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name),a(this.scope)},a}(),J=function(){function a(a,b,c,d,e){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.value=e,this.id=l[l.length-1]+=1}return a.prototype=b(w,"SetProperty"),a.prototype.nodeName="SetProperty",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name),a(this.value)},a}(),K=function(){function a(a,b,c,d,e,f){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.value=e,this.flags=f,this.id=l[l.length-1]+=1}return a.prototype=b(J,"ASSetProperty"),a.prototype.nodeName="ASSetProperty",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name),a(this.value)},a}(),L=function(){function a(a,b,c,d,e){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.value=e,this.id=l[l.length-1]+=1}return a.prototype=b(J,"ASSetSlot"),a.prototype.nodeName="ASSetSlot",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name),a(this.value)},a}(),M=function(){function a(a,b,c,d,e,f){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.value=e,this.scope=f,this.id=l[l.length-1]+=1}return a.prototype=b(J,"ASSetSuper"),a.prototype.nodeName="ASSetSuper",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name),a(this.value),a(this.scope)},a}(),N=function(){function a(a,b,c,d){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.id=l[l.length-1]+=1}return a.prototype=b(w,"DeleteProperty"),a.prototype.nodeName="DeleteProperty",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name)},a}(),O=function(){function a(a,b,c,d){this.control=a,this.store=b,this.loads=void 0,this.object=c,this.name=d,this.id=l[l.length-1]+=1}return a.prototype=b(N,"ASDeleteProperty"),a.prototype.nodeName="ASDeleteProperty",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.object),a(this.name)},a}(),P=function(){function a(a,b,c,d,e,f){this.control=a,this.store=b,this.loads=void 0,this.scope=c,this.name=d,this.domain=e,this.strict=f,this.id=l[l.length-1]+=1}return a.prototype=b(w,"ASFindProperty"),a.prototype.nodeName="ASFindProperty",a.prototype.visitInputs=function(a){this.control&&a(this.control),this.store&&a(this.store),this.loads&&e(this.loads,a),a(this.scope),a(this.name),a(this.domain)},a}(),Q=(function(){function a(){this.id=l[l.length-1]+=1}return a.prototype=b(v,"Store"),a.prototype.nodeName="Store",a.prototype.visitInputs=function(){},a}(),function(){function a(a,b){this.control=a,this.args=b?[b]:[],this.id=l[l.length-1]+=1}return a.prototype=b(v,"Phi"),a.prototype.nodeName="Phi",a.prototype.visitInputs=function(a){this.control&&a(this.control),e(this.args,a)
},a}()),R=function(){function a(a){this.name=a,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Variable"),a.prototype.nodeName="Variable",a.prototype.visitInputs=function(){},a}(),S=function(){function a(a){this.argument=a,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Copy"),a.prototype.nodeName="Copy",a.prototype.visitInputs=function(a){a(this.argument)},a}(),T=function(){function a(a,b){this.to=a,this.from=b,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Move"),a.prototype.nodeName="Move",a.prototype.visitInputs=function(a){a(this.to),a(this.from)},a}(),U=function(){function a(a,b,c){this.argument=a,this.type=b,this.selector=c,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Projection"),a.prototype.nodeName="Projection",a.prototype.visitInputs=function(a){a(this.argument)},a}(),V=function(){function a(a,b,c,d){this.control=a,this.condition=b,this.left=c,this.right=d,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Latch"),a.prototype.nodeName="Latch",a.prototype.visitInputs=function(a){this.control&&a(this.control),a(this.condition),a(this.left),a(this.right)},a}(),W=function(){function a(a,b,c){this.operator=a,this.left=b,this.right=c,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Binary"),a.prototype.nodeName="Binary",a.prototype.visitInputs=function(a){a(this.left),a(this.right)},a}(),X=function(){function a(a,b){this.operator=a,this.argument=b,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Unary"),a.prototype.nodeName="Unary",a.prototype.visitInputs=function(a){a(this.argument)},a}(),Y=function(){function a(a){this.value=a,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Constant"),a.prototype.nodeName="Constant",a.prototype.visitInputs=function(){},a}(),Z=function(){function a(a){this.name=a,this.id=l[l.length-1]+=1}return a.prototype=b(v,"GlobalProperty"),a.prototype.nodeName="GlobalProperty",a.prototype.visitInputs=function(){},a}(),$=function(){function a(a){this.control=a,this.id=l[l.length-1]+=1}return a.prototype=b(v,"This"),a.prototype.nodeName="This",a.prototype.visitInputs=function(a){a(this.control)},a}(),_=function(){function a(a,b){this.control=a,this.argument=b,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Throw"),a.prototype.nodeName="Throw",a.prototype.visitInputs=function(a){a(this.control),a(this.argument)},a}(),ab=function(){function a(a){this.control=a,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Arguments"),a.prototype.nodeName="Arguments",a.prototype.visitInputs=function(a){a(this.control)},a}(),bb=function(){function a(a,b,c){this.control=a,this.index=b,this.name=c,this.id=l[l.length-1]+=1}return a.prototype=b(v,"Parameter"),a.prototype.nodeName="Parameter",a.prototype.visitInputs=function(a){a(this.control)},a}(),cb=function(){function a(a,b){this.control=a,this.elements=b,this.id=l[l.length-1]+=1}return a.prototype=b(v,"NewArray"),a.prototype.nodeName="NewArray",a.prototype.visitInputs=function(a){a(this.control),e(this.elements,a)},a}(),db=function(){function a(a,b){this.control=a,this.properties=b,this.id=l[l.length-1]+=1}return a.prototype=b(v,"NewObject"),a.prototype.nodeName="NewObject",a.prototype.visitInputs=function(a){a(this.control),e(this.properties,a)},a}(),eb=function(){function a(a,b){this.key=a,this.value=b,this.id=l[l.length-1]+=1}return a.prototype=b(v,"KeyValuePair"),a.prototype.nodeName="KeyValuePair",a.prototype.visitInputs=function(a){a(this.key),a(this.value)},a}(),fb=function(){function a(a,b,c){this.parent=a,this.object=b,this.isWith=c,this.id=l[l.length-1]+=1}return a.prototype=b(v,"ASScope"),a.prototype.nodeName="ASScope",a.prototype.visitInputs=function(a){a(this.parent),a(this.object)},a}(),gb=function(){function a(a,b){this.control=a,this.scope=b,this.id=l[l.length-1]+=1}return a.prototype=b(v,"ASGlobal"),a.prototype.nodeName="ASGlobal",a.prototype.visitInputs=function(a){this.control&&a(this.control),a(this.scope)},a}(),hb=function(){function a(a){this.methodInfo=a,this.id=l[l.length-1]+=1}return a.prototype=b(v,"ASNewActivation"),a.prototype.nodeName="ASNewActivation",a.prototype.visitInputs=function(){},a}(),ib=function(){function a(a,b,c){this.namespaces=a,this.name=b,this.flags=c,this.id=l[l.length-1]+=1}return a.prototype=b(v,"ASMultiname"),a.prototype.nodeName="ASMultiname",a.prototype.visitInputs=function(a){a(this.namespaces),a(this.name)},a}();m.startNumbering=function(){l.push(0)},m.stopNumbering=function(){l.pop()},m.prototype.toString=function(a){if(a)return c(this);var b=[];this.visitInputs(function(a){b.push(c(a))});var d=c(this)+" = "+this.nodeName.toUpperCase();return this.toStringDetails&&(d+=" "+this.toStringDetails()),b.length&&(d+=" "+b.join(", ")),d},m.prototype.visitInputsNoConstants=function(a){this.visitInputs(function(b){h(b)||a(b)})},m.prototype.replaceInput=function(a,b){var c=0;for(var d in this){var e=this[d];e instanceof m&&e===a&&(this[d]=b,c++),e instanceof Array&&(c+=e.replace(a,b))}return c},U.Type={CASE:"case",TRUE:"true",FALSE:"false",STORE:"store",SCOPE:"scope"},U.prototype.project=function(){return this.argument},Q.prototype.seal=function(){this.sealed=!0},Q.prototype.pushValue=function(a){this.args.push(a)},eb.prototype.mustFloat=!0,ib.prototype.mustFloat=!0,ib.prototype.isAttribute=function(){return 1&this.flags};var jb={INDEXED:1,RESOLVED:2,PRISTINE:4,IS_METHOD:8},kb=function(){function a(a,b,d){this.name=a,this.binary=d,this.evaluate=b,c[a]=this}function b(a,b){a.not=b,b.not=a}var c={};return a.ADD=new a("+",function(a,b){return a+b},!0),a.SUB=new a("-",function(a,b){return a-b},!0),a.MUL=new a("*",function(a,b){return a*b},!0),a.DIV=new a("/",function(a,b){return a/b},!0),a.MOD=new a("%",function(a,b){return a%b},!0),a.AND=new a("&",function(a,b){return a&b},!0),a.OR=new a("|",function(a,b){return a|b},!0),a.XOR=new a("^",function(a,b){return a^b},!0),a.LSH=new a("<<",function(a,b){return a<<b},!0),a.RSH=new a(">>",function(a,b){return a>>b},!0),a.URSH=new a(">>>",function(a,b){return a>>>b},!0),a.SEQ=new a("===",function(a,b){return a===b},!0),a.SNE=new a("!==",function(a,b){return a!==b},!0),a.EQ=new a("==",function(a,b){return a==b},!0),a.NE=new a("!=",function(a,b){return a!=b},!0),a.LE=new a("<=",function(a,b){return b>=a},!0),a.GT=new a(">",function(a,b){return a>b},!0),a.LT=new a("<",function(a,b){return b>a},!0),a.GE=new a(">=",function(a,b){return a>=b},!0),a.BITWISE_NOT=new a("~",function(a){return~a},!1),a.PLUS=new a("+",function(a){return+a},!1),a.NEG=new a("-",function(a){return-a},!1),a.TYPE_OF=new a("typeof",function(a){return typeof a},!1),a.TRUE=new a("!!",function(a){return!!a},!1),a.FALSE=new a("!",function(a){return!a},!1),a.AS_ADD=new a("+",function(a,b){return"string"==typeof a||"string"==typeof b?String(a)+String(b):a+b},!0),b(a.SEQ,a.SNE),b(a.EQ,a.NE),b(a.TRUE,a.FALSE),a.fromName=function(a){return c[a]},a.prototype.isBinary=function(){return this.binary},a.prototype.toString=function(){return this.name},a}(),lb=new Y(null),mb=new Y(void 0);mb.toString=function(){return"_"};var nb=function(){function a(a,b,c){this.region=b,this.id=a,this.successors=[],this.predecessors=[],this.nodes=[b,c]}return a.prototype.pushSuccessorAt=function(a,b,c){this.successors[b]=a,c&&a.pushPredecessor(this)},a.prototype.pushSuccessor=function(a,b){this.successors.push(a),b&&a.pushPredecessor(this)},a.prototype.pushPredecessor=function(a){this.predecessors.push(a)},a.prototype.visitNodes=function(a){for(var b=this.nodes,c=0,d=b.length;d>c;c++)a(b[c])},a.prototype.visitSuccessors=function(a){for(var b=this.successors,c=0,d=b.length;d>c;c++)a(b[c])},a.prototype.visitPredecessors=function(a){for(var b=this.predecessors,c=0,d=b.length;d>c;c++)a(b[c])},a.prototype.append=function(a){a.mustFloat||this.nodes.splice(this.nodes.length-1,0,a)},a.prototype.toString=function(){return"B"+this.id+(this.name?" ("+this.name+")":"")},a.prototype.trace=function(a){a.writeLn(this)},a}(),ob=function(){function a(a){this.exit=a}function b(a,b,c){for(var d,e=[],f=[a],g=f.push.bind(f);d=f.pop();)1!==e[d.id]&&(e[d.id]=1,c(d),f.push(d),b(d,g))}function c(a,b,c){function d(a){h[a.id]||i.push(a)}for(var e,f=1,g=2,h=[],i=[a];e=i.top();)h[e.id]?(h[e.id]===f&&(h[e.id]=g,c(e)),i.pop()):(h[e.id]=f,b(e,d))}return a.prototype.buildCFG=function(){return pb.fromDFG(this)},a.prototype.forEachInPreOrderDepthFirstSearch=function(a){function b(a){h(a)||e.push(a)}for(var c,d=new Array(1024),e=[this.exit];c=e.pop();)d[c.id]||(d[c.id]=1,a&&a(c),e.push(c),c.visitInputs(b))},a.prototype.forEach=function(a,d){var e=d?c:b;e(this.exit,function(a,b){a.visitInputsNoConstants(b)},a)},a.prototype.traceMetrics=function(a){var c=new metrics.Counter(!0);b(this.exit,function(a,b){a.visitInputsNoConstants(b)},function(a){c.count(a.nodeName)}),c.trace(a)},a.prototype.trace=function(a){function b(a){return a instanceof n?"yellow":a instanceof Q?"purple":a instanceof v?"green":"white"}function c(a){return a instanceof U?a.project():a}function d(a){a=c(a),h[a.id]||(h[a.id]=!0,a.block&&i.push(a.block),g.push(a),a.visitInputsNoConstants(d))}function e(c){a.writeLn("N"+c.id+' [label = "'+c.toString()+'", color = "'+b(c)+'"];')}function f(b){a.writeLn("N"+b.id+";")}var g=[],h={},i=[];d(this.exit),a.writeLn(""),a.enter("digraph DFG {"),a.writeLn("graph [bgcolor = gray10];"),a.writeLn("edge [color = white];"),a.writeLn("node [shape = box, fontname = Consolas, fontsize = 11, color = white, fontcolor = white];"),a.writeLn("rankdir = BT;"),i.forEach(function(b){a.enter("subgraph cluster"+b.nodes[0].id+" { bgcolor = gray20;"),b.visitNodes(function(a){f(c(a))}),a.leave("}")}),g.forEach(e),g.forEach(function(d){d.visitInputsNoConstants(function(e){e=c(e),a.writeLn("N"+d.id+" -> N"+e.id+" [color="+b(e)+"];")})}),a.leave("}"),a.writeLn("")},a}(),pb=function(){function a(){this.nextBlockID=0,this.blocks=[],this.exit,this.root}function b(a){return a instanceof U?a.project():a}a.fromDFG=function(a){function b(a){if(a instanceof U&&(a=a.project()),!d[a.id]){d[a.id]=!0;var e=a.control;e instanceof o||(e=a.control=new o(e));var f=e.block=c.buildBlock(e,a);e instanceof p&&(c.root=f);for(var g=0;g<e.predecessors.length;g++){var h,i=e.predecessors[g],j=!1;i instanceof U?(h=i.project(),j=i.type===U.Type.TRUE):h=i,h instanceof o&&(h=new u(i),h=new U(h,U.Type.TRUE),e.predecessors[g]=h,h=h.project(),j=!0),b(h);var k=h.control.block;h instanceof t?k.pushSuccessorAt(f,i.selector.value,!0):j&&k.successors.length>0?(k.pushSuccessor(f,!0),k.hasFlippedSuccessors=!0):k.pushSuccessor(f,!0)}}}var c=new pb;c.dfg=a;var d=[];return b(a.exit),c.splitCriticalEdges(),c.exit=a.exit.control.block,c.computeDominators(!0),c},a.prototype.buildRootAndExit=function(){this.blocks[0].predecessors.length>0?(this.root=new nb(this.nextBlockID++),this.blocks.push(this.root),this.root.pushSuccessor(this.blocks[0],!0)):this.root=this.blocks[0];for(var a=[],b=0;b<this.blocks.length;b++){var c=this.blocks[b];0===c.successors.length&&a.push(c)}if(0===a.length)unexpected("Must have an exit block.");else if(1===a.length&&a[0]!==this.root)this.exit=a[0];else{this.exit=new nb(this.nextBlockID++),this.blocks.push(this.exit);for(var b=0;b<a.length;b++)a[b].pushSuccessor(this.exit,!0)}},a.prototype.fromString=function(a,b){function c(a){var b=f[a];return b?b:(f[a]=b=new nb(e.nextBlockID++),b.name=a,g.push(b),b)}function d(a,b){c(a).pushSuccessor(c(b),!0)}var e=this,f=e.blockNames||(e.blockNames={}),g=e.blocks,h=a.replace(/\ /g,"").split(",");h.forEach(function(a){for(var b=a.split("->"),e=null,f=0;f<b.length;f++){var g=b[f];e?d(e,g):c(g),e=g}}),this.root=f[b]},a.prototype.buildBlock=function(a,b){var c=new nb(this.nextBlockID++,a,b);return this.blocks.push(c),c},a.prototype.createBlockSet=function(){return this.setConstructor||(this.setConstructor=BitSetFunctor(this.blocks.length)),new this.setConstructor},a.prototype.computeReversePostOrder=function(){if(this.order)return this.order;var a=this.order=[];this.depthFirstSearch(null,a.push.bind(a)),a.reverse();for(var b=0;b<a.length;b++)a[b].rpo=b;return a},a.prototype.depthFirstSearch=function(a,b){function c(e){d.set(e.id),a&&a(e);for(var f=e.successors,g=0,h=f.length;h>g;g++){var i=f[g];d.get(i.id)||c(i)}b&&b(e)}var d=this.createBlockSet();c(this.root)},a.prototype.computeDominators=function(a){function b(a,b){for(g.clearAll();a>=0;)g.set(a),a=e[a];for(;b>=0&&!g.get(b);)b=e[b];return b}function c(a,c){e[a]=e[a]<0?c:b(e[a],c)}function d(a){var b;return void 0!==a.dominatorDepth?a.dominatorDepth:(b=a.dominator?d(a.dominator)+1:0,a.dominatorDepth=b)}for(var e=new Int32Array(this.blocks.length),f=0;f<e.length;f++)e[f]=-1;var g=this.createBlockSet();if(this.depthFirstSearch(function(a){for(var b=a.successors,d=0,e=b.length;e>d;d++)c(b[d].id,a.id)}),a){for(var f=0,h=this.blocks.length;h>f;f++)this.blocks[f].dominator=this.blocks[e[f]];for(var f=0,h=this.blocks.length;h>f;f++)d(this.blocks[f])}return e},a.prototype.computeLoops=function(){function a(a){a.isLoopHeader||(a.isLoopHeader=!0,a.loops=1<<e,e+=1)}function b(e){if(d.get(e.id))return c.get(e.id)&&a(e),e.loops;d.set(e.id),c.set(e.id);for(var f=0,g=0,h=e.successors.length;h>g;g++)f|=b(e.successors[g]);return e.isLoopHeader&&(f&=~e.loops),e.loops=f,c.clear(e.id),f}{var c=this.createBlockSet(),d=this.createBlockSet(),e=0;b(this.root)}};var c=function(){function a(){this.entries=[]}return a.prototype.addUse=function(a,b){var c=this.entries[a.id];c||(c=this.entries[a.id]={def:a,uses:[]}),c.uses.pushUnique(b)},a.prototype.trace=function(a){a.enter("> Uses"),this.entries.forEach(function(b){a.writeLn(b.def.id+" -> ["+b.uses.map(d).join(", ")+"] "+b.def)}),a.leave("<")},a.prototype.replace=function(a,b){var c=this.entries[a.id];if(0===c.uses.length)return!1;var d=0;return c.uses.forEach(function(c){d+=c.replaceInput(a,b)}),c.uses=[],!0},a}();return a.prototype.computeUses=function(){Timer.start("computeUses");var a=k&&new IndentingWriter;k&&a.enter("> Compute Uses");var b=this.dfg,e=new c;return b.forEachInPreOrderDepthFirstSearch(function(a){a.visitInputs(function(b){e.addUse(b,a)})}),k&&(a.enter("> Uses"),e.entries.forEach(function(b){a.writeLn(b.def.id+" -> ["+b.uses.map(d).join(", ")+"] "+b.def)}),a.leave("<"),a.leave("<")),Timer.stop(),e},a.prototype.verify=function(){var a=k&&new IndentingWriter;k&&a.enter("> Verify");var b=this.computeReversePostOrder();b.forEach(function(a){a.phis&&a.phis.forEach(function(){})}),k&&a.leave("<")},a.prototype.optimizePhis=function(){function a(a,b){k&&c.writeLn("Update "+a+" with "+b);var e=f[a.id];if(0===e.uses.length)return!1;k&&c.writeLn("Replacing: "+a.id+" in ["+e.uses.map(d).join(", ")+"] with "+b.id);for(var g=0,h=e.uses,i=0,j=h.length;j>i;i++)g+=h[i].replaceInput(a,b);return e.uses=[],!0}function b(a,b){return b=b.unique(),1===b.length?b[0]:2===b.length?b[0]===a?b[1]:b[1]===a?b[0]:a:a}var c=k&&new IndentingWriter;k&&c.enter("> Optimize Phis");var e=[],f=this.computeUses().entries;f.forEach(function(a){g(a.def)&&e.push(a.def)}),k&&c.writeLn("Trying to optimize "+e.length+" phis.");for(var h=0,i=0,j=!0;j;)i++,j=!1,e.forEach(function(c){var d=b(c,c.args);d!==c&&a(c,d)&&(j=!0,h++)});k&&(c.writeLn("Simplified "+h+" phis, in "+i+" iterations."),c.leave("<"))},a.prototype.splitCriticalEdges=function(){var a=k&&new IndentingWriter,b=this.blocks,c=[];k&&a.enter("> Splitting Critical Edges");for(var d=0;d<b.length;d++){var e=b[d].successors;if(e.length>1)for(var f=0;f<e.length;f++)e[f].predecessors.length>1&&c.push({from:b[d],to:e[f]})}var g=c.length;g&&k&&(a.writeLn("Splitting: "+g),this.trace(a));for(var h;h=c.pop();){var i=h.from.successors.indexOf(h.to),j=h.to.predecessors.indexOf(h.from);k&&a.writeLn("Splitting critical edge: "+h.from+" -> "+h.to);var l=h.to,m=l.region,n=m.predecessors[j],p=new o(n),q=new u(p),r=this.buildBlock(p,q);m.predecessors[j]=new U(q,U.Type.TRUE);var s=h.from;s.successors[i]=r,r.pushPredecessor(s),r.pushSuccessor(l),l.predecessors[j]=r}return g&&k&&this.trace(a),k&&a.leave("<"),g},a.prototype.allocateVariables=function(){function a(a){j(a,U.Type.STORE)||a instanceof J||a instanceof v&&(a.variable=new R("v"+a.id),k&&b.writeLn("Allocated: "+a.variable+" to "+a))}var b=k&&new IndentingWriter;k&&b.enter("> Allocating Virtual Registers");var c=this.computeReversePostOrder();c.forEach(function(b){b.nodes.forEach(a),b.phis&&b.phis.forEach(a)});for(var d=[],e=0;e<c.length;e++){var f=c[e],g=f.phis,h=f.predecessors;if(g)for(var i=0;i<g.length;i++){var l=g[i];k&&b.writeLn("Emitting moves for: "+l);for(var m=l.args,n=0;n<h.length;n++){var o=h[n],p=m[n];if(!p.abstract&&!j(p,U.Type.STORE)){var q=d[o.id]||(d[o.id]=[]);p=p.variable||p,l.variable!==p&&q.push(new T(l.variable,p))}}}}var r=this.blocks;d.forEach(function(a,c){var d=r[c],e=0;for(k&&b.writeLn(d+" Moves: "+a);a.length;){for(var f=0;f<a.length;f++){for(var g=a[f],h=0;h<a.length;h++)if(f!==h&&a[h].from===g.to){g=null;break}g&&(a.splice(f--,1),d.append(g))}if(a.length){k&&b.writeLn("Breaking Cycle");var g=a[0],i=new R("t"+e++);r[c].append(new T(i,g.to));for(var f=1;f<a.length;f++)a[f].from===g.to&&(a[f].from=i)}}}),k&&b.leave("<")},a.prototype.scheduleEarly=function(){function a(a){return s[a.id]}function c(a){return a.mustNotFloat||a.shouldNotFloat?!1:a.mustFloat||a.shouldFloat?!0:a instanceof bb||a instanceof $||a instanceof ab?!0:a instanceof W||a instanceof X||a instanceof bb}function e(a){s[a.id]=!0,c(a)||a.control.block.append(a)}function j(a,b){l&&m.writeLn("Scheduled: "+a+" in "+b),a.control=b,e(a)}function k(c){l&&m.enter("> Schedule: "+c);var g=[];c.visitInputs(function(a){h(a)||i(a)&&g.push(b(a))}),l&&m.writeLn("Inputs: ["+g.map(d)+"], length: "+g.length);for(var o=0;o<g.length;o++){var r=g[o];f(r)&&!a(r)&&k(r)}if(c.control)c instanceof q||c instanceof Q||c instanceof p||a(c)||e(c);else if(g.length){for(var s=g[0].control,o=1;o<g.length;o++){var t=g[o].control;s.block.dominatorDepth<t.block.dominatorDepth&&(s=t)}j(c,s)}else j(c,n.root.region);l&&m.leave("<")}var l=!1,m=l&&new IndentingWriter;l&&m.enter("> Schedule Early");var n=this,r=this.dfg,s=[],t=[];r.forEachInPreOrderDepthFirstSearch(function(a){a instanceof o||a instanceof u||(a.control&&t.push(a),g(a)&&a.args.forEach(function(a){c(a)&&(a.mustNotFloat=!0)}))},!0),l&&t.forEach(function(a){print("Root: "+a)});for(var v=0;v<t.length;v++){var w=t[v];if(w instanceof Q){var x=w.control.block;(x.phis||(x.phis=[])).push(w)}w.control&&k(w)}l&&m.leave("<"),t.forEach(function(a){a=b(a),a===r.start||a instanceof o})},a.prototype.trace=function(a){function b(a){f[a.id]||(f[a.id]=!0,g.push(a),a.visitSuccessors(b))}function c(){return"black"}function d(){return"filled"}function e(a){return a===h?"house":a===i?"invhouse":"box"}var f=[],g=[],h=this.root,i=this.exit;b(h),a.writeLn(""),a.enter("digraph CFG {"),a.writeLn("graph [bgcolor = gray10];"),a.writeLn("edge [fontname = Consolas, fontsize = 11, color = white, fontcolor = white];"),a.writeLn("node [shape = box, fontname = Consolas, fontsize = 11, color = white, fontcolor = white, style = filled];"),a.writeLn("rankdir = TB;"),g.forEach(function(b){var f="",g="";void 0!==b.loops,void 0!==b.name&&(g+=" "+b.name),void 0!==b.rpo&&(g+=" O: "+b.rpo),a.writeLn("B"+b.id+' [label = "B'+b.id+g+f+'", fillcolor = "'+c(b)+'", shape='+e(b)+", style="+d(b)+"];")}),g.forEach(function(b){b.visitSuccessors(function(c){a.writeLn("B"+b.id+" -> B"+c.id)}),b.dominator&&a.writeLn("B"+b.id+" -> B"+b.dominator.id+" [color = orange];"),b.follow&&a.writeLn("B"+b.id+" -> B"+b.follow.id+" [color = purple];")}),a.leave("}"),a.writeLn("")},a}(),qb=function(){function a(){}function b(a,b){if(h(a.argument))return new Y(a.operator.evaluate(a.argument.value));if(b){var c=d(a.argument,!0);if(a.operator===kb.TRUE)return c;if(!(c instanceof X))return new X(a.operator,c);if(a.operator===kb.FALSE&&c.operator===kb.FALSE)return c.argument}return a}function c(a){return h(a.left)&&h(a.right)?new Y(a.operator.evaluate(a.left.value,a.right.value)):a}function d(a,d){return a instanceof X?b(a,d):a instanceof W?c(a,d):a}return a.prototype.tryFold=d,a}();a.isConstant=h,a.Block=nb,a.Node=m,a.Start=p,a.Null=lb,a.Undefined=mb,a.This=$,a.Throw=_,a.Arguments=ab,a.ASGlobal=gb,a.Projection=U,a.Region=o,a.Latch=V,a.Binary=W,a.Unary=X,a.Constant=Y,a.ASFindProperty=P,a.GlobalProperty=Z,a.GetProperty=D,a.SetProperty=J,a.CallProperty=y,a.ASCallProperty=z,a.ASCallSuper=A,a.ASGetProperty=E,a.ASGetSuper=I,a.ASHasProperty=G,a.ASDeleteProperty=O,a.ASGetDescendants=F,a.ASSetProperty=K,a.ASSetSuper=M,a.ASGetSlot=H,a.ASSetSlot=L,a.Call=x,a.ASNew=C,a.Phi=Q,a.Stop=r,a.If=s,a.Switch=t,a.End=q,a.Jump=u,a.ASScope=fb,a.Operator=kb,a.Variable=R,a.Move=T,a.Copy=S,a.Parameter=bb,a.NewArray=cb,a.NewObject=db,a.ASNewActivation=hb,a.KeyValuePair=eb,a.ASMultiname=ib,a.DFG=ob,a.CFG=pb,a.Flags=jb,a.PeepholeOptimizer=qb}("undefined"==typeof exports?IR={}:exports);var c4Options=systemOptions.register(new OptionSet("C4 Options")),enableC4=c4Options.register(new Option("c4","c4","boolean",!1,"Enable the C4 compiler.")),c4TraceLevel=c4Options.register(new Option("tc4","tc4","number",0,"Compiler Trace Level")),enableRegisterAllocator=c4Options.register(new Option("ra","ra","boolean",!1,"Enable register allocator.")),getPublicQualifiedName=Multiname.getPublicQualifiedName,createName=function(a,b){return isNumeric(b)||isObject(b)?b:new Multiname(a,b)};!function(a){function b(a){return a instanceof K&&isNumeric(a.value)}function c(a){return a instanceof K&&isString(a.value)}function d(a){return a instanceof K&&a.value instanceof Multiname}function e(a){return b(a)?!0:a.ty&&a.ty.isNumeric()}function f(a,b){return e(a)&&e(b)||g(a)&&g(b)?!0:!1}function g(a){return c(a)?!0:a.ty&&a.ty.isString()}function h(a){return new K(a)}function i(a){return h(Multiname.getQualifiedName(a))}function j(a,b,c){for(var d=c.split("."),e=b,f=0;f<d.length;f++)e=new IR.GetProperty(null,a.store,e,h(d[f])),e.shouldFloat=!0,a.loads.push(e);return e}function k(a){var b=new IR.GlobalProperty(a);return b.mustFloat=!0,b}function l(){}function m(a,b){var c=new J(a,b);return W&&(c=W.tryFold(c)),c}function n(a,b,c){var d=new I(a,b,c);return b.ty&&b.ty!==Type.Any&&b.ty===c.ty&&(a===O.EQ?d.operator=O.SEQ:a===O.NE&&(d.operator=O.SNE)),W&&(d=W.tryFold(d)),d}function o(a){return n(O.OR,a,h(0))}function p(a){return n(O.URSH,a,h(0))}function q(a){return e(a)?a:m(O.PLUS,a)}function r(a){return m(O.FALSE,m(O.FALSE,a))}function s(a){return a.shouldNotFloat=!0,a}function t(a){return a.shouldFloat=!0,a}function u(a,b,c){return new L(null,null,a,b,c,IR.Flags.PRISTINE)}function v(a,b){return u(k(a),null,[b])}function w(a){return c(a)?a:u(k("String"),null,[a])}function x(a){return c(a)?a:u(k("asCoerceString"),null,[a])}function y(a){return $[Multiname.getQualifiedName(a)]}function z(a){return _[Multiname.getQualifiedName(a)]}function A(a,b,c,d){Counter.count("Compiler: Compiled Methods"),Timer.start("Compiler"),Timer.start("Mark Loops"),b.analysis.markLoops(),Timer.stop(),Shumway.AVM2.Runtime.enableVerifier.value&&(Timer.start("Verify"),a.verifyMethod(b,c),Timer.stop());var e=c4TraceLevel.value>0,f=c4TraceLevel.value>1;Timer.start("Build IR"),B.startNumbering();var g=new ab(b,c,d).buildGraph();Timer.stop(),f&&g.trace(V),Timer.start("Build CFG");var h=g.buildCFG();Timer.stop(),Timer.start("Optimize Phis"),h.optimizePhis(),Timer.stop(),Timer.start("Schedule Nodes"),h.scheduleEarly(),Timer.stop(),f&&h.trace(V),Timer.start("Verify IR"),h.verify(),Timer.stop(),Timer.start("Allocate Variables"),h.allocateVariables(),Timer.stop(),Timer.start("Generate Source");var i=Backend.generate(h,enableRegisterAllocator.value);return Timer.stop(),e&&V.writeLn(i.body),B.stopNumbering(),Timer.stop(),i}var B=IR.Node,C=IR.Start,D=IR.Null,E=IR.Undefined,F=IR.This,G=IR.Projection,H=IR.Region,I=IR.Binary,J=IR.Unary,K=IR.Constant,L=IR.Call,M=IR.Phi,N=IR.Stop,O=IR.Operator,P=IR.Parameter,Q=IR.NewArray,R=IR.NewObject,S=IR.KeyValuePair,T=IR.isConstant,U=IR.DFG,V=(IR.CFG,new IndentingWriter),W=new IR.PeepholeOptimizer,X=!1,Y=function(){function a(a){this.id=e+=1,this.index=a,this.local=[],this.stack=[],this.scope=[],this.store=E,this.loads=[],this.saved=E}function b(a,b,c){var d=b instanceof M&&b.control===a?b:new M(a,b);return d.pushValue(c),d}function c(a,c,d){for(var e=0;e<c.length;e++)c[e]=b(a,c[e],d[e])}function d(a){return a instanceof B?a.toString(!0):a}var e=0;return a.prototype.clone=function(a){var b=new Y;return b.index=void 0!==a?a:this.index,b.local=this.local.slice(0),b.stack=this.stack.slice(0),b.scope=this.scope.slice(0),b.loads=this.loads.slice(0),b.saved=this.saved,b.store=this.store,b},a.prototype.matches=function(a){return this.stack.length===a.stack.length&&this.scope.length===a.scope.length&&this.local.length===a.local.length},a.prototype.makeLoopPhis=function(a){function b(b){var c=new M(a,b);return c.isLoop=!0,c}var c=new Y;return c.index=this.index,c.local=this.local.map(b),c.stack=this.stack.map(b),c.scope=this.scope.map(b),c.loads=this.loads.slice(0),c.saved=this.saved,c.store=b(this.store),c},a.prototype.optimize=function f(){function f(a){if(a instanceof M&&!a.isLoop){var b=a.args.unique();if(1===b.length)return a.seal(),Counter.count("Builder: OptimizedPhi"),b[0]}return a}this.local=this.local.map(f),this.stack=this.stack.map(f),this.scope=this.scope.map(f),this.saved=f(this.saved),this.store=f(this.store)},a.prototype.merge=function(a,d){c(a,this.local,d.local),c(a,this.stack,d.stack),c(a,this.scope,d.scope),this.store=b(a,this.store,d.store),this.store.abstract=!0},a.prototype.trace=function(a){a.writeLn(this.toString())},a.prototype.toString=function(){return"<"+String(this.id+" @ "+this.index).padRight(" ",10)+(" M: "+d(this.store)).padRight(" ",14)+(" X: "+d(this.saved)).padRight(" ",14)+(" $: "+this.scope.map(d).join(", ")).padRight(" ",20)+(" L: "+this.local.map(d).join(", ")).padRight(" ",40)+(" S: "+this.stack.map(d).join(", ")).padRight(" ",60)},a}(),Z=v.bind(null,"asCoerceObject"),$=createEmptyObject();$[Multiname.Int]=o,$[Multiname.Uint]=p,$[Multiname.Number]=q,$[Multiname.String]=x,$[Multiname.Object]=Z,$[Multiname.Boolean]=r;var _=createEmptyObject();_[Multiname.Int]=o,_[Multiname.Uint]=p,_[Multiname.Number]=v.bind(null,"Number"),_[Multiname.String]=v.bind(null,"String"),_[Multiname.Object]=v.bind(null,"Object"),_[Multiname.Boolean]=v.bind(null,"Boolean");var ab=function(){function a(a,b,c){this.abc=a.abc,this.scope=b,this.methodInfo=a,this.hasDynamicScope=c}return a.prototype.buildStart=function(a){var b=this.methodInfo,c=a.entryState=new Y(0);c.local.push(new F(a));for(var d=this.hasDynamicScope?1:0,e=b.parameters.length,f=0;e>f;f++)c.local.push(new P(a,d+f,b.parameters[f].name));for(var f=e;f<b.localCount;f++)c.local.push(E);c.store=new G(a,G.Type.STORE),a.scope=this.hasDynamicScope?new P(a,0,SAVED_SCOPE_NAME):new K(this.scope),c.saved=new G(a,G.Type.SCOPE),a.domain=new K(this.domain);var g=new IR.Arguments(a);if(b.needsRest()||b.needsArguments()){var i=h(d+(b.needsRest()?e:0));c.local[e+1]=new L(a,c.store,k("sliceArguments"),null,[g,i],IR.Flags.PRISTINE)}for(var l=j(c,g,"length"),f=0;e>f;f++){var m=b.parameters[f],n=f+1,o=c.local[n];if(void 0!==m.value){var p;p=X?new IR.Binary(O.SEQ,new IR.Unary(O.TYPE_OF,o),h("undefined")):new IR.Binary(O.LT,l,h(d+f+1)),o=new IR.Latch(null,p,h(m.value),o)}if(m.type&&!m.type.isAnyName()){var q=y(m.type);q?o=q(o):c4CoerceNonPrimitiveParameters&&(o=new L(a,c.store,k("asCoerceByMultiname"),null,[h(this.abc.applicationDomain),h(m.type),o],!0))}c.local[n]=o}return a},a.prototype.buildGraph=function(){function a(a,b,c){function C(){return c.saved}function H(a){if(void 0!==a){if(a<Sb.length)return Sb[Sb.length-1-a];if(a===Sb.length)return C();for(var b=C(),c=a-Sb.length,d=0;c>d;d++)b=eb(b,"parent");return b}return Sb.length>0?Sb.top():C()}function K(a){Ub.ti&&(a.ty||(a.ty=Ub.ti.type)),Rb.push(a)}function M(){return Rb.pop()}function N(a){return Rb.popMany(a)}function U(a){K(Hb[a])}function $(a){Hb[a]=s(M())}function _(b){var c,d,e=P[b],f=e.flags;return d=e.isRuntimeName()?Rb.pop():h(e.name),c=e.isRuntimeNamespace()?t(new Q(a,[M()])):h(e.namespaces),new IR.ASMultiname(c,d,f)}function ab(a){return d(a)&&Multiname.isQName(a.value)?h(Multiname.getQualifiedName(a.value)):a}function cb(a){return a&&a.object?h(a.object):new IR.ASGlobal(null,C())}function db(b,d,e){var f=new IR.ASFindProperty(a,c.store,H(),b,X,d);if(e){if(e.object)return e.object instanceof Global&&!e.object.isExecuting()?(l("Can't optimize findProperty "+b+", global object is not yet executed or executing."),f):h(e.object);if(void 0!==e.scopeDepth)return gb(H(e.scopeDepth))}return l("Can't optimize findProperty "+b),f}function eb(a,b){return j(c,a,b)}function fb(a,b){var c=y(a);return c?c(b):c4CoerceNonPrimitive?ub(k("asCoerceByMultiname"),null,[X,h(a),b]):b}function gb(a){return a instanceof IR.ASScope?a.object:eb(a,"object")}function hb(a){return c.store=new G(a,G.Type.STORE),a.loads=c.loads.slice(0),c.loads.length=0,a}function ib(a){return c.loads.push(a),a}function jb(a){var b=a.namespaces,c=a.name;return Shumway.AVM2.Runtime.globalMultinameAnalysis.value?T(b)&&T(c)&&!a.isAttribute()?!isNumeric(c.value)&&isString(c.value)&&c.value?GlobalMultinameResolver.resolveMultiname(new Multiname(b.value,c.value,a.flags)):(Counter.count("GlobalMultinameResolver: Cannot resolve numeric or any names."),!1):void Counter.count("GlobalMultinameResolver: Cannot resolve runtime multiname or attribute."):void 0}function kb(b,d,e,f,g){if(g&&g.trait&&g.trait.isMethod()&&g.baseClass){var i=VM_OPEN_METHOD_PREFIX+Multiname.getQualifiedName(g.trait.name),j=eb(h(g.baseClass),"traitsPrototype."+i);return ub(j,d,f)}return hb(new IR.ASCallSuper(a,c.store,d,e,f,IR.Flags.PRISTINE,b))}function lb(b,d,e,f){if(f&&f.trait&&f.trait.isGetter()&&f.baseClass){var g=VM_OPEN_GET_METHOD_PREFIX+Multiname.getQualifiedName(f.trait.name),i=eb(h(f.baseClass),"traitsPrototype."+g);return ub(i,d,[])}return hb(new IR.ASGetSuper(a,c.store,d,e,b))}function mb(b,d,e,f,g){if(g&&g.trait&&g.trait.isSetter()&&g.baseClass){var i=VM_OPEN_SET_METHOD_PREFIX+Multiname.getQualifiedName(g.trait.name),j=eb(h(g.baseClass),"traitsPrototype."+i);return ub(j,d,[f])}return hb(new IR.ASSetSuper(a,c.store,d,e,f,b))}function nb(a,b,c,d){if(d){if(d.noCallSuperNeeded)return;if(d.baseClass){var e=eb(h(d.baseClass),"instanceConstructorNoInitialize");return void ub(e,b,c)}}e=eb(a,"object.baseClass.instanceConstructorNoInitialize"),ub(e,b,c)}function ob(b,d,e,f,g){if(g&&g.trait){if(g.trait.isMethod()){var i;return i=g.trait.holder instanceof InstanceInfo&&g.trait.holder.isInterface()?Multiname.getPublicQualifiedName(Multiname.getName(g.trait.name)):Multiname.getQualifiedName(g.trait.name),i=VM_OPEN_METHOD_PREFIX+i,hb(new IR.CallProperty(a,c.store,b,h(i),e,IR.Flags.PRISTINE))}if(g.trait.isClass()){var j=z(g.trait.name);if(j)return j(e[0]);var k=Multiname.getQualifiedName(g.trait.name);return hb(new IR.CallProperty(a,c.store,b,h(k),e,0))}}else if(g&&g.propertyQName)return hb(new IR.CallProperty(a,c.store,b,h(g.propertyQName),e,IR.Flags.PRISTINE));var k=jb(d);return hb(k?new IR.ASCallProperty(a,c.store,b,h(Multiname.getQualifiedName(k)),e,IR.Flags.PRISTINE|IR.Flags.RESOLVED,f):new IR.ASCallProperty(a,c.store,b,d,e,IR.Flags.PRISTINE,f))}function pb(b,d,e,f){if(f=!!f,e){if(e.trait){if(e.trait.isConst()&&e.trait.hasDefaultValue)return h(e.trait.value);var g=new IR.GetProperty(a,c.store,b,i(e.trait.name));return e.trait.isGetter()?hb(g):ib(g)}if(e.propertyQName)return hb(new IR.GetProperty(a,c.store,b,h(e.propertyQName)));if(e.isDirectlyReadable)return hb(new IR.GetProperty(a,c.store,b,d.name));if(e.isIndexedReadable)return hb(new IR.ASGetProperty(a,c.store,b,d,IR.Flags.INDEXED|(f?IR.Flagas.IS_METHOD:0)))}l("Can't optimize getProperty "+d);var j=jb(d);return j?hb(new IR.ASGetProperty(a,c.store,b,h(Multiname.getQualifiedName(j)),IR.Flags.RESOLVED|(f?IR.Flagas.IS_METHOD:0))):(Counter.count("Compiler: Slow ASGetProperty"),hb(new IR.ASGetProperty(a,c.store,b,d,f?IR.Flagas.IS_METHOD:0)))}function qb(b,d,e,f){if(f){if(f.trait){var g=f.trait.typeName?y(f.trait.typeName):null;return g&&(e=g(e)),void hb(new IR.SetProperty(a,c.store,b,i(f.trait.name),e))}if(f.propertyQName)return hb(new IR.SetProperty(a,c.store,b,h(f.propertyQName),e));
if(f.isDirectlyWriteable)return hb(new IR.SetProperty(a,c.store,b,d.name,e));if(f.isIndexedWriteable)return hb(new IR.ASSetProperty(a,c.store,b,d,e,IR.Flags.INDEXED))}l("Can't optimize setProperty "+d);jb(d);return hb(new IR.ASSetProperty(a,c.store,b,d,e,0))}function rb(b,d){return d=ab(d),new IR.ASGetDescendants(a,c.store,b,d)}function sb(b,d,e){if(e){var f=e.trait;if(f){if(f.isConst()&&e.trait.hasDefaultValue)return h(f.value);var g=Multiname.getQualifiedName(f.name);return hb(new IR.GetProperty(a,c.store,b,h(g)))}}return l("Can't optimize getSlot "+d),hb(new IR.ASGetSlot(null,c.store,b,d))}function tb(b,d,e,f){if(f){var g=f.trait;if(g){var i=Multiname.getQualifiedName(g.name);return void hb(new IR.SetProperty(a,c.store,b,h(i),e))}}l("Can't optimize setSlot "+d),hb(new IR.ASSetSlot(a,c.store,b,d,e))}function ub(b,d,e){return hb(new L(a,c.store,b,d,e,IR.Flags.PRISTINE))}function vb(b,d,e,f){return hb(new L(a,c.store,b,d,e,f?IR.Flags.PRISTINE:0))}function wb(a){var b;a.isBinary()&&(b=M());var c,d=M();return c=b?n(a,d,b):m(a,d),W&&(c=W.tryFold(c,!0)),c}function xb(a){var b=m(O.FALSE,wb(a));return W&&(b=W.tryFold(b,!0)),b}function yb(a,b){var c,d;a.isBinary()?(d=M(),c=M(),b&&(d=o(d),c=o(c)),K(n(a,c,d))):(c=M(),b&&(c=o(c)),K(m(a,c)))}function zb(b){var d=new IR.If(a,b);Tb=[{control:new G(d,G.Type.FALSE),target:e[Ub.position+1],state:c},{control:new G(d,G.Type.TRUE),target:Ub.target,state:c}]}function Ab(){Tb=[{control:a,target:Ub.target,state:c}]}function Bb(){Tb=[]}function Cb(){Tb=[]}function Db(b){if(Ub.targets.length>2){Tb=[];for(var d=new IR.Switch(a,b),e=0;e<Ub.targets.length;e++)Tb.push({control:new G(d,G.Type.CASE,h(e)),target:Ub.targets[e],state:c})}else{var f=n(O.SEQ,b,h(0)),g=new IR.If(a,f);Tb=[{control:new G(g,G.Type.FALSE),target:Ub.targets[1],state:c},{control:new G(g,G.Type.TRUE),target:Ub.targets[0],state:c}]}}c.optimize();var Eb=b.entryState;if(Eb){Y&&V.writeLn("Type State: "+Eb);for(var Fb=0;Fb<Eb.local.length;Fb++){var Gb=Eb.local[Fb],Hb=c.local[Fb];Hb.ty||(Hb.ty=Gb)}}var Ib,Jb,Kb,Lb,Mb,Gb,Nb,Ob,Pb,Qb,Hb=c.local,Rb=c.stack,Sb=c.scope,Tb=null;Y&&(V.writeLn("Processing Region: "+a+", Block: "+b.bid),V.enter(("> state: "+a.entryState.toString()).padRight(" ",100))),a.processed=!0;for(var Ub,Vb=b.position,Wb=b.end.position;Wb>=Vb;Vb++){Ub=e[Vb];var Xb=Ub.op;switch(c.index=Vb,Xb){case 3:hb(new IR.Throw(a,M())),Z.push({region:a,store:c.store,value:E}),Bb();break;case 98:U(Ub.index);break;case 208:case 209:case 210:case 211:U(Xb-OP_getlocal0);break;case 99:$(Ub.index);break;case 212:case 213:case 214:case 215:$(Xb-OP_setlocal0);break;case 28:Sb.push(new IR.ASScope(H(),M(),!0));break;case 48:Sb.push(new IR.ASScope(H(),M(),!1));break;case 29:Sb.pop();break;case 100:K(cb(Ub.ti));break;case 101:K(gb(c.scope[Ub.index]));break;case 93:K(db(_(Ub.index),!0,Ub.ti));break;case 94:K(db(_(Ub.index),!1,Ub.ti));break;case 102:Mb=_(Ub.index),Ib=M(),K(pb(Ib,Mb,Ub.ti,!1));break;case 89:Mb=_(Ub.index),Ib=M(),K(rb(Ib,Mb,Ub.ti));break;case 96:Mb=_(Ub.index),K(pb(db(Mb,!0,Ub.ti),Mb,Ub.ti,!1));break;case 104:case 97:Lb=M(),Mb=_(Ub.index),Ib=M(),qb(Ib,Mb,Lb,Ub.ti);break;case 106:Mb=_(Ub.index),Ib=M(),K(hb(new IR.ASDeleteProperty(a,c.store,Ib,Mb)));break;case 108:Ib=M(),K(sb(Ib,h(Ub.index),Ub.ti));break;case 109:Lb=M(),Ib=M(),tb(Ib,h(Ub.index),Lb,Ub.ti);break;case 4:Mb=_(Ub.index),Ib=M(),K(lb(C(),Ib,Mb,Ub.ti));break;case 5:Lb=M(),Mb=_(Ub.index),Ib=M(),mb(C(),Ib,Mb,Lb,Ub.ti);break;case 241:case 240:break;case 64:K(u(bb,null,[h(I[Ub.index]),H(),h(!0)]));break;case 65:Nb=N(Ub.argCount),Ib=M(),Kb=M(),K(vb(Kb,Ib,Nb));break;case 70:case 79:case 76:Nb=N(Ub.argCount),Mb=_(Ub.index),Ib=M(),Lb=ob(Ib,Mb,Nb,Xb===OP_callproplex,Ub.ti),Xb!==OP_callpropvoid&&K(Lb);break;case 69:case 78:Mb=_(Ub.index),Nb=N(Ub.argCount),Ib=M(),Lb=kb(C(),Ib,Mb,Nb,Ub.ti),Xb!==OP_callsupervoid&&K(Lb);break;case 66:Nb=N(Ub.argCount),Ib=M(),K(hb(new IR.ASNew(a,c.store,Ib,Nb)));break;case 73:Nb=N(Ub.argCount),Ib=M(),nb(C(),Ib,Nb,Ub.ti);break;case 74:Nb=N(Ub.argCount),Mb=_(Ub.index),Ib=M(),Kb=pb(Ib,Mb,Ub.ti,!1),K(hb(new IR.ASNew(a,c.store,Kb,Nb)));break;case 128:if(Ub.ti&&Ub.ti.noCoercionNeeded){Counter.count("Compiler: NoCoercionNeeded");break}Counter.count("Compiler: CoercionNeeded"),Lb=M(),K(fb(P[Ub.index],Lb));break;case 131:case 115:K(o(M()));break;case 136:case 116:K(p(M()));break;case 132:case 117:K(q(M()));break;case 129:case 118:K(r(M()));break;case 120:K(ub(k("checkFilter"),null,[M()]));break;case 130:break;case 133:K(x(M()));break;case 112:K(w(M()));break;case 135:Gb=M(),c4AsTypeLate&&(Lb=M(),K(ub(k("asAsType"),null,[Gb,Lb])));break;case 72:case 71:Lb=E,Xb===OP_returnvalue&&(Lb=M(),g.returnType&&(Ub.ti&&Ub.ti.noCoercionNeeded||(Lb=fb(g.returnType,Lb)))),Z.push({region:a,store:c.store,value:Lb}),Cb();break;case 30:case 35:Jb=M(),Ib=M(),K(new IR.CallProperty(a,c.store,Ib,h(Xb===OP_nextname?"asNextName":"asNextValue"),[Jb],IR.Flags.PRISTINE));break;case 50:var Yb=ub(k("asHasNext2"),null,[Hb[Ub.object],Hb[Ub.index]]);Hb[Ub.object]=eb(Yb,"object"),K(Hb[Ub.index]=eb(Yb,"index"));break;case 32:K(D);break;case 33:K(E);break;case 34:notImplemented();break;case 36:K(h(Ub.value));break;case 37:K(h(Ub.value));break;case 44:K(h(F[Ub.index]));break;case 45:K(h(v[Ub.index]));break;case 46:K(h(A[Ub.index]));break;case 47:K(h(B[Ub.index]));break;case 38:K(h(!0));break;case 39:K(h(!1));break;case 40:K(h(0/0));break;case 41:M();break;case 42:Lb=s(M()),K(Lb),K(Lb);break;case 43:c.stack.push(M(),M());break;case 239:case OP_debugline:case OP_debugfile:break;case 12:zb(xb(O.LT));break;case 24:zb(wb(O.GE));break;case 13:zb(xb(O.LE));break;case 23:zb(wb(O.GT));break;case 14:zb(xb(O.GT));break;case 22:zb(wb(O.LE));break;case 15:zb(xb(O.GE));break;case 21:zb(wb(O.LT));break;case 16:Ab();break;case 17:zb(wb(O.TRUE));break;case 18:zb(wb(O.FALSE));break;case 19:zb(wb(O.EQ));break;case 20:zb(wb(O.NE));break;case 25:zb(wb(O.SEQ));break;case 26:zb(wb(O.SNE));break;case 27:Db(M());break;case 150:yb(O.FALSE);break;case 151:yb(O.BITWISE_NOT);break;case 160:Pb=M(),Ob=M(),Qb=f(Ob,Pb)?O.ADD:Shumway.AVM2.Runtime.useAsAdd?O.AS_ADD:O.ADD,K(n(Qb,Ob,Pb));break;case 197:yb(O.ADD,!0);break;case 161:yb(O.SUB);break;case 198:yb(O.SUB,!0);break;case 162:yb(O.MUL);break;case 199:yb(O.MUL,!0);break;case 163:yb(O.DIV);break;case 164:yb(O.MOD);break;case 165:yb(O.LSH);break;case 166:yb(O.RSH);break;case 167:yb(O.URSH);break;case 168:yb(O.AND);break;case 169:yb(O.OR);break;case 170:yb(O.XOR);break;case 171:yb(O.EQ);break;case 172:yb(O.SEQ);break;case 173:yb(O.LT);break;case 174:yb(O.LE);break;case 175:yb(O.GT);break;case 176:yb(O.GE);break;case 144:yb(O.NEG);break;case 196:yb(O.NEG,!0);break;case 145:case 192:case 147:case 193:K(h(1)),K(Xb===OP_increment||Xb===OP_decrement?q(M()):o(M())),yb(Xb===OP_increment||Xb===OP_increment_i?O.ADD:O.SUB);break;case 146:case 194:case 148:case 195:K(h(1)),K(Xb===OP_inclocal||Xb===OP_declocal?q(Hb[Ub.index]):o(Hb[Ub.index])),yb(Xb===OP_inclocal||Xb===OP_inclocal_i?O.ADD:O.SUB),$(Ub.index);break;case 177:Gb=M(),Lb=M(),K(ub(eb(Gb,"isInstanceOf"),null,[Lb]));break;case 178:Lb=M(),Mb=_(Ub.index),Gb=pb(db(Mb,!1),Mb),K(ub(k("asIsType"),null,[Gb,Lb]));break;case 179:Gb=M(),Lb=M(),K(ub(k("asIsType"),null,[Gb,Lb]));break;case 180:Ib=M(),Lb=M(),Mb=new IR.ASMultiname(E,Lb,0),K(hb(new IR.ASHasProperty(a,c.store,Ib,Mb)));break;case 149:K(ub(k("asTypeOf"),null,[M()]));break;case 8:K(E),$(Ub.index);break;case 83:Nb=N(Ub.argCount),Gb=M(),Kb=k("applyType"),K(ub(Kb,null,[X,Gb,new Q(a,Nb)]));break;case 86:Nb=N(Ub.argCount),K(new Q(a,Nb));break;case 85:for(var Zb=[],Fb=0;Fb<Ub.argCount;Fb++){var Lb=M(),$b=M();$b=h(Multiname.getPublicQualifiedName($b.value)),Zb.push(new S($b,Lb))}K(new R(a,Zb));break;case 87:K(new IR.ASNewActivation(h(g)));break;case 88:Kb=k("createClass"),K(ub(Kb,null,[h(J[Ub.index]),M(),H()]));break;default:unexpected("Not Implemented: "+Ub)}Xb!==OP_debug&&Xb!==OP_debugfile&&Xb!==OP_debugline&&Y&&V.writeLn(("state: "+c.toString()).padRight(" ",100)+" : "+Vb+", "+Ub.toString(this.abc))}return Y&&V.leave(("< state: "+c.toString()).padRight(" ",100)),Tb||(Tb=[],Ub.position+1<=e.length&&Tb.push({control:a,target:e[Ub.position+1],state:c})),Tb}for(var b=this.methodInfo.analysis,c=b.blocks,e=b.bytecodes,g=this.methodInfo,v=this.abc.constantPool.ints,A=this.abc.constantPool.uints,B=this.abc.constantPool.doubles,F=this.abc.constantPool.strings,I=this.abc.methods,J=this.abc.classes,P=this.abc.constantPool.multinames,X=new K(this.abc.applicationDomain),Y=c4TraceLevel.value>2,Z=[],$=0;$<c.length;$++)c[$].blockDominatorOrder=$;var _=new Shumway.SortedList(function(a,b){return a.block.blockDominatorOrder-b.block.blockDominatorOrder}),ab=new C(null);this.buildStart(ab);var bb=k("createFunction");_.push({region:ab,block:c[0]});for(var cb;cb=_.pop();)a(cb.region,cb.block,cb.region.entryState.clone()).forEach(function(a){var b=a.target,c=b.region;c?(Y&&V.enter("Merging into region: "+c+" @ "+b.position+", block "+b.bid+" {"),Y&&V.writeLn("  R "+c.entryState),Y&&V.writeLn("+ I "+a.state),c.entryState.merge(c,a.state),c.predecessors.push(a.control),Y&&V.writeLn("  = "+c.entryState),Y&&V.leave("}")):(c=b.region=new H(a.control),b.loop&&Y&&V.writeLn("Adding PHIs to loop region."),c.entryState=b.loop?a.state.makeLoopPhis(c):a.state.clone(b.position),Y&&V.writeLn("Adding new region: "+c+" @ "+b.position+" to worklist."),_.push({region:c,block:b}))}),Y&&V.enter("Worklist: {"),_.forEach(function(a){Y&&V.writeLn(a.region+" "+a.block.bdo+" "+a.region.entryState)}),Y&&V.leave("}");Y&&V.writeLn("Done");var db;if(Z.length>1){var eb=new H(null),fb=new M(eb,null),gb=new M(eb,null);Z.forEach(function(a){eb.predecessors.push(a.region),fb.pushValue(a.value),gb.pushValue(a.store)}),db=new N(eb,gb,fb)}else db=new N(Z[0].region,Z[0].store,Z[0].value);return new U(db)},a}();a.buildMethod=A}("undefined"==typeof exports?Builder={}:exports);var Compiler=new(function(){function a(){this.verifier=new Verifier}return a.prototype.compileMethod=function(a,b,c){return Builder.buildMethod(this.verifier,a,b,c)},a}());!function(a){var b=function(){function a(a){this.kind=m,this.body=a}function b(a){this.kind=n,this.body=a}function c(a,b,c,d){this.kind=o,this.cond=a,this.then=b,this.else=c,this.negated=!1,this.nothingThrownLabel=d}function d(a,b){this.kind=p,this.index=a,this.body=b}function e(a,b,c){this.kind=q,this.determinant=a,this.cases=b,this.nothingThrownLabel=c}function f(a,b){this.kind=r,this.labels=a,this.body=b}function g(a){for(var b={},c=0,d=a.length;d>c;c++){var e=a[c];e.labels||print(e.toSource());for(var f=0,g=e.labels.length;g>f;f++)b[e.labels[f]]=e}this.kind=s,this.cases=a,this.labelMap=b}function h(a){this.kind=t,this.label=a}function i(a,b){this.kind=u,this.label=a,this.head=b}function j(a,b){this.kind=v,this.label=a,this.head=b,this.necessary=!0}function k(a,b){this.kind=w,this.body=a,this.catches=b}function l(a,b,c){this.kind=x,this.varName=a,this.typeName=b,this.body=c}var m=1,n=2,o=3,p=4,q=5,r=6,s=7,t=8,u=9,v=10,w=11,x=12;return a.prototype={trace:function(a){for(var b=this.body,c=0,d=b.length;d>c;c++)b[c].trace(a)},first:function(){return this.body[0]},slice:function(b,c){return new a(this.body.slice(b,c))}},b.prototype={trace:function(a){a.enter("loop {"),this.body.trace(a),a.leave("}")}},c.prototype={trace:function(a){this.cond.trace(a),this.nothingThrownLabel&&a.enter("if (label is "+this.nothingThrownLabel+") {"),a.enter("if"+(this.negated?" not":"")+" {"),this.then&&this.then.trace(a),this.else&&(a.outdent(),a.enter("} else {"),this.else.trace(a)),a.leave("}"),this.nothingThrownLabel&&a.leave("}")}},d.prototype={trace:function(a){a.writeLn(this.index>=0?"case "+this.index+":":"default:"),a.indent(),this.body&&this.body.trace(a),a.outdent()}},e.prototype={trace:function(a){this.nothingThrownLabel&&a.enter("if (label is "+this.nothingThrownLabel+") {"),this.determinant.trace(a),a.writeLn("switch {");for(var b=0,c=this.cases.length;c>b;b++)this.cases[b].trace(a);a.writeLn("}"),this.nothingThrownLabel&&a.leave("}")}},f.prototype={trace:function(a){a.enter("if (label is "+this.labels.join(" or ")+") {"),this.body&&this.body.trace(a),a.leave("}")}},g.prototype={trace:function(a){for(var b=0,c=this.cases.length;c>b;b++)this.cases[b].trace(a)}},h.prototype={trace:function(a){a.writeLn("label = "+this.label)}},i.prototype={trace:function(a){this.label&&a.writeLn("label = "+this.label),a.writeLn("break")}},j.prototype={trace:function(a){this.label&&a.writeLn("label = "+this.label),this.necessary&&a.writeLn("continue")}},k.prototype={trace:function(a){a.enter("try {"),this.body.trace(a),a.writeLn("label = "+this.nothingThrownLabel);for(var b=0,c=this.catches.length;c>b;b++)this.catches[b].trace(a);a.leave("}")}},l.prototype={trace:function(a){a.outdent(),a.enter("} catch ("+(this.varName||"e")+(this.typeName?" : "+this.typeName:"")+") {"),this.body.trace(a)}},{SEQ:m,LOOP:n,IF:o,CASE:p,SWITCH:q,LABEL_CASE:r,LABEL_SWITCH:s,EXIT:t,BREAK:u,CONTINUE:v,TRY:w,CATCH:x,Seq:a,Loop:b,If:c,Case:d,Switch:e,LabelCase:f,LabelSwitch:g,Exit:h,Break:i,Continue:j,Try:k,Catch:l}}(),c=function(){function a(a,b){var c=BitSetFunctor(a),d=c.ADDRESS_BITS_PER_WORD,e=c.BITS_PER_WORD,f=c.BIT_INDEX_MASK;c.singleton=function(a){var b=new c;return b.set(a.id),b.count=1,b.dirty=0,b},c.fromBlocks=function(a){var b=new c;return b.setBlocks(a),b};var g=c.prototype;return c.singleword?(g.forEachBlock=function(a){var c=b,d=this.bits;if(d)for(var f=0;e>f;f++)d&1<<f&&a(c[f])},g.choose=function(){var a=b,c=this.bits;if(c)for(var d=0;e>d;d++)if(c&1<<d)return a[d]},g.members=function(){var a=b,c=[],d=this.bits;if(d)for(var f=0;e>f;f++)d&1<<f&&c.push(a[f]);return c},g.setBlocks=function(a){for(var b=this.bits,c=0,d=a.length;d>c;c++){var e=a[c].id;b|=1<<(e&f)}this.bits=b}):(g.forEachBlock=function(a){for(var c=b,d=this.bits,f=0,g=d.length;g>f;f++){var h=d[f];if(h)for(var i=0;e>i;i++)h&1<<i&&a(c[f*e+i])}},g.choose=function(){for(var a=b,c=this.bits,d=0,f=c.length;f>d;d++){var g=c[d];if(g)for(var h=0;e>h;h++)if(g&1<<h)return a[d*e+h]}},g.members=function(){for(var a=b,c=[],d=this.bits,f=0,g=d.length;g>f;f++){var h=d[f];if(h)for(var i=0;e>i;i++)h&1<<i&&c.push(a[f*e+i])}return c},g.setBlocks=function(a){for(var b=this.bits,c=0,e=a.length;e>c;c++){var g=a[c].id;b[g>>d]|=1<<(g&f)}}),c}function c(b,c){this.options=c||{},this.BlockSet=a(b.blocks.length,b.blocks),this.hasExceptions=!1,this.normalizeReachableBlocks(b.root)}function d(a,b,c){return function(d,e,f){function g(a){return f+a.id}function h(a){a.fn=a.fn.bind(i)}var i=this;f=f||"";var j=this.bytecodes;j&&(a.forEach(h),b.forEach(h),writeGraphViz(d,e.toString(),j[0],g,function(a){return a.successors||[]},a,b,function(a){var b="Block: "+a.id+"\\l";return b},c&&c.bind(this,g)))}}return c.prototype={normalizeReachableBlocks:function(a){var b,c=1,d=2,e=this.BlockSet,f=[],g={},h={},i=[a];for(h[a.id]=!0;b=i.top();)if(g[b.id])g[b.id]===c&&(g[b.id]=d,f.push(b)),h[b.id]=!1,i.pop();else{g[b.id]=c,h[b.id]=!0;for(var j=b.successors,k=0,l=j.length;l>k;k++){var m=j[k];h[m.id]&&(b.spbacks||(b.spbacks=new e),b.spbacks.set(m.id)),!g[m.id]&&i.push(m)}}this.blocks=f.reverse()},computeDominance:function(){function a(a,b,c){for(var d=b,e=c;d!==e;){for(;d>e;)d=a[d];for(;e>d;)e=a[e]}return d}var b=this.blocks,c=b.length,d=new Array(c);d[0]=0;for(var e=[],f=0;c>f;f++)e[b[f].id]=f,b[f].dominatees=[];for(var g=!0;g;){g=!1;for(var f=1;c>f;f++){var h=b[f].predecessors,i=h.length,j=e[h[0].id];if(!(j in d))for(var k=1;i>k&&(j=e[h[k].id],!(j in d));k++);for(var k=0;i>k;k++){var l=e[h[k].id];l!==j&&l in d&&(j=a(d,l,j))}d[f]!==j&&(d[f]=j,g=!0)}}b[0].dominator=b[0];for(var m,f=1;c>f;f++){m=b[f];var n=b[d[f]];m.dominator=n,n.dominatees.push(m),m.npredecessors=m.predecessors.length}var o=[b[0]];for(b[0].level||(b[0].level=0);m=o.shift();){for(var p=m.dominatees,k=0,i=p.length;i>k;k++)p[k].level=m.level+1;o.push.apply(o,p)}},computeFrontiers:function(){for(var a=this.BlockSet,b=this.blocks,c=0,d=b.length;d>c;c++)b[c].frontier=new a;for(var c=1,d=b.length;d>c;c++){var e=b[c],f=e.predecessors;if(f.length>=2)for(var g=e.dominator,h=0,i=f.length;i>h;h++)for(var j=f[h];j!==g;)j.frontier.set(e.id),j=j.dominator}},analyzeControlFlow:function(){return this.computeDominance(),this.analyzedControlFlow=!0,!0},markLoops:function(){function a(a){for(var b,c,d,e=1,f={},g={},h=[],i=[],j=[],k=a.level+1,l=[a];b=l.top();)if(f[b.id]){if(i.peek()===b){i.pop();var m=[];do c=h.pop(),g[c.id]=!0,m.push(c);while(c!==b);(m.length>1||c.spbacks&&c.spbacks.get(c.id))&&j.push(m)}l.pop()}else{f[b.id]=e++,h.push(b),i.push(b);for(var n=b.successors,o=0,p=n.length;p>o;o++)if(d=n[o],!(d.level<k)){var q=d.id;if(f[q]){if(!g[q])for(;f[i.peek().id]>f[q];)i.pop()}else l.push(d)}}return j}function b(a){for(var b=new d,c=0,e=a.length;e>c;c++){var f=a[c],g=f.spbacks;if(g)for(var h=f.successors,i=0,j=h.length;j>i;i++){var k=h[i];g.get(k.id)&&b.set(k.dominator.id)}}return b.members()}function c(a,b){var c=new d;c.setBlocks(a),c.recount(),this.id=b,this.body=c,this.exit=new d,this.save={},this.head=new d,this.npredecessors=0}if(!this.analyzedControlFlow&&!this.analyzeControlFlow())return!1;var d=this.BlockSet,e=b(this.blocks);if(e.length<=0)return this.markedLoops=!0,!0;for(var f=e.sort(function(a,b){return a.level-b.level}),g=0,h=f.length-1;h>=0;h--){var i=f[h],j=a(i);if(0!==j.length)for(var k=0,l=j.length;l>k;k++){for(var m=j[k],n=new c(m,g++),o=0,p=m.length;p>o;o++){var q=m[o];if(q.level===i.level+1&&!q.loop){q.loop=n,n.head.set(q.id);for(var r=q.predecessors,s=0,t=r.length;t>s;s++)n.body.get(r[s].id)&&q.npredecessors--;n.npredecessors+=q.npredecessors}}for(var o=0,p=m.length;p>o;o++){var q=m[o];q.level===i.level+1&&(q.npredecessors=n.npredecessors)}n.head.recount()}}return this.markedLoops=!0,!0},induceControlTree:function(){function a(a,b){return a.recount(),0===a.count?null:(a.save=b,a)}function c(g,h,i,j,k,l,m){for(var n=[];g;)if(g.count>1){for(var o=new e,p={},q=[],r=g.members(),s=0,t=r.length;t>s;s++){var u,v=r[s],w=v.id;if(v.loop&&g.contains(v.loop.head)){var x=v.loop;if(!x.induced){var y=x.head.members(),z=0;for(C=0,I=y.length;I>C;C++)z+=g.save[y[C].id];if(v.npredecessors-z>0)v.npredecessors-=g.save[w],v.save=g.save[w],u=c(v,o,p,j),q.push(new b.LabelCase([w],u));else{for(C=0,I=y.length;I>C;C++){var A=y[C];A.npredecessors-=z,A.save=z}u=c(v,o,p,j),q.push(new b.LabelCase(x.head.toArray(),u)),x.induced=!0}}}else v.npredecessors-=g.save[w],v.save=g.save[w],u=c(v,o,p,j),q.push(new b.LabelCase([w],u))}for(var u,B=[],C=0,s=0,t=q.length;t>s;s++){u=q[s];for(var D=u.labels,E=0,F=0,G=D.length;G>F;F++){var w=D[F];o.get(w)&&r[s].npredecessors-g.save[w]>0?B.push(w):D[E++]=w}D.length=E,D.length>0&&(q[C++]=u)}if(q.length=C,0===q.length){for(var s=0,t=B.length;t>s;s++){var w=B[s];i[w]=(i[w]||0)+g.save[w],h.set(w)}break}n.push(new b.LabelSwitch(q)),g=a(o,p)}else{var v,w,u;if(1===g.count?(v=g.choose(),w=v.id,v.npredecessors-=g.save[w],v.save=g.save[w]):(v=g,w=v.id),k)k=!1;else{if(j&&!j.body.get(w)){v.npredecessors+=v.save,j.exit.set(w),j.save[w]=(j.save[w]||0)+v.save,n.push(new b.Break(w,j));break}if(j&&v.loop===j){v.npredecessors+=v.save,n.push(new b.Continue(w,j));break}if(v===m)break;if(v.npredecessors>0){v.npredecessors+=v.save,i[w]=(i[w]||0)+v.save,h.set(w),n.push(l?new b.Break(w,l):new b.Exit(w));break}if(v.loop){var H,I=v.loop;if(1===I.head.count)H=c(I.head.choose(),null,null,I,!0);else{for(var J=[],y=I.head.members(),s=0,t=y.length;t>s;s++){var A=y[s],K=A.id,u=c(A,null,null,I,!0);J.push(new b.LabelCase([K],u))}H=new b.LabelSwitch(J)}n.push(new b.Loop(H)),g=a(I.exit,I.save);continue}}var L,M,o=new e,p={};if(d&&v.hasCatches){var N=v.successors,O=[];M=[];for(var s=0,t=N.length;t>s;s++){var P=N[s];(P.exception?O:M).push(P)}for(var Q=[],s=0,t=O.length;t>s;s++){var R=O[s];R.npredecessors-=1,R.save=1;var u=c(R,o,p,j),S=R.exception;Q.push(new b.Catch(S.varName,S.typeName,u))}L=new b.Try(v,Q)}else M=v.successors,L=v;if(M.length>2){for(var q=[],T=M,s=T.length-1;s>=0;s--){var R=T[s];R.npredecessors-=1,R.save=1,u=c(R,o,p,j,null,v,T[s+1]),q.unshift(new b.Case(s,u))}q.top().index=void 0,d&&v.hasCatches?(L.nothingThrownLabel=f,L=new b.Switch(L,q,f++)):L=new b.Switch(L,q),g=a(o,p)}else if(2===M.length){var U=v.hasFlippedSuccessors?M[1]:M[0],V=v.hasFlippedSuccessors?M[0]:M[1];U.npredecessors-=1,U.save=1;var W=c(U,o,p,j);V.npredecessors-=1,V.save=1;var X=c(V,o,p,j);d&&v.hasCatches?(L.nothingThrownLabel=f,L=new b.If(L,W,X,f++)):L=new b.If(L,W,X),g=a(o,p)}else u=M[0],u?d&&v.hasCatches?(L.nothingThrownLabel=u.id,p[u.id]=(p[u.id]||0)+1,o.set(u.id),g=a(o,p)):(u.npredecessors-=1,u.save=1,g=u):d&&v.hasCatches?(L.nothingThrownLabel=-1,g=a(o,p)):g=u;n.push(L)}return n.length>1?new b.Seq(n):n[0]}var d=this.hasExceptions,e=this.BlockSet,f=this.blocks.length,g=this.blocks[0];this.controlTree=c(g,new e,{})},restructureControlFlow:function(){return Timer.start("Restructure Control Flow"),this.markedLoops||this.markLoops()?(this.induceControlTree(),this.restructuredControlFlow=!0,Timer.stop(),!0):(Timer.stop(),!1)},trace:function(a){function b(a){return a.id}function c(c){if(c.dominator?(a.enter("block "+c.id+(c.successors.length>0?" -> "+c.successors.map(b).join(","):"")+" {"),a.writeLn("npredecessors".padRight(" ",10)+c.npredecessors),a.writeLn("idom".padRight(" ",10)+c.dominator.id),a.writeLn("domcs".padRight(" ",10)+c.dominatees.map(b).join(",")),c.frontier&&a.writeLn("frontier".padRight(" ",10)+"{"+c.frontier.toArray().join(",")+"}"),a.writeLn("level".padRight(" ",10)+c.level)):a.enter("block unreachable {"),c.loop&&(a.writeLn("loop".padRight(" ",10)+"{"+c.loop.body.toArray().join(",")+"}"),a.writeLn("  id".padRight(" ",10)+c.loop.id),a.writeLn("  head".padRight(" ",10)+"{"+c.loop.head.toArray().join(",")+"}"),a.writeLn("  exit".padRight(" ",10)+"{"+c.loop.exit.toArray().join(",")+"}"),a.writeLn("  npredecessors".padRight(" ",10)+c.loop.npredecessors)),a.writeLn(""),c.position>=0)for(var e=c.position;e<=c.end.position;e++)a.writeLn((""+e).padRight(" ",5)+d[e]);else a.writeLn("abstract");a.leave("}")}var d=this.bytecodes;a.enter("analysis {"),a.enter("cfg {"),this.blocks.forEach(c),a.leave("}"),this.controlTree&&(a.enter("control-tree {"),this.controlTree.trace(a),a.leave("}")),a.leave("}")},traceCFG:d([{fn:function(a){return a.successors||[]},style:""}],[{fn:function(a){return a.predecessors||[]},style:""}]),traceDJ:d([{fn:function(a){return a.dominatees||[]},style:"style=dashed"},{fn:function(a){var b=new this.BlockSet;return b.setBlocks(a.successors),b.subtract(this.BlockSet.fromBlocks(a.dominatees)),a.spbacks&&b.subtract(a.spbacks),b.members()},style:""},{fn:function(a){return a.spbacks?a.spbacks.members():[]},style:"style=bold"}],[{fn:function(a){return a.predecessors||[]},style:""}],function(a,b){for(var c,d=this.bytecodes[0],e=[d],f=d.level,g=[];c=e.shift();)f!=c.level&&(b.writeLn("{rank=same; "+g.map(function(b){return"block_"+a(b)}).join(" ")+"}"),g.length=0,f=c.level),g.push(c),e.push.apply(e,c.dominatees)})},c}();a.Control=b,a.analyze=function(a){var b=new c(a);return b.restructureControlFlow(),b.controlTree}}("undefined"==typeof exports?Looper={}:exports),function(){function a(a){function n(a){for(var b=-1,c=0;c<a.length;c++)if(a.get(c)){b=c;break}for(var c=a.length-1;c>=0;c--)if(a.get(c)){end=c;break}for(var c=b;end>c;c++)a.set(c)}function o(a){for(var b=-1,c=-1,d=0;d<a.length;d++)if(a.get(d)){b=d;break}for(var d=a.length-1;d>=0;d--)if(a.get(d)){c=d;break}return[b,c]}function p(a,b,c){var d=u[b];y[d].set(c),a.set(d)}function q(a,b,c){var d=u[b];y[d].set(c),a.clear(d)}var r=c.makePass("scan","scanNode"),s=0;d.prototype.scan=function(a){return this.position=s++,r.apply(this,a)};var t=[],u={},v=[];k.prototype.scan=function(){return this.params.forEach(function(a){a.name in u||(u[a.name]=t.length,t.push(a.name))}),this.body.scan(),this},f.prototype.scan=function(){return this.position=s++,this.id.name in u||(u[this.id.name]=t.length,t.push(this.id.name)),this},g.prototype.scan=function(a){return this.left.scan(a),this.right.scan(a),this.position=s++,this},j.prototype.scan=function(a){return this.position=s++,this.test.scan(a),this.body.scan(a),this.afterPosition=s++,this},a.scan(),b&&l.writeLn("Local Variables: "+t);for(var w=BitSetFunctor(t.length),x=BitSetFunctor(s),y=[],z=0;z<t.length;z++)y.push(new x);d.prototype.markLiveness=c.makePass("markLiveness","markLivenessNode",!0),e.prototype.markLiveness=function(a){var b=this.name;if("undefined"===b)return this;if(a&&a.isProperty)return this;if(!(b in u))return this;v.push(this);var c=a.live;return p(c,b,this.position),this},f.prototype.markLiveness=function(a){a.live;return v.push(this.id),this},i.prototype.markLiveness=function(a){var b=a.live.clone(),c=a.live.clone();return this.alternate&&this.alternate.markLiveness({live:b}),this.consequent&&this.consequent.markLiveness({live:c}),a.live.assign(b),a.live._union(c),this.test.markLiveness(a),this},j.prototype.markLiveness=function(a){var c=a.live.clone();b&&l.writeLn("END OF LOOP: "+c);var d=this.afterPosition;do{var e=c.clone();this.body.markLiveness({live:c}),this.test.markLiveness({live:c}),b&&l.writeLn("TOP OF LOOP: "+c);var f=!e.equals(c);f&&(b&&l.writeLn("ITERATE"),c.forEach(function(a){y[a].set(d)}))}while(f);return a.live.assign(c),this},g.prototype.markLiveness=function(a){return this.right.markLiveness(a),this.left instanceof e?(q(a.live,this.left.name,this.position),v.push(this.left)):this.left.markLiveness(a),this},h.prototype.markLiveness=function(a){return!this.computed&&this.property instanceof e||this.property.markLiveness(a),this.object.markLiveness(a),this},a.markLiveness({live:new w});for(var A=[],z=0;z<y.length;z++){var B=o(y[z]);A.push(new m.Interval(z,B[0],B[1]))}var C=new m(A,1024);C.allocate();for(var D=createEmptyObject(),z=0;z<t.length;z++)D[t[z]]=A[z].register;for(var z=0;z<v.length;z++)v[z].patched||(v[z].name=D[v[z].name],v[z].patched=!0);if(b)for(var z=0;z<y.length;z++)n(y[z]),l.writeLn(String(z).padLeft(" ",3)+" "+t[z].padRight(" ",5)+": "+y[z].toBitString("="," ")+" "+A[z].register);return a}var b=!1,c=estransform,d=c.Node,e=c.Identifier,f=(c.VariableDeclaration,c.VariableDeclarator),g=c.AssignmentExpression,h=c.MemberExpression,i=c.IfStatement,j=c.WhileStatement,k=c.FunctionDeclaration,l=new IndentingWriter,m=function(){function a(a,b,c){this.id=a,this.start=b,this.end=c}function c(a,b){this.intervals=a.slice(0),this.maxRegisters=b}return a.prototype.toString=function(){return"["+this.start+","+this.end+"]"},c.prototype.allocate=function(){function a(a){d.forEach(function(c){return c.end>=a.start?SortedList.RETURN:(f.push(c.register),b&&l.writeLn("Release: "+c+" -> "+c.register),SortedList.DELETE)})}var c=this.intervals;this.intervals.sort(function(a,b){return a.start-b.start});for(var d=new SortedList(function(a,b){return a.end-b.end}),e=this.maxRegisters,f=[],g=e-1;g>=0;g--)f.push("R"+g);c.forEach(function(c){a(c),d.length===e?notImplemented("Cannot Spill"):(c.register=f.pop(),b&&l.writeLn("Allocate: "+c+" "+c.id+" -> "+c.register),d.push(c))})},c.Interval=a,c}();Transform.transform=function(b){a(b)}}("undefined"==typeof exports?Transform={}:exports),function(){function a(a){return"string"==typeof a||null===a||a===!0||a===!1?new s(a):void 0===a?new t("undefined"):"object"==typeof a||"function"==typeof a?new t(objectConstantName(a)):"number"==typeof a&&isNaN(a)?new t("NaN"):1/0===a?new t("Infinity"):a===-1/0?new G("-",new t("Infinity")):"number"==typeof a&&0>1/a?new G("-",new s(Math.abs(a))):"number"==typeof a?new s(a):void unexpected("Cannot emit constant for value: ",a)}function b(a){return new t(a)}function c(a){return"$"===a||"_"===a||"\\"===a||a>="a"&&"z">=a||a>="A"&&"Z">=a}function d(a){return"$"===a||"_"===a||"\\"===a||a>="a"&&"z">=a||a>="A"&&"Z">=a||a>="0"&&"9">=a}function e(a){if(!c(a[0]))return!1;for(var b=1;b<a.length;b++)if(!d(a[b]))return!1;return!0}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];a="string"==typeof c?e(c)?new w(a,new t(c),!1):new w(a,new s(c),!0):c instanceof s&&e(c.value)?new w(a,new t(c.value),!1):new w(a,c,!0)}return a}function g(a,b){return new y(a,b)}function h(a,b,c){return g(f(a,"call"),[b].concat(c))}function i(a,b){return new z(a,"=",b)}function j(a){return new u("var",a)}function k(b){if(b instanceof Constant){if(b.value===!0||b.value===!1)return a(!b.value)}else if(b instanceof t)return new G(T.FALSE.name,b);var c=b instanceof x?b.left:b.argument,d=b.right,e=T.fromName(b.operator);return e===T.EQ&&d instanceof s&&d.value===!1?c:e===T.FALSE?c:e.not?b instanceof x?new x(e.not.name,c,d):new G(e.not.name,c):new G(T.FALSE.name,b)}function l(){this.label=new V("$L"),this.variables=[],this.parameters=[]}function m(a,c,d){if(d||!a.variable){var e=a.compile(c);return e}return b(a.variable.name)}function n(b,c){return[m(b.namespaces,c),m(b.name,c),a(b.flags)]}function o(a,b){return a.map(function(a){return m(a,b)})}function p(a){return escodegen.generate(a,{base:"",indent:"  ",comment:!0,format:{compact:!1}})}function q(a,c){Timer.start("Looper");var d=Looper.analyze(a);Timer.stop();var e=new IndentingWriter,f=new l;Timer.start("Construct AST");var g=d.compile(f);Timer.stop();for(var h=[],i=0;i<f.parameters.length;i++){var k=f.parameters[i]?f.parameters[i].name:"_"+i;h.push(b(k))}if(f.variables.length){Counter.count("Backend: Locals",f.variables.length);var m=j(f.variables.map(function(a){return new v(b(a.name))}));g.body.unshift(m)}var n=new C(b("fn"),h,g);if(c){c4TraceLevel.value>0&&(e.writeLn("=== BEFORE ==============================="),e.writeLn(p(n)),e.writeLn("=== TRANSFORMING =========================")),Transform.transform(n),c4TraceLevel.value>0&&(e.writeLn("=== AFTER ================================"),e.writeLn(p(n)),e.writeLn("=========================================="));var o=p(g);return{parameters:h.map(function(a){return a.name}),body:o}}Timer.start("Serialize AST");var q=p(g);return Timer.stop(),{parameters:h.map(function(a){return a.name}),body:q}}var r=estransform,s=r.Literal,t=r.Identifier,u=r.VariableDeclaration,v=r.VariableDeclarator,w=r.MemberExpression,x=r.BinaryExpression,y=r.CallExpression,z=r.AssignmentExpression,A=r.ExpressionStatement,B=r.ReturnStatement,C=r.FunctionDeclaration,D=r.ConditionalExpression,E=r.ObjectExpression,F=r.ArrayExpression,G=r.UnaryExpression,H=r.NewExpression,I=r.Property,J=r.BlockStatement,K=r.ThisExpression,L=r.ThrowStatement,M=r.IfStatement,N=r.WhileStatement,O=r.BreakStatement,P=r.ContinueStatement,Q=r.SwitchStatement,R=r.SwitchCase,S=IR.Block,T=IR.Operator,U=(IR.Projection,IR.Start,Looper.Control),V=IR.Variable;U.Break.prototype.compile=function(a,b){return a.compileBreak(this,b)},U.Continue.prototype.compile=function(a,b){return a.compileContinue(this,b)},U.Exit.prototype.compile=function(a,b){return a.compileExit(this,b)},U.LabelSwitch.prototype.compile=function(a,b){return a.compileLabelSwitch(this,b)},U.Seq.prototype.compile=function(a,b){return a.compileSequence(this,b)},S.prototype.compile=function(a,b){return a.compileBlock(this,b)},U.Loop.prototype.compile=function(a,b){return a.compileLoop(this,b)},U.Switch.prototype.compile=function(a,b){return a.compileSwitch(this,b)},U.If.prototype.compile=function(a,b){return a.compileIf(this,b)},U.Try.prototype.compile=function(a,b){return a.compileTry(this,b)},l.prototype.useVariable=function(a){return this.variables.pushUnique(a)},l.prototype.useParameter=function(a){return this.parameters[a.index]=a},l.prototype.compileLabelBody=function(a){var c=[];return void 0!==a.label&&(this.useVariable(this.label),c.push(new A(i(b(this.label.name),new s(a.label))))),c},l.prototype.compileBreak=function(a){var b=this.compileLabelBody(a);return b.push(new O(null)),new J(b)},l.prototype.compileContinue=function(a){var b=this.compileLabelBody(a);return b.push(new P(null)),new J(b)},l.prototype.compileExit=function(a){return new J(this.compileLabelBody(a))},l.prototype.compileIf=function(a){var b=a.cond.compile(this),c=null,d=null;a.then&&(c=a.then.compile(this)),a.else&&(d=a.else.compile(this));var e=m(b.end.predicate,this);return e=a.negated?k(e):e,b.body.push(new M(e,c||new J([]),d||null)),b},l.prototype.compileSwitch=function(a){var b=a.determinant.compile(this),c=[];
a.cases.forEach(function(a){var b;a.body&&(b=a.body.compile(this));var d="number"==typeof a.index?new s(a.index):void 0;c.push(new R(d,b?[b]:[]))},this);var d=m(b.end.determinant,this);return b.body.push(new Q(d,c,!1)),b},l.prototype.compileLabelSwitch=function(a){function c(a){return new x("===",e,new s(a))}for(var d=null,e=b(this.label.name),f=a.cases.length-1;f>=0;f--){for(var g=a.cases[f],h=g.labels,i=c(h[0]),j=1;j<h.length;j++)i=new x("||",i,c(h[j]));d=new M(i,g.body?g.body.compile(this):new J,d)}return d},l.prototype.compileLoop=function(b){var c=b.body.compile(this);return new N(a(!0),c)},l.prototype.compileSequence=function(a){var b=this,c=[];return a.body.forEach(function(a){var d=a.compile(b);d instanceof J?c=c.concat(d.body):c.push(d)}),new J(c)},l.prototype.compileBlock=function(a){for(var c=[],d=1;d<a.nodes.length-1;d++){var e,f,g,h=a.nodes[d];h instanceof IR.Throw?e=m(h,this,!0):(h instanceof IR.Move?(f=b(h.to.name),this.useVariable(h.to),g=m(h.from,this)):(h.variable?(f=b(h.variable.name),this.useVariable(h.variable)):f=null,g=m(h,this,!0)),e=new A(f?i(f,g):g)),c.push(e)}var j=a.nodes.last();j instanceof IR.Stop&&c.push(new B(m(j.argument,this)));var k=new J(c);return k.end=a.nodes.last(),k},IR.Parameter.prototype.compile=function(a){return a.useParameter(this),b(this.name)},IR.Constant.prototype.compile=function(){return a(this.value)},IR.Variable.prototype.compile=function(){return b(this.name)},IR.Phi.prototype.compile=function(a){return m(this.variable,a)},IR.ASScope.prototype.compile=function(a){var c=m(this.parent,a),d=m(this.object,a),e=new s(this.isWith);return new H(b("Scope"),[c,d,e])},IR.ASFindProperty.prototype.compile=function(a){var b=m(this.scope,a),c=n(this.name,a),d=m(this.domain,a),e=new s(this.strict);return g(f(b,"findScopeProperty"),c.concat([d,e]))},IR.ASGetProperty.prototype.compile=function(a){var b=m(this.object,a);if(this.flags&IR.Flags.INDEXED)return g(f(b,"asGetNumericProperty"),[m(this.name.name,a)]);if(this.flags&IR.Flags.RESOLVED)return g(f(b,"asGetResolvedStringProperty"),[m(this.name,a)]);var c=n(this.name,a),d=new s(this.flags&IR.Flags.IS_METHOD);return g(f(b,"asGetProperty"),c.concat(d))},IR.ASGetSuper.prototype.compile=function(a){var b=m(this.scope,a),c=m(this.object,a),d=n(this.name,a);return g(f(c,"asGetSuper"),[b].concat(d))},IR.Latch.prototype.compile=function(a){return new D(m(this.condition,a),m(this.left,a),m(this.right,a))},IR.Unary.prototype.compile=function(a){return new G(this.operator.name,m(this.argument,a))},IR.Copy.prototype.compile=function(a){return m(this.argument,a)},IR.Binary.prototype.compile=function(a){var c=m(this.left,a),d=m(this.right,a);return this.operator===T.AS_ADD?g(b("asAdd"),[c,d]):new x(this.operator.name,c,d)},IR.CallProperty.prototype.compile=function(a){var b=m(this.object,a),c=m(this.name,a),d=f(b,c),e=this.args.map(function(b){return m(b,a)});return this.flags&IR.Flags.PRISTINE?g(d,e):h(d,b,e)},IR.ASCallProperty.prototype.compile=function(a){var b=m(this.object,a),c=this.args.map(function(b){return m(b,a)});if(this.flags&IR.Flags.RESOLVED)return g(f(b,"asCallResolvedStringProperty"),[m(this.name,a),new s(this.isLex),new F(c)]);var d=n(this.name,a);return g(f(b,"asCallProperty"),d.concat([new s(this.isLex),new F(c)]))},IR.ASCallSuper.prototype.compile=function(a){var b=m(this.scope,a),c=m(this.object,a),d=this.args.map(function(b){return m(b,a)}),e=n(this.name,a);return g(f(c,"asCallSuper"),[b].concat(e).concat(new F(d)))},IR.Call.prototype.compile=function(a){var b,c=this.args.map(function(b){return m(b,a)}),d=m(this.callee,a);return b=this.object?m(this.object,a):new s(null),null===this.object?g(d,c):h(d,b,c)},IR.ASNew.prototype.compile=function(a){var b=this.args.map(function(b){return m(b,a)}),c=m(this.callee,a);return c=f(c,"instanceConstructor"),new H(c,b)},IR.This.prototype.compile=function(){return new K},IR.Throw.prototype.compile=function(a){var b=m(this.argument,a);return new L(b)},IR.Arguments.prototype.compile=function(){return b("arguments")},IR.ASGlobal.prototype.compile=function(a){var b=m(this.scope,a);return f(b,"global","object")},IR.ASSetProperty.prototype.compile=function(a){var b=m(this.object,a),c=m(this.value,a);if(this.flags&IR.Flags.INDEXED)return g(f(b,"asSetNumericProperty"),[m(this.name.name,a),c]);var d=n(this.name,a);return g(f(b,"asSetProperty"),d.concat(c))},IR.ASSetSuper.prototype.compile=function(a){var b=m(this.scope,a),c=m(this.object,a),d=n(this.name,a),e=m(this.value,a);return g(f(c,"asSetSuper"),[b].concat(d).concat([e]))},IR.ASDeleteProperty.prototype.compile=function(a){var b=m(this.object,a),c=n(this.name,a);return g(f(b,"asDeleteProperty"),c)},IR.ASHasProperty.prototype.compile=function(a){var b=m(this.object,a),c=n(this.name,a);return g(f(b,"asHasProperty"),c)},IR.GlobalProperty.prototype.compile=function(){return b(this.name)},IR.GetProperty.prototype.compile=function(a){var b=m(this.object,a),c=m(this.name,a);return f(b,c)},IR.SetProperty.prototype.compile=function(a){var b=m(this.object,a),c=m(this.name,a),d=m(this.value,a);return i(f(b,c),d)},IR.ASGetDescendants.prototype.compile=function(a){var c=m(this.object,a),d=m(this.name,a);return g(b("getDescendants"),[c,d])},IR.ASSetSlot.prototype.compile=function(a){var c=m(this.object,a),d=m(this.name,a),e=m(this.value,a);return g(b("asSetSlot"),[c,d,e])},IR.ASGetSlot.prototype.compile=function(a){var c=m(this.object,a),d=m(this.name,a);return g(b("asGetSlot"),[c,d])},IR.Projection.prototype.compile=function(a){return m(this.argument.scope,a)},IR.NewArray.prototype.compile=function(a){return new F(o(this.elements,a))},IR.NewObject.prototype.compile=function(a){var b=this.properties.map(function(b){var c=m(b.key,a),d=m(b.value,a);return new I(c,d,"init")});return new E(b)},IR.ASNewActivation.prototype.compile=function(a){var c=m(this.methodInfo,a);return g(b("asCreateActivation"),[c])},IR.ASMultiname.prototype.compile=function(a){var c=m(this.namespaces,a),d=m(this.name,a);return g(b("createName"),[c,d])},Backend.generate=q}("undefined"==typeof exports?Backend={}:exports);var Shumway;!function(a){!function(b){!function(b){function c(a){var b;return b=a.holder instanceof j?"static "+a.holder.instanceInfo.name.getOriginalName()+"::"+a.name.getOriginalName():a.holder instanceof k?a.holder.name.getOriginalName()+"::"+a.name.getOriginalName():a.name.getOriginalName()}function d(b){if(b.name){var d=c(b);if(d in a.AVM2.Runtime.VM_METHOD_OVERRIDES)return a.Debug.warning("Overriding Method: "+d),a.AVM2.Runtime.VM_METHOD_OVERRIDES[d]}}function e(b,c,d){return function(){var e=null,f=function(){return a.AVM2.Runtime.traceExecution.value>=3&&log("Trampolining"),Counter.count("Executing Trampoline"),a.AVM2.Runtime.traceCallExecution.value>1&&callWriter.writeLn("Trampoline: "+d),e||(e=b(f)),e.apply(this,arguments)};return f.trigger=function(){Counter.count("Triggering Trampoline"),e||(e=b(f))},f.isTrampoline=!0,f.debugName="Trampoline #"+n++,l(f,a.AVM2.Runtime.VM_LENGTH,c),f}()}function f(b,c){function d(){if(Counter.count("Runtime: Memoizing"),a.AVM2.Runtime.traceExecution.value>=3&&log("Memoizing: "+b),a.AVM2.Runtime.traceCallExecution.value>1&&callWriter.writeLn("Memoizing: "+b),a.AVM2.Runtime.isNativePrototype(this))return Counter.count("Runtime: Method Closures"),m(c.value,this);g(c.value)&&c.value.trigger();var d=null;if(a.AVM2.Runtime.isClass(this))return Counter.count("Runtime: Static Method Closures"),d=m(c.value,this),l(this,b,d),d;if(Object.prototype.hasOwnProperty.call(this,b)){var e=Object.getOwnPropertyDescriptor(this,b);return e.get?(Counter.count("Runtime: Method Closures"),m(c.value,this)):(Counter.count("Runtime: Unpatched Memoizer"),this[b])}return d=m(c.value,this),d.methodInfo=c.value.methodInfo,l(d,i.getPublicQualifiedName("prototype"),null),l(this,b,d),d}var e=d;return Counter.count("Runtime: Memoizers"),e.isMemoizer=!0,e.debugName="Memoizer #"+o++,e}function g(a){return a.isTrampoline}function h(a){return a.isMemoizer}var i=a.AVM2.ABC.Multiname,j=(a.AVM2.ABC.Namespace,a.AVM2.ABC.ClassInfo),k=a.AVM2.ABC.InstanceInfo,l=(a.AVM2.ABC.Trait,a.IndentingWriter,a.ObjectUtilities.createMap,a.ObjectUtilities.defineNonEnumerableGetterOrSetter,a.ObjectUtilities.defineNonEnumerableProperty,a.ObjectUtilities.defineReadOnlyProperty),m=a.FunctionUtilities.bindSafely,n=1,o=1;b.getMethodOverrideKey=c,b.checkMethodOverrides=d,b.makeTrampoline=e,b.makeMemoizer=f,b.isTrampoline=g,b.isMemoizer=h}(b.Runtime||(b.Runtime={}));b.Runtime}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},Shumway;!function(a){!function(b){!function(b){var c=a.AVM2.ABC.Multiname,d=(a.AVM2.ABC.Namespace,a.AVM2.ABC.MethodInfo,a.AVM2.ABC.ClassInfo,a.AVM2.ABC.InstanceInfo,a.AVM2.ABC.ScriptInfo,a.AVM2.ABC.Trait,a.IndentingWriter,a.ObjectUtilities.hasOwnProperty,a.ObjectUtilities.createMap),e=a.ObjectUtilities.cloneObject,f=a.ObjectUtilities.copyProperties,g=a.ObjectUtilities.createEmptyObject,h=(a.FunctionUtilities.bindSafely,a.ObjectUtilities.defineNonEnumerableGetterOrSetter,a.ObjectUtilities.defineNonEnumerableProperty),i=(a.ObjectUtilities.defineReadOnlyProperty,a.ObjectUtilities.defineNonEnumerableGetter),j=a.FunctionUtilities.makeForwardingGetter,k=(a.FunctionUtilities.makeForwardingSetter,function(){function a(a){this.trait=a}return a.getKey=function(b,c){var d=b;return c.isGetter()?d=a.GET_PREFIX+b:c.isSetter()&&(d=a.SET_PREFIX+b),d},a.prototype.toString=function(){return String(this.trait)},a.SET_PREFIX="set ",a.GET_PREFIX="get ",a.KEY_PREFIX_LENGTH=4,a}());b.Binding=k;var l=function(){function a(a,b,c,d){this.name=a,this.isConst=b,this.type=c,this.trait=d}return a}();b.SlotInfo=l;var m=function(){function a(){this.byID=d(),this.byQN=d()}return a}();b.SlotInfoMap=m;var n=function(){function b(){this.map=d(),this.slots=[],this.nextSlotId=1}return b.prototype.assignNextSlot=function(a){a.slotId?this.nextSlotId=a.slotId+1:a.slotId=this.nextSlotId++,this.slots[a.slotId]=a},b.prototype.trace=function(a){a.enter("Bindings");for(var b in this.map){var c=this.map[b];a.writeLn(c.trait.kindName()+": "+b+" -> "+c)}a.leaveAndEnter("Slots"),a.writeArray(this.slots),a.outdent()},b.prototype.applyTo=function(b,e){h(e,a.AVM2.Runtime.VM_SLOTS,new m),h(e,a.AVM2.Runtime.VM_BINDINGS,[]),h(e,a.AVM2.Runtime.VM_OPEN_METHODS,d()),h(e,"bindings",this),h(e,"resolutionMap",[]),t&&t.greenLn("Applying Traits");for(var f in this.map){var g=this.map[f],n=g.trait,o=c.getQualifiedName(n.name);if(n.isSlot()||n.isConst()||n.isClass()){var p=void 0;if((n.isSlot()||n.isConst())&&(n.hasDefaultValue?p=n.value:n.typeName&&(p=b.findClassInfo(n.typeName).defaultValue)),f!==o)t&&t.yellowLn("Binding Trait: "+f+" -> "+o),i(e,f,j(o)),e.asBindings.pushUnique(f);else{t&&t.greenLn("Applying Trait "+n.kindName()+": "+n),h(e,o,p),e.asBindings.pushUnique(o);var r=new l(o,n.isConst(),n.typeName?b.getProperty(n.typeName,!1,!1):null,n);e.asSlots.byID[n.slotId]=r,e.asSlots.byQN[o]=r}}else(n.isMethod()||n.isGetter()||n.isSetter())&&((n.isGetter()||n.isSetter())&&(f=f.substring(k.KEY_PREFIX_LENGTH)),f!==o?t&&t.yellowLn("Binding Trait: "+f+" -> "+o):t&&t.greenLn("Applying Trait "+n.kindName()+": "+n),e.asBindings.pushUnique(f),this instanceof q?a.AVM2.Runtime.applyNonMemoizedMethodTrait(f,n,e,g.scope,g.natives):a.AVM2.Runtime.applyMemoizedMethodTrait(f,n,e,g.scope,g.natives))}},b}();b.Bindings=n;var o=function(a){function b(b){a.call(this),this.methodInfo=b;for(var d=b.traits,e=0;e<d.length;e++){var f=d[e],g=c.getQualifiedName(f.name);this.map[g]=new k(f),this.assignNextSlot(f)}}return __extends(b,a),b}(n);b.ActivationBindings=o;var p=function(a){function b(b,d){a.call(this);var e=c.getQualifiedName(d.name);this.map[e]=new k(d),this.assignNextSlot(d)}return __extends(b,a),b}(n);b.CatchBindings=p;var q=function(a){function b(b,d){a.call(this),this.scope=d,this.scriptInfo=b;for(var e=b.traits,f=0;f<e.length;f++){var g=e[f],h=c.getQualifiedName(g.name),i=k.getKey(h,g),j=this.map[i]=new k(g);(g.isSlot()||g.isConst()||g.isClass())&&this.assignNextSlot(g),g.isClass()&&g.metadata&&g.metadata.native&&(g.classInfo.native=g.metadata.native),(g.isMethod()||g.isGetter()||g.isSetter())&&(j.scope=this.scope)}}return __extends(b,a),b}(n);b.ScriptBindings=q;var r=function(a){function b(b,d,e){a.call(this),this.scope=d,this.natives=e,this.classInfo=b;for(var f=b.traits,g=0;g<f.length;g++){var h=f[g],i=c.getQualifiedName(h.name),j=k.getKey(i,h),l=this.map[j]=new k(h);(h.isSlot()||h.isConst())&&this.assignNextSlot(h),(h.isMethod()||h.isGetter()||h.isSetter())&&(l.scope=this.scope,l.natives=this.natives)}}return __extends(b,a),b}(n);b.ClassBindings=r;var s=function(a){function b(b,c,d,f){a.call(this),this.scope=d,this.natives=f,this.parent=b,this.instanceInfo=c,this.implementedInterfaces=b?e(b.implementedInterfaces):g(),b&&(this.slots=b.slots.slice(),this.nextSlotId=b.nextSlotId),this.extend(b)}return __extends(b,a),b.prototype.extend=function(a){function b(a,b,c){var d=(c.trait,a[b]);if(d){d.trait}a[b]=c}function d(a,b,c){b in a&&(a[b]=c)}var e,g,h,i,j,l,m,n=this.instanceInfo,o=this.map;if(a)for(h in a.map)j=a.map[h],i=j.trait,o[h]=j,i.isProtected()&&(l=c.getQualifiedName(new c([n.protectedNs],i.name.getName())),m=k.getKey(l,i),o[m]=j);for(var p=n.traits,q=0;q<p.length;q++){if(i=p[q],g=c.getQualifiedName(i.name),h=k.getKey(g,i),j=new k(i),b(o,h,j),i.isProtected())for(e=this.parent;e;)l=c.getQualifiedName(new c([e.instanceInfo.protectedNs],i.name.getName())),m=k.getKey(l,i),d(o,m,j),e=e.parent;(i.isSlot()||i.isConst())&&this.assignNextSlot(i),(i.isMethod()||i.isGetter()||i.isSetter())&&(j.scope=this.scope,j.natives=this.natives)}for(var r=n.abc.applicationDomain,s=n.interfaces,q=0;q<s.length;q++){var t=r.getProperty(s[q],!0,!0);f(this.implementedInterfaces,t.interfaceBindings.implementedInterfaces),this.implementedInterfaces[c.getQualifiedName(t.name)]=t}for(var u in this.implementedInterfaces){var t=this.implementedInterfaces[u];e=t.interfaceBindings;for(var v in e.map){var w=e.map[v];n.isInterface()?o[v]=w:(g=c.getPublicQualifiedName(w.trait.name.getName()),h=k.getKey(g,w.trait),o[v]=o[h])}}},b.prototype.toString=function(){return this.instanceInfo.toString()},b}(n);b.InstanceBindings=s;var t=null}(b.Runtime||(b.Runtime={}));b.Runtime}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={}));var Binding=Shumway.AVM2.Runtime.Binding,Bindings=Shumway.AVM2.Runtime.Bindings,ActivationBindings=Shumway.AVM2.Runtime.ActivationBindings,CatchBindings=Shumway.AVM2.Runtime.CatchBindings,ScriptBindings=Shumway.AVM2.Runtime.ScriptBindings,ClassBindings=Shumway.AVM2.Runtime.ClassBindings,InstanceBindings=Shumway.AVM2.Runtime.InstanceBindings,Shumway;!function(a){!function(b){!function(b){function c(a,b){return a?a.length>1?a.runtimeId+"$"+b:a[0].qualifiedName+"$"+b:b}function d(a,b){var c=a.freeMethod;if(a.lastBoundMethod&&a.lastBoundMethod.scope===b)return a.lastBoundMethod.boundMethod;var d,e=b.global.object;if(!a.hasOptional()&&!a.needsArguments()&&!a.needsRest())switch(a.parameters.length){case 0:d=function(){return c.call(this===jsGlobal?e:this,b)};break;case 1:d=function(a){return c.call(this===jsGlobal?e:this,b,a)};break;case 2:d=function(a,d){return c.call(this===jsGlobal?e:this,b,a,d)};break;case 3:d=function(a,d,f){return c.call(this===jsGlobal?e:this,b,a,d,f)}}return d||(Counter.count("Bind Scope - Slow Path"),d=function(){Array.prototype.unshift.call(arguments,b);var a=this===jsGlobal?b.global.object:this;return c.apply(a,arguments)}),d.methodInfo=a,d.instanceConstructor=d,a.lastBoundMethod={scope:b,boundMethod:d},d}var e=a.AVM2.ABC.Multiname,f=(a.AVM2.ABC.Namespace,a.AVM2.ABC.MethodInfo,a.AVM2.ABC.ClassInfo,a.AVM2.ABC.InstanceInfo,a.AVM2.Runtime.InstanceBindings,a.AVM2.Runtime.ClassBindings,a.ObjectUtilities.defineNonEnumerableGetterOrSetter,a.ObjectUtilities.defineNonEnumerableProperty,a.ObjectUtilities.defineReadOnlyProperty,a.ObjectUtilities.defineNonEnumerableGetter,a.ObjectUtilities.createEmptyObject),g=(a.ObjectUtilities.toKeyValueArray,a.ObjectUtilities.boxValue),h=function(){function b(a,b,c){"undefined"==typeof c&&(c=!1),this.parent=a,this.object=g(b),this.global=a?a.global:this,this.isWith=c,this.cache=f()}return b.prototype.findDepth=function(a){for(var b=this,c=0;b;){if(b.object===a)return c;c++,b=b.parent}return-1},b.prototype.getScopeObjects=function(){for(var a=[],b=this;b;)a.unshift(b.object),b=b.parent;return a},b.prototype.findScopeProperty=function(b,d,f,g,h,i){Counter.count("findScopeProperty");var j,k=c(b,d,f);return!i&&(j=this.cache[k])?j:this.object.asHasProperty(b,d,f,!0)?this.isWith?this.object:this.cache[k]=this.object:this.parent?this.cache[k]=this.parent.findScopeProperty(b,d,f,g,h,i):i?null:(j=g.findDomainProperty(new e(b,d,f),h,!0))?j:(h&&a.Debug.unexpected("Cannot find property "+d),this.global.object)},b}();b.Scope=h,b.bindFreeMethodScope=d}(b.Runtime||(b.Runtime={}));b.Runtime}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={}));var playerglobalLoadedPromise,playerglobal,Shumway;!function(a){!function(b){!function(b){function c(){return newGlobal("new-compartment")}function d(b){var c=b.abc,d=new a.AVM2.Runtime.Global(b);c.applicationDomain.allowNatives&&(d[j.getPublicQualifiedName("unsafeJSNative")]=getNative),b.executing=!0;var e=new a.AVM2.Runtime.Scope(null,b.global);createFunction(b.init,e).call(b.global,!1),b.executed=!0}function e(b,c){"undefined"==typeof c&&(c=""),b.executed||b.executing||(a.AVM2.Runtime.traceExecution.value>=2&&log("Executing Script For: "+c),d(b))}function f(a){var b=playerglobal.scripts[a];if(!b)return null;var c=b.offset,d=b.length;return new i(new Uint8Array(playerglobal.abcs,c,d),a)}function g(a){if(!playerglobal)return null;for(var b=0;b<a.namespaces.length;b++){var c=a.namespaces[b].uri+":"+a.name,d=playerglobal.map[c];if(d)break}return d?f(d):null}function h(b,c){return new Promise(function(d){var e=new a.myLoad;e.init(b,!0,c),e.xhr.onload=function(){d(e.data())},e.xhr.send()})}var i=a.AVM2.ABC.AbcFile,j=a.AVM2.ABC.Multiname,k=(a.AVM2.ABC.Namespace,a.AVM2.ABC.MethodInfo,a.AVM2.ABC.ClassInfo,a.AVM2.ABC.InstanceInfo,a.AVM2.ABC.ScriptInfo,a.ObjectUtilities.createEmptyObject),l=a.IndentingWriter;!function(a){a[a.INTERPRET=1]="INTERPRET",a[a.COMPILE=2]="COMPILE"}(b.EXECUTION_MODE||(b.EXECUTION_MODE={}));b.EXECUTION_MODE;b.executeScript=d,b.ensureScriptIsExecuted=e,function(a){a[a.PUBLIC_PROPERTIES=1]="PUBLIC_PROPERTIES",a[a.PUBLIC_METHODS=2]="PUBLIC_METHODS",a[a.ALL=3]="ALL"}(b.Glue||(b.Glue={}));var m=(b.Glue,function(){function b(a,b,c){this.systemDomain=new n(this,null,a,!0),this.applicationDomain=new n(this,this.systemDomain,b,!1),this.findDefiningAbc=g,this.loadAVM1=c,this.isAVM1Loaded=!1,this.exception={value:void 0},this.exceptions=[]}return b.initialize=function(a,c,d){b.instance=new b(a,c,d)},b.currentAbc=function(){for(var a=arguments.callee,b=20,c=null,d=0;b>d&&a;d++){var e=a.methodInfo;if(e){c=e.abc;break}a=a.caller}return c},b.currentDomain=function(){var a=b.currentAbc();return a.applicationDomain},b.isPlayerglobalLoaded=function(){return!!playerglobal},b.loadPlayerglobal=function(a,b){return playerglobalLoadedPromise?Promise.reject("Playerglobal is already loaded"):playerglobalLoadedPromise=Promise.all([h(a,"arraybuffer"),h(b,"json")]).then(function(a){playerglobal={abcs:a[0],map:Object.create(null),scripts:Object.create(null)};for(var b=a[1],c=0;c<b.length;c++){var d=b[c];if(playerglobal.scripts[d.name]=d,"string"==typeof d.defs)playerglobal.map[d.defs]=d.name;else for(var e=0;e<d.defs.length;e++){var f=d.defs[e];playerglobal.map[f]=d.name}}},function(a){console.error(a)})},b.prototype.notifyConstruct=function(){},b.getStackTrace=function(){a.Debug.notImplemented("getStackTrace")},b}());b.AVM2=m;var n=function(){function b(a,b,c,d){this.vm=a,this.abcs=[],this.loadedAbcs={},this.loadedClasses=[],this.classCache=k(),this.scriptCache=k(),this.classInfoCache=k(),this.base=b,this.allowNatives=d,this.mode=c,this.onMessage=new Callback,this.system=b?b.system:this}return b.passthroughCallable=function(a){return{call:function(b){return Array.prototype.shift.call(arguments),a.apply(b,arguments)},apply:function(b,c){return a.apply(b,c)}}},b.coerceCallable=function(b){return{call:function(c,d){return a.AVM2.Runtime.asCoerce(b,d)},apply:function(c,d){return a.AVM2.Runtime.asCoerce(b,d[0])}}},b.constructingCallable=function(a){return{call:function(){return new(Function.bind.apply(a,arguments))},apply:function(b,c){return new(Function.bind.apply(a,[b].concat(c)))}}},b.prototype.getType=function(a){return this.getProperty(a,!0,!0)},b.prototype.getProperty=function(b,c,d){var e=this.findDefiningScript(b,d);return e?e.script.executing?e.script.global[j.getQualifiedName(e.trait.name)]:void 0:c?a.Debug.unexpected("Cannot find property "+b):void 0},b.prototype.getClass=function(a){var b=this.classCache,c=b[a];return c||(c=b[a]=this.getProperty(j.fromSimpleName(a),!0,!0)),c},b.prototype.findClass=function(a){return a in this.classCache?!0:this.findDomainProperty(j.fromSimpleName(a),!1,!0)},b.prototype.findDomainProperty=function(b,c,d){a.AVM2.Runtime.traceDomain.value&&log("ApplicationDomain.findDomainProperty: "+b);var e=this.findDefiningScript(b,d);return e?e.script.global:c?a.Debug.unexpected("Cannot find property "+b):void 0},b.prototype.findClassInfo=function(a){var b;if(j.isQName(a)){b=j.getQualifiedName(a);var c=this.classInfoCache[b];if(c)return c}else{var c=this.classInfoCache[a.runtimeId];if(c)return c}if(this.base&&(c=this.base.findClassInfo(a)))return c;for(var d=this.abcs,e=0;e<d.length;e++)for(var f=d[e],g=f.scripts,h=0;h<g.length;h++)for(var i=g[h],k=i.traits,l=0;l<k.length;l++){var m=k[l];if(m.isClass()){var n=j.getQualifiedName(m.name);if(b){if(n===b)return this.classInfoCache[b]=m.classInfo}else for(var o=0,p=a.namespaces.length;p>o;o++){var q=a.getQName(o);if(n===j.getQualifiedName(q))return this.classInfoCache[q]=m.classInfo}}}if(!this.base&&this.vm.findDefiningAbc){var f=this.vm.findDefiningAbc(a);if(null!==f&&!this.loadedAbcs[f.name])return this.loadedAbcs[f.name]=!0,this.loadAbc(f),this.findClassInfo(a)}return void 0},b.prototype.installNative=function(a,b){natives[a]=function(){return b}},b.prototype.findDefiningScript=function(b,c){var d=this.scriptCache[b.runtimeId];if(d&&(d.script.executed||!c))return d;if(this.base&&(d=this.base.findDefiningScript(b,c)))return d;Counter.count("ApplicationDomain: findDefiningScript");for(var f=this.abcs,g=0;g<f.length;g++)for(var h=f[g],i=h.scripts,k=0;k<i.length;k++){var l=i[k],m=l.traits;if(b instanceof j)for(var n=0;n<m.length;n++){var o=m[n];if(b.hasQName(o.name))return c&&e(l,String(o.name)),this.scriptCache[b.runtimeId]={script:l,trait:o}}else a.Debug.unexpected()}if(!this.base&&this.vm.findDefiningAbc){var h=this.vm.findDefiningAbc(b);if(null!==h&&!this.loadedAbcs[h.name])return this.loadedAbcs[h.name]=!0,this.loadAbc(h),this.findDefiningScript(b,c)}return void 0},b.prototype.compileAbc=function(a,b){compileAbc(a,b)},b.prototype.executeAbc=function(a){this.loadAbc(a),d(a.lastScript)},b.prototype.loadAbc=function(b){a.AVM2.Runtime.traceExecution.value&&log("Loading: "+b.name),b.applicationDomain=this,GlobalMultinameResolver.loadAbc(b),this.abcs.push(b),this.base||Type.initializeTypes(this)},b.prototype.broadcastMessage=function(a,b,c){debug&&Timer.start("broadcast: "+a);try{this.onMessage.notify1(a,{data:b,origin:c,source:this})}catch(d){throw avm2.exceptions.push({source:a,message:d.message,stack:d.stack}),d}debug&&Timer.stop()},b.prototype.traceLoadedClasses=function(b){var c=new l;b||c.enter("Loaded Classes And Interfaces");var d=b?[this.loadedClasses.last()]:this.loadedClasses;d.forEach(function(b){b!==a.AVM2.Runtime.Class&&b.trace(c)}),b||c.leave("")},b}();b.ApplicationDomain=n;var o=function(){function a(){this.compartment=c(),this.compartment.homePath=homePath,this.compartment.release=!0,this.compartment.eval(snarf("compartment.js"))}return a.prototype.initializeShell=function(a,b){var c=this.compartment;c.AVM2.initialize(a,b),c.AVM2.instance.systemDomain.executeAbc(c.grabAbc(homePath+"src/avm2/generated/builtin/builtin.abc")),c.AVM2.instance.systemDomain.executeAbc(c.grabAbc(homePath+"src/avm2/generated/shell/shell.abc")),this.systemDomain=c.AVM2.instance.systemDomain,this.applicationDomain=c.AVM2.instance.applicationDomain},a}();b.SecurityDomain=o}(b.Runtime||(b.Runtime={}));b.Runtime}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={}));var Glue=Shumway.AVM2.Runtime.Glue,ApplicationDomain=Shumway.AVM2.Runtime.ApplicationDomain,AVM2=Shumway.AVM2.Runtime.AVM2,EXECUTION_MODE=Shumway.AVM2.Runtime.EXECUTION_MODE,ApplicationDomain=Shumway.AVM2.Runtime.ApplicationDomain,AVM2=Shumway.AVM2.Runtime.AVM2,EXECUTION_MODE=Shumway.AVM2.Runtime.EXECUTION_MODE,Shumway;!function(a){!function(b){!function(b){function c(a){g(a.dynamicPrototype,d.getPublicQualifiedName("constructor"),a),h(a.traitsPrototype,"class",a),h(a.instanceConstructor,"class",a)}var d=a.AVM2.ABC.Multiname,e=(a.AVM2.ABC.Namespace,a.AVM2.ABC.ClassInfo,a.AVM2.ABC.InstanceInfo,a.AVM2.Runtime.InstanceBindings),f=a.AVM2.Runtime.ClassBindings,g=(a.ObjectUtilities.defineNonEnumerableGetterOrSetter,a.ObjectUtilities.defineNonEnumerableProperty),h=a.ObjectUtilities.defineReadOnlyProperty,i=(a.ObjectUtilities.defineNonEnumerableGetter,a.ObjectUtilities.createEmptyObject),j=a.ObjectUtilities.toKeyValueArray,k=function(){function b(a){var b=a.instanceInfo;this.name=b.name,this.classInfo=a}return b.createInterface=function(c){var d=c.instanceInfo;if(a.AVM2.Runtime.traceExecution.value){var f="Creating Interface "+d.name;d.interfaces.length&&(f+=" implements "+d.interfaces.map(function(a){return a.getName()}).join(", ")),log(f)}var g=new b(c);return g.interfaceBindings=new e(null,d,null,null),g},b.prototype.toString=function(){return"[interface "+this.name+"]"},b.prototype.isInstance=function(a){if(null===a||"object"!=typeof a)return!1;var b=d.getQualifiedName(this.name);return void 0!==a.class.implementedInterfaces[b]},b.prototype.trace=function(a){a.enter("interface "+this.name.getName()),a.enter("interfaceBindings: "),this.interfaceBindings.trace(a),a.outdent(),a.outdent(),a.leave("}")},b.prototype.call=function(a,b){return b},b.prototype.apply=function(a,b){return b[0]},b}();b.Interface=k,b.setDefaultProperties=c;var l=function(){function b(b,c,d){this.debugName=b,c&&(this.instanceConstructor=c,this.instanceConstructorNoInitialize=c,this.hasInitialize=0,this.instanceConstructor.class=this),d?d===a.AVM2.Runtime.ApplicationDomain.coerceCallable&&(d=a.AVM2.Runtime.ApplicationDomain.coerceCallable(this)):d=a.AVM2.Runtime.ApplicationDomain.coerceCallable(this),g(this,"call",d.call),g(this,"apply",d.apply)}return b.createClass=function(c,g,i){var j=c,k=j.instanceInfo,l=j.abc.applicationDomain,m=d.getName(k.name),n=j.native;if(n){var o=getNative(j.native.cls);o||a.Debug.unexpected("No native for "+j.native.cls),g||(i=new Scope(i,b))}var p,q=new Scope(i,null),r=createFunction(k.init,q,!1);p=n?o(l,q,r,g):new b(m,r),p.className=m,p.classInfo=c,p.scope=q,q.object=p;var s,t;return n?p.native&&(s=p.native.static,t=p.native.instance):p.extend(g),p.classBindings=new f(c,q,s),p.classBindings.applyTo(l,p),h(p,a.AVM2.Runtime.VM_IS_CLASS,!0),p.instanceBindings=new e(g?g.instanceBindings:null,k,q,t),p.instanceConstructor&&p.instanceBindings.applyTo(l,p.traitsPrototype),p.implementedInterfaces=p.instanceBindings.implementedInterfaces,p},b.prototype.setSymbol=function(a){this.instanceConstructor.prototype.symbol=a},b.prototype.getSymbol=function(){return this.instanceConstructor.prototype.symbol},b.prototype.initializeInstance=function(a){for(var c=this,d=[];c;)c.hasInitialize&b.OWN_INITIALIZE&&d.push(c.instanceConstructor.prototype.initialize),c=c.baseClass;for(var e;e=d.pop();)e.call(a);Counter.count("Initialize Instance "+a.class)},b.prototype.createInstance=function(a){var b=Object.create(this.instanceConstructor.prototype);return this.instanceConstructor.apply(b,a),b},b.prototype.createAsSymbol=function(a){var b=Object.create(this.instanceConstructor.prototype);if(b.symbol){var c=Object.create(b.symbol);for(var d in a)c[d]=a[d];b.symbol=c}else b.symbol=a;return b},b.prototype.extendNative=function(a,b){this.baseClass=a,this.dynamicPrototype=Object.getPrototypeOf(b.prototype),this.instanceConstructor.prototype=this.traitsPrototype=b.prototype,c(this)},b.prototype.extendWrapper=function(b,d){this.baseClass=b,this.dynamicPrototype=Object.create(b.dynamicPrototype);var e=Object.create(this.dynamicPrototype,a.ObjectUtilities.getOwnPropertyDescriptors(d.prototype));this.instanceConstructor.prototype=this.traitsPrototype=e,c(this)},b.prototype.extendBuiltin=function(a){this.baseClass=a,this.dynamicPrototype=this.traitsPrototype=this.instanceConstructor.prototype,c(this)},b.prototype.extend=function(a){if(this.baseClass=a,this.dynamicPrototype=Object.create(a.dynamicPrototype),a.hasInitialize){var d=this.instanceConstructor,e=this;this.instanceConstructor=function(){e.initializeInstance(this),d.apply(this,arguments)},h(this.instanceConstructor,"class",d.class),this.hasInitialize|=b.SUPER_INITIALIZE}this.instanceConstructor.prototype=this.traitsPrototype=Object.create(this.dynamicPrototype),c(this)},b.prototype.setDefaultProperties=function(){c(this)},b.prototype.link=function(c){function e(b,c){for(var e=Object.keys(c),f=0;f<e.length;f++){var g,h=e[f],i=c[h],j=!1;i.indexOf("open ")>=0?(g=i.substring(5),j=!0):g=i;var k=d.getQualifiedName(d.fromSimpleName(g));j&&(k=a.AVM2.Runtime.VM_OPEN_METHOD_PREFIX+k);var l=Object.getOwnPropertyDescriptor(b,k);l&&l.get?Object.defineProperty(b,h,l):Object.defineProperty(b,h,{get:new Function("","return this."+k),set:new Function("v","this."+k+" = v")})}}function f(a){var b=i();return a.forEach(function(a){var c=a.name.getNamespace();c.isPublic()&&(b[a.name.getName()]=(a.isMethod()?"open ":"")+"public "+a.name.getName())}),b}if(c.initialize){if(!this.hasInitialize){var g=this.instanceConstructor,j=this;this.instanceConstructor=function(){j.initializeInstance(this),g.apply(this,arguments)},h(this.instanceConstructor,"class",g.class),this.instanceConstructor.prototype=g.prototype}this.hasInitialize|=b.OWN_INITIALIZE}for(var k=this.dynamicPrototype,l=Object.keys(c),m=0;m<l.length;m++){var n=l[m];Object.defineProperty(k,n,Object.getOwnPropertyDescriptor(c,n))}var o=c.__glue__;o&&o.script&&(o.script.instance&&(a.isNumber(o.script.instance)?e(k,f(this.classInfo.instanceInfo.traits)):e(k,o.script.instance)),o.script.static&&(a.isNumber(o.script.static)?e(this,f(this.classInfo.traits)):e(this,o.script.static)))},b.prototype.linkNatives=function(a){var b=a.__glue__;this.native=b.native},b.prototype.verify=function(){{var a=(this.instanceConstructor,this.traitsPrototype);this.dynamicPrototype}a!==Object.prototype},b.prototype.coerce=function(a){return a},b.prototype.isInstanceOf=function(a){return this.isInstance(a)},b.prototype.isInstance=function(a){return null===a||"object"!=typeof a?!1:this.dynamicPrototype.isPrototypeOf(a)},b.prototype.trace=function(a){var b=this.debugName+(this.baseClass?" extends "+this.baseClass.debugName:"");a.enter("class "+b+" {"),a.writeLn("scope: "+this.scope),a.writeLn("baseClass: "+this.baseClass),a.writeLn("classInfo: "+this.classInfo),a.writeLn("dynamicPrototype: "+this.dynamicPrototype),a.writeLn("traitsPrototype: "+this.traitsPrototype),a.writeLn("dynamicPrototype === traitsPrototype: "+(this.dynamicPrototype===this.traitsPrototype)),a.writeLn("instanceConstructor: "+this.instanceConstructor),a.writeLn("instanceConstructorNoInitialize: "+this.instanceConstructorNoInitialize),a.writeLn("instanceConstructor === instanceConstructorNoInitialize: "+(this.instanceConstructor===this.instanceConstructorNoInitialize));var c=this.traitsPrototype;a.enter("traitsPrototype: "),c&&(a.enter("VM_SLOTS: "),a.writeArray(c.asSlots.byID.map(function(a){return a.trait})),a.outdent(),a.enter("VM_BINDINGS: "),a.writeArray(c.asBindings.map(function(a){var b=Object.getOwnPropertyDescriptor(c,a),d=a;
return b.get||b.set?(b.get&&(d+=" getter: "+debugName(b.get)),b.set&&(d+=" setter: "+debugName(b.set))):d+=" value: "+debugName(b.value),d})),a.outdent(),a.enter("VM_OPEN_METHODS: "),a.writeArray(j(c.asOpenMethods).map(function(a){return a[0]+": "+debugName(a[1])})),a.outdent()),a.enter("classBindings: "),this.classBindings.trace(a),a.outdent(),a.enter("instanceBindings: "),this.instanceBindings.trace(a),a.outdent(),a.outdent(),a.writeLn("call: "+this.call),a.writeLn("apply: "+this.apply),a.leave("}")},b.prototype.toString=function(){return"[class "+this.classInfo.instanceInfo.name.name+"]"},b.OWN_INITIALIZE=1,b.SUPER_INITIALIZE=2,b}();b.Class=l;var m=a.AVM2.Runtime.ApplicationDomain.coerceCallable(l);g(l,"call",m.call),g(l,"apply",m.apply),l.instanceConstructor=l,l.toString=l.prototype.toString,l.native={instance:{prototype:{get:function(){return this.dynamicPrototype}}}}}(b.Runtime||(b.Runtime={}));b.Runtime}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={}));var Interface=Shumway.AVM2.Runtime.Interface,Class=Shumway.AVM2.Runtime.Class,Binding=Shumway.AVM2.Runtime.Binding,Bindings=Shumway.AVM2.Runtime.Bindings,ActivationBindings=Shumway.AVM2.Runtime.ActivationBindings,CatchBindings=Shumway.AVM2.Runtime.CatchBindings,ScriptBindings=Shumway.AVM2.Runtime.ScriptBindings,ClassBindings=Shumway.AVM2.Runtime.ClassBindings,InstanceBindings=Shumway.AVM2.Runtime.InstanceBindings,Interface=Shumway.AVM2.Runtime.Interface,Class=Shumway.AVM2.Runtime.Class,XRegExp=function(a){function b(a,b,c){var d;if(c)if(a.__proto__)a.__proto__=q.prototype;else for(d in q.prototype)a[d]=q.prototype[d];return a[s]={captureNames:b},a}function c(a){return u.replace.call(a,/([\s\S])(?=[\s\S]*\1)/g,"")}function d(a,d){if(!q.isRegExp(a))throw new TypeError("Type RegExp expected");var e=u.exec.call(/\/([a-z]*)$/i,String(a))[1];return d=d||{},d.add&&(e=c(e+d.add)),d.remove&&(e=u.replace.call(e,new RegExp("["+d.remove+"]+","g"),"")),a=b(new RegExp(a.source,e),f(a)?a[s].captureNames.slice(0):null,d.addProto)}function e(){return{captureNames:null}}function f(a){return!(!a[s]||!a[s].captureNames)}function g(a,b){if(Array.prototype.indexOf)return a.indexOf(b);var c,d=a.length;for(c=0;d>c;++c)if(a[c]===b)return c;return-1}function h(a,b){return G.call(a)==="[object "+b+"]"}function i(a,b,c){return u.test.call(c.indexOf("x")>-1?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,a.slice(b))}function j(a,b){var d;if(c(b)!==b)throw new SyntaxError("Invalid duplicate regex flag "+b);for(a=u.replace.call(a,/^\(\?([\w$]+)\)/,function(a,d){if(u.test.call(/[gy]/,d))throw new SyntaxError("Cannot use flag g or y in mode modifier "+a);return b=c(b+d),""}),d=0;d<b.length;++d)if(!F[b.charAt(d)])throw new SyntaxError("Unknown regex flag "+b.charAt(d));return{pattern:a,flags:b}}function k(a){return a=a||{},h(a,"String")&&(a=q.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{})),a}function l(a){if(!/^[\w$]$/.test(a))throw new Error("Flag must be a single character A-Za-z0-9_$");F[a]=!0}function m(a,b,c,d,e){for(var f,g,h=y.length,i=null;h--;)if(g=y[h],(g.scope===d||"all"===g.scope)&&(!g.flag||b.indexOf(g.flag)>-1)&&(f=q.exec(a,g.regex,c,"sticky"))){i={matchLength:f[0].length,output:g.handler.call(e,f,d,b),reparse:g.reparse};break}return i}function n(a){q.cache.flush("patterns"),t.astral=a}function o(a){RegExp.prototype.exec=(a?v:u).exec,RegExp.prototype.test=(a?v:u).test,String.prototype.match=(a?v:u).match,String.prototype.replace=(a?v:u).replace,String.prototype.split=(a?v:u).split,t.natives=a}function p(a){if(null==a)throw new TypeError("Cannot convert null or undefined to object");return a}var q,r,s="xregexp",t={astral:!1,natives:!1},u={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},v={},w={},x={},y=[],z="default",A="class",B={"default":/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,"class":/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|[\s\S]/},C=/\$(?:{([\w$]+)}|([\d$&`']))/g,D=u.exec.call(/()??/,"")[1]===a,E=RegExp.prototype.sticky!==a,F={g:!0,i:!0,m:!0,y:E},G={}.toString;return q=function(c,e){var f,g,h,i={hasNamedCapture:!1,captureNames:[]},k=z,l="",n=0;if(q.isRegExp(c)){if(e!==a)throw new TypeError("Cannot supply flags when copying a RegExp");return d(c,{addProto:!0})}if(c=c===a?"":String(c),e=e===a?"":String(e),h=c+"***"+e,!x[h]){for(f=j(c,e),c=f.pattern,e=f.flags;n<c.length;){do f=m(c,e,n,k,i),f&&f.reparse&&(c=c.slice(0,n)+f.output+c.slice(n+f.matchLength));while(f&&f.reparse);f?(l+=f.output,n+=f.matchLength||1):(g=q.exec(c,B[k],n,"sticky")[0],l+=g,n+=g.length,"["===g&&k===z?k=A:"]"===g&&k===A&&(k=z))}x[h]={pattern:u.replace.call(l,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:u.replace.call(e,/[^gimy]+/g,""),captures:i.hasNamedCapture?i.captureNames:null}}return h=x[h],b(new RegExp(h.pattern,h.flags),h.captures,!0)},q.prototype=new RegExp,q.version="3.0.0-pre",q.addToken=function(a,b,c){c=c||{};var e,f=c.optionalFlags;if(c.flag&&l(c.flag),f)for(f=u.split.call(f,""),e=0;e<f.length;++e)l(f[e]);y.push({regex:d(a,{add:"g"+(E?"y":"")}),handler:b,scope:c.scope||z,flag:c.flag,reparse:c.reparse}),q.cache.flush("patterns")},q.cache=function(a,b){var c=a+"***"+(b||"");return w[c]||(w[c]=q(a,b))},q.cache.flush=function(a){"patterns"===a?x={}:w={}},q.escape=function(a){return u.replace.call(p(a),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},q.exec=function(a,b,c,f){var g,h,i="g";return E&&(f||b.sticky&&f!==!1)&&(i+="y"),b[s]=b[s]||e(),h=b[s][i]||(b[s][i]=d(b,{add:i,remove:f===!1?"y":""})),h.lastIndex=c=c||0,g=v.exec.call(h,a),f&&g&&g.index!==c&&(g=null),b.global&&(b.lastIndex=g?h.lastIndex:0),g},q.forEach=function(a,b,c,d){for(var e,f=0,g=-1;e=q.exec(a,b,f);)c.call(d,e,++g,a,b),f=e.index+(e[0].length||1);return d},q.globalize=function(a){return d(a,{add:"g",addProto:!0})},q.install=function(a){a=k(a),!t.astral&&a.astral&&n(!0),!t.natives&&a.natives&&o(!0)},q.isInstalled=function(a){return!!t[a]},q.isRegExp=function(a){return"[object RegExp]"===G.call(a)},q.match=function(a,b,c){var f,g,h=b.global&&"one"!==c||"all"===c,i=(h?"g":"")+(b.sticky?"y":"");return b[s]=b[s]||e(),g=b[s][i||"noGY"]||(b[s][i||"noGY"]=d(b,{add:i,remove:"one"===c?"g":""})),f=u.match.call(p(a),g),b.global&&(b.lastIndex="one"===c&&f?f.index+f[0].length:0),h?f||[]:f&&f[0]},q.matchChain=function(a,b){return function c(a,d){var e,f=b[d].regex?b[d]:{regex:b[d]},g=[],h=function(a){if(f.backref){if(!(a.hasOwnProperty(f.backref)||+f.backref<a.length))throw new ReferenceError("Backreference to undefined group: "+f.backref);g.push(a[f.backref]||"")}else g.push(a[0])};for(e=0;e<a.length;++e)q.forEach(a[e],f.regex,h);return d!==b.length-1&&g.length?c(g,d+1):g}([a],0)},q.replace=function(a,b,c,f){var g,h=q.isRegExp(b),i=b.global&&"one"!==f||"all"===f,j=(i?"g":"")+(b.sticky?"y":""),k=b;return h?(b[s]=b[s]||e(),k=b[s][j||"noGY"]||(b[s][j||"noGY"]=d(b,{add:j,remove:"one"===f?"g":""}))):i&&(k=new RegExp(q.escape(String(b)),"g")),g=v.replace.call(p(a),k,c),h&&b.global&&(b.lastIndex=0),g},q.replaceEach=function(a,b){var c,d;for(c=0;c<b.length;++c)d=b[c],a=q.replace(a,d[0],d[1],d[2]);return a},q.split=function(a,b,c){return v.split.call(p(a),b,c)},q.test=function(a,b,c,d){return!!q.exec(a,b,c,d)},q.uninstall=function(a){a=k(a),t.astral&&a.astral&&n(!1),t.natives&&a.natives&&o(!1)},q.union=function(a,b){var c,d,e,f,g=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,i=[],j=0,k=function(a,b,e){var f=d[j-c];if(b){if(++j,f)return"(?<"+f+">"}else if(e)return"\\"+(+e+c);return a};if(!h(a,"Array")||!a.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(f=0;f<a.length;++f)e=a[f],q.isRegExp(e)?(c=j,d=e[s]&&e[s].captureNames||[],i.push(u.replace.call(q(e.source).source,g,k))):i.push(q.escape(e));return q(i.join("|"),b)},v.exec=function(b){var c,e,f,h=this.lastIndex,i=u.exec.apply(this,arguments);if(i){if(!D&&i.length>1&&g(i,"")>-1&&(e=d(this,{remove:"g"}),u.replace.call(String(b).slice(i.index),e,function(){var b,c=arguments.length;for(b=1;c-2>b;++b)arguments[b]===a&&(i[b]=a)})),this[s]&&this[s].captureNames)for(f=1;f<i.length;++f)c=this[s].captureNames[f-1],c&&(i[c]=i[f]);this.global&&!i[0].length&&this.lastIndex>i.index&&(this.lastIndex=i.index)}return this.global||(this.lastIndex=h),i},v.test=function(a){return!!v.exec.call(this,a)},v.match=function(a){var b;if(q.isRegExp(a)){if(a.global)return b=u.match.apply(this,arguments),a.lastIndex=0,b}else a=new RegExp(a);return v.exec.call(a,p(this))},v.replace=function(b,c){var d,e,f,i=q.isRegExp(b);return i?(b[s]&&(e=b[s].captureNames),d=b.lastIndex):b+="",f=h(c,"Function")?u.replace.call(String(this),b,function(){var d,f=arguments;if(e)for(f[0]=new String(f[0]),d=0;d<e.length;++d)e[d]&&(f[0][e[d]]=f[d+1]);return i&&b.global&&(b.lastIndex=f[f.length-2]+f[0].length),c.apply(a,f)}):u.replace.call(null==this?this:String(this),b,function(){var a=arguments;return u.replace.call(String(c),C,function(b,c,d){var f;if(c){if(f=+c,f<=a.length-3)return a[f]||"";if(f=e?g(e,c):-1,0>f)throw new SyntaxError("Backreference to undefined group "+b);return a[f+1]||""}if("$"===d)return"$";if("&"===d||0===+d)return a[0];if("`"===d)return a[a.length-1].slice(0,a[a.length-2]);if("'"===d)return a[a.length-1].slice(a[a.length-2]+a[0].length);if(d=+d,!isNaN(d)){if(d>a.length-3)throw new SyntaxError("Backreference to undefined group "+b);return a[d]||""}throw new SyntaxError("Invalid token "+b)})}),i&&(b.lastIndex=b.global?0:d),f},v.split=function(b,c){if(!q.isRegExp(b))return u.split.apply(this,arguments);var d,e=String(this),f=[],g=b.lastIndex,h=0;return c=(c===a?-1:c)>>>0,q.forEach(e,b,function(a){a.index+a[0].length>h&&(f.push(e.slice(h,a.index)),a.length>1&&a.index<e.length&&Array.prototype.push.apply(f,a.slice(1)),d=a[0].length,h=a.index+d)}),h===e.length?(!u.test.call(b,"")||d)&&f.push(""):f.push(e.slice(h)),b.lastIndex=g,f.length>c?f.slice(0,c):f},r=q.addToken,r(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(a,b){if("B"===a[1]&&b===z)return a[0];throw new SyntaxError("Invalid escape "+a[0])},{scope:"all"}),r(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"}),r(/\(\?#[^)]*\)/,function(a,b,c){return i(a.input,a.index+a[0].length,c)?"":"(?:)"}),r(/\s+|#.*/,function(a,b,c){return i(a.input,a.index+a[0].length,c)?"":"(?:)"},{flag:"x"}),r(/\./,function(){return"[\\s\\S]"},{flag:"s"}),r(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?g(this.captureNames,a[1])+1:+a[1],c=a.index+a[0].length;if(!b||b>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+a[0]);return"\\"+b+(c===a.input.length||isNaN(a.input.charAt(c))?"":"(?:)")}),r(/\\(\d+)/,function(a,b){if(!(b===z&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all"}),r(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("Cannot use integer as capture name "+a[0]);if("length"===a[1]||"__proto__"===a[1])throw new SyntaxError("Cannot use reserved word as capture name "+a[0]);if(g(this.captureNames,a[1])>-1)throw new SyntaxError("Cannot use same name for multiple groups "+a[0]);return this.captureNames.push(a[1]),this.hasNamedCapture=!0,"("}),r(/\((?!\?)/,function(a,b,c){return c.indexOf("n")>-1?"(?:":(this.captureNames.push(null),"(")},{optionalFlags:"n"}),q}(),Namespace=Shumway.AVM2.ABC.Namespace,Shumway;!function(a){!function(b){!function(b){function c(a){return Object.hasOwnProperty.call(a,b.VM_IS_CLASS)}function d(a){return Object.prototype.hasOwnProperty.call(a,b.VM_NATIVE_PROTOTYPE_FLAG)}function e(a,c){for(var d=0;d<a.length;d++){var e=a[d];if(b.traceExecution.value>=3){var f="Patching: ";e.name?f+=e.name:e.get?f+="get "+e.get:e.set&&(f+="set "+e.set),ec&&ec.redLn(f)}e.get?Wb(e.object,e.get,c,!0):e.set?Wb(e.object,e.set,c,!1):Xb(e.object,e.name,c)}}function f(c,d,f,g,h){if(d.isMethod()){var i=a.AVM2.Runtime.makeTrampoline(function(a){var b=yb(d,g,h);return e(a.patchTargets,b),b},d.methodInfo.parameters.length);i.patchTargets=[{object:f,name:c},{object:f,name:b.VM_OPEN_METHOD_PREFIX+c}];var j=Vb(i,f);Yb(j,b.VM_LENGTH,i.asLength),Yb(j,Mb.getPublicQualifiedName("prototype"),null),Xb(f,c,j),Xb(f,b.VM_OPEN_METHOD_PREFIX+c,j)}else if(d.isGetter()||d.isSetter()){var i=a.AVM2.Runtime.makeTrampoline(function(a){var b=yb(d,g,h);return e(a.patchTargets,b),b},d.isSetter()?1:0);i.patchTargets=d.isGetter()?[{object:f,get:c}]:[{object:f,set:c}],Wb(f,c,i,d.isGetter())}else a.Debug.unexpected(d)}function g(c,d,f,g,h){if(d.isMethod()){var i={value:null},j=a.AVM2.Runtime.makeTrampoline(function(a){var b=yb(d,g,h);return e(a.patchTargets,b),b},d.methodInfo.parameters.length,String(d.name));i.value=j;var k=f.asOpenMethods;k[c]=j,Xb(f,b.VM_OPEN_METHOD_PREFIX+c,j),Zb(f,c,a.AVM2.Runtime.makeMemoizer(c,i)),j.patchTargets=[{object:i,name:"value"},{object:k,name:c},{object:f,name:b.VM_OPEN_METHOD_PREFIX+c}]}else if(d.isGetter()||d.isSetter()){var j=a.AVM2.Runtime.makeTrampoline(function(a){var b=yb(d,g,h);return e(a.patchTargets,b),b},0,String(d.name));d.isGetter()?(Xb(f,b.VM_OPEN_GET_METHOD_PREFIX+c,j),j.patchTargets=[{object:f,get:c},{object:f,name:b.VM_OPEN_GET_METHOD_PREFIX+c}]):(Xb(f,b.VM_OPEN_SET_METHOD_PREFIX+c,j),j.patchTargets=[{object:f,set:c},{object:f,name:b.VM_OPEN_SET_METHOD_PREFIX+c}]),Wb(f,c,j,d.isGetter())}}function h(b){var c=this,d=c.resolutionMap[b.runtimeId];if(d)return d;d=c.resolutionMap[b.runtimeId]=a.ObjectUtilities.createMap();var e=c.bindings;for(var f in e.map){var g=f,h=e.map[f].trait;(h.isGetter()||h.isSetter())&&(g=g.substring(a.AVM2.Runtime.Binding.KEY_PREFIX_LENGTH)),g=Mb.fromQualifiedName(g),g.getNamespace().inNamespaceSet(b)&&(d[g.getName()]=Mb.getQualifiedName(h.name))}return d}function i(b,c){var d=this;if("object"==typeof c&&(c=String(c)),a.isNumeric(c))return a.toNumber(c);if(!b)return Mb.getPublicQualifiedName(c);if(b.length>1){var e=d.getNamespaceResolutionMap(b)[c];return e?e:Mb.getPublicQualifiedName(c)}return Mb.qualifyName(b[0],c)}function j(a){var b=this;return b.asGetProperty(void 0,a,0)}function k(a,b,c){var d=this,e=d.resolveMultinameProperty(a,b,c);return d.asGetNumericProperty&&Mb.isNumeric(e)?d.asGetNumericProperty(e):d[e]}function l(a,b,c){var d=this;return"number"==typeof b?d.asGetNumericProperty(b):k.call(d,a,b,c)}function m(a){return this[a]}function n(a,b,c){var d,e=this,f=b?null:this,g=e.asOpenMethods;return d=f&&g&&g[a]?g[a]:e[a],d.apply(f,c)}function o(a){var b=this,c=Mb.getNameFromPublicQualifiedName(a);return b.asGetProperty([Nb.PUBLIC],c,0)}function p(a,b){var c=this;return c.asSetProperty(void 0,a,0,b)}function q(a,b,c,d){var e=this;"object"==typeof b&&(b=String(b));var f=e.resolveMultinameProperty(a,b,c);if(e.asSetNumericProperty&&Mb.isNumeric(f))return e.asSetNumericProperty(f,d);var g=e.asSlots.byQN[f];if(g){g.isConst;var h=g.type;h&&h.coerce&&(d=h.coerce(d))}e[f]=d}function r(a,b,c,d){var e=this;return"number"==typeof b?void e.asSetNumericProperty(b,d):q.call(e,a,b,c,d)}function s(a,b){var c=this;return c.asDefineProperty(void 0,a,0,b)}function t(a,b,c,d){var e=this;"object"==typeof b&&(b=String(b));var f=e.resolveMultinameProperty(a,b,c);Object.defineProperty(e,f,d)}function u(a,b){var c=this;return c.asCallProperty(void 0,a,0,!1,b)}function v(a,c,d,e,f){var g=this;if(b.traceCallExecution.value){var h=g.class?g.class.className+" ":"";fc.enter("call "+h+c+"("+_b(f)+") #"+Lb.count(c))}var i,j=e?null:g;if(isProxyObject(g))i=g[b.VM_CALL_PROXY](new Mb(a,c,d),j,f);else{var k,l=g.resolveMultinameProperty(a,c,d);if(g.asGetNumericProperty&&Mb.isNumeric(l))k=g.asGetNumericProperty(l);else{var m=g.asOpenMethods;k=j&&m&&m[l]?m[l]:g[l]}i=k.apply(j,f)}return b.traceCallExecution.value>0&&fc.leave("return "+$b(i)),i}function w(a,c,d,e,f){var g=this;if(b.traceCallExecution.value){var h=g.class?g.class.className+" ":"";fc.enter("call super "+h+d+"("+_b(f)+") #"+Lb.count(d))}var i=a.object.baseClass,j=i.traitsPrototype.resolveMultinameProperty(c,d,e),k=i.traitsPrototype.asOpenMethods,l=k[j],m=l.apply(this,f);return b.traceCallExecution.value>0&&fc.leave("return "+$b(m)),m}function x(a,c,d,e,f){var g=this;if(b.traceCallExecution.value){var h=g.class?g.class.className+" ":"";fc.enter("set super "+h+d+"("+$b(f)+") #"+Lb.count(d))}var i=a.object.baseClass,j=i.traitsPrototype.resolveMultinameProperty(c,d,e);g.asSlots.byQN[j]?this.asSetProperty(c,d,e,f):i.traitsPrototype[b.VM_OPEN_SET_METHOD_PREFIX+j].call(this,f),b.traceCallExecution.value>0&&fc.leave("")}function y(a,c,d,e){var f=this;if(b.traceCallExecution.value){var g=f.class?f.class.className+" ":"";fc.enter("get super "+g+d+" #"+Lb.count(d))}var h,i=a.object.baseClass,j=i.traitsPrototype.resolveMultinameProperty(c,d,e);return h=f.asSlots.byQN[j]?this.asGetProperty(c,d,e):i.traitsPrototype[b.VM_OPEN_GET_METHOD_PREFIX+j].call(this),b.traceCallExecution.value>0&&fc.leave("return "+$b(h)),h}function z(a,b){if(a.classInfo){var c=Mb.getQualifiedName(a.classInfo.instanceInfo.name);if(c===Mb.String)return String.apply(null,b);if(c===Mb.Boolean)return Boolean.apply(null,b);if(c===Mb.Number)return Number.apply(null,b)}var d=a.instanceConstructor,e=b;switch(b.length){case 0:return new d;case 1:return new d(e[0]);case 2:return new d(e[0],e[1]);case 3:return new d(e[0],e[1],e[2]);case 4:return new d(e[0],e[1],e[2],e[3]);case 5:return new d(e[0],e[1],e[2],e[3],e[4]);case 6:return new d(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new d(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new d(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new d(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new d(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9])}for(var f=[],g=0;g<b.length;g++)f[g+1]=b[g];return new(Function.bind.apply(d,f))}function A(a,c,d,e){var f=this,g=f.asGetProperty(a,c,d);b.traceCallExecution.value&&fc.enter("construct "+c+"("+_b(e)+") #"+Lb.count(c));var h=z(g,e);return b.traceCallExecution.value>0&&fc.leave("return "+$b(h)),h}function B(a,b){return b in a}function C(a,b,c,d){var e=this;return e.hasProperty?e.hasProperty(a,b,c):d?B(e,e.resolveMultinameProperty(a,b,c)):e.resolveMultinameProperty(a,b,c)in this}function D(a,b,c){var d=this;if(d.asHasTraitProperty(a,b,c))return!1;var e=d.resolveMultinameProperty(a,b,c);return delete d[e]}function E(a,b,c){var d=this,e=d.resolveMultinameProperty(a,b,c);return d.asBindings.indexOf(e)>=0}function F(a){return this[a]}function G(a,b){this[a]=b}function H(){a.Debug.notImplemented("asGetDescendants")}function I(a){var b=this;0===a&&Xb(b,"asEnumerableKeys",b.asGetEnumerableKeys());for(var c=b.asEnumerableKeys;a<c.length;){if(b.asHasProperty(void 0,c[a],0))return a+1;a++}return 0}function J(a){var b=this,c=b.asEnumerableKeys;return c[a-1]}function K(a){return this.asGetPublicProperty(this.asNextName(a))}function L(){var b=this,c=b.valueOf();if("string"==typeof c||"number"==typeof c)return[];for(var d=Object.keys(this),e=[],f=0;f<d.length;f++){var g=d[f];if(a.isNumeric(g))e.push(g);else{var h=Mb.stripPublicQualifier(g);void 0!==h&&e.push(h)}}return e}function M(a){if(a){if(a.constructor===String)return"string";if(a.constructor===Number)return"number";if(a.constructor===Boolean)return"boolean";if(a instanceof XML||a instanceof XMLList)return"xml"}return typeof a}function N(a){for(var b=Object.keys(a),c=0;c<b.length;c++){var d=b[c];if(!Mb.isPublicQualifiedName(d)){var e=a[d];a[Mb.getPublicQualifiedName(d)]=e,delete a[d]}}}function O(a,b){return a[a.asSlots.byID[b].name]}function P(a,b,c){var d=a.asSlots.byID[b];if(!d.const){var e=d.name,f=d.type;a[e]=f&&f.coerce?f.coerce(c):c}}function Q(b,c){var d=a.AVM2.formatErrorMessage.apply(null,Array.prototype.slice.call(arguments,1));R(a.AVM2.Runtime.AVM2.currentDomain(),b,d,c.code)}function R(a,b,c,d){var e=new(a.getClass(b).instanceConstructor)(c,d);throw e}function S(b,c){if(c instanceof Error){var d=b.getClass(c.name);if(d)return new d.instanceConstructor(a.AVM2.translateErrorMessage(c));a.Debug.unexpected("Can't translate error: "+c)}return c}function T(a,b){return a.isInstanceOf(b)}function U(a,b){return a.isInstance(b)}function V(a,b){return U(a,b)?b:null}function W(a,b,c){switch(Mb.getQualifiedName(b)){case Mb.Int:return Z(c);case Mb.Uint:return $(c);case Mb.String:return Y(c);case Mb.Number:return _(c);case Mb.Boolean:return ab(c);case Mb.Object:return bb(c)}return X(a.getType(b),c)}function X(b,c){return b.coerce?b.coerce(c):a.isNullOrUndefined(c)?null:b.isInstance(c)?c:void 0}function Y(a){return"string"==typeof a?a:void 0==a?null:a+""}function Z(a){return 0|a}function $(a){return a>>>0}function _(a){return+a}function ab(a){return!!a}function bb(a){return void 0==a?null:"string"==typeof a||"number"==typeof a?a:Object(a)}function cb(a,b){return String(a).localeCompare(String(b))}function db(b,c,d,e){var f=0;return e||(e=cb),1&d&&(b=String(b).toLowerCase(),c=String(c).toLowerCase()),16&d?(b=a.toNumber(b),c=a.toNumber(c),f=c>b?-1:b>c?1:0):f=e(b,c),2&d&&(f*=-1),f}function eb(a,b){return"string"==typeof a||"string"==typeof b?String(a)+String(b):a+b}function fb(b,c){if(a.isNullOrUndefined(b))return{index:0,object:null};b=Ub(b);var d=b.asNextNameIndex(c);if(d>0)return{index:d,object:b};for(;;){var b=Object.getPrototypeOf(b);if(!b)return{index:0,object:null};if(d=b.asNextNameIndex(0),d>0)return{index:d,object:b}}return{index:0,object:null}}function gb(a,b){if(!isXMLType(a))throw"Not XML object in getDescendants";return a.descendants(b)}function hb(a){if(!a.class||!isXMLType(a))throw"TypeError operand of childFilter not of XML type";return a}function ib(a){var c=[{name:"Object",methods:["toString","valueOf"]},{name:"Function",methods:["toString","valueOf"]}],d=a[b.VM_NATIVE_BUILTIN_ORIGINALS]=Tb();c.forEach(function(b){var c=a[b.name];d[b.name]=Tb(),b.methods.forEach(function(e){var f;f=c.prototype.hasOwnProperty(e)?c.prototype[e]:d.Object[e],d[b.name][e]=f;var g=Mb.getPublicQualifiedName(e);Kb&&(a[b.name].prototype[e]=function(){return this[g]?this[g]():f.call(this)})})}),["Object","Number","Boolean","String","Array","Date","RegExp"].forEach(function(c){Yb(a[c].prototype,b.VM_NATIVE_PROTOTYPE_FLAG,!0)}),Xb(a.Object.prototype,"getNamespaceResolutionMap",h),Xb(a.Object.prototype,"resolveMultinameProperty",i),Xb(a.Object.prototype,"asGetProperty",k),Xb(a.Object.prototype,"asGetPublicProperty",j),Xb(a.Object.prototype,"asGetResolvedStringProperty",m),Xb(a.Object.prototype,"asSetProperty",q),Xb(a.Object.prototype,"asSetPublicProperty",p),Xb(a.Object.prototype,"asDefineProperty",t),Xb(a.Object.prototype,"asDefinePublicProperty",s),Xb(a.Object.prototype,"asCallProperty",v),Xb(a.Object.prototype,"asCallSuper",w),Xb(a.Object.prototype,"asGetSuper",y),Xb(a.Object.prototype,"asSetSuper",x),Xb(a.Object.prototype,"asCallPublicProperty",u),Xb(a.Object.prototype,"asCallResolvedStringProperty",n),Xb(a.Object.prototype,"asConstructProperty",A),Xb(a.Object.prototype,"asHasProperty",C),Xb(a.Object.prototype,"asHasTraitProperty",E),Xb(a.Object.prototype,"asDeleteProperty",D),Xb(a.Object.prototype,"asNextName",J),Xb(a.Object.prototype,"asNextValue",K),Xb(a.Object.prototype,"asNextNameIndex",I),Xb(a.Object.prototype,"asGetEnumerableKeys",L),["Array","Int8Array","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(b){return b in a?(Xb(a[b].prototype,"asGetNumericProperty",F),Xb(a[b].prototype,"asSetNumericProperty",G),Xb(a[b].prototype,"asGetProperty",l),void Xb(a[b].prototype,"asSetProperty",r)):void log(b+" was not found in globals")}),a.Array.prototype.asGetProperty=function(a,b,c){return"number"==typeof b?this[b]:k.call(this,a,b,c)},a.Array.prototype.asSetProperty=function(a,b,c,d){return"number"==typeof b?void(this[b]=d):q.call(this,a,b,c,d)}}function jb(a,c){if(a.hasOwnProperty(b.VM_BINDINGS)&&a.hasOwnProperty(c))return!0;var d=Object.getPrototypeOf(a);return d.hasOwnProperty(b.VM_BINDINGS)&&d.hasOwnProperty(c)}function kb(b,c){c&&new a.AVM2.Runtime.CatchBindings(new a.AVM2.Runtime.Scope(null,this),c).applyTo(b,this)}function lb(b,c,d){if(b.asBindings){for(var e in b)if(a.isNumeric(e))c.call(d,e,b[e]);else if(Mb.isPublicQualifiedName(e)&&b.asBindings.indexOf(e)<0){var f=Mb.stripPublicQualifier(e);c.call(d,f,b[e])}}else for(var e in b)c.call(d,e,b[e])}function mb(a){var b=Object.create(a);for(var c in a)Object.defineProperty(b,Mb.getPublicQualifiedName(c),function(a,b){return{get:function(){return a[b]},set:function(c){a[b]=c},enumerable:!0}}(a,c));return b}function nb(a){return Object.create(a.activationPrototype)}function ob(a,b){return"undefined"==typeof b&&(b=0),Array.prototype.slice.call(a,b)}function pb(a){return a.hasBody?a.hasExceptions()&&!Ib.value?!1:a.code.length>Jb.value?!1:!0:!1}function qb(a){return pb(a)?a.isClassInitializer||a.isScriptInitializer?!1:!0:!1}function rb(a){if(a.hasExceptions())return!1;var b=a.holder;if(b instanceof Ob&&(b=b.instanceInfo),b instanceof Pb){var c=b.name.namespaces[0].uri;switch(c){case"flash.geom":case"flash.events":return!0}var d=b.name.getOriginalName();switch(d){case"com.google.youtube.model.VideoData":return!0}}return!1}function sb(a){if(b.codeCaching.value){var c=b.CODE_CACHE[a.abc.hash];if(!c)return warn("Cannot Find Code Cache For ABC, name: "+a.abc.name+", hash: "+a.abc.hash),void Counter.count("Code Cache ABC Miss");c.isInitialized||(a.abc.scripts.forEach(function(a){hc.create(a).getName()}),a.abc.classes.forEach(function(a){hc.create(a).getName()}),c.isInitialized=!0);var d=c.methods[a.index];return d?(log("Linking CC: "+a),Counter.count("Code Cache Hit"),d):(a.isInstanceInitializer||a.isClassInitializer?Counter.count("Code Cache Query On Initializer"):(Counter.count("Code Cache MISS ON OTHER"),warn("Shouldn't MISS: "+a+" "+a.debugName)),void Counter.count("Code Cache Miss"))}}function tb(b,c,d){var e,f=b,g=!1,h=f.parameters.map(function(a){return void 0!==a.value&&(g=!0),a.value});return e=d?function(c){var d=this===jsGlobal?c.global.object:this,e=ob(arguments,1);return g&&e.length<h.length&&(e=e.concat(h.slice(e.length-h.length))),a.AVM2.Interpreter.interpretMethod(d,b,c,e)}:function(){var d=this===jsGlobal?c.global.object:this,e=ob(arguments);return g&&e.length<h.length&&(e=e.concat(h.slice(arguments.length-h.length))),a.AVM2.Interpreter.interpretMethod(d,b,c,e)},e.instanceConstructor=e,e.debugName="Interpreter Function #"+ac++,e}function ub(b){return a.isFunction(b)?b.debugName:b}function vb(b,c,d,e){var f=b,g=sb(f);if(!g)var h=Compiler.compileMethod(f,c,d),i=h.parameters,j=h.body;var k=f.name?Mb.getQualifiedName(f.name):"fn"+dc;if(f.holder){var l="";f.holder instanceof Ob?l="static$"+f.holder.instanceInfo.name.getName():f.holder instanceof Pb?l=f.holder.name.getName():f.holder instanceof Qb&&(l="script"),k=l+"$"+k}if(k=a.StringUtilities.escapeString(k),f.verified&&(k+="$V"),(dc==Fb.value||e)&&(j="{ debugger; \n"+j+"}"),!g)var m="function "+k+" ("+i.join(", ")+") "+j;traceLevel.value>1&&f.trace(new Sb,f.abc),f.debugTrace=function(){f.trace(new Sb,f.abc)},traceLevel.value>0&&log(m);var n=g||new Function("return "+m)();return n.debugName="Compiled Function #"+bc++,n}function wb(b,c,d,e){if("undefined"==typeof e&&(e=!1),b.freeMethod)return d?a.AVM2.Runtime.bindFreeMethodScope(b,c):b.freeMethod;var f;if(f=a.AVM2.Runtime.checkMethodOverrides(b))return f;xb(b),cc++;var g=!1;return 1!==b.abc.applicationDomain.mode&&qb(b)||rb(b)||(g=!0),Gb.value>=0&&Number(Gb.value)!==cc&&(log("Compile Only Skipping "+cc),g=!0),Hb.value>=0&&(cc>1e3&&(log(a.Debug.backtrace()),log(a.AVM2.Runtime.AVM2.getStackTrace())),cc>Hb.value&&(log("Compile Until Skipping "+cc),g=!0)),g?b.freeMethod=tb(b,c,d):(dc++,(Gb.value>=0||Hb.value>=0)&&log("Compiling "+cc),b.freeMethod=vb(b,c,d,e,b.isInstanceInitializer)),b.freeMethod.methodInfo=b,d?a.AVM2.Runtime.bindFreeMethodScope(b,c):b.freeMethod}function xb(b){var c=b;if(!c.analysis){c.analysis=new Analysis(c),c.needsActivation()&&(c.activationPrototype=new jc(c),new a.AVM2.Runtime.ActivationBindings(c).applyTo(c.abc.applicationDomain,c.activationPrototype));for(var d=c.exceptions,e=0,f=d.length;f>e;e++){var g=d[e];if(g.varName){var h=Object.create(Rb.prototype);h.kind=0,h.name=g.varName,h.typeName=g.typeName,h.holder=c,g.scopeObject=new kb(c.abc.applicationDomain,h)}else g.scopeObject=new kb(void 0,void 0)}}}function yb(c,d,e){var f,g=c.methodInfo;if(g.isNative()){var h=c.metadata;if(h&&h.native){var i=h.native.value[0].value,j=getNative(i);f=j&&j(null,d)}else if(h&&h.unsafeJSNative)f=getNative(h.unsafeJSNative.value[0].value);else if(e){var k=Mb.getName(g.name);f=c.isGetter()?e[k]?e[k].get:void 0:c.isSetter()?e[k]?e[k].set:void 0:e[k]}if(!f)return a.Debug.warning("No native method for: "+c.kindName()+" "+g.holder.name+"::"+Mb.getQualifiedName(g.name)),function(b){return function(){a.Debug.warning("Calling undefined native method: "+c.kindName()+" "+b.holder.name+"::"+Mb.getQualifiedName(b.name))}}(g)}else b.traceExecution.value>=2&&log("Creating Function For Trait: "+c.holder+" "+c),f=wb(g,d,!1,!1);return b.traceExecution.value>=3&&log("Made Function: "+Mb.getQualifiedName(g.name)),f}function zb(c,d,e){var f=c,g=f.instanceInfo,h=f.abc.applicationDomain,i=Mb.getName(g.name);b.traceExecution.value&&log("Creating "+(g.isInterface()?"Interface":"Class")+": "+i+(f.native?" replaced with native "+f.native.cls:""));var j;return j=g.isInterface()?a.AVM2.Runtime.Interface.createInterface(c):a.AVM2.Runtime.Class.createClass(c,d,e),b.traceClasses.value&&(h.loadedClasses.push(j),h.traceLoadedClasses(!0)),g.isInterface()?j:(h.onMessage.notify1("classCreated",j),j.instanceConstructor&&j!==a.AVM2.Runtime.Class&&j.verify(),d&&("Proxy"===Mb.getQualifiedName(d.classInfo.instanceInfo.name.name)||d.isProxy)&&(installProxyClassWrapper(j),j.isProxy=!0),c.classObject=j,wb(c.init,e,!1,!1).call(j),b.sealConstTraits&&this.sealConstantTraits(j,f.traits),j)}function Ab(b,c){for(var d=0,e=c.length;e>d;d++){var f=c[d];if(f.isConst()){var g=Mb.getQualifiedName(f.name),h=b[g];!function(c,d){Object.defineProperty(b,c,{configurable:!1,enumerable:!1,get:function(){return d},set:function(){R(a.AVM2.Runtime.AVM2.currentDomain(),"ReferenceError","Illegal write to read-only property "+c+".",0)}})}(g,h)}}}function Bb(b,c,d){var e=c.classInfo.instanceInfo.name.name;if("Vector"===e){var f,g=d[0];if(!a.isNullOrUndefined(g))switch(f=g.classInfo.instanceInfo.name.name.toLowerCase()){case"int":case"uint":case"double":case"object":return b.getClass("packageInternal __AS3__.vec.Vector$"+f)}return b.getClass("packageInternal __AS3__.vec.Vector$object").applyType(g)}return a.Debug.notImplemented(e)}{var Cb=a.Options.Option,Db=a.Options.OptionSet,Eb=systemOptions.register(new Db("Runtime Options"));Eb.register(new Cb("ts","traceScope","boolean",!1,"trace scope execution"))}b.traceExecution=Eb.register(new Cb("tx","traceExecution","number",0,"trace script execution")),b.traceCallExecution=Eb.register(new Cb("txc","traceCallExecution","number",0,"trace call execution"));var Fb=Eb.register(new Cb("fb","functionBreak","number",-1,"Inserts a debugBreak at function index #.")),Gb=Eb.register(new Cb("co","compileOnly","number",-1,"Compiles only function number.")),Hb=Eb.register(new Cb("cu","compileUntil","number",-1,"Compiles only until a function number."));b.debuggerMode=Eb.register(new Cb("dm","debuggerMode","boolean",!1,"matches avm2 debugger build semantics")),b.enableVerifier=Eb.register(new Cb("verify","verify","boolean",!1,"Enable verifier.")),b.globalMultinameAnalysis=Eb.register(new Cb("ga","globalMultinameAnalysis","boolean",!1,"Global multiname analysis."));Eb.register(new Cb("tic","traceInlineCaching","boolean",!1,"Trace inline caching execution."));b.codeCaching=Eb.register(new Cb("cc","codeCaching","boolean",!1,"Enable code caching."));var Ib=Eb.register(new Cb("cex","exceptions","boolean",!1,"Compile functions with catch blocks.")),Jb=Eb.register(new Cb("cmms","maximumMethodSize","number",4096,"Compiler maximum method size."));
b.traceClasses=Eb.register(new Cb("tc","traceClasses","boolean",!1,"trace class creation")),b.traceDomain=Eb.register(new Cb("td","traceDomain","boolean",!1,"trace domain property access")),b.sealConstTraits=!1,b.useAsAdd=!0;{var Kb=!0,Lb=new a.Metrics.Counter(!0),Mb=a.AVM2.ABC.Multiname,Nb=a.AVM2.ABC.Namespace,Ob=(a.AVM2.ABC.MethodInfo,a.AVM2.ABC.ClassInfo),Pb=a.AVM2.ABC.InstanceInfo,Qb=a.AVM2.ABC.ScriptInfo,Rb=(a.AVM2.ABC.SORT,a.AVM2.ABC.Trait),Sb=a.IndentingWriter,Tb=(a.ObjectUtilities.hasOwnProperty,a.ObjectUtilities.createMap,a.ObjectUtilities.cloneObject,a.ObjectUtilities.copyProperties,a.ObjectUtilities.createEmptyObject),Ub=a.ObjectUtilities.boxValue,Vb=a.FunctionUtilities.bindSafely,Wb=a.ObjectUtilities.defineNonEnumerableGetterOrSetter,Xb=a.ObjectUtilities.defineNonEnumerableProperty,Yb=a.ObjectUtilities.defineReadOnlyProperty,Zb=a.ObjectUtilities.defineNonEnumerableGetter,$b=(a.FunctionUtilities.makeForwardingGetter,a.FunctionUtilities.makeForwardingSetter,a.StringUtilities.toSafeString),_b=a.StringUtilities.toSafeArrayString;a.AVM2.ABC.TRAIT}b.VM_SLOTS="asSlots",b.VM_LENGTH="asLength",b.VM_BINDINGS="asBindings",b.VM_NATIVE_PROTOTYPE_FLAG="asIsNative",b.VM_OPEN_METHODS="asOpenMethods",b.VM_IS_CLASS="asIsClass",b.VM_IS_PROXY="asIsProxy",b.VM_CALL_PROXY="asCallProxy",b.VM_OPEN_METHOD_PREFIX="m",b.VM_MEMOIZER_PREFIX="z",b.VM_OPEN_SET_METHOD_PREFIX="s",b.VM_OPEN_GET_METHOD_PREFIX="g",b.VM_NATIVE_BUILTIN_ORIGINALS="asOriginals",b.VM_METHOD_OVERRIDES=Tb();var ac=1,bc=1,cc=0,dc=0;b.isClass=c,b.isNativePrototype=d;var ec=null,fc=null;b.patch=e,b.applyNonMemoizedMethodTrait=f,b.applyMemoizedMethodTrait=g,b.getNamespaceResolutionMap=h,b.resolveMultinameProperty=i,b.asGetPublicProperty=j,b.asGetProperty=k,b.asGetPropertyLikelyNumeric=l,b.asGetResolvedStringProperty=m,b.asCallResolvedStringProperty=n,b.asGetResolvedStringPropertyFallback=o,b.asSetPublicProperty=p,b.asSetProperty=q,b.asSetPropertyLikelyNumeric=r,b.asDefinePublicProperty=s,b.asDefineProperty=t,b.asCallPublicProperty=u,b.asCallProperty=v,b.asCallSuper=w,b.asSetSuper=x,b.asGetSuper=y,b.construct=z,b.asConstructProperty=A,b.nonProxyingHasProperty=B,b.asHasProperty=C,b.asDeleteProperty=D,b.asHasTraitProperty=E,b.asGetNumericProperty=F,b.asSetNumericProperty=G,b.asGetDescendants=H,b.asNextNameIndex=I,b.asNextName=J,b.asNextValue=K,b.asGetEnumerableKeys=L,b.asTypeOf=M,b.publicizeProperties=N,b.asGetSlot=O,b.asSetSlot=P,b.throwError=Q,b.throwErrorFromVM=R,b.translateError=S,b.asIsInstanceOf=T,b.asIsType=U,b.asAsType=V,b.asCoerceByMultiname=W,b.asCoerce=X,b.asCoerceString=Y,b.asCoerceInt=Z,b.asCoerceUint=$,b.asCoerceNumber=_,b.asCoerceBoolean=ab,b.asCoerceObject=bb,b.asDefaultCompareFunction=cb,b.asCompare=db,b.asAdd=eb,b.asHasNext2=fb,b.getDescendants=gb,b.checkFilter=hb,b.initializeGlobalObject=ib,b.nameInTraits=jb,b.CatchScopeObject=kb;var gc=function(){function b(b){this.scriptInfo=b,b.global=this,this.scriptBindings=new a.AVM2.Runtime.ScriptBindings(b,new a.AVM2.Runtime.Scope(null,this,!1)),this.scriptBindings.applyTo(b.abc.applicationDomain,this),b.loaded=!0}return b.prototype.toString=function(){return"[object global]"},b.prototype.isExecuted=function(){return this.scriptInfo.executed},b.prototype.isExecuting=function(){return this.scriptInfo.executing},b.prototype.ensureExecuted=function(){a.AVM2.Runtime.ensureScriptIsExecuted(this.scriptInfo)},b}();b.Global=gc,Xb(gc.prototype,Mb.getPublicQualifiedName("toString"),function(){return this.toString()});var hc=function(){function b(a){this.target=a}return b.create=function(a){return a.asLazyInitializer?a.asLazyInitializer:a.asLazyInitializer=new b(a)},b.prototype.getName=function(){if(this.name)return this.name;var c,d=this.target;if(this.target instanceof Qb){var e=d;this.name="$"+a.StringUtilities.variableLengthEncodeInt32(e.hash),c=function(){return a.AVM2.Runtime.ensureScriptIsExecuted(d,"Lazy Initializer"),e.global}}else if(this.target instanceof Ob){var f=d;this.name="$"+a.StringUtilities.variableLengthEncodeInt32(f.hash),c=function(){return f.classObject?f.classObject:f.abc.applicationDomain.getProperty(f.instanceInfo.name)}}else a.Debug.notImplemented(String(d));var g=this.name;return Object.defineProperty(b._holder,g,{get:function(){var a=c();return Object.defineProperty(b._holder,g,{value:a,writable:!0}),a},configurable:!0}),g},b._holder=jsGlobal,b}();b.LazyInitializer=hc,b.forEachPublicProperty=lb,b.wrapJSObject=mb,b.asCreateActivation=nb;var ic=function(){function c(){}return c.updateTraits=function(b){for(var d=0;d<b.length;d++){var e=b[d],f=e.name.name,g=e.name.getNamespace();g.isDynamic()||(c.hasNonDynamicNamespaces[f]=!0,c.wasResolved[f]&&a.Debug.notImplemented("We have to the undo the optimization, "+f+" can now bind to "+g))}},c.loadAbc=function(a){if(b.globalMultinameAnalysis.value){for(var d=a.scripts,e=a.classes,f=a.methods,g=0;g<d.length;g++)c.updateTraits(d[g].traits);for(var g=0;g<e.length;g++)c.updateTraits(e[g].traits),c.updateTraits(e[g].instanceInfo.traits);for(var g=0;g<f.length;g++)f[g].traits&&c.updateTraits(f[g].traits)}},c.resolveMultiname=function(a){var b=a.name;if(!c.hasNonDynamicNamespaces[b])return c.wasResolved[b]=!0,new Mb([Nb.PUBLIC],a.name)},c.hasNonDynamicNamespaces=Tb(),c.wasResolved=Tb(),c}();b.GlobalMultinameResolver=ic;var jc=function(){function a(a){this.methodInfo=a}return a}();b.ActivationInfo=jc,b.sliceArguments=ob,b.canCompile=pb,b.shouldCompile=qb,b.forceCompile=rb,b.CODE_CACHE=Tb(),b.searchCodeCache=sb,b.createInterpretedFunction=tb,b.debugName=ub,b.createCompiledFunction=vb,b.createFunction=wb,b.ensureFunctionIsInitialized=xb,b.getTraitFunction=yb,b.createClass=zb,b.sealConstantTraits=Ab,b.applyType=Bb}(b.Runtime||(b.Runtime={}));b.Runtime}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={}));var CC=Shumway.AVM2.Runtime.CODE_CACHE,VM_LENGTH=Shumway.AVM2.Runtime.VM_LENGTH,VM_IS_PROXY=Shumway.AVM2.Runtime.VM_IS_PROXY,VM_CALL_PROXY=Shumway.AVM2.Runtime.VM_CALL_PROXY,VM_NATIVE_BUILTIN_ORIGINALS=Shumway.AVM2.Runtime.VM_NATIVE_BUILTIN_ORIGINALS,VM_OPEN_METHOD_PREFIX="m",VM_OPEN_SET_METHOD_PREFIX="s",VM_OPEN_GET_METHOD_PREFIX="g",SAVED_SCOPE_NAME="$SS",originalStringReplace=String.prototype.replace;XRegExp.install({natives:!0});var callWriter=new IndentingWriter(!1,function(a){print(a)}),objectIDs=0,OBJECT_NAME="Object Name",isClass=Shumway.AVM2.Runtime.isClass,isTrampoline=Shumway.AVM2.Runtime.isTrampoline,isMemoizer=Shumway.AVM2.Runtime.isMemoizer,LazyInitializer=Shumway.AVM2.Runtime.LazyInitializer,getNamespaceResolutionMap=Shumway.AVM2.Runtime.getNamespaceResolutionMap,resolveMultinameProperty=Shumway.AVM2.Runtime.resolveMultinameProperty,asGetPublicProperty=Shumway.AVM2.Runtime.asGetPublicProperty,asGetProperty=Shumway.AVM2.Runtime.asGetProperty,asGetPropertyLikelyNumeric=Shumway.AVM2.Runtime.asGetPropertyLikelyNumeric,asGetResolvedStringProperty=Shumway.AVM2.Runtime.asGetResolvedStringProperty,asCallResolvedStringProperty=Shumway.AVM2.Runtime.asCallResolvedStringProperty,asGetResolvedStringPropertyFallback=Shumway.AVM2.Runtime.asGetResolvedStringPropertyFallback,asSetPublicProperty=Shumway.AVM2.Runtime.asSetPublicProperty,asSetProperty=Shumway.AVM2.Runtime.asSetProperty,asSetPropertyLikelyNumeric=Shumway.AVM2.Runtime.asSetPropertyLikelyNumeric,asDefinePublicProperty=Shumway.AVM2.Runtime.asDefinePublicProperty,asDefineProperty=Shumway.AVM2.Runtime.asDefineProperty,asCallPublicProperty=Shumway.AVM2.Runtime.asCallPublicProperty,asCallProperty=Shumway.AVM2.Runtime.asCallProperty,asCallSuper=Shumway.AVM2.Runtime.asCallSuper,asSetSuper=Shumway.AVM2.Runtime.asSetSuper,asGetSuper=Shumway.AVM2.Runtime.asGetSuper,construct=Shumway.AVM2.Runtime.construct,asConstructProperty=Shumway.AVM2.Runtime.asConstructProperty,asHasProperty=Shumway.AVM2.Runtime.asHasProperty,asDeleteProperty=Shumway.AVM2.Runtime.asDeleteProperty,asGetNumericProperty=Shumway.AVM2.Runtime.asGetNumericProperty,asSetNumericProperty=Shumway.AVM2.Runtime.asSetNumericProperty,asGetDescendants=Shumway.AVM2.Runtime.asGetDescendants,asNextNameIndex=Shumway.AVM2.Runtime.asNextNameIndex,asNextName=Shumway.AVM2.Runtime.asNextName,asNextValue=Shumway.AVM2.Runtime.asNextValue,asGetEnumerableKeys=Shumway.AVM2.Runtime.asGetEnumerableKeys,initializeGlobalObject=Shumway.AVM2.Runtime.initializeGlobalObject;initializeGlobalObject(jsGlobal);var asTypeOf=Shumway.AVM2.Runtime.asTypeOf,publicizeProperties=Shumway.AVM2.Runtime.publicizeProperties,asGetSlot=Shumway.AVM2.Runtime.asGetSlot,asSetSlot=Shumway.AVM2.Runtime.asSetSlot,asHasNext2=Shumway.AVM2.Runtime.asHasNext2,getDescendants=Shumway.AVM2.Runtime.getDescendants,checkFilter=Shumway.AVM2.Runtime.checkFilter,ActivationInfo=Shumway.AVM2.Runtime.ActivationInfo,ScopeStack=Shumway.AVM2.Runtime.ScopeStack,Scope=Shumway.AVM2.Runtime.Scope,bindFreeMethodScope=Shumway.AVM2.Runtime.bindFreeMethodScope,nameInTraits=Shumway.AVM2.Runtime.nameInTraits,sliceArguments=Shumway.AVM2.Runtime.sliceArguments,nonProxyingHasProperty=Shumway.AVM2.Runtime.nonProxyingHasProperty,forEachPublicProperty=Shumway.AVM2.Runtime.forEachPublicProperty,wrapJSObject=Shumway.AVM2.Runtime.wrapJSObject,asCreateActivation=Shumway.AVM2.Runtime.asCreateActivation,CatchScopeObject=Shumway.AVM2.Runtime.CatchScopeObject,Global=Shumway.AVM2.Runtime.Global,canCompile=Shumway.AVM2.Runtime.canCompile,shouldCompile=Shumway.AVM2.Runtime.shouldCompile,forceCompile=Shumway.AVM2.Runtime.forceCompile,createInterpretedFunction=Shumway.AVM2.Runtime.createInterpretedFunction,debugName=Shumway.AVM2.Runtime.debugName,createCompiledFunction=Shumway.AVM2.Runtime.createCompiledFunction,getMethodOverrideKey=Shumway.AVM2.Runtime.getMethodOverrideKey,checkMethodOverrides=Shumway.AVM2.Runtime.checkMethodOverrides,makeTrampoline=Shumway.AVM2.Runtime.makeTrampoline,makeMemoizer=Shumway.AVM2.Runtime.makeMemoizer,createFunction=Shumway.AVM2.Runtime.createFunction,ensureFunctionIsInitialized=Shumway.AVM2.Runtime.ensureFunctionIsInitialized,getTraitFunction=Shumway.AVM2.Runtime.getTraitFunction,createClass=Shumway.AVM2.Runtime.createClass,sealConstantTraits=Shumway.AVM2.Runtime.sealConstantTraits,applyType=Shumway.AVM2.Runtime.applyType,throwError=Shumway.AVM2.Runtime.throwError,throwErrorFromVM=Shumway.AVM2.Runtime.throwErrorFromVM,translateError=Shumway.AVM2.Runtime.translateError,asIsInstanceOf=Shumway.AVM2.Runtime.asIsInstanceOf,asIsType=Shumway.AVM2.Runtime.asIsType,asAsType=Shumway.AVM2.Runtime.asAsType,asCoerceByMultiname=Shumway.AVM2.Runtime.asCoerceByMultiname,asCoerce=Shumway.AVM2.Runtime.asCoerce,asCoerceString=Shumway.AVM2.Runtime.asCoerceString,asCoerceInt=Shumway.AVM2.Runtime.asCoerceInt,asCoerceUint=Shumway.AVM2.Runtime.asCoerceUint,asCoerceNumber=Shumway.AVM2.Runtime.asCoerceNumber,asCoerceBoolean=Shumway.AVM2.Runtime.asCoerceBoolean,asCoerceObject=Shumway.AVM2.Runtime.asCoerceObject,asDefaultCompareFunction=Shumway.AVM2.Runtime.asDefaultCompareFunction,asCompare=Shumway.AVM2.Runtime.asCompare,asAdd=Shumway.AVM2.Runtime.asAdd,GlobalMultinameResolver=Shumway.AVM2.Runtime.GlobalMultinameResolver,Shumway;!function(a){!function(b){!function(){a.AVM2.Runtime.VM_METHOD_OVERRIDES["static mochi.as3.MochiServices::connect"]=function(){},a.AVM2.Runtime.VM_METHOD_OVERRIDES["static MochiBot::track"]=function(){},a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.midasplayer.debug.DebugLog::trace"]=function(a){log(a)},a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.midasplayer.engine.comm.DebugGameComm::getGameData"]=function(){return'<gamedata randomseed="554884453" version="1">\n<musicOn>true</musicOn>\n<soundOn>true</soundOn>\n<isShortGame>false</isShortGame>\n<booster_1>0</booster_1>\n<booster_2>0</booster_2>\n<booster_3>0</booster_3>\n<booster_4>0</booster_4>\n<booster_5>0</booster_5>\n<bestScore>0</bestScore>\n<bestChain>0</bestChain>\n<bestLevel>0</bestLevel>\n<bestCrushed>0</bestCrushed>\n<bestMixed>0</bestMixed>\n<text id="outro.crushed">Candy crushed</text>\n<text id="outro.bestever">best ever</text>\n<text id="outro.trophy.two">scored {0} in one game</text>\n<text id="outro.combo_color_color">All Clear Created</text>\n<text id="outro.trophy.one">crushed {0} candy in one game</text>\n<text id="outro.score">Score</text>\n<text id="outro.opengame">Please register to play the full game</text>\n<text id="outro.chain">Longest chain</text>\n<text id="outro.time">Game ends in {0} seconds</text>\n<text id="outro.combo_color_line">Super Stripes Created</text>\n<text id="game.nomoves">No more moves!</text>\n<text id="outro.combo_wrapper_line">Mega-Candy Created</text>\n<text id="intro.time">Game starts in {0} seconds</text>\n<text id="outro.now">now</text>\n<text id="outro.level">Level reached</text>\n<text id="outro.title">Game Over</text>\n<text id="intro.info1">Match 3 Candy of the same colour to crush them. Matching 4 or 5 in different formations generates special sweets that are extra tasty.</text>\n<text id="intro.info2">You can also combine the special sweets for additional effects by switching them with each other. Try these combinations for a taste you will not forget: </text>\n<text id="outro.combo_color_wrapper">Double Colour Bombs Created</text>\n<text id="outro.trophy.three">made {0} combined candy in one game</text>\n<text id="intro.title">Play like this:</text>\n</gamedata>'},a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.antkarlov.Preloader::com.antkarlov:Preloader.isUrl"]=function(){return!0},a.AVM2.Runtime.VM_METHOD_OVERRIDES["static com.demonsters.debugger.MonsterDebugger::initialize"]=function(){},a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.spilgames.api.core.tracking.TrackConfig::getTrackers"]=function(){return[]},a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.spilgames.api.components.TextFields.AutoFitTextFieldEx::com.spilgames.api.components.TextFields:AutoFitTextFieldEx.updateProperties"]=a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.spilgames.api.components.TextFields.AutoFitTextFieldEx::com.spilgames.api.components.TextFields:AutoFitTextFieldEx.updateTextSize"]=function(){}}(b.Runtime||(b.Runtime={}));b.Runtime}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={}));var checkArguments=!0,TypedArrayVector=function(){function a(a,b){a=0|a,this._fixed=!!b,this._buffer=new Int32Array(Math.max(f,a+e)),this._offset=0,this._length=a}function b(a,b){return String(a).localeCompare(String(b))}function c(c,d,e,f){assertNotImplemented(!(e&a.CASEINSENSITIVE),"CASEINSENSITIVE"),assertNotImplemented(!(e&a.UNIQUESORT),"UNIQUESORT"),assertNotImplemented(!(e&a.RETURNINDEXEDARRAY),"RETURNINDEXEDARRAY");var g=0;return f||(f=b),e&a.NUMERIC?(c=toNumber(c),d=toNumber(d),g=d>c?-1:c>d?1:0):g=f(c,d),e&a.DESCENDING&&(g*=-1),g}function d(a){for(var b,c,d,e,f=[],g=-1,h=0,i=a.length-1;;)if(100>=i-h){for(c=h+1;i>=c;c++){for(d=a[c],b=c-1;b>=h&&a[b]>d;)a[b+1]=a[b--];a[b+1]=d}if(-1==g)break;i=f[g--],h=f[g--]}else{var j=h+i>>1;for(b=h+1,c=i,d=a[j],a[j]=a[b],a[b]=d,a[h]>a[i]&&(d=a[h],a[h]=a[i],a[i]=d),a[b]>a[i]&&(d=a[b],a[b]=a[i],a[i]=d),a[h]>a[b]&&(d=a[h],a[h]=a[b],a[b]=d),e=a[b];;){do b++;while(a[b]<e);do c--;while(a[c]>e);if(b>c)break;d=a[b],a[b]=a[c],a[c]=d}a[h+1]=a[c],a[c]=e,i-b+1>=c-h?(f[++g]=b,f[++g]=i,i=c-1):(f[++g]=h,f[++g]=c-1,h=b)}return a}var e=4,f=10,g=0;return a.callable=function(b){if(b instanceof a)return b;var c=b.asGetProperty(void 0,"length");if(void 0!==c){for(var d=new a(c,!1),e=0;c>e;e++)d.asSetNumericProperty(e,b.asGetPublicProperty(e));return d}unexpected()},a.prototype.internalToString=function(){for(var a="",b=this._offset,c=b+this._length,d=0;d<this._buffer.length;d++)d===b&&(a+="["),d===c&&(a+="]"),a+=this._buffer[d],d<this._buffer.length-1&&(a+=",");return this._offset+this._length===this._buffer.length&&(a+="]"),a+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length},a.prototype.toString=function(){for(var a="",b=0;b<this._length;b++)a+=this._buffer[this._offset+b],b<this._length-1&&(a+=",");return a},a.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)},a.prototype._ensureCapacity=function(a){var b=this._offset+a;if(!(b<this._buffer.length)){if(a<=this._buffer.length){var c=this._buffer.length-a>>2;return this._buffer.set(this._view(),c),void(this._offset=c)}var d=this._buffer.length,e=3*d>>2;b>e&&(e=b);var f=new Int32Array(e);f.set(this._buffer,0),this._buffer=f}},a.prototype.concat=function(){notImplemented("TypedArrayVector.concat")},a.prototype.every=function(a,b){for(var c=0;c<this._length;c++)if(!a.call(b,this.asGetNumericProperty(c),c,this))return!1;return!0},a.prototype.filter=function(b,c){for(var d=new a,e=0;e<this._length;e++)b.call(c,this.asGetNumericProperty(e),e,this)&&d.push(this.asGetNumericProperty(e));return d},a.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=0;c<this._length;c++)if(a.call(b,this.asGetNumericProperty(c),c,this))return!0;return!1},a.prototype.forEach=function(a,b){for(var c=0;c<this._length;c++)a.call(b,this.asGetNumericProperty(c),c,this)},a.prototype.join=function(){notImplemented("TypedArrayVector.join")},a.prototype.indexOf=function(){notImplemented("TypedArrayVector.indexOf")},a.prototype.lastIndexOf=function(){notImplemented("TypedArrayVector.lastIndexOf")},a.prototype.map=function(b,c){isFunction(b)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var d=new a,e=0;e<this._length;e++)d.push(b.call(c,this.asGetNumericProperty(e),e,this));return d},a.prototype.push=function(){this._checkFixed(),this._ensureCapacity(this._length+arguments.length);for(var a=0;a<arguments.length;a++)this._buffer[this._offset+this._length++]=arguments[a]},a.prototype.pop=function(){return this._checkFixed(),0===this._length?g:(this._length--,this._buffer[this._offset+this._length])},a.prototype.reverse=function(){for(var a=this._offset,b=this._offset+this._length-1,c=this._buffer;b>a;){var d=c[a];c[a]=c[b],c[b]=d,a++,b--}},a.CASEINSENSITIVE=1,a.DESCENDING=2,a.UNIQUESORT=4,a.RETURNINDEXEDARRAY=8,a.NUMERIC=16,a.prototype._sortNumeric=function(a){d(this._view()),a&&this.reverse()},a.prototype.sort=function(){if(0===arguments.length)return Array.prototype.sort.call(this._view());var b,d=0;return arguments[0]instanceof Function?b=arguments[0]:isNumber(arguments[0])&&(d=arguments[0]),isNumber(arguments[1])&&(d=arguments[1]),d&TypedArrayVector.NUMERIC?this._sortNumeric(d&a.DESCENDING):void Array.prototype.sort.call(this._view(),function(a,e){return c(a,e,d,b)})},a.prototype.asGetNumericProperty=function(a){return checkArguments&&asCheckVectorGetNumericProperty(a,this._length),this._buffer[this._offset+a]},a.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._length,this._fixed),a===this._length&&(this._ensureCapacity(this._length+1),this._length++),this._buffer[this._offset+a]=b},a.prototype.shift=function(){return this._checkFixed(),0===this._length?0:(this._length--,this._buffer[this._offset++])},a.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)},a.prototype._slide=function(a){this._buffer.set(this._view(),this._offset+a),this._offset+=a},a.prototype.unshift=function(){if(this._checkFixed(),arguments.length){this._ensureCapacity(this._length+arguments.length),this._slide(arguments.length),this._offset-=arguments.length,this._length+=arguments.length;for(var a=0;a<arguments.length;a++)this._buffer[this._offset+a]=arguments[a]}},a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var b=[],c=0;c<this._length;c++)b.push(c);return b},a.prototype.asHasProperty=function(b,c,d){if(a.prototype===this||!isNumeric(c))return Object.prototype.asHasProperty.call(this,b,c,d);var e=toNumber(c);return e>=0&&e<this._length},Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(a){if(a>>>=0,a>this._length){this._ensureCapacity(a);for(var b=this._offset+this._length,c=this._offset+a;c>b;b++)this._buffer[b]=g}this._length=a}}),a.prototype._spliceHelper=function(a,b,c,d,e){b=clamp(b,0,d.length-e),c=clamp(c,0,this._length-a),this._ensureCapacity(this._length-c+b);var f=this._offset+a+c,g=this._buffer.subarray(f,f+this._length-a-c);this._buffer.set(g,this._offset+a+b),this._length+=b-c;for(var h=0;b>h;h++)this._buffer[this._offset+a+h]=d.asGetNumericProperty(e+h)},a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var b=[],c=0;c<this._length;c++)b.push(c);return b},a}(),typedArrayVectorTemplate='var EXTRA_CAPACITY=4,INITIAL_CAPACITY=10,DEFAULT_VALUE=0;function vector(a,b){a|=0;this._fixed=!!b;this._buffer=new Int32Array(Math.max(INITIAL_CAPACITY,a+EXTRA_CAPACITY));this._offset=0;this._length=a}vector.callable=function(a){if(a instanceof vector)return a;var b=a.asGetProperty(void 0,"length");if(void 0!==b){for(var c=new vector(b,!1),d=0;d<b;d++)c.asSetNumericProperty(d,a.asGetPublicProperty(d));return c}unexpected()}; vector.prototype.internalToString=function(){for(var a="",b=this._offset,c=b+this._length,d=0;d<this._buffer.length;d++)d===b&&(a+="["),d===c&&(a+="]"),a+=this._buffer[d],d<this._buffer.length-1&&(a+=",");this._offset+this._length===this._buffer.length&&(a+="]");return a+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length};vector.prototype.toString=function(){for(var a="",b=0;b<this._length;b++)a+=this._buffer[this._offset+b],b<this._length-1&&(a+=",");return a}; vector.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)};vector.prototype._ensureCapacity=function(a){var b=this._offset+a;b<this._buffer.length||(a<=this._buffer.length?(b=this._buffer.length-a>>2,this._buffer.set(this._view(),b),this._offset=b):(a=3*this._buffer.length>>2,a<b&&(a=b),b=new Int32Array(a),b.set(this._buffer,0),this._buffer=b))}; vector.prototype.every=function(a,b){for(var c=0;c<this._length;c++)if(!a.call(b,this.asGetNumericProperty(c),c,this))return!1;return!0};vector.prototype.filter=function(a,b){for(var c=new vector,d=0;d<this._length;d++)a.call(b,this.asGetNumericProperty(d),d,this)&&c.push(this.asGetNumericProperty(d));return c}; vector.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=0;c<this._length;c++)if(a.call(b,this.asGetNumericProperty(c),c,this))return!0;return!1};vector.prototype.forEach=function(a,b){for(var c=0;c<this._length;c++)a.call(b,this.asGetNumericProperty(c),c,this)};vector.prototype.join=function(a){notImplemented("TypedArrayVector.join")}; vector.prototype.indexOf=function(a,b){notImplemented("TypedArrayVector.indexOf")};vector.prototype.lastIndexOf=function(a,b){notImplemented("TypedArrayVector.lastIndexOf")};vector.prototype.map=function(a,b){isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=new vector,d=0;d<this._length;d++)c.push(a.call(b,this.asGetNumericProperty(d),d,this));return c}; vector.prototype.push=function(){this._checkFixed();this._ensureCapacity(this._length+arguments.length);for(var a=0;a<arguments.length;a++)this._buffer[this._offset+this._length++]=arguments[a]};vector.prototype.pop=function(){this._checkFixed();if(0===this._length)return DEFAULT_VALUE;this._length--;return this._buffer[this._offset+this._length]};vector.prototype.reverse=function(){for(var a=this._offset,b=this._offset+this._length-1,c=this._buffer;a<b;){var d=c[a];c[a]=c[b];c[b]=d;a++;b--}}; vector.CASEINSENSITIVE=1;vector.DESCENDING=2;vector.UNIQUESORT=4;vector.RETURNINDEXEDARRAY=8;vector.NUMERIC=16;function defaultCompareFunction(a,b){return String(a).localeCompare(String(b))} function compare(a,b,c,d){assertNotImplemented(!(c&vector.CASEINSENSITIVE),"CASEINSENSITIVE");assertNotImplemented(!(c&vector.UNIQUESORT),"UNIQUESORT");assertNotImplemented(!(c&vector.RETURNINDEXEDARRAY),"RETURNINDEXEDARRAY");var f=0;d||(d=defaultCompareFunction);c&vector.NUMERIC?(a=toNumber(a),b=toNumber(b),f=a<b?-1:a>b?1:0):f=d(a,b);c&vector.DESCENDING&&(f*=-1);return f} function _sort(a){for(var b=[],c=-1,d=0,f=a.length-1,e,g,h,k;;)if(100>=f-d){for(g=d+1;g<=f;g++){h=a[g];for(e=g-1;e>=d&&a[e]>h;)a[e+1]=a[e--];a[e+1]=h}if(-1==c)break;f=b[c--];d=b[c--]}else{k=d+f>>1;e=d+1;g=f;h=a[k];a[k]=a[e];a[e]=h;a[d]>a[f]&&(h=a[d],a[d]=a[f],a[f]=h);a[e]>a[f]&&(h=a[e],a[e]=a[f],a[f]=h);a[d]>a[e]&&(h=a[d],a[d]=a[e],a[e]=h);for(k=a[e];;){do e++;while(a[e]<k);do g--;while(a[g]>k);if(g<e)break;h=a[e];a[e]=a[g];a[g]=h}a[d+1]=a[g];a[g]=k;f-e+1>=g-d?(b[++c]=e,b[++c]=f,f=g-1):(b[++c]=d, b[++c]=g-1,d=e)}return a}vector.prototype._sortNumeric=function(a){_sort(this._view());a&&this.reverse()};vector.prototype.sort=function(){if(0===arguments.length)return Array.prototype.sort.call(this._view());var a,b=0;arguments[0]instanceof Function?a=arguments[0]:isNumber(arguments[0])&&(b=arguments[0]);isNumber(arguments[1])&&(b=arguments[1]);if(b&TypedArrayVector.NUMERIC)return this._sortNumeric(b&vector.DESCENDING);Array.prototype.sort.call(this._view(),function(c,d){return compare(c,d,b,a)})}; vector.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._length);return this._buffer[this._offset+a]};vector.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._length,this._fixed);a===this._length&&(this._ensureCapacity(this._length+1),this._length++);this._buffer[this._offset+a]=b};vector.prototype.shift=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset++]}; vector.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};vector.prototype._slide=function(a){this._buffer.set(this._view(),this._offset+a);this._offset+=a};vector.prototype.unshift=function(){this._checkFixed();if(arguments.length){this._ensureCapacity(this._length+arguments.length);this._slide(arguments.length);this._offset-=arguments.length;this._length+=arguments.length;for(var a=0;a<arguments.length;a++)this._buffer[this._offset+a]=arguments[a]}}; vector.prototype.asGetEnumerableKeys=function(){if(vector.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var a=[],b=0;b<this._length;b++)a.push(b);return a};vector.prototype.asHasProperty=function(a,b,c){if(vector.prototype===this||!isNumeric(b))return Object.prototype.asHasProperty.call(this,a,b,c);a=toNumber(b);return 0<=a&&a<this._length}; Object.defineProperty(vector.prototype,"length",{get:function(){return this._length},set:function(a){a>>>=0;if(a>this._length){this._ensureCapacity(a);for(var b=this._offset+this._length,c=this._offset+a;b<c;b++)this._buffer[b]=DEFAULT_VALUE}this._length=a}}); vector.prototype._spliceHelper=function(a,b,c,d,f){debugger;b=clamp(b,0,d.length-f);c=clamp(c,0,this._length-a);this._ensureCapacity(this._length-c+b);var e=this._offset+a+c,e=this._buffer.subarray(e,e+this._length-a-c);this._buffer.set(e,this._offset+a+b);this._length+=b-c;for(c=0;c<b;c++)this._buffer[this._offset+a+c]=d.asGetNumericProperty(f+c)}; vector.prototype.asGetEnumerableKeys=function(){if(vector.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var a=[],b=0;b<this._length;b++)a.push(b);return a};',Int32Vector=TypedArrayVector,Uint32Vector=new Function(originalStringReplace.call(typedArrayVectorTemplate,/Int32Array/g,"Uint32Array")+" return vector;")(),Float64Vector=new Function(originalStringReplace.call(typedArrayVectorTemplate,/Int32Array/g,"Float64Array")+" return vector;")();Int32Vector.prototype.asGetProperty=function(a,b,c){return"number"==typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,c)},Int32Vector.prototype.asSetProperty=function(a,b,c,d){return"number"==typeof b?void this.asSetNumericProperty(b,d):asSetProperty.call(this,a,b,c,d)},Uint32Vector.prototype.asGetProperty=function(a,b,c){return"number"==typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,c)},Uint32Vector.prototype.asSetProperty=function(a,b,c,d){return"number"==typeof b?void this.asSetNumericProperty(b,d):asSetProperty.call(this,a,b,c,d)},Float64Vector.prototype.asGetProperty=function(a,b,c){return"number"==typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,c)},Float64Vector.prototype.asSetProperty=function(a,b,c,d){return"number"==typeof b?void this.asSetNumericProperty(b,d):asSetProperty.call(this,a,b,c,d)};var GenericVector=function(){function a(a,b,c){a=0|a,this._fixed=!!b,this._buffer=new Array(a),this._type=c,this._defaultValue=c?c.defaultValue:null,this._fill(0,a,this._defaultValue)}return a.applyType=function(b){function c(c,d){a.call(this,c,d,b)}return c.prototype=Object.create(a.prototype),c.callable=a.callable,c},a.callable=function(b){if(b instanceof a)return b;var c=b.asGetProperty(void 0,"length");if(void 0!==c){for(var d=new a(c,!1),e=0;c>e;e++)d.asSetNumericProperty(e,b.asGetPublicProperty(e));return d}unexpected()},a.prototype._fill=function(a,b,c){for(var d=0;b>d;d++)this._buffer[a+d]=c},a.prototype.toString=function(){for(var a="",b=0;b<this._buffer.length;b++)a+=this._buffer[b],b<this._buffer.length-1&&(a+=",");return a},a.prototype.every=function(a,b){for(var c=0;c<this._buffer.length;c++)if(!a.call(b,this.asGetNumericProperty(c),c,this))return!1;return!0},a.prototype.filter=function(b,c){for(var d=new a,e=0;e<this._buffer.length;e++)b.call(c,this.asGetNumericProperty(e),e,this)&&d.push(this.asGetNumericProperty(e));return d},a.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=0;c<this._buffer.length;c++)if(a.call(b,this.asGetNumericProperty(c),c,this))return!0;return!1},a.prototype.forEach=function(a,b){isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=0;c<this._buffer.length;c++)a.call(b,this.asGetNumericProperty(c),c,this)},a.prototype.map=function(b,c){isFunction(b)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var d=new a,e=0;e<this._buffer.length;e++)d.push(b.call(c,this.asGetNumericProperty(e),e,this));return d},a.prototype.push=function(){this._checkFixed();for(var a=0;a<arguments.length;a++)this._buffer.push(this._coerce(arguments[a]))},a.prototype.pop=function(){return this._checkFixed(),0===this._buffer.length?void 0:this._buffer.pop()},a.prototype.reverse=function(){this._buffer.reverse()},a.CASEINSENSITIVE=1,a.DESCENDING=2,a.UNIQUESORT=4,a.RETURNINDEXEDARRAY=8,a.NUMERIC=16,a.prototype.sort=function(a){return this._buffer.sort(a)},a.prototype.asGetNumericProperty=function(a){return checkArguments&&asCheckVectorGetNumericProperty(a,this._buffer.length),this._buffer[a]},a.prototype._coerce=function(a){return this._type?this._type.coerce(a):void 0===a?null:a},a.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._buffer.length,this._fixed),this._buffer[a]=this._coerce(b)},a.prototype.shift=function(){return this._checkFixed(),0===this._buffer.length?void 0:this._buffer.shift()},a.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)},a.prototype.unshift=function(){if(arguments.length){this._checkFixed();for(var a=[],b=0;b<arguments.length;b++)a.push(this._coerce(arguments[b]));this._buffer.unshift.apply(this._buffer,a)}},Object.defineProperty(a.prototype,"length",{get:function(){return this._buffer.length},set:function(a){if(a>>>=0,a>this._buffer.length)for(var b=this._buffer.length;a>b;b++)this._buffer[b]=this._defaultValue;else this._buffer.length=a}}),a.prototype._spliceHelper=function(a,b,c,d,e){b=clamp(b,0,d.length-e),c=clamp(c,0,this._buffer.length-a);for(var f=[],g=0;b>g;g++)f.push(this._coerce(d.asGetNumericProperty(e+g)));this._buffer.splice.apply(this._buffer,[a,c].concat(f))},a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);
for(var b=[],c=0;c<this._buffer.length;c++)b.push(c);return b},a.prototype.asHasProperty=function(b,c,d){if(a.prototype===this||!isNumeric(c))return Object.prototype.asHasProperty.call(this,b,c,d);var e=toNumber(c);return e>=0&&e<this._buffer.length},a}();GenericVector.prototype.asGetProperty=function(a,b,c){return"number"==typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,c)},GenericVector.prototype.asSetProperty=function(a,b,c,d){return"number"==typeof b?void this.asSetNumericProperty(b,d):asSetProperty.call(this,a,b,c,d)};var XMLClass,XMLListClass,QNameClass,ASXML,XML,ASXMLList,XMLList,isXMLType,isXMLName,XMLParser;!function(){function a(){function a(a,b){if(!a.isXML){if(a.isXMLList)return b.list(a);throw"Not implemented"}switch(a.kind){case"element":return b.element(a);case"attribute":return b.attribute(a);case"text":return b.text(a);case"cdata":return b.cdata(a);case"comment":return b.comment(a);case"processing-instruction":return b.pi(a)}}function c(c){return a(c,{element:function(b){var c,d,e=b.name.mn.namespaces[0],f=e.prefix?e.prefix+":":"";c="<"+f+b.name.localName;var g=[];(e.prefix||e.uri)&&g.push(e),f&&(g[e.prefix]=!0);for(var h=b;h;){for(var i=0;i<h.inScopeNamespaces.length;i++)e=h.inScopeNamespaces[i],g[e.prefix]||(g.push(e),g[e.prefix]=!0);h=h.parent}for(var i=0;i<g.length;i++)d=g[i],c+=d.prefix?" xmlns:"+d.prefix+'="'+d.uri+'"':' xmlns="'+d.uri+'"';for(var i=0;i<b.attributes.length;i++){d=b.attributes[i];var e=b.name.uri,f=b.prefix?e.prefix+":":"",j=f+d.name.localName;c+=" "+j+'="'+d.value+'"'}if(b.children.length){c+=">";for(var i=0;i<b.children.length;i++)c+=a(b.children[i],this);c+="</"+f+b.name.mn.name+">"}else c+="/>";return c},text:function(a){return b(a.value)},attribute:function(a){return b(a.value)},cdata:function(){},comment:function(){},pi:function(){},doctype:function(){},list:function(a){for(var b="",c=0;c<a.children.length;c++)c>0&&(b+="\n"),b+=d(a.children[c],[]);return b}})}this.encode=c}function b(a){return a.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")}function c(a){if("object"!=typeof a||null===a)return String(a);switch(a.kind){case"text":case"attribute":return a.value;default:if(a.hasSimpleContent()){var b="";return a.children.forEach(function(a){b+=c(a)}),b}return d(a)}}function d(b,c,d){return new a(c,d,!0).encode(b)}function e(a){if(null===a)throw new TypeError(formatErrorMessage(Errors.ConvertNullToObjectError));if(void 0===a)throw new TypeError(formatErrorMessage(Errors.ConvertUndefinedToObjectError));if(a.isXML)return a;if(a.isXMLList){if(1===a.length())return a.children[0];throw new TypeError(formatErrorMessage(Errors.XMLMarkupMustBeWellFormed))}var b=r.parseFromString(String(a));if(0===b.length()){var b=new XML("text");return b}if(1===b.length())return b.children[0].parent=null,b.children[0];throw"SyntaxError in ToXML"}function f(a){if(null===a)throw new TypeError(formatErrorMessage(Errors.ConvertNullToObjectError));if(void 0===a)throw new TypeError(formatErrorMessage(Errors.ConvertUndefinedToObjectError));if(a instanceof XML){var b=new XMLList(a.parent,a.name);return b.append(a),b}if(a instanceof XMLList)return a;for(var c="<parent xmlns='"+s+"'>"+String(a)+"</parent>",d=new ASXML(c),b=new XMLList,e=0;e<d.length();e++){var f=d.children[e];f.parent=null,b.append(f)}return b}function g(a){if(void 0===a||null===a||"boolean"==typeof a||"number"==typeof a)throw"TypeError: invalid operand to ToAttributeName()";if(isXMLType(a))a=c(a);else if(a instanceof Object&&null!==a){if(a instanceof QName)return new QName(a.uri,a.localName,!0);a=c(a)}if("string"==typeof a)var b=new ASNamespace,d=new QName(b,a,!0);return d}function h(a){return new QName(a)}function i(a){for(;a;){var b=a.object;if(void 0!==b.defaultNamepsace)return b.defaultNamespace;a=a.parent}var c=ASNamespace.createNamespace("","");return c}function j(a,b,c,d){var e=isNumeric(b)?toNumber(b):b instanceof QName?b.mn:new Multiname(a?a:[ASNamespace.PUBLIC],b,c);return this.getProperty(e,d)}function l(a,b,c,d){var e=isNumeric(b)?toNumber(b):b instanceof QName?b.mn:new Multiname(a?a:[ASNamespace.PUBLIC],b,c);this.setProperty(e,d)}function m(a,b,c){var d=isNumeric(b)?toNumber(b):b instanceof QName?b.mn:new Multiname(a?a:[ASNamespace.PUBLIC],b,c);return this.hasProperty(d)}function o(a,b,c,d,e){var f=d?null:this,g=this.asGetProperty(a,b,c,!0);return g?g.apply(f,e):this.toString().asCallProperty(a?a:[ASNamespace.PUBLIC],b,c,d,e)}function p(a){var b=0;return b|=a.isAttribute()?u:v,a.isAnyName()&&(b|=w),a.isAnyNamespace()&&(b|=x),b}XMLParser=function(){function a(a,b){function c(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}function d(a){return a.replace(/&([^;]+);/g,function(a,b){if("#x"===b.substring(0,2))return String.fromCharCode(parseInt(b.substring(2),16));if("#"===b.substring(0,1))return String.fromCharCode(parseInt(b.substring(1),10));switch(b){case"lt":return"<";case"gt":return">";case"amp":return"&"}throw"Unknown entity: "+b})}function e(){for(var a=l.length-1;a>=0;--a)if("preserve"===l[a].space)return!0;return!1}function f(){for(var a=l.length-1;a>=0;--a)if(l[a].hasOwnProperty("xmlns"))return l[a].xmlns}function g(a){for(var b=l.length-1;b>=0;--b)if(l[b].namespaces.hasOwnProperty(a))return l[b].namespaces[a];throw"Unknown namespace: "+a}function h(a,b){var c=a.indexOf(":");if(c>=0){var d=g(a.substring(0,c)),e=a.substring(0,c),h=a.substring(c+1);return{name:d+"::"+h,localName:h,prefix:e,namespace:d}}return b?{name:a,localName:a,prefix:"",namespace:f()}:{name:a,localName:a,prefix:"",namespace:""}}function i(a,b){return a.charCodeAt(b)in m}function j(a,b){function c(){for(;f<a.length&&i(a,f);)++f}for(var e,f=b,g=[];f<a.length&&!i(a,f)&&">"!==a.charAt(f)&&"/"!==a.charAt(f);)++f;for(e=a.substring(b,f),c();f<a.length&&">"!==a.charAt(f)&&"/"!==a.charAt(f)&&"?"!==a.charAt(f);){c();for(var h="",j="";f<a.length&&!i(a,f)&&"="!==a.charAt(f);)h+=a.charAt(f),++f;if(c(),"="!==a.charAt(f))throw"'=' expected";++f,c();var k=a.charAt(f);if('"'!==k&&"'"!==k)throw"Quote expected";var l=a.indexOf(k,++f);if(0>l)throw new"Unexpected EOF[6]";j=a.substring(f,l),g.push({name:h,value:d(j)}),f=l+1,c()}return{name:e,attributes:g,parsed:f-b}}for(var k=0,l=[{space:"default",xmlns:"",namespaces:{xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace"}}],m={10:!0,13:!0,9:!0,32:!0};k<a.length;){var n=a.charAt(k),o=k;if("<"===n){++o;var p,q,r=a.charAt(o);switch(r){case"/":if(++o,p=a.indexOf(">",o),0>p)throw"Unexpected EOF[1]";q=h(a.substring(o,p),!0),b.endElement(q),l.pop(),o=p+1;break;case"?":++o;var s=j(a,o);if("?>"!=a.substring(o+s.parsed,o+s.parsed+2))throw"Unexpected EOF[2]";b.pi(s.name,s.attributes),o+=s.parsed+2;break;case"!":if("--"===a.substring(o+1,o+3)){if(p=a.indexOf("-->",o+3),0>p)throw"Unexpected EOF[3]";b.comment(a.substring(o+3,p)),o=p+3}else if("[CDATA["===a.substring(o+1,o+8)){if(p=a.indexOf("]]>",o+8),0>p)throw"Unexpected EOF[4]";b.cdata(a.substring(o+8,p)),o=p+3}else{if("DOCTYPE"!==a.substring(o+1,o+8))throw"Unknown !tag";var t=a.indexOf("[",o+8),u=!1;if(p=a.indexOf(">",o+8),0>p)throw"Unexpected EOF[5]";if(t>0&&p>t){if(p=a.indexOf("]>",o+8),0>p)throw"Unexpected EOF[7]";u=!0}var v=a.substring(o+8,p+(u?1:0));b.doctype(v),o=p+(u?2:1)}break;default:var s=j(a,o),w=!1;if("/>"===a.substring(o+s.parsed,o+s.parsed+2))w=!0;else if(">"!==a.substring(o+s.parsed,o+s.parsed+1))throw"Unexpected EOF[2]";var x={namespaces:[]},y=s.attributes;for(p=0;p<y.length;++p){var z=y[p],A=z.name;if("xmlns:"===A.substring(0,6)){var B=A.substring(6),C=z.value;x.namespaces[B]=c(C),x.namespaces.push({uri:C,prefix:B}),delete y[p]}else if("xmlns"===A){var C=z.value;x.namespaces.xmlns=c(C),x.namespaces.push({uri:C,prefix:""}),delete y[p]}else if("xml:"===A.substring(0,4))x[A.substring(4)]=c(z.value);else if("xml"===A.substring(0,3))throw"Invalid xml attribute"}l.push(x);var D=[];for(p=0;p<y.length;++p)z=y[p],z&&D.push({name:h(z.name,!1),value:z.value});b.beginElement(h(s.name,!0),D,x,w),o+=s.parsed+(w?2:1),w&&l.pop()}}else{do if(++o>=a.length)break;while("<"!==a.charAt(o));var E=a.substring(k,o),F=0===E.replace(/^\s+/,"").length;(!F||e())&&b.text(d(E),F)}k=o}}function b(a,b,c,d){return new XML(a,b,c,d)}this.parseFromString=function(c){var d=new XML("element","","",""),e=[];return a(c,{beginElement:function(a,c,f,g){var h=d;e.push(h),d=b("element",a.namespace,a.localName,a.prefix);for(var i=0;i<c.length;++i){var j=c[i],k=b("attribute",j.name.namespace,j.name.localName,j.name.prefix);k.value=j.value,d.attributes.push(k)}for(var l=f.namespaces,i=0;i<l.length;++i){var m=l[i],n=ASNamespace.createNamespace(m.uri,m.prefix);d.inScopeNamespaces.push(n)}h.insert(h.length(),d),g&&(d=e.pop())},endElement:function(){d=e.pop()},text:function(a){var c=b("text","","");c.value=a,d.insert(d.length(),c)},cdata:function(a){var c=b("text","","");c.value=a,d.insert(d.length(),c)},comment:function(){},pi:function(){},doctype:function(){}}),d}};var r=new XMLParser;isXMLType=function(a){return a.isXML||a.isXMLList};var s="";isXMLName=function(a){try{{new QName(a)}}catch(b){return!1}return!0};var u=1,v=2,w=4,x=8;XMLClass=function(a,b,f,r){var s=1,v=2,y=4,z=8;ASXML=function(a){if(!(this instanceof ASXML))return a instanceof ASXML?a:new ASXML(a);(null===a||void 0===a)&&(a="");var b=e(a);return isXMLType(a)&&(b=b.deepCopy()),b},XML=function(a,b,c,d){void 0===a&&(a="text"),void 0===b&&(b=""),void 0===c&&(c=""),this.init(a,b,c,d)};var A=new Class("XML",ASXML,ApplicationDomain.passthroughCallable(ASXML));A.flags=s|v|y|z,A.prettyIndent=2,A.extend(r);var B=XML.prototype=ASXML.prototype;return B.init=function(a,b,c,d){switch(this.name=new QName(new Multiname([new ASNamespace(d,b)],c)),this.kind=a,this.parent=null,this.inScopeNamespaces=[],a){case"element":this.attributes=[],this.children=[];break;case"attribute":case"text":this.value=""}return this},B.length=function(){return this.children?this.children.length:0},B.canHandleProperties=!0,B.deepCopy=function(){return new ASXML(d(this))},B.resolveValue=function(){return this},B.hasSimpleContent=function(){if("comment"===this.kind||"processing-instruction"===this.kind)return!1;var a=!0;return this.children&&this.children.forEach(function(b){"element"===b.kind&&(a=!1)}),a},B.asGetEnumerableKeys=function(){if(B===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[];return this.children.forEach(function(b){a.push(b.name)}),a},B.setProperty=function(a,d){var e,f,g,j;if(e=this,a===a>>>0)throw"TypeError in XML.prototype.setProperty(): invalid property name "+a;if("text"!==e.kind&&"comment"!==e.kind&&"processing-instruction"!==e.kind&&"attribute"!==e.kind){if(g=d&&(d.isXML||d.isXMLList)&&"text"!==d.kind&&"attribute"!==d.kind?d.deepCopy():c(d),j=h(a),j.isAttr){if(!this.attributes)return;this.attributes.forEach(function(a,b,c){a.name===j.localName&&delete c[b]});var k=new XML("attribute",j.uri,j.localName);return k.value=d,k.parent=this,void this.attributes.push(k)}var l=isXMLName(j);if(l||"*"===j.localName){for(var f=void 0,m=!isXMLType(g)&&"*"!==j.localName,n=e.length()-1;n>=0;n--)(j.isAny||"element"===e.children[n].kind&&e.children[n].name.localName===j.localName)&&(null===j.uri||"element"===e.children[n].kind&&e.children[n].name.uri===j.uri)&&(void 0!==f&&e.deleteByIndex(String(f)),f=n);if(void 0===f&&(f=e.length(),m)){if(null===j.uri)var o=new QName(i(b),j);else var o=new QName(j);var p=new XML("element",o.uri,o.localName,o.prefix);p.parent=e;var q=o.getNamespace();e.replace(String(f),p),p.addInScopeNamespace(q)}if(m){e.children[f].children=[];var r=c(g);""!==r&&e.children[f].replace("0",r)}else e.replace(String(f),g)}}},B.asGetProperty=j,B.asGetResolvedStringProperty=asGetResolvedStringPropertyFallback,B.asSetProperty=l,B.asHasProperty=m,B.asCallProperty=o,B.getProperty=function(a,b){if(b){var c=Multiname.isQName(a)?a:this.resolveMultinameProperty(a.namespaces,a.name,a.flags);return this[Multiname.getQualifiedName(c)]}if(!Multiname.isQName(a)&&isNumeric(a))return 0===Number(0)?this:null;var d=this,e=h(a),f=new XMLList(d,e),g=p(e.mn),i=g&w,j=g&x;return g&u?d.attributes&&d.attributes.forEach(function(a){!i&&a.name.localName!==e.localName||!j&&a.name.uri!==e.uri||f.append(a)}):d.children.forEach(function(a){(i||"element"===a.kind&&a.name.localName===e.localName)&&(j||"element"===a.kind&&a.name.uri===e.uri)&&f.append(a)}),f},B.hasProperty=function(a,b){if(b){var c=Multiname.isQName(a)?a:this.resolveMultinameProperty(a.namespaces,a.name,a.flags);return!!this[Multiname.getQualifiedName(c)]}if(!Multiname.isQName(a)&&isNumeric(a))return 0===Number(0)?!0:!1;var d=h(a),e=p(d.mn),f=e&w,g=e&x;if(e&u)return this.attributes.some(function(a){return!f&&a.name.localName!==d.localName||!g&&a.name.uri!==d.uri?void 0:!0});if(this.children.some(function(a){return(f||"element"===a.kind&&a.name.localName===d.localName)&&(g||"element"===a.kind&&a.name.uri===d.uri)?!0:void 0}))return!0;var c=Multiname.isQName(a)?a:this.resolveMultinameProperty(a.namespaces,a.name,a.flags);return!!this[Multiname.getQualifiedName(c)]},B.delete=function(){notImplemented("XML.[[Delete]]")},B.deleteByIndex=function(a){var b=this,c=a>>>0;if(String(c)!==String(a))throw"TypeError in XML.prototype.deleteByIndex(): invalid index "+a;if(a<b.length()&&b.children[a]){for(b.children[a].parent=null,delete b.children[a],q=c+1;q<b.length();q++)b.children[q-1]=b.children[q];b.children.length=b.children.length-1}},B.isXML=!0,B.insert=function(a,b){var c,d,e;if(c=this,"text"!==c.kind&&"comment"!==c.kind&&"processing-instruction"!==c.kind&&"attribute"!==c.kind){if(d=a>>>0,String(a)!==String(d))throw"TypeError in XML.prototype.insert(): invalid property name "+a;if("element"===c.kind)for(var f=c;f;){if(f===b)throw"Error in XML.prototype.insert()";f=f.parent}if(c.isXMLList){if(e=c.length(),0===e)return}else e=1;for(var g=c.length()-1;g>=d;g--)c[g+e]=c[g];if(c.isXMLList){e=b.length();for(var g=0;e>g;g++)b.children[g].parent=c,c[d+g]=b[g]}else b.parent=c,c.children[d]=b}},B.replace=function(a,b){var d,e;if(d=this,"text"!==d.kind&&"comment"!==d.kind&&"processing-instruction"!==d.kind&&"attribute"!==d.kind){var f=a>>>0;if(String(a)!==String(f))throw"TypeError in XML.prototype.replace(): invalid name "+a;if(f>=d.length()&&(a=String(d.length())),"element"===b.kind)for(var g=d;g;){if(g===b)throw"Error in XML.prototype.replace()";g=g.parent}"element"===b.kind||"text"===b.kind||"comment"===b.kind||"processing-instruction"===b.kind?(b.parent=d,d[a]&&(d.children[a].parent=null),d.children[a]=b):d.isXMLList?(d.deleteByIndex(a),d.insert(a,b)):(e=c(b),t=new XML,t.parent=d,t.value=e,d[a]&&(d.children[a].parent=null),d.children[a]=t)}},B.addInScopeNamespace=function(a){var b;if(b=this,"text"!==b.kind&&"comment"!==b.kind&&"processing-instruction"!==b.kind&&"attribute"!==b.kind&&void 0!==a.prefix){if(""===a.prefix&&""===b.name.uri)return;var c=null;b.inScopeNamespaces.forEach(function(b){b.prefix===a.prefix&&(c=b)}),null!==c&&c.uri!==a.uri&&b.inScopeNamespaces.forEach(function(d,e){d.prefix===c.prefix&&(b.inScopeNamespaces[e]=a)}),b.name.prefix===a.prefix&&(b.name.prefix=void 0),b.attributes.forEach(function(b){b.name.prefix===a.name.prefix&&(b.name.prefix=void 0)})}},B.descendants=function(a){a=h(a);var b=this,c=new XMLList;return"element"!==b.kind?c:(a.isAttr?this.attributes.forEach(function(b){(a.isAny||a.localName===b.name.localName)&&c.append(b)}):this.children.forEach(function(b){(a.isAny||a.localName===b.name.localName)&&c.append(b)}),this.children.forEach(function(b){c.append(b.descendants(a))}),c)},B.comments=function(){var a=this,b=new XMLList(a,null);return a.children.forEach(function(a){"comment"===a.kind&&b.append(a)}),b},B.text=function(){var a=this,b=new XMLList(a,null);return a.children.forEach(function(a){"text"===a.kind&&b.append(a)}),b},A.native={"static":{ignoreComments:{get:function(){return getBitFlags(A.flags,s)},set:function(a){A.flags=setBitFlags(A.flags,s,a)}},ignoreProcessingInstructions:{get:function(){return getBitFlags(A.flags,v)},set:function(a){A.flags=setBitFlags(A.flags,v,a)}},ignoreWhitespace:{get:function(){return getBitFlags(A.flags,y)},set:function(a){A.flags=setBitFlags(A.flags,y,a)}},prettyPrinting:{get:function(){return getBitFlags(A.flags,z)},set:function(a){A.flags=setBitFlags(A.flags,z,a)}},prettyIndent:{get:function(){return A.prettyIndent},set:function(a){A.prettyIndent=a}}},instance:{toString:function(){return c(this)},hasOwnProperty:function(a){return somewhatImplemented("XML.hasOwnProperty"),this.hasProperty(a)},propertyIsEnumerable:function(){notImplemented("XML.propertyIsEnumerable")},addNamespace:function(){notImplemented("XML.addNamespace")},appendChild:function(a){var b=this.getProperty("*");return b.setProperty(b.length(),a),this},attribute:function(a){return this.getProperty(g(a))},attributes:function(){return this.getProperty(g("*"))},child:function(a){return this.getProperty(a)},childIndex:function(){notImplemented("XML.childIndex")},children:function(){var a=new XMLList;return Array.prototype.push.apply(a.children,this.children),a},comments:function(){return this.comments()},contains:function(){notImplemented("XML.contains")},copy:function(){return this.deepCopy()},descendants:function(a){return void 0===a&&(a="*"),this.descendants(a)},elements:function(a){var b=this,c=!1;void 0===a&&(a="*",c=!0);var a=h(a),d=new XMLList(this.parent,a);return b.children.forEach(function(b){"element"!==b.kind||!c&&b.name.localName!==a.localName||null!==a.uri&&("element"!==b.kind||b.name.uri!==a.uri)||d.append(b)}),d},hasComplexContent:function(){notImplemented("XML.hasComplexContent")},hasSimpleContent:function(){return this.hasSimpleContent()},inScopeNamespaces:function(){notImplemented("XML.inScopeNamespaces")},insertChildAfter:function(){notImplemented("XML.insertChildAfter")},insertChildBefore:function(){notImplemented("XML.insertChildBefore")},localName:function(){return this.name.localName},name:function(){return this.name},_namespace:function(){return somewhatImplemented("XML._namespace()"),this.name.uri},namespaceDeclarations:function(){return new XMLList},nodeKind:function(){return this.kind},normalize:function(){notImplemented("XML.normalize")},parent:function(){notImplemented("XML.parent")},processingInstructions:function(){notImplemented("XML.processingInstructions")},prependChild:function(){notImplemented("XML.prependChild")},removeNamespace:function(){notImplemented("XML.removeNamespace")},replace:function(a,b){var c,d,e;if(d=this,"text"===d.kind||"comment"===d.kind||"processing-instruction"===d.kind||"attribute"===d.kind)return d;c=isXMLType(b)?b.deepCopy():b.toString();var e=a>>>0;if(String(a)===String(e))return d.replace(a,c),d;for(n=new QName(a),e=void 0,k=d.length()-1;k>=0;k--){var f=d.children[k];(n.isAny||"element"===f.kind&&f.name.localName===n.localName&&(null===n.uri||"element"===f.kind&&f.name.uri===n.uri))&&(void 0!==e&&d.deleteByIndex(String(e)),e=k)}return void 0!==e&&d.replace(e.toString(),c),d},setChildren:function(){notImplemented("XML.setChildren")},setLocalName:function(){notImplemented("XML.setLocalName")},setName:function(){notImplemented("XML.setName")},setNamespace:function(){notImplemented("XML.setNamespace")},text:function(){return this.text()},toXMLString:function(){return d(this)},notification:function(){notImplemented("XML.notification")},setNotification:function(){notImplemented("XML.setNotification")}}},A},XMLListClass=function(a,b,i,n){function p(a){return(null===a||void 0===a)&&(a=""),f(a)}function q(a){if((null===a||void 0===a)&&(a=""),a.isXMLList){var b=new XMLList;return b.append(a),b}return f(a)}ASXMLList=function(a){return this instanceof ASXMLList?q(a):p(a)},XMLList=function(a,b){this.targetObject=a?a:null,this.targetProperty=b?b:null,this.children=[]};var r=new Class("XMLList",ASXMLList,ApplicationDomain.passthroughCallable(ASXMLList));r.extend(n);var s=XMLList.prototype=ASXMLList.prototype;return s.canHandleProperties=!0,s.hasSimpleContent=function(){if(0===this.length())return!0;if(1===this.length())return e(this).hasSimpleContent();var a=!0;return this.children.forEach(function(b){"element"===b.kind&&(a=!1)}),a},s.asGetProperty=j,s.asGetResolvedStringProperty=asGetResolvedStringPropertyFallback,s.asSetProperty=l,s.asHasProperty=m,s.asCallProperty=o,s.setProperty=function(a,b){var d,e,f;if(d=this,e=a>>>0,String(a)===String(e)){var h=this.targetObject,i=this.targetProperty;if(null!==h){if(f=h.resolveValue(),null===f)return}else f=null;if(e>=d.length()){if(f&&f.isXMLList){if(1!==f.length)return;f=f.children[0]}if(f&&"element"!==f.kind)return;var j=new XML;if(j.parent=f,j.name=d.targetProperty,null===i||"*"===i.localName)j.name=null,j.kind="text";else if(i.isAttr){var l=f.getProperty(j.name);if(l.length()>0)return;f.kind="attribute"}else j.kind="element";if(e=d.length(),"attribute"!==j.kind){if(null!==f){if(e>0)for(var m=0;m<f.length()-1&&f.children[m]!==d.children[e-1];)m++;else var m=f.length()-1;f.insert(String(m+1),j)}b.isXML?j.name=b.name:b.isXMLList&&(j.name=b.targetProperty)}d.append(j)}if((!b.isXML&&!b.isXMLList||"text"===b.kind||"attribute"===b.kind)&&(b=c(b)),"attribute"===d.children[e].kind){var n=g(d.children[e].name);d.children[e].parent.setProperty(n,b);var o=d.children[e].parent.getProperty(n);d.children[e]=o.children[0]}else if(b.isXMLList){var p=b.deepCopy(),q=d.children[e].parent;if(null!==q){var r;q.children.some(function(a,b){return a==d.children[e]?(r=b,!0):void 0}),q.replace(r,p),p.children.forEach(function(a,b){p.children[b]=q.children[r>>>0+b]})}if(0===p.length())for(var m=d+1;m<d.length()-1;m++)d.children[String(m-1)]=d.children[m];else for(var m=d.length()-1;m>=e+1;m--)d.children[String(m+p.length()-1)]=d.children[m];for(var m=0;m<p.length();m++)d.children[e+m]=p.children[m]}else if(b.isXML||"text"===(k=d.children[e].kind)||"comment"===k||"processing-instruction"===k){var q=d.children[e].parent;if(null!==q){var r;q.children.some(function(a,b){return a==d.children[e]?(r=b,!0):void 0}),q.replace(r,b);var b=q.children[r]}if("string"==typeof b){var s=new XML("text");s.parent=d,s.value=b,d.children[e]=s}else d.children[e]=b}else d.children[e].setProperty("*",b)}else if(d.length()<=1){if(0===d.length()){if(f=d.resolveValue(),null===f||1!==f.length())return;d.append(f)}d.children[0].setProperty(a,b)}},s.getProperty=function(a,b){if(b){var c=Multiname.isQName(a)?a:this.resolveMultinameProperty(a.namespaces,a.name,a.flags);return this[Multiname.getQualifiedName(c)]}var d=this,e=a>>>0;if(String(a)===String(e))return d.children[a];var f=h(a),g=new XMLList(this,f);return d.children.forEach(function(b){var c;"element"===b.kind&&(c=b.getProperty(a),c.length()>0&&g.append(c))}),g},s.hasProperty=function(a,b){if(b){var c=Multiname.isQName(a)?a:this.resolveMultinameProperty(a.namespaces,a.name,a.flags);return!!this[Multiname.getQualifiedName(c)]}var d=this,e=a>>>0;if(String(a)===String(e))return!!d.children[a];h(a);return this.children.some(function(b){var c=b.getProperty(a);return c.length()>0?!0:void 0})},s.delete=function(){},s.append=function(a){if(a.isXMLList){if(this.targetObject=a.targetObject,this.targetProperty=a.targetProperty,0===a.length())return;for(var b=0;b<a.length();b++)this.children.push(a.children[b])}else a.isXML&&this.children.push(a)},s.length=function(){return this.children.length},s.resolve=function(){var a=this.targetObject.resolveValue();if(null===a)return null;var b=this.targetObject.getProperty(this.targetProperty);return 0===a.length?(notImplemented("XMLList.resolve"),a.setProperty(this.targetProperty,""),b=a.getProperty(this.targetProperty)):void 0},s.deepCopy=function(){var a=new XMLList;return this.children.forEach(function(b,c){a.children[c]=b.deepCopy()}),a},s.descendants=function(a){var b=new XMLList(null);return this.children.forEach(function(c){"element"===c.kind&&b.append(c.descendants(a))}),b},s.resolveValue=function(){if(this.length()>0)return this;var a=this,b=a.name,c=a.targetObject,d=a.targetProperty;if(null===c||null===d||b.isAttr||b.isAny)return null;var e=c.resolveValue();if(null===e)return null;var f=e.getProperty(d);if(0===f.length()){if(e.isXMLList&&e.length()>1)return null;e.setProperty(d,""),f=e.getProperty(d)}return f},s.asGetEnumerableKeys=function(){if(s===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[];return this.children.forEach(function(b,c){a.push(c)}),a},r.native={instance:{init:function(){}}},s.isXMLList=!0,r.native={"static":{},instance:{toString:function(){return c(this)},hasOwnProperty:function(a){return somewhatImplemented("XMLList.hasOwnProperty"),this.hasProperty(a)},propertyIsEnumerable:function(){notImplemented("XMLList.propertyIsEnumerable")},attribute:function(a){return this.getProperty(g(a))},attributes:function(){return this.getProperty(g("*"))},child:function(){notImplemented("XMLList.child")},children:function(){for(var a=new XMLList,b=0;b<this.children.length;b++){var c=this.children[b];Array.prototype.push.apply(a.children,c.children)}return a},comments:function(){var a=this,b=new XMLList(a,null);return a.children.forEach(function(a){"element"===a.kind&&b.append(a.comments())}),b},contains:function(a){for(var b=0;b<this.children.length;b++)if(this.children[b]===a)return!0;return!1},copy:function(){return this.deepCopy()},descendants:function(a){return this.descendants(void 0===a?"*":a)},elements:function(a){var b=this,c=!1;void 0===a&&(a="*",c=!0);var a=h(a),d=new XMLList(b,a);return b.children.forEach(function(a){"element"===a.kind&&d.append(a.comments())}),d},hasComplexContent:function(){notImplemented("XMLList.hasComplexContent")},hasSimpleContent:function(){return this.hasSimpleContent()},length:function(){return this.children.length},name:function(){return e(this).name},normalize:function(){notImplemented("XMLList.normalize")},parent:function(){notImplemented("XMLList.parent")},processingInstructions:function(){notImplemented("XMLList.processingInstructions")},text:function(){var a=this,b=new XMLList(a,null);return a.children.forEach(function(a){("text"===a.kind||"element"===a.kind)&&b.append(a.text())}),b},toXMLString:function(){return d(this)},addNamespace:function(){notImplemented("XMLList.addNamespace")},appendChild:function(a){return e(this).appendChild(a),this},childIndex:function(){notImplemented("XMLList.childIndex")},inScopeNamespaces:function(){notImplemented("XMLList.inScopeNamespaces")},insertChildAfter:function(){notImplemented("XMLList.insertChildAfter")},insertChildBefore:function(){notImplemented("XMLList.insertChildBefore")},nodeKind:function(){return e(this).kind},_namespace:function(){notImplemented("XMLList._namespace")},localName:function(){notImplemented("XMLList.localName")},namespaceDeclarations:function(){return somewhatImplemented("XMLList.prototype.namespaceDeclarations()"),new XMLList},prependChild:function(){notImplemented("XMLList.prependChild")},removeNamespace:function(){notImplemented("XMLList.removeNamespace")},replace:function(a,b){return e(this).replace(a,b),this},setChildren:function(){notImplemented("XMLList.setChildren")},setLocalName:function(){notImplemented("XMLList.setLocalName")},setName:function(){notImplemented("XMLList.setName")},setNamespace:function(){notImplemented("XMLList.setNamespace")}}},r},QNameClass=function(a,b,d,e){QName=function g(a,d,e){if(!(this instanceof g))return void 0===d&&a instanceof g?a:new g(a,d);void 0===d&&(d=a,a=void 0),("string"==typeof a||a instanceof g)&&(a=new ASNamespace(a));var f;d instanceof g?f=void 0===a?d.mn:new Multiname([a],d.mn.getName()):d instanceof Multiname?f=void 0===a?d.isQName()||d.isAnyName()||d.isAnyNamespace()?d:new Multiname([i(b)],d.getName(),d.flags):new Multiname([a],d.getName(),d.flags):"*"===d?f=new Multiname([],null,e?Multiname.ATTRIBUTE:0):"@*"===d?f=new Multiname([],null,Multiname.ATTRIBUTE):(a=void 0===a?i(b):a,f=void 0===d?new Multiname([a],""):new Multiname([a],c(d),e?Multiname.ATTRIBUTE:0)),this.mn=f,this.isAny=f.isAnyName(),this.isAnyNamespace=f.isAnyNamespace(),this.isAttr=f.isAttribute()};var f=new Class("QName",QName,ApplicationDomain.passthroughCallable(QName));return f.extend(e),QNp=QName.prototype,defineNonEnumerableGetter(QNp,"localName",function(){return this._localName||(this._localName=this.isAny?"*":this.mn.getName()),this._localName}),defineNonEnumerableGetter(QNp,"uri",function(){if(!this._uri){var a=this.mn.namespaces[0];this._uri=a&&a.uri?a.uri:this.isAny||this.isAnyNamespace?null:""}return this._uri}),defineNonEnumerableGetter(QNp,"prefix",function(){return this.mn.namespaces[0].prefix}),defineNonEnumerableSetter(QNp,"prefix",function(a){this.mn.namespaces[0].prefix=a}),QNp.getNamespace=function(a){if(null===this.uri)throw"TypeError in QName.prototype.getNamespace()";a||(a=[]);for(var b,c=0;c<a.length;c++)this.uri===a[c].uri&&(b=a[c]);return b||(b=ASNamespace.createNamespace(this.uri)),b},f.native={"static":{},instance:{localName:{get:function(){return this.localName}},uri:{get:function(){return this.uri}}}},f}}();var AMFUtils=function(){function a(a,b){if(b.length>65535)throw"AMF short string exceeded";if(!b.length)return a.writeByte(0),void a.writeByte(0);var c=utf8decode(b);a.writeByte(c.length>>8&255),a.writeByte(255&c.length);for(var d=0;d<c.length;d++)a.writeByte(c[d])}function b(a){var b=a.readByte()<<8|a.readByte();if(!b)return"";for(var c=new Uint8Array(b),d=0;b>d;d++)c[d]=a.readByte();return utf8encode(c)}function c(a,b){var c=new ArrayBuffer(8),d=new DataView(c);d.setFloat64(0,b,!1);for(var e=0;e<c.byteLength;e++)a.writeByte(d.getUint8(e))}function d(a){for(var b=new ArrayBuffer(8),c=new DataView(b),d=0;d<b.byteLength;d++)c.setUint8(d,a.readByte());return c.getFloat64(0,!1)}function e(a,b,c){a.asSetPublicProperty(b,c)}function f(a){var b=a.readByte();if(0===(128&b))return b;var c=a.readByte();if(0===(128&c))return(127&b)<<7|c;var d=a.readByte();if(0===(128&d))return(127&b)<<14|(127&c)<<7|d;var e=a.readByte();return(127&b)<<22|(127&c)<<15|(127&d)<<8|e}function g(a,b){if(0===(4294967168&b))a.writeByte(127&b);else if(0===(4294950912&b))a.writeByte(128|b>>7&127),a.writeByte(127&b);else if(0===(4292870144&b))a.writeByte(128|b>>14&127),a.writeByte(128|b>>7&127),a.writeByte(127&b);else{if(0!==(3221225472&b))throw"AMF3 U29 range";a.writeByte(128|b>>22&127),a.writeByte(128|b>>15&127),a.writeByte(128|b>>8&127),a.writeByte(255&b)}}function h(a,b){var c=f(a);if(1===c)return"";var d=b.stringsCache||(b.stringsCache=[]);if(0===(1&c))return d[c>>1];for(var e=c>>1,g=new Uint8Array(e),h=0;e>h;h++)g[h]=a.readByte();var i=utf8encode(g);return d.push(i),i}function i(a,b,c){if(""===b)return void a.writeByte(1);var d=c.stringsCache||(c.stringsCache=[]),e=d.indexOf(b);if(e>=0)return void g(a,e<<1);d.push(b);var f=utf8decode(b);g(a,1|f.length<<1);for(var h=0;h<f.length;h++)a.writeByte(f[h])}function j(a,b){var c=a.readByte();switch(c){case y:return null;case x:return void 0;case z:return!1;case A:return!0;case B:return f(a);case C:return d(a);case D:return h(a,b);case E:return new Date(d(a));case G:var g=f(a);if(0===(1&g))return b.objectsCache[g>>1];if(0!==(4&g))throw"AMF3 Traits-Ext is not supported";var i,k;if(0===(2&g))i=b.traitsCache[g>>2],k=i.class;else{i={};var l=h(a,b);i.className=l,k=l&&H.names[l],i.class=k,i.isDynamic=0!==(8&g),i.members=[];for(var m=k&&k.instanceBindings.slots,n=0,o=g>>4;o>n;n++){for(var p=h(a,b),q=null,o=1;m&&o<m.length;o++)if(m[o].name.name===p){q=m[o];break}i.members.push(q?Multiname.getQualifiedName(q.name):Multiname.getPublicQualifiedName(p))}(b.traitsCache||(b.traitsCache=[])).push(i)}var r=k?k.createInstance():{};(b.objectsCache||(b.objectsCache=[])).push(r);for(var n=0;n<i.members.length;n++){var s=j(a,b);r[i.members[n]]=s}if(i.isDynamic)for(;;){var t=h(a,b);if(!t.length)break;var s=j(a,b);e(r,t,s)}return r;case F:var g=f(a);if(0===(1&g))return b.objectsCache[g>>1];var r=[];(b.objectsCache||(b.objectsCache=[])).push(r);for(var u=g>>1;;){var t=h(a,b);if(!t.length)break;var s=j(a,b);e(r,t,s)}for(var n=0;u>n;n++){var s=j(a,b);e(r,n,s)}return r;default:throw"AMF3 Unknown marker "+c}}function k(a,b,c){var d=c.objectsCache||(c.objectsCache=[]),e=d.indexOf(b);return 0>e?(d.push(b),!1):(g(a,e<<1),!0)
}function l(a,b,d){switch(typeof b){case"boolean":a.writeByte(b?A:z);break;case"number":b===(0|b)?(a.writeByte(B),g(a,b)):(a.writeByte(C),c(a,b));break;case"undefined":a.writeByte(x);break;case"string":a.writeByte(D),i(a,b,d);break;case"object":if(null===b)a.writeByte(y);else if(Array.isArray(b)){if(a.writeByte(F),k(a,b,d))break;for(var e=0;e in b;)++e;g(a,e<<1|1),forEachPublicProperty(b,function(b,c){isNumeric(b)&&b>=0&&e>b||(i(a,b,d),l(a,c,d))}),i(a,"",d);for(var f=0;e>f;f++)l(a,b[f],d)}else if(b instanceof Date){if(a.writeByte(E),k(a,b,d))break;g(a,1),c(a,b.valueOf())}else{if(a.writeByte(G),k(a,b,d))break;var h=!0,j=b.class;if(j){h=!j.classInfo.instanceInfo.isSealed();var m,n,o=H.classes.get(j)||"",p=d.traitsCache||(d.traitsCache=[]),q=d.traitsInfos||(d.traitsInfos=[]),r=p.indexOf(j);if(0>r){var s=j.instanceBindings.slots;m=[];for(var t=[],u=1;u<s.length;u++){var v=s[u];v.name.getNamespace().isPublic()&&(m.push(Multiname.getQualifiedName(v.name)),t.push(v.name.name))}p.push(j),q.push(m),n=t.length,g(a,(h?11:3)+(n<<4)),i(a,o,d);for(var u=0;n>u;u++)i(a,t[u],d)}else m=q[r],n=m.length,g(a,1+(r<<2));for(var u=0;n>u;u++)l(a,b[m[u]],d)}else g(a,11),i(a,"",d);h&&(forEachPublicProperty(b,function(b,c){i(a,b,d),l(a,c,d)}),i(a,"",d))}return}}var m=0,n=1,o=2,p=3,q=5,r=6,s=8,t=9,u=10,v=17,w={write:function(b,d){switch(typeof d){case"boolean":b.writeByte(n),b.writeByte(d?1:0);break;case"number":b.writeByte(m),c(b,d);break;case"undefined":b.writeByte(r);break;case"string":b.writeByte(o),a(b,d);break;case"object":return void(null===d?b.writeByte(q):Array.isArray(d)?(b.writeByte(s),b.writeByte(d.length>>>24&255),b.writeByte(d.length>>16&255),b.writeByte(d.length>>8&255),b.writeByte(255&d.length),forEachPublicProperty(d,function(c,d){a(b,c),this.write(b,d)},this),b.writeByte(0),b.writeByte(0),b.writeByte(t)):(b.writeByte(p),forEachPublicProperty(d,function(c,d){a(b,c),this.write(b,d)},this),b.writeByte(0),b.writeByte(0),b.writeByte(t)))}},read:function(a){var c=a.readByte();switch(c){case m:return d(a);case n:return!!a.readByte();case o:return b(a);case p:for(var f={};;){var g=b(a);if(!g.length)break;e(f,g,this.read(a))}if(a.readByte()!==t)throw"AMF0 End marker is not found";return f;case q:return null;case r:return void 0;case s:var f=[];for(f.length=a.readByte()<<24|a.readByte()<<16|a.readByte()<<8|a.readByte();;){var g=b(a);if(!g.length)break;e(f,g,this.read(a))}if(a.readByte()!==t)throw"AMF0 End marker is not found";return f;case u:var f=[];f.length=a.readByte()<<24|a.readByte()<<16|a.readByte()<<8|a.readByte();for(var h=0;h<f.length;h++)f[h]=this.read(a);return f;case v:return j(a,{});default:throw"AMF0 Unknown marker "+c}}},x=0,y=1,z=2,A=3,B=4,C=5,D=6,E=8,F=9,G=10,H={classes:new WeakMap,names:Object.create(null)},I={write:function(a,b){l(a,b,{})},read:function(a){return j(a,{})}};return{encodings:[w,null,null,I],aliasesCache:H}}(),proxyTrapQns={getProperty:null,setProperty:null,hasProperty:null,callProperty:null};for(var name in proxyTrapQns)proxyTrapQns[name]=VM_OPEN_METHOD_PREFIX+Multiname.getQualifiedName(new Multiname([ASNamespace.PROXY],name));var NativeASNamespace,natives=function(){function ObjectClass(){var a=new Class("Object",Object,C(Object));return a.native={instance:{isPrototypeOf:Object.prototype.isPrototypeOf,hasOwnProperty:function(a){return void 0===a?!1:(a=Multiname.getPublicQualifiedName(a),Object.prototype.hasOwnProperty.call(this,a)?!0:Object.getPrototypeOf(this).hasOwnProperty(a))},propertyIsEnumerable:function(a){return void 0===a?!1:(a=Multiname.getPublicQualifiedName(a),Object.prototype.propertyIsEnumerable.call(this,a))}},"static":{_setPropertyIsEnumerable:function(a,b){b=Multiname.getPublicQualifiedName(b);var c=Object.getOwnPropertyDescriptor(a,b);c.enumerable=!1,Object.defineProperty(a,b,c)}}},a.dynamicPrototype=a.traitsPrototype=Object.prototype,a.setDefaultProperties(),a.defaultValue=null,a.coerce=function(a){return asCoerceObject(a)},a.isInstanceOf=function(a){return null===a?!1:!0},a.isInstance=function(a){return null===a||void 0===a?!1:!0},a}function ClassClass(a,b,c,d){var e=Class;return e.debugName="Class",e.prototype.extendBuiltin.call(e,d),e.coerce=function(a){return a},e.isInstanceOf=function(){return!0},e.isInstance=function(a){return a instanceof e.instanceConstructor},e}function BooleanClass(a,b,c,d){var e=new Class("Boolean",Boolean,C(Boolean));return e.extendBuiltin(d),e.native={instance:{toString:Boolean.prototype.toString,valueOf:Boolean.prototype.valueOf}},e.coerce=Boolean,e.isInstanceOf=function(a){return"boolean"==typeof a||a instanceof Boolean},e.isInstance=function(a){return"boolean"==typeof a||a instanceof Boolean?!0:!1},e}function FunctionClass(a,b,c,d){var e=new Class("Function",Function,C(Function));return e.extendBuiltin(d),e.native={instance:{prototype:{get:function(){return this.prototype},set:function(a){this.prototype=a}},length:{get:function(){return this.hasOwnProperty(VM_LENGTH)?this.asLength:this.length}},call:Function.prototype.call,apply:Function.prototype.apply}},e.coerce=function(a){return a},e.isInstanceOf=function(a){return"function"==typeof a},e.isInstance=function(a){return"function"==typeof a},e}function MethodClosure(a,b){var c=bindSafely(b,a);defineNonEnumerableProperty(this,"call",c.call.bind(c)),defineNonEnumerableProperty(this,"apply",c.apply.bind(c))}function MethodClosureClass(a,b,c,d){var e=new Class("MethodClosure",MethodClosure);return e.extendBuiltin(d),e}function StringClass(a,b,c,d){var e=new Class("String",String,C(String));e.extendBuiltin(d);var f=String.prototype;return e.native={instance:{length:{get:function(){return this.length}},indexOf:f.indexOf,lastIndexOf:f.lastIndexOf,charAt:f.charAt,charCodeAt:f.charCodeAt,concat:f.concat,localeCompare:f.localeCompare,match:function(a){if(void 0===a||null===a)return null;if(a instanceof RegExp&&a.global){for(var b,c=[];b=a.exec(this);)c.push(b[0]);return c}return a instanceof RegExp||"string"==typeof a||(a=String(a)),this.match(a)},replace:f.replace,search:function(a){return void 0===a?-1:this.search(a)},slice:f.slice,split:f.split,substr:f.substr,substring:f.substring,toLowerCase:f.toLowerCase,toLocaleLowerCase:f.toLocaleLowerCase,toUpperCase:function(){var a=f.toUpperCase.apply(this),a=a.replace(/\u039C/g,String.fromCharCode(181));return a},toLocaleUpperCase:function(){var a=f.toLocaleUpperCase.apply(this),a=a.replace(/\u039C/g,String.fromCharCode(181));return a},toString:f.toString,valueOf:f.valueOf},"static":String},e.isInstance=function(a){return null!==a&&void 0!==a&&"string"==typeof a.valueOf()},e.coerce=function(a){return null===a||void 0===a?null:String(a)},e.isInstanceOf=function(a){return Object(a)instanceof String},e.isInstance=function(a){return Object(a)instanceof String},e}function VectorClass(a,b,c,d){return createVectorClass(void 0,d)}function ObjectVectorClass(a,b,c,d){return createVectorClass(a.getClass("Object"),d)}function IntVectorClass(a,b,c,d){return createVectorClass(a.getClass("int"),d)}function UIntVectorClass(a,b,c,d){return createVectorClass(a.getClass("uint"),d)}function DoubleVectorClass(a,b,c,d){return createVectorClass(a.getClass("Number"),d)}function createVectorClass(a,b){var c;if(a){var d="Vector$"+a.classInfo.instanceInfo.name.name;switch(d){case"Vector$int":c=Int32Vector;break;case"Vector$uint":c=Uint32Vector;break;case"Vector$Number":c=Float64Vector;break;case"Vector$Object":c=GenericVector;break;default:unexpected()}}else c=GenericVector.applyType(null);var e=c.prototype,f=new Class(d,c,C(c.callable));return c===GenericVector&&(f.applyType=function(){return f}),f.extendWrapper(b,c),f.native={instance:{fixed:{get:function(){return this._fixed},set:function(a){this._fixed=a}},length:{get:function(){return this.length},set:function(a){this.length=a}},push:e.push,pop:e.pop,shift:e.shift,unshift:e.unshift,_reverse:e.reverse,_filter:e.filter,_map:e.map,newThisType:function(){return new f.instanceConstructor},_spliceHelper:function(a,b,c,d,e){return this._spliceHelper(a,b,c,d,e)}},"static":{_some:function(a,b,c){return a.some(b,c)},_every:function(a,b,c){return a.every(b,c)},_forEach:function(a,b,c){return a.forEach(b,c)},_sort:arraySort}},f.vectorType=a,f.coerce=function(a){return a},f.isInstanceOf=function(){return!0},f.isInstance=function(a){return null===a||"object"!=typeof a?!1:!this.instanceConstructor.vectorType&&a.class.vectorType?!0:this.instanceConstructor.prototype.isPrototypeOf(a)},f}function NumberClass(a,b,c,d){var e=new Class("Number",Number,C(Number));return e.extendBuiltin(d),e.native={instance:Number.prototype},e.defaultValue=Number(0),e.isInstance=function(a){return null!==a&&void 0!==a&&"number"==typeof a.valueOf()},e.coerce=Number,e.isInstanceOf=function(a){return Object(a)instanceof Number},e.isInstance=function(a){return Object(a)instanceof Number},e}function Int(a){return 0|a}function boxedInt(a){return Object(0|a)}function intClass(a,b,c,d){var e=new Class("int",boxedInt,C(Int));return e.extendBuiltin(d),e.defaultValue=0,e.coerce=Int,e.isInstanceOf=function(){return!1},e.isInstance=function(a){return a instanceof Number&&(a=a.valueOf()),(0|a)===a},e}function Uint(a){return a>>>0}function boxedUint(a){return Object(a>>>0)}function uintClass(a,b,c,d){var e=new Class("uint",boxedUint,C(Uint));return e.extend(d),e.defaultValue=0,e.isInstanceOf=function(){return!1},e.isInstance=function(a){return a instanceof Number&&(a=a.valueOf()),a>>>0===a},e.coerce=Uint,e}function MathClass(){var a=new Class("Math");return a.native={"static":Math},a}function DateClass(a,b,c,d){var e=new Class("Date",Date,C(Date));return e.extendBuiltin(d),e.native={instance:Date.prototype,"static":Date},e}function makeErrorClass(a){var b={__glue__:{script:{instance:{message:"public message",name:"public name"}},"native":{instance:{getStackTrace:function(){return somewhatImplemented("Error.getStackTrace()"),AVM2.getStackTrace()}},"static":{getErrorMessage:getErrorMessage}}}};return function(c,d,e,f){var g=new Class(a,e);return g.extend(f),"Error"===a&&(g.link(b),g.linkNatives(b)),g}}function RegExpClass(a,b,c,d){var e=new Class("RegExp",XRegExp,C(XRegExp));return e.extendBuiltin(d),RegExpClass.exec=function(){var a=this.exec.apply(this,arguments);if(!a)return a;for(var b=Object.keys(a),c=0;c<b.length;c++){var d=b[c];isNumeric(d)||void 0===a[d]&&(a[d]="")}return publicizeProperties(a),a},RegExpClass.test=function(){return null!==this.exec.apply(this,arguments)},e.native={instance:{global:{get:function(){return this.global}},source:{get:function(){return this.source}},ignoreCase:{get:function(){return this.ignoreCase}},multiline:{get:function(){return this.multiline}},lastIndex:{get:function(){return this.lastIndex},set:function(a){this.lastIndex=a}},dotall:{get:function(){return this.dotall}},extended:{get:function(){return this.extended}},exec:RegExpClass.exec,test:RegExpClass.test}},e}function NamespaceClass(a,b,c,d){NativeASNamespace=function(a,b){void 0===b&&(b=a,a=void 0);var c,d;if(void 0===a)void 0===b?(c="",d=""):"object"==typeof b?(c=b.prefix,b instanceof ASNamespace?d=b.uri:b instanceof QName&&(d=b.uri)):(d=b+"",c=""===d?"":void 0);else if(d="object"==typeof b&&b instanceof QName&&null!==b.uri?b.uri:b+"",""===d){if(void 0!==a&&a+""!="")throw"type error";c=""}else c=void 0===a||""===a?void 0:a+"";return ASNamespace.createNamespace(d,c)};var e=new Class("Namespace",NativeASNamespace,C(NativeASNamespace));e.extendNative(d,ASNamespace);var f=ASNamespace.prototype;return e.native={instance:{prefix:{get:f.getPrefix},uri:{get:f.getURI}}},e}function JSONClass(a,b,c,d){function e(a){if("object"!=typeof a)return a;for(var b=Object.keys(a),c=a instanceof Array?[]:{},d=0;d<b.length;d++)c.asSetPublicProperty(b[d],e(a[b[d]]));return c}function f(a){if("object"!=typeof a)return a;for(var b=Object.keys(a),c=a instanceof Array?[]:{},d=0;d<b.length;d++){var e=b[d],g=e;isNumeric(e)||(g=Multiname.getNameFromPublicQualifiedName(e)),c[g]=f(a[e])}return c}function g(){}var h=new Class("JSON",g,C(g));return h.extend(d),h.native={"static":{parseCore:function(a){return e(JSON.parse(a))},stringifySpecializedToString:function(a,b,c,d){return JSON.stringify(f(a),c,d)}}},h}function CapabilitiesClass(a,b,c,d){function e(){}var f=new Class("Capabilities",e,C(e));return f.extend(d),f.native={"static":{playerType:{get:function(){return"AVMPlus"}}}},f}function FileClass(a,b,c,d){function e(){}var f=new Class("File",e,C(e));return f.extend(d),f.native={"static":{exists:function(){return notImplemented("File.exists"),!1},read:function(a){return snarf(a)},write:function(){return notImplemented("File.write"),!0},readByteArray:function(a){var b=AVM2.currentDomain().getClass("flash.utils.ByteArray"),c=b.createInstance();return c.writeRawBytes(snarf(a,"binary")),c},writeByteArray:function(a,b){return write("bin/"+a,b.getBytes()),!0}}},f}function ShumwayClass(runtime,scope,instanceConstructor,baseClass){function Shumway(){}var c=new Class("Shumway",Shumway,C(Shumway));return c.extend(baseClass),c.native={"static":{info:function(a){console.info(a)},json:function(a){return JSON.stringify(a)},eval:function(x){return eval(x)},"debugger":function(){}}},c}function constant(a){return function(){return a}}function ByteArrayClass(a,b,c,d){var e=function(){ByteArray.call(this)},f=e.prototype=Object.create(ByteArray.prototype),g=new Class("ByteArray",e,C(e));return g.extendBuiltin(d),f.asGetNumericProperty=function(a){return a>=this.length?void 0:this.uint8v[a]},f.asSetNumericProperty=function(a,b){var c=a+1;this.ensureCapacity(c),this.uint8v[a]=b,c>this.length&&(this.length=c)},f.readUTF=function(){return this.readUTFBytes(this.readShort())},f.readUTFBytes=function(a){var b=this.position;return b+a>this.length&&throwEOFError(),this.position+=a,utf8encode(new Int8Array(this.a,b,a))},f.writeUTF=function(a){var b=utf8decode(a);this.writeShort(b.length),this.writeRawBytes(b)},f.writeUTFBytes=function(a){var b=utf8decode(a);this.writeRawBytes(b)},f.toString=function(){return utf8encode(new Int8Array(this.a,0,this.length))},g.native={instance:{length:{get:function(){return this.length},set:function(a){var b=this.a.byteLength;a>b&&this.ensureCapacity(a),this.length=a,this.position=clamp(this.position,0,this.length)}},bytesAvailable:{get:function(){return this.length-this.position}},position:{get:function(){return this.position},set:function(a){this.position=a}},endian:{get:function(){return this.le?"littleEndian":"bigEndian"},set:function(a){this.le="littleEndian"===a}},objectEncoding:{get:function(){return this.objectEncoding},set:function(a){this.objectEncoding=a}},writeBytes:f.writeBytes,writeBoolean:f.writeBoolean,writeByte:f.writeByte,writeShort:f.writeShort,writeInt:f.writeInt,writeUnsignedInt:f.writeUnsignedInt,writeFloat:f.writeFloat,writeDouble:f.writeDouble,writeMultiByte:f.writeMultiByte,writeObject:function(a){return AMFUtils.encodings[this.objectEncoding].write(this,a)},writeUTF:f.writeUTF,writeUTFBytes:f.writeUTFBytes,readBoolean:f.readBoolean,readByte:f.readByte,readBytes:f.readBytes,readUnsignedByte:f.readUnsignedByte,readShort:f.readShort,readUnsignedShort:f.readUnsignedShort,readInt:f.readInt,readUnsignedInt:f.readUnsignedInt,readFloat:f.readFloat,readDouble:f.readDouble,readMultiByte:f.readMultiByte,readObject:function(){return AMFUtils.encodings[this.objectEncoding].read(this)},readUTF:f.readUTF,readUTFBytes:f.readUTFBytes,toString:f.toString,clear:f.clear,_compress:f.compress,_uncompress:f.uncompress},"static":{defaultObjectEncoding:{get:function(){return ByteArray.DEFAULT_OBJECT_ENCODING},set:function(a){ByteArray.DEFAULT_OBJECT_ENCODING=a}}}},g}function DomainClass(a,b,c,d){var e=new Class("File",c,C(c));return e.extend(d),e.native={instance:{init:function(a){this.base=a,this.nativeObject=new ApplicationDomain(AVM2.instance,a?a.nativeObject:null)},loadBytes:function(a){this.nativeObject.executeAbc(new AbcFile(a.readRawBytes()))},getClass:function(a){return this.nativeObject.getClass(a)}},"static":{currentDomain:{get:function(){var a=Object.create(c.prototype);return a.nativeObject=AVM2.currentDomain(),a}}}},e}function SystemClass(a,b,c,d){var e=new Class("System",c,C(c));return e.extend(d),e.native={"static":{swfVersion:{get:function(){return 19}},apiVersion:{get:function(){return 26}},getArgv:function(){return[]},getRunmode:function(){return"mixed"}}},e}function bugzilla(a){switch(a){case 574600:return!0}return!1}function describeTypeJSON(a,b){function c(a){return Multiname.getPublicQualifiedName(a)}function d(a){var b=a.name,c=a.namespaces[0];return c&&c.uri?c.uri+"::"+b:b}function e(a){var b={};return b[l]=a.name,b[o]=a.value.map(function(a){var b={};return b[p]=a.key,b[o]=a.value,a}),b}function f(a,b){function f(a){for(var b=0;a&&b<a.length;b++){var c=a[b];if(o[c.kind]&&(c.name.getNamespace().isPublic()||c.name.uri)){var f=d(c.name);if(B[f]){var g=B[f];g[j]="readwrite",c.kind===TRAIT_Getter&&(g[m]=d(c.methodInfo.returnType))}else{var g={};if(s&&c.metadata){var p=g[i]=[];for(var t in c.metadata)p.push(e(c.metadata[t]))}else g[i]=null;if(g[h]=D,g[k]=void 0===c.name.uri?null:c.name.uri,g[l]=f,c.typeName||c.methodInfo&&c.methodInfo.returnType)switch(g[c.kind===TRAIT_Method?n:m]=d(c.kind===TRAIT_Slot?c.typeName:c.methodInfo.returnType),c.kind){case TRAIT_Slot:g[j]="readwrite",y.push(g);break;case TRAIT_Method:for(var u=g[q]=[],v=c.methodInfo.parameters,w=0;w<v.length;w++){var x=v[w],C={};C[m]=x.type?d(x.type):"*",C[r]="value"in x,u.push(C)}A.push(g);break;case TRAIT_Getter:case TRAIT_Setter:g[j]=c.kind===TRAIT_Getter?"read":"write",z.push(g),B[f]=g}}}}}var o=[b&g.INCLUDE_VARIABLES,b&g.INCLUDE_METHODS,b&g.INCLUDE_ACCESSORS,b&g.INCLUDE_ACCESSORS],p=b&g.INCLUDE_BASES,s=b&g.INCLUDE_METADATA,t={},u=t[c("bases")]=p?[]:null;if(b&g.INCLUDE_INTERFACES){var v=t[c("interfaces")]=[];if(b&g.USE_ITRAITS)for(var w in a.implementedInterfaces){var x=a.implementedInterfaces[w].name;v.push(d(x))}}else t[c("interfaces")]=null;for(var y=t[c("variables")]=b&g.INCLUDE_VARIABLES?[]:null,z=t[c("accessors")]=b&g.INCLUDE_ACCESSORS?[]:null,A=t[c("methods")]=b&g.INCLUDE_METHODS?[]:null,B={},C=!1;a;){var D=d(a.classInfo.instanceInfo.name);p&&C?u.push(D):C=!0,f(b&g.USE_ITRAITS?a.classInfo.instanceInfo.traits:a.classInfo.traits),a=a.baseClass}return t}var g={HIDE_NSURI_METHODS:1,INCLUDE_BASES:2,INCLUDE_INTERFACES:4,INCLUDE_VARIABLES:8,INCLUDE_ACCESSORS:16,INCLUDE_METHODS:32,INCLUDE_METADATA:64,INCLUDE_CONSTRUCTOR:128,INCLUDE_TRAITS:256,USE_ITRAITS:512,HIDE_OBJECT:1024},h=c("declaredBy"),i=c("metadata"),j=c("access"),k=c("uri"),l=c("name"),m=c("type"),n=c("returnType"),o=c("value"),p=c("key"),q=c("parameters"),r=c("optional"),s=a.classInfo?a:Object.getPrototypeOf(a).class,t=s.classInfo,u={};u[l]=d(t.instanceInfo.name),u[c("isDynamic")]=s===a?!0:!(t.instanceInfo.flags&CONSTANT_ClassSealed),u[c("isStatic")]=s===a,u[c("isFinal")]=s===a?!0:!(t.instanceInfo.flags&CONSTANT_ClassFinal),b&g.INCLUDE_TRAITS&&(u[c("traits")]=f(s,b));var v=null;return t.metadata&&(v=Object.keys(t.metadata).map(function(a){return e(t.metadata[a])})),u[i]=v,u}var C=ApplicationDomain.passthroughCallable,CC=ApplicationDomain.constructingCallable;return MethodClosure.prototype={toString:function(){return"function Function() {}"}},{print:constant(print),notImplemented:constant(notImplemented),debugBreak:constant(debugBreak),bugzilla:constant(bugzilla),decodeURI:constant(decodeURI),decodeURIComponent:constant(decodeURIComponent),encodeURI:constant(encodeURI),encodeURIComponent:constant(encodeURIComponent),isNaN:constant(isNaN),isFinite:constant(isFinite),parseInt:constant(parseInt),parseFloat:constant(parseFloat),escape:constant(escape),unescape:constant(unescape),isXMLName:constant("undefined"!=typeof isXMLName?isXMLName:function(){notImplemented("Chrome doesn't support isXMLName.")}),Function:Function,String:String,Array:Array,Number:Number,Boolean:Boolean,Math:Math,Date:Date,RegExp:RegExp,Object:Object,ObjectClass:ObjectClass,Class:ClassClass,NamespaceClass:NamespaceClass,FunctionClass:FunctionClass,MethodClosureClass:MethodClosureClass,BooleanClass:BooleanClass,StringClass:StringClass,NumberClass:NumberClass,intClass:intClass,uintClass:uintClass,ArrayClass:ArrayClass,VectorClass:VectorClass,ObjectVectorClass:ObjectVectorClass,IntVectorClass:IntVectorClass,UIntVectorClass:UIntVectorClass,DoubleVectorClass:DoubleVectorClass,ByteArrayClass:ByteArrayClass,ProxyClass:ProxyClass,ErrorClass:makeErrorClass("Error"),DefinitionErrorClass:makeErrorClass("DefinitionError"),EvalErrorClass:makeErrorClass("EvalError"),RangeErrorClass:makeErrorClass("RangeError"),ReferenceErrorClass:makeErrorClass("ReferenceError"),SecurityErrorClass:makeErrorClass("SecurityError"),SyntaxErrorClass:makeErrorClass("SyntaxError"),TypeErrorClass:makeErrorClass("TypeError"),URIErrorClass:makeErrorClass("URIError"),VerifyErrorClass:makeErrorClass("VerifyError"),UninitializedErrorClass:makeErrorClass("UninitializedError"),ArgumentErrorClass:makeErrorClass("ArgumentError"),DateClass:DateClass,MathClass:MathClass,RegExpClass:RegExpClass,DictionaryClass:DictionaryClass,XMLClass:XMLClass,XMLListClass:XMLListClass,QNameClass:QNameClass,JSONClass:JSONClass,ShumwayClass:ShumwayClass,CapabilitiesClass:CapabilitiesClass,FileClass:FileClass,DomainClass:DomainClass,SystemClass:SystemClass,getQualifiedClassName:constant(function(a){if(null===a)return"null";if(void 0===a)return"void";switch(typeof a){case"number":return(0|a)===a?"int":"Number";case"string":return"String";case"boolean":return"Boolean";case"object":if(a instanceof Date)return"Date";var b;if(a instanceof Class?b=a:a.class?b=a.class:a.classInfo&&(b=a),b){var c=b.classInfo.instanceInfo.name,d=c.namespaces[0].uri;return d?d+"::"+c.name:c.name}}return notImplemented(a+" ("+typeof a+")")}),getQualifiedSuperclassName:constant(function(a){switch(typeof a){case"number":case"string":case"boolean":return"Object";case"function":return"Function";case"object":if(a instanceof Date)return"Object";var b;if(a.class?b=a.class:a.classInfo&&(b=a),b&&b.baseClass){var c=b.baseClass.classInfo.instanceInfo.name,d=c.namespaces[0].uri;return d?d+"::"+c.name:c.name}return"Object"}return notImplemented(a+" (superOf "+typeof a+")")}),getDefinitionByName:constant(function(a){var b=String(a).replace("::",".");return AVM2.currentDomain().getClass(b)}),describeTypeJSON:constant(describeTypeJSON),original:jsGlobal[VM_NATIVE_BUILTIN_ORIGINALS]}}(),disassemblerOptions=systemOptions.register(new OptionSet("Disassembler Options")),filter=disassemblerOptions.register(new Option("f","filter","string","SpciMsmNtu","[S]ource, constant[p]ool, [c]lasses, [i]nstances, [M]etadata, [s]cripts, [m]ethods, multi[N]ames, S[t]atistics, [u]tf"));AbcFile.prototype.trace=function(a){filter.value.indexOf("p")>=0&&this.constantPool.trace(a),filter.value.indexOf("N")>=0&&this.constantPool.traceMultinamesOnly(a),filter.value.indexOf("c")>=0&&traceArray(a,"classes",this.classes),filter.value.indexOf("i")>=0&&traceArray(a,"instances",this.instances),filter.value.indexOf("M")>=0&&traceArray(a,"metadata",this.metadata),filter.value.indexOf("s")>=0&&traceArray(a,"scripts",this.scripts),filter.value.indexOf("m")>=0&&traceArray(a,"methods",this.methods,this),filter.value.indexOf("S")>=0&&traceSource(a,this),filter.value.indexOf("t")>=0&&traceStatistics(a,this),filter.value.indexOf("u")>=0&&print(JSON.stringify({strings:this.constantPool.strings,positionAfterUTFStrings:this.constantPool.positionAfterUTFStrings},null,2))},ConstantPool.prototype.trace=function(a){a.enter("constantPool {");for(var b in this)"namespaces"===b?(a.enter("namespaces {"),this.namespaces.forEach(function(b,c){a.writeLn((""+c).padRight(" ",3)+(b?b.toString():"*"))}),a.leave("}")):this[b]instanceof Array&&(a.enter(b+" "+this[b].length+" {"),a.writeArray(this[b]),a.leave("}"));a.leave("}")},ConstantPool.prototype.traceMultinamesOnly=function(a){a.writeArray(this.multinames,null,!0)},ClassInfo.prototype.trace=function(a){a.enter("class "+this+" {"),traceArray(a,"traits",this.traits),a.leave("}")},MetaDataInfo.prototype.trace=function(a){a.enter(this+" {"),this.value.forEach(function(b){a.writeLn((b.key?b.key+": ":"")+'"'+b.value+'"')}),a.leave("}")},InstanceInfo.prototype.trace=function(a){a.enter("instance "+this+" {"),traceArray(a,"traits",this.traits),a.leave("}")},ScriptInfo.prototype.trace=function(a){a.enter("script "+this+" {"),traceArray(a,"traits",this.traits),a.leave("}")},Trait.prototype.trace=function(a){if(this.metadata)for(var b in this.metadata)this.metadata.hasOwnProperty(b)&&this.metadata[b].trace(a);a.writeLn(this)},MethodInfo.prototype.trace=function(a){var b=this.abc;if(a.enter("method"+(this.name?" "+this.name:"")+" {"),a.writeLn("flags: "+getFlags(this.flags,"NEED_ARGUMENTS|NEED_ACTIVATION|NEED_REST|HAS_OPTIONAL||NATIVE|SET_DXN|HAS_PARAM_NAMES".split("|"))),a.writeLn("parameters: "+this.parameters.map(function(a){return(a.type?Multiname.getQualifiedName(a.type)+"::":"")+a.name})),!this.code)return void a.leave("}");var c=new AbcStream(this.code);for(traceArray(a,"traits",this.traits),a.enter("code {");c.remaining()>0;){var d,e=c.readU8(),f=opcodeTable[e];switch(d=(""+c.position).padRight(" ",6),e){case OP_lookupswitch:d+=f.name+": defaultOffset: "+c.readS24();var g=c.readU30();d+=", caseCount: "+g;for(var h=0;g+1>h;h++)d+=" offset: "+c.readS24();a.writeLn(d);break;default:f&&(d+=f.name.padRight(" ",20),f.operands&&(f.operands.length>0&&(d+=traceOperands(f,b,c)),a.writeLn(d)))}}a.leave("}"),a.leave("}")};var SourceTracer=function(){function a(a){return void 0===a?"undefined":null===a?"null":"string"==typeof a?'"'+a+'"':String(a)}function b(b,c){return b.parameters.map(function(b){var d=b.name;return c||(b.type&&(d+=":"+b.type.getName()),void 0!==b.value&&(d+=" = "+a(b.value))),d}).join(", ")}function c(a){this.writer=a}return c.prototype={traceTraits:function(c,d,e){var f=this.writer,g=this;c.forEach(function(c){var h,i=Multiname.getAccessModifier(c.name),j=c.name.namespaces[0].uri;if(j?("http://adobe.com/AS3/2006/builtin"===j&&(j="AS3"),h="public"===i?e===j?"":j:i):h=i,d&&(h+=" static"),c.isSlot()||c.isConst())g.traceMetadata(c.metadata),h+=c.isConst()?" const":" var",h+=" "+c.name.getName(),c.typeName&&(h+=":"+c.typeName.getName()),c.value&&(h+=" = "+a(c.value)),f.writeLn(h+";");else if(c.isMethod()||c.isGetter()||c.isSetter()){g.traceMetadata(c.metadata);var k=c.methodInfo;c.attributes&ATTR_Override&&(h+=" override"),k.isNative()&&(h+=" native"),h+=" function",h+=c.isGetter()?" get":c.isSetter()?" set":"",h+=" "+c.name.getName(),h+="("+b(k)+")",h+=k.returnType?":"+k.returnType.getName():"";var l,m="";c.holder instanceof ClassInfo?(l=c.holder.instanceInfo.name,l.namespaces[0].uri&&(m+=l.namespaces[0].uri+"::"),m+=l.getName(),m+="$/"):c.holder instanceof InstanceInfo?(l=c.holder.name,l.namespaces[0].uri&&(m+=l.namespaces[0].uri+"::"),m+=l.getName(),m+="/"):m="global/";{c.isGetter()?"get ":c.isSetter()?"set ":""}!k.isNative(),f.writeLn(k.isNative()?h+";":e?h+";":h+' { notImplemented("'+c.name.getName()+'"); }')}else if(c.isClass()){var l=c.classInfo.instanceInfo.name;f.enter("package "+l.namespaces[0].uri+" {\n"),g.traceMetadata(c.metadata),g.traceClass(c.classInfo),f.leave("\n}"),g.traceClassStub(c)}else notImplemented()})},traceClassStub2:function(a){function c(a){var c=[];a.forEach(function(a){(a.isMethod()||a.isGetter()||a.isSetter())&&a.methodInfo.isNative()&&c.push(a)}),c.forEach(function(a,e){var f=a.methodInfo,h=a.name.getName();d.writeLn("// "+h+" :: "+(f.parameters.length?b(f):"void")+" -> "+(f.returnType?f.returnType.getName():"any"));var i;i=a.isGetter()?'"get '+h+'"':a.isSetter()?'"set '+h+'"':h,d.enter(i+": function "+h+"("+b(f,!0)+") {"),d.writeLn('  notImplemented("'+g+"."+h+'");'),d.leave("}"+(e===c.length-1?"":",\n"))})}var d=this.writer,e=a.classInfo,f=e.instanceInfo,g=f.name.getName(),h=a.metadata?a.metadata.native:null;return h?(d.writeLn("Cut and paste the following into `native.js' and edit accordingly"),d.writeLn("8< --------------------------------------------------------------"),d.enter("natives."+h.cls+" = function "+h.cls+"(runtime, scope, instanceConstructor, baseClass) {"),d.writeLn('var c = new Class("'+g+'", instanceConstructor, ApplicationDomain.passthroughCallable(instanceConstructor));'),d.writeLn("c.extend(baseClass);\n"),d.enter("c.nativeStatics = {"),c(e.traits,!0),d.leave("};\n"),d.enter("c.nativeMethods = {"),c(f.traits),d.leave("};\n"),d.writeLn("return c;"),d.leave("};"),d.writeLn("-------------------------------------------------------------- >8"),!0):!1},traceClassStub:function(a){function c(a){return"'"+a+"'"}function d(a,b){function c(a){return a.isMethod()||a.isGetter()||a.isSetter()}return{properties:a.filter(function(a){return!b&&!c(a)}),methods:a.filter(function(a){return c(a)&&b===a.methodInfo.isNative()})}}function e(a,e,g){function h(a,c){var d=a.methodInfo,e=a.name.getName(),h="// ("+(d.parameters.length?b(d):"void")+") -> "+(d.returnType?d.returnType.getName():"any"),j=e;a.isGetter()?j="get":a.isSetter()&&(j="set"),f.enter(j+": function "+e+"("+b(d,!0)+") { "+h),f.writeLn('notImplemented("'+i+"."+e+'");'),g||(a.isGetter()?f.writeLn("return this._"+e+";"):a.isSetter()&&f.writeLn("this._"+e+" = "+d.parameters[0].name+";")),f.leave("}"+(c?",":""))}a=d(a,e);var j=[],k=createEmptyObject();a.methods.forEach(function(a){var b=a.name.getName();a.isGetter()||a.isSetter()?(k[b]||(k[b]=[]),k[b].push(a)):j.push(a)});for(var l=0;l<j.length;l++)h(j[l],l<j.length-1);for(var m=toKeyValueArray(k),n=0;n<m.length;n++){f.enter(m[n][0]+": {");for(var o=m[n][1],l=0;l<o.length;l++)h(o[l],l<o.length-1);f.leave("}"+(n<m.length-1?",":""))}a.properties.forEach(function(b,d){var e=b.name.getName(),g=d===a.properties.length-1;b.name.getNamespace().isPublic()&&f.writeLn(e+": "+c("public "+b.name.name)+(g?"":","))})}{var f=this.writer,g=a.classInfo,h=g.instanceInfo,i=h.name.getName();a.metadata?a.metadata.native:null}f.writeLn("Cut and paste the following glue and edit accordingly."),f.writeLn("Class "+h),f.writeLn("8< --------------------------------------------------------------");var j=h.name.namespaces[0].uri;return f.enter("var "+i+"Definition = (function () {"),f.enter("return {"),f.writeLn("// ("+b(h.init,!1)+")"),f.writeLn('__class__: "'+j+"."+i+'",'),f.enter("initialize: function () {"),f.leave("},"),f.enter("__glue__: {"),f.enter("native: {"),f.enter("static: {"),e(g.traits,!0,!0),f.leave("},"),f.enter("instance: {"),e(h.traits,!0),f.leave("}"),f.leave("},"),f.enter("script: {"),f.writeLn("instance: Glue.ALL"),f.leave("}"),f.leave("}"),f.leave("};"),f.leave("}).call(this);"),f.writeLn("-------------------------------------------------------------- >8"),!0},traceClass:function(a){var c=this.writer,d=a.instanceInfo,e=d.name,f=Multiname.getAccessModifier(e);d.isFinal()&&(f+=" final"),d.isSealed()||(f+=" dynamic"),f+=d.isInterface()?" interface ":" class ",f+=e.getName(),d.superName&&"Object"!==d.superName.getName()&&(f+=" extends "+d.superName.getName()),d.interfaces.length&&(f+=" implements "+d.interfaces.map(function(a){return a.getName()}).join(", ")),c.enter(f+" {"),d.isInterface()||c.writeLn("public function "+e.getName()+"("+b(d.init)+") {}");var g;d.isInterface()&&(g=e.namespaces[0].uri+":"+e.name),this.traceTraits(a.traits,!0,g),this.traceTraits(d.traits,!1,g),c.leave("}")},traceMetadata:function(a){var b=this.writer;for(var c in a)if(a.hasOwnProperty(c)){if(0===c.indexOf("__"))continue;b.writeLn("["+c+"("+a[c].value.map(function(a){var b=a.key?a.key+"=":"";return b+'"'+a.value+'"'}).join(", ")+")]")}}},c}(),Shumway;!function(a){!function(b){function c(a,b,c){c.flags=b.flags,c.name=b.isRuntimeName()?a.pop():b.name,c.namespaces=b.isRuntimeNamespace()?[a.pop()]:b.namespaces}var d=(a.AVM2.ABC.OP,a.AVM2.Runtime.Scope),e=a.AVM2.Runtime.asCoerceByMultiname,f=a.AVM2.Runtime.asGetSlot,g=a.AVM2.Runtime.asSetSlot,h=a.AVM2.Runtime.asHasNext2,i=a.AVM2.Runtime.asCoerce,j=a.AVM2.Runtime.asCoerceString,k=a.AVM2.Runtime.asAsType,l=a.AVM2.Runtime.asTypeOf,m=a.AVM2.Runtime.asIsInstanceOf,n=a.AVM2.Runtime.asIsType,o=a.AVM2.Runtime.applyType,p=a.AVM2.Runtime.createFunction,q=a.AVM2.Runtime.createClass,r=a.AVM2.Runtime.getDescendants,s=a.AVM2.Runtime.checkFilter,t=a.AVM2.Runtime.asAdd,u=a.AVM2.Runtime.translateError,v=a.AVM2.Runtime.asCreateActivation,w=a.AVM2.Runtime.sliceArguments,x=a.ObjectUtilities.boxValue,y=a.ArrayUtilities.popManyInto,z=a.AVM2.Runtime.construct,A=a.AVM2.ABC.Multiname,B=function(){function a(a){this.parent=a,this.stack=[],this.isWith=[]
}return a.prototype.push=function(a,b){this.stack.push(a),this.isWith.push(!!b)},a.prototype.get=function(a){return this.stack[a]},a.prototype.clear=function(){this.stack.length=0,this.isWith.length=0},a.prototype.pop=function(){this.isWith.pop(),this.stack.pop()},a.prototype.topScope=function(){this.scopes||(this.scopes=[]);for(var a=this.parent,b=0;b<this.stack.length;b++){var c=this.stack[b],e=this.isWith[b],f=this.scopes[b];f&&f.parent===a&&f.object===c&&f.isWith===e||(f=this.scopes[b]=new d(a,c,e)),a=f}return a},a}(),C=function(){function b(){}return b.interpretMethod=function(b,d,C,D){Counter.count("Interpret Method");for(var E,F=d.abc,G=F.constantPool.ints,H=F.constantPool.uints,I=F.constantPool.doubles,J=F.constantPool.strings,K=F.methods,L=F.constantPool.multinames,M=F.applicationDomain,N=d.exceptions,O=[b],P=[],Q=new B(C),R=d.parameters.length,S=D.length,T=0;R>T;T++){var U=d.parameters[T];E=S>T?D[T]:U.value,U.type&&!U.type.isAnyName()&&(E=e(M,U.type,E)),O.push(E)}d.needsRest()?O.push(w(D,R)):d.needsArguments()&&O.push(w(D,0));var V,W,X,Y,Z,$,_=d.analysis.bytecodes,ab=[],bb=A.TEMPORARY;a:for(var cb=0,db=_.length;db>cb;)try{var eb=_[cb],fb=eb.op;switch(0|fb){case 3:throw P.pop();case 4:c(P,L[eb.index],bb),P.push(P.pop().asGetSuper(C,bb.namespaces,bb.name,bb.flags));break;case 5:E=P.pop(),c(P,L[eb.index],bb),P.pop().asSetSuper(C,bb.namespaces,bb.name,bb.flags,E);break;case 8:O[eb.index]=void 0;break;case 12:$=P.pop(),Z=P.pop(),cb=$>Z?cb+1:eb.offset;continue;case 24:$=P.pop(),Z=P.pop(),cb=Z>=$?eb.offset:cb+1;continue;case 13:$=P.pop(),Z=P.pop(),cb=$>=Z?cb+1:eb.offset;continue;case 23:$=P.pop(),Z=P.pop(),cb=Z>$?eb.offset:cb+1;continue;case 14:$=P.pop(),Z=P.pop(),cb=Z>$?cb+1:eb.offset;continue;case 22:$=P.pop(),Z=P.pop(),cb=$>=Z?eb.offset:cb+1;continue;case 15:$=P.pop(),Z=P.pop(),cb=Z>=$?cb+1:eb.offset;continue;case 21:$=P.pop(),Z=P.pop(),cb=$>Z?eb.offset:cb+1;continue;case 16:cb=eb.offset;continue;case 17:cb=P.pop()?eb.offset:cb+1;continue;case 18:cb=P.pop()?cb+1:eb.offset;continue;case 19:$=P.pop(),Z=P.pop(),cb=Z==$?eb.offset:cb+1;continue;case 20:$=P.pop(),Z=P.pop(),cb=Z!=$?eb.offset:cb+1;continue;case 25:$=P.pop(),Z=P.pop(),cb=Z===$?eb.offset:cb+1;continue;case 26:$=P.pop(),Z=P.pop(),cb=Z!==$?eb.offset:cb+1;continue;case 27:W=P.pop(),(0>W||W>=eb.offsets.length)&&(W=eb.offsets.length-1),cb=eb.offsets[W];continue;case 28:Q.push(x(P.pop()),!0);break;case 29:Q.pop();break;case 30:W=P.pop(),P[P.length-1]=x(P[P.length-1]).asNextName(W);break;case 35:W=P.pop(),P[P.length-1]=x(P[P.length-1]).asNextValue(W);break;case 50:Y=h(O[eb.object],O[eb.index]),O[eb.object]=Y.object,O[eb.index]=Y.index,P.push(!!Y.index);break;case 32:P.push(null);break;case 33:P.push(void 0);break;case 36:case 37:P.push(eb.value);break;case 44:P.push(J[eb.index]);break;case 45:P.push(G[eb.index]);break;case 46:P.push(H[eb.index]);break;case 47:P.push(I[eb.index]);break;case 38:P.push(!0);break;case 39:P.push(!1);break;case 40:P.push(0/0);break;case 41:P.pop();break;case 42:P.push(P[P.length-1]);break;case 43:V=P[P.length-1],P[P.length-1]=P[P.length-2],P[P.length-2]=V;break;case 48:Q.push(x(P.pop()),!1);break;case 64:P.push(p(K[eb.index],Q.topScope(),!0));break;case 65:y(P,eb.argCount,ab),V=P.pop(),P[P.length-1]=P[P.length-1].apply(V,ab);break;case 66:y(P,eb.argCount,ab),P[P.length-1]=z(P[P.length-1],ab);break;case 71:return;case 72:return d.returnType?e(M,d.returnType,P.pop()):P.pop();case 73:y(P,eb.argCount,ab),V=P.pop(),C.object.baseClass.instanceConstructorNoInitialize.apply(V,ab);break;case 74:y(P,eb.argCount,ab),c(P,L[eb.index],bb),V=x(P[P.length-1]),V=V.asConstructProperty(bb.namespaces,bb.name,bb.flags,ab),P[P.length-1]=V;break;case 75:a.Debug.notImplemented("OP.callsuperid");break;case 76:case 70:case 79:y(P,eb.argCount,ab),c(P,L[eb.index],bb),Y=x(P.pop()).asCallProperty(bb.namespaces,bb.name,bb.flags,76===fb,ab),79!==fb&&P.push(Y);break;case 69:case 78:y(P,eb.argCount,ab),c(P,L[eb.index],bb),Y=P.pop().asCallSuper(C,bb.namespaces,bb.name,bb.flags,ab),78!==fb&&P.push(Y);break;case 83:y(P,eb.argCount,ab),P[P.length-1]=o(M,P[P.length-1],ab);break;case 85:V={};for(var T=0;T<eb.argCount;T++)E=P.pop(),V[A.getPublicQualifiedName(P.pop())]=E;P.push(V);break;case 86:V=[],y(P,eb.argCount,ab),V.push.apply(V,ab),P.push(V);break;case 87:P.push(v(d));break;case 88:P[P.length-1]=q(F.classes[eb.index],P[P.length-1],Q.topScope());break;case 89:c(P,L[eb.index],bb),P.push(r(P.pop(),bb));break;case 90:P.push(N[eb.index].scopeObject);break;case 94:case 93:c(P,L[eb.index],bb),P.push(Q.topScope().findScopeProperty(bb.namespaces,bb.name,bb.flags,M,93===fb,!1));break;case 96:X=L[eb.index],V=Q.topScope().findScopeProperty(X.namespaces,X.name,X.flags,M,!0,!1),P.push(V.asGetProperty(X.namespaces,X.name,X.flags));break;case 104:case 97:E=P.pop(),c(P,L[eb.index],bb),x(P.pop()).asSetProperty(bb.namespaces,bb.name,bb.flags,E);break;case 98:P.push(O[eb.index]);break;case 99:O[eb.index]=P.pop();break;case 100:P.push(C.global.object);break;case 101:P.push(Q.get(eb.index));break;case 102:c(P,L[eb.index],bb),P[P.length-1]=x(P[P.length-1]).asGetProperty(bb.namespaces,bb.name,bb.flags);break;case 106:c(P,L[eb.index],bb),P[P.length-1]=x(P[P.length-1]).asDeleteProperty(bb.namespaces,bb.name,bb.flags);break;case 108:P[P.length-1]=f(P[P.length-1],eb.index);break;case 109:E=P.pop(),V=P.pop(),g(V,eb.index,E);break;case 112:P[P.length-1]=P[P.length-1]+"";break;case 131:case 115:P[P.length-1]|=0;break;case 136:case 116:P[P.length-1]>>>=0;break;case 132:case 117:P[P.length-1]=+P[P.length-1];break;case 129:case 118:P[P.length-1]=!!P[P.length-1];break;case 120:P[P.length-1]=s(P[P.length-1]);break;case 128:P[P.length-1]=i(M.getType(L[eb.index]),P[P.length-1]);break;case 130:break;case 133:P[P.length-1]=j(P[P.length-1]);break;case 135:P[P.length-2]=k(P.pop(),P[P.length-1]);break;case 137:V=P[P.length-1],P[P.length-1]=void 0==V?null:V;break;case 144:P[P.length-1]=-P[P.length-1];break;case 145:++P[P.length-1];break;case 146:++O[eb.index];break;case 147:--P[P.length-1];break;case 148:--O[eb.index];break;case 149:P[P.length-1]=l(P[P.length-1]);break;case 150:P[P.length-1]=!P[P.length-1];break;case 151:P[P.length-1]=~P[P.length-1];break;case 160:P[P.length-2]=t(P[P.length-2],P.pop());break;case 161:P[P.length-2]-=P.pop();break;case 162:P[P.length-2]*=P.pop();break;case 163:P[P.length-2]/=P.pop();break;case 164:P[P.length-2]%=P.pop();break;case 165:P[P.length-2]<<=P.pop();break;case 166:P[P.length-2]>>=P.pop();break;case 167:P[P.length-2]>>>=P.pop();break;case 168:P[P.length-2]&=P.pop();break;case 169:P[P.length-2]|=P.pop();break;case 170:P[P.length-2]^=P.pop();break;case 171:P[P.length-2]=P[P.length-2]==P.pop();break;case 172:P[P.length-2]=P[P.length-2]===P.pop();break;case 173:P[P.length-2]=P[P.length-2]<P.pop();break;case 174:P[P.length-2]=P[P.length-2]<=P.pop();break;case 175:P[P.length-2]=P[P.length-2]>P.pop();break;case 176:P[P.length-2]=P[P.length-2]>=P.pop();break;case 177:P[P.length-2]=m(P.pop(),P[P.length-1]);break;case 178:P[P.length-1]=n(M.getType(L[eb.index]),P[P.length-1]);break;case 179:P[P.length-2]=n(P.pop(),P[P.length-1]);break;case 180:P[P.length-2]=x(P.pop()).asHasProperty(null,P[P.length-1]);break;case 192:P[P.length-1]=(0|P[P.length-1])+1;break;case 193:P[P.length-1]=(0|P[P.length-1])-1;break;case 194:O[eb.index]=(0|O[eb.index])+1;break;case 195:O[eb.index]=(0|O[eb.index])-1;break;case 196:P[P.length-1]=~P[P.length-1];break;case 197:P[P.length-2]=P[P.length-2]+P.pop()|0;break;case 198:P[P.length-2]=P[P.length-2]-P.pop()|0;break;case 199:P[P.length-2]=P[P.length-2]*P.pop()|0;break;case 208:case 209:case 210:case 211:P.push(O[fb-208]);break;case 212:case 213:case 214:case 215:O[fb-212]=P.pop();break;case 239:case 240:case 241:break;default:a.Debug.notImplemented(a.AVM2.opcodeName(fb))}cb++}catch(gb){if(N.length<1)throw gb;gb=u(M,gb);for(var T=0,hb=N.length;hb>T;T++){var ib=N[T];if(cb>=ib.start&&cb<=ib.end&&(!ib.typeName||M.getType(ib.typeName).isInstance(gb))){P.length=0,P.push(gb),Q.clear(),cb=ib.offset;continue a}}throw gb}},b}();b.Interpreter=C}(a.AVM2||(a.AVM2={}));a.AVM2}(Shumway||(Shumway={})),Shumway.AVM2.Runtime.enableVerifier.value=!0,release=!0,Shumway.myLoad=function(){this.data=function(){if(this.xhr.responseType&&this.xhr.responseType.length>1)return this.xhr.response;var dataStr=this.xhr.response;if("arraybuffer"==this.responseType){for(var _buffer=[],i=0;i<dataStr.length;i++)_buffer[i]=255&dataStr.charCodeAt(i);var _data=new Uint8Array(_buffer).buffer;return _data}return"json"==this.responseType?(eval("var _data="+dataStr),_data):dataStr}},Shumway.myLoad.prototype={init:function(a,b,c){if(this.url=CROSSDOMAIN+a,this.async=b,this.responseType=c,window.XMLHttpRequest)this.xhr=new XMLHttpRequest;else{if(!window.ActiveXObjcet)return!1;this.xhr=new window.ActiveXObjcet("Microsoft.XMLHttp")}this.xhr.open("GET",this.url,this.async);try{this.xhr.responseType=this.responseType}catch(d){}return"arraybuffer"!=this.responseType||this.xhr.responseType||(this.xhr.overrideMimeType?this.xhr.overrideMimeType("text/plain; charset=x-user-defined"):this.xhr.setRequestHeaders("Content-Type","text/plain;charset=x-user-defined")),!0},load:function(){this.xhr.open("GET",this.url)}};var avm2Root=SHUMWAY_ROOT+"avm2/",builtinPath=avm2Root+"generated/builtin/builtin.abc",avm1Path=avm2Root+"generated/avm1lib/avm1lib.abc",BinaryFileReader=function(){function a(a,b){this.url=a,this.responseType=b||"arraybuffer"}return a.prototype={readAll:function(a,b){var c=new Shumway.myLoad;c.init(this.url,!0,this.responseType),a&&(c.xhr.onprogress=function(b){a(c.data(),b.loaded,b.total)}),c.xhr.onreadystatechange=function(){if(4===c.xhr.readyState){if(200!==c.xhr.status&&0!==c.xhr.status)return unexpected("Path: "+c.url+" not found."),void b(null,c.xhr.statusText);b(c.data())}},c.xhr.send(null)},readAsync:function(a,b,c,d,e){var f=new Shumway.myLoad;f.init(this.url,!0,"arraybuffer"),f.xhr.onreadystatechange=function(){if(2===f.xhr.readyState&&e&&e(this.url,f.xhr.status,f.xhr.getAllResponseHeaders()),4===f.xhr.readyState){200!==f.xhr.status&&0!==f.xhr.status&&b(f.xhr.statusText);var g=!0;g&&a(new Uint8Array(f.data()),{loaded:f.data().byteLength,total:f.data().byteLength}),d&&d()}else 2===f.xhr.readyState&&c&&c()},f.xhr.send(null)}},a}(),libraryAbcs,avm2,MAX_SNAP_DRAW_SCALE_TO_CACHE=8,CACHE_SNAP_DRAW_AFTER=3,BitmapDefinition=function(){function a(a){if(this._bitmapData&&(this._bitmapData._changeNotificationTarget=null),this._bitmapData=a,this._bitmapData&&(this._bitmapData._changeNotificationTarget=this),a){var b=a._drawable;this._bbox={xMin:0,yMin:0,xMax:20*b.width,yMax:20*b.height}}else this._bbox={xMin:0,yMin:0,xMax:0,yMax:0};this._drawableChanged(),this._invalidateBounds(),this._invalidateTransform()}return{__class__:"flash.display.Bitmap",draw:function(a,b,c){if(this._bitmapData){var d;if(a.save(),"auto"===this._pixelSnapping||"always"===this._pixelSnapping){var e,f=this._getConcatenatedTransform(null,!0),g=.001,h=Math.abs(Math.round(f.a)),i=Math.abs(Math.round(f.d));if(h>=1&&MAX_SNAP_DRAW_SCALE_TO_CACHE>=h&&i>=1&&MAX_SNAP_DRAW_SCALE_TO_CACHE>=i&&Math.abs(Math.abs(f.a)/h-1)<=g&&Math.abs(Math.abs(f.d)/i-1)<=g&&Math.abs(f.b)<=g&&Math.abs(f.c)<=g)if(1===h&&1===i)e=!0;else{var j=h+"x"+i;this._snapImageCache.size!==j&&(this._snapImageCache.size=j,this._snapImageCache.hits=0,this._snapImageCache.image=null),++this._snapImageCache.hits===CACHE_SNAP_DRAW_AFTER&&this._cacheSnapImage(j,h,i),d=this._snapImageCache.image,e=!!d}else e=!1;e&&a.setTransform(f.a<0?-1:1,0,0,f.d<0?-1:1,f.tx/20|0,f.ty/20|0)}c.setAlpha(a,!0),a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=this._smoothing,a.drawImage(d||this._bitmapData._getDrawable(),0,0),a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=!1,a.restore(),traceRenderer.value&&frameWriter.writeLn("Bitmap.draw() snapping: "+this._pixelSnapping+", dimensions: "+this._bitmapData._drawable.width+" x "+this._bitmapData._drawable.height)}},_drawableChanged:function(){this._invalidate(),this._snapImageCache.image=null,this._snapImageCache.hints=0},_cacheSnapImage:function(a,b,c){Counter.count("Cache scaled image");var d=this._bitmapData._getDrawable(),e=document.createElement("canvas");e.width=b*d.width,e.height=c*d.height;var f=e.getContext("2d");f.imageSmoothingEnabled=f.mozImageSmoothingEnabled=this._smoothing,f.drawImage(d,0,0,d.width,d.height,0,0,e.width,e.height);var g=this._snapImageCache,h=document.createElement("img");g._tmp=[e,h],"toBlob"in e?e.toBlob(function(b){g.size===a&&(h.onload=function(){URL.revokeObjectURL(b),g.size===a&&(g.image=h)},h.src=URL.createObjectURL(b))}):(h.onload=function(){g.size===a&&(g.image=h)},h.src=e.toDataURL())},initialize:function(){},__glue__:{"native":{"static":{},instance:{ctor:function(b,c,d){if(this._pixelSnapping="never"===c||"always"===c?c:"auto",this._smoothing=!!d,this._snapImageCache={hits:0,size:"",image:null},!b&&this.symbol){var e=this.symbol;b=new flash.display.BitmapData(e.width,e.height,!0,0),b._ctx.imageSmoothingEnabled=this._smoothing,b._ctx.mozImageSmoothingEnabled=this._smoothing,b._ctx.drawImage(e.img,0,0),b._ctx.imageSmoothingEnabled=!1,b._ctx.mozImageSmoothingEnabled=!1}a.call(this,b||null)},pixelSnapping:{get:function(){return this._pixelSnapping},set:function(a){this._pixelSnapping=a}},smoothing:{get:function(){return this._smoothing},set:function(a){this._smoothing=a}},bitmapData:{get:function(){return this._bitmapData},set:a}}}}}}.call(this),CACHE_DRAWABLE_AFTER=10,BitmapDataDefinition=function(){function a(a,b,c,d,e,f){255>f&&a.clearRect(b,c,d,e),f>0&&a.fillRect(b,c,d,e)}var b={__class__:"flash.display.BitmapData",initialize:function(){this._changeNotificationTarget=null,this._locked=!1,this._requested=0,this._cache=null,this.symbol&&(this._img=this.symbol.img,this._skipCopyToCanvas=this.symbol.skipCopyToCanvas)},_checkCanvas:function(){if(null===this._drawable)throw ArgumentError()},ctor:function(a,b,c,d){if(this._img?(a=this._img.naturalWidth||this._img.width,b=this._img.naturalHeight||this._img.height):(isNaN(a+b)||0>=a||0>=b)&&throwError("ArgumentError",Errors.ArgumentError),this._transparent=void 0===c?!0:!!c,this._backgroundColor=void 0===d?4294967295:d,this._transparent||(this._backgroundColor|=4278190080),this._skipCopyToCanvas)this._drawable=this._img;else{var e=document.createElement("canvas");this._ctx=e.getContext("2d"),e.width=0|a,e.height=0|b,this._drawable=e,(!this._transparent||!this._img&&this._backgroundColor)&&this.fillRect(new flash.geom.Rectangle(0,0,0|a,0|b),this._backgroundColor),this._img&&this._ctx.drawImage(this._img,0,0)}},dispose:function(){this._ctx=null,this._drawable.width=0,this._drawable.height=0,this._drawable=null},draw:function(a,b,c,d,e,f){this._checkCanvas();var g=this._ctx;g.save(),g.beginPath(),e&&e.width>0&&e.height>0&&(g.rect(e.x,e.y,e.width,e.height),g.clip()),b&&g.transform(b.a,b.b,b.c,b.d,b.tx,b.ty),g.globalCompositeOperation=getBlendModeName(d),g.imageSmoothingEnabled=g.mozImageSmoothingEnabled=!!f,flash.display.BitmapData.class.isInstanceOf(a)?g.drawImage(a._drawable,0,0):new RenderVisitor(a,g,null,!0).startFragment(b),g.imageSmoothingEnabled=g.mozImageSmoothingEnabled=!1,g.restore(),this._invalidate()},fillRect:function(b,c){this._checkCanvas(),this._transparent||(c|=4278190080);var d=this._ctx;d.fillStyle=argbUintToStr(c),a(d,b.x,b.y,b.width,b.height,c>>>24&255),this._invalidate()},getPixel:function(a,b){this._checkCanvas();var c=this._ctx.getImageData(a,b,1,1).data;return dataToRGB(c)},getPixel32:function(a,b){this._checkCanvas();var c=this._ctx.getImageData(a,b,1,1).data;return dataToARGB(c)},_invalidate:function(a){a&&somewhatImplemented("BitmapData._invalidate(changeRect)"),this._locked||(this._changeNotificationTarget&&this._changeNotificationTarget._drawableChanged(),this._requested=0,this._cache=null)},_getDrawable:function(){if(this._img===this._drawable)return this._drawable;if(this._requested++,this._requested>=CACHE_DRAWABLE_AFTER){if(!this._cache){Counter.count("Cache drawable");var a=document.createElement("img");"toBlob"in this._drawable?this._drawable.toBlob(function(b){a.src=URL.createObjectURL(b),a.onload=function(){URL.revokeObjectURL(b)}}):a.src=this._drawable.toDataURL(),this._cache=a}if(this._cache.width>0)return this._cache}return this._drawable},setPixel:function(a,b,c){this.fillRect({x:a,y:b,width:1,height:1},4278190080|c),this._invalidate()},setPixel32:function(a,b,c){this.fillRect({x:a,y:b,width:1,height:1},c),this._invalidate()},copyPixels:function(a,b,c,d,e,f){d&&notImplemented("BitmapData.copyPixels w/ alpha");var g=b.width,h=b.height,i=b.x,j=b.y,k=c.x,l=c.y,m=-Math.min(0,i,k),n=-Math.min(0,j,l),o=Math.min(0,this._ctx.canvas.width-k-g,a._drawable.width-i-g)-m,p=Math.min(0,this._ctx.canvas.height-l-h,a._drawable.height-j-h)-n;f||this._ctx.clearRect(k,l,g,h),g+o>0&&h+p>0&&this._ctx.drawImage(a._drawable,i+m,j+n,g+o,h+p,k+m,l+n,g+o,h+p),this._invalidate()},lock:function(){this._locked=!0},unlock:function(a){this._locked=!1,this._invalidate(a)},clone:function(){this._checkCanvas();var a=new flash.display.BitmapData(this._drawable.width,this._drawable.height,!0,0);return a._ctx.drawImage(this._drawable,0,0),a},scroll:function(b,c){this._checkCanvas(),this._ctx.draw(this._drawable,b,c),this._ctx.save();var d=this._img?0:this._backgroundColor;this._transparent||(d|=4278190080);var e=d>>>24&255;this._ctx.fillStyle=argbUintToStr(d);var f=this._drawable.width,g=this._drawable.height;b>0?a(this._ctx,0,0,b,g,e):0>b&&a(this._ctx,f+b,0,-b,g,e),c>0?a(this._ctx,0,0,f,c,e):0>c&&a(this._ctx,g+c,f,-c,e),this._ctx.restore(),this._invalidate()},get width(){return this._drawable.width},get height(){return this._drawable.height}},c=Object.getOwnPropertyDescriptor;return b.__glue__={"native":{instance:{ctor:b.ctor,fillRect:b.fillRect,dispose:b.dispose,getPixel:b.getPixel,getPixel32:b.getPixel32,setPixel:b.setPixel,setPixel32:b.setPixel32,copyPixels:b.copyPixels,lock:b.lock,unlock:b.unlock,draw:b.draw,clone:b.clone,scroll:b.scroll,width:c(b,"width"),height:c(b,"height")}}},b}.call(this),DisplayObjectDefinition=function(){function a(){return"instance"+c++}var b,c=1,d={advanceFrame:!1,enterFrame:!0,constructChildren:!1,frameConstructed:!0,executeFrame:!1,exitFrame:!0,render:!0},e={x:0,y:0},f={__class__:"flash.display.DisplayObject",initialize:function(){var a=flash.display.BlendMode.class;this._alpha=1,this._animated=!1,this._bbox=null,this._bitmap=null,this._blendMode=a.NORMAL,this._bounds={xMin:0,xMax:0,yMin:0,yMax:0,invalid:!0},this._cacheAsBitmap=!1,this._children=[],this._clipDepth=null,this._currentTransform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._concatenatedTransform={a:1,b:0,c:0,d:1,tx:0,ty:0,invalid:!0},this._current3DTransform=null,this._cxform=null,this._graphics=null,this._filters=[],this._loader=null,this._mouseChildren=!0,this._mouseOver=!1,this._mouseX=0,this._mouseY=0,this._name=null,this._opaqueBackground=null,this._owned=!1,this._parent=null,this._rotation=0,this._rotationCos=1,this._rotationSin=0,this._scale9Grid=null,this._scaleX=1,this._scaleY=1,this._stage=null,this._visible=!0,this._hidden=!1,this._wasCachedAsBitmap=!1,this._destroyed=!1,this._maskedObject=null,this._scrollRect=null,this._invalid=!1,this._region=null,this._level=-1,this._index=-1,this._depth=-1,this._isContainer=!1,this._invisible=!1,this._zindex=0,b=[a.NORMAL,a.NORMAL,a.LAYER,a.MULTIPLY,a.SCREEN,a.LIGHTEN,a.DARKEN,a.DIFFERENCE,a.ADD,a.SUBTRACT,a.INVERT,a.ALPHA,a.ERASE,a.OVERLAY,a.HARDLIGHT,a.SHADER];var c=this.symbol;if(c){this._animated=c.animated||!1,this._bbox=c.bbox||null,this._blendMode=this._resolveBlendMode(c.blendMode),this._children=c.children||[],this._clipDepth=c.clipDepth||null,this._cxform=c.cxform||null,this._loader=c.loader||null,this._name=c.name||null,this._owned=c.owned||!1,this._parent=c.parent||null,this._level=isNaN(c.level)?-1:c.level,this._index=isNaN(c.index)?-1:c.index,this._depth=isNaN(c.depth)?-1:c.depth,this._root=c.root||null,this._stage=c.stage||null;var d=c.scale9Grid;d&&(this._scale9Grid=new flash.geom.Rectangle(d.left,d.top,d.right-d.left,d.bottom-d.top));var e=c.currentTransform;e&&this._setTransformMatrix(e,!1)}this._accessibilityProperties=null;var f=this;this._onBroadcastMessage=function(a){var b=f._listeners;b[a]&&f._dispatchEvent(a)}},_addEventListener:function(a,b,c,e){return d[a]===!1?void avm2.systemDomain.onMessage.register(a,b):(a in d&&!this._listeners[a]&&avm2.systemDomain.onMessage.register(a,this._onBroadcastMessage),void this._addEventListenerImpl(a,b,c,e))},_removeEventListener:function(a,b,c){return d[a]===!1?void avm2.systemDomain.onMessage.unregister(a,b):(this._removeEventListenerImpl(a,b,c),void(a in d&&!this._listeners[a]&&avm2.systemDomain.onMessage.unregister(a,this._onBroadcastMessage)))},_resolveBlendMode:function(a){return b[a]||flash.display.BlendMode.class.NORMAL},_getConcatenatedTransform:function(a,b){var c=this._stage;if(this===this._stage)return b?this._concatenatedTransform:this._currentTransform;if(a===this._parent)return this._currentTransform;for(var d,e,f,g=null,h=this;h!==c;)h._concatenatedTransform.invalid&&(g=h),h===a&&(f=h._concatenatedTransform),h=h._parent;if(g)if(this._parent===c)d=this._concatenatedTransform,e=this._currentTransform,d.a=e.a,d.b=e.b,d.c=e.c,d.d=e.d,d.tx=e.tx,d.ty=e.ty;else{for(var i=[],h=this;h!==g;)i.push(h),h=h._parent;var j=g;do{var k=j._parent;if(d=j._concatenatedTransform,e=j._currentTransform,k){if(k!==c){var l=k._concatenatedTransform;d.a=e.a*l.a+e.b*l.c,d.b=e.a*l.b+e.b*l.d,d.c=e.c*l.a+e.d*l.c,d.d=e.d*l.d+e.c*l.b,d.tx=e.tx*l.a+l.tx+e.ty*l.c,d.ty=e.ty*l.d+l.ty+e.tx*l.b}}else d.a=e.a,d.b=e.b,d.c=e.c,d.d=e.d,d.tx=e.tx,d.ty=e.ty;d.invalid=!1;for(var m=i.pop(),n=j._children,o=0;o<n.length;o++){var p=n[o];p!==m&&(p._concatenatedTransform.invalid=!0)}j=m}while(j)}else d=this._concatenatedTransform;if(a&&a!==this._stage){e=f||a._getConcatenatedTransform(null,!1);var q=1,r=0,s=0,t=1,u=0,v=0;if(e.b||e.c){var w=1/(e.a*e.d-e.b*e.c);q=e.d*w,r=-e.b*w,s=-e.c*w,t=e.a*w,u=-(q*e.tx+s*e.ty),v=-(r*e.tx+t*e.ty)}else q=1/e.a,t=1/e.d,u=e.tx*-q,v=e.ty*-t;return{a:q*d.a+s*d.b,b:r*d.a+t*d.b,c:q*d.c+s*d.d,d:r*d.c+t*d.d,tx:q*d.tx+s*d.ty+u,ty:r*d.tx+t*d.ty+v}}return b&&c?(e=c._concatenatedTransform,{a:d.a*e.a,b:d.b*e.d,c:d.c*e.a,d:d.d*e.d,tx:d.tx*e.a+e.tx,ty:d.ty*e.d+e.ty}):d},_applyCurrentTransform:function(a){var b=this._getConcatenatedTransform(null,!1),c=a.x,d=a.y;a.x=b.a*c+b.c*d+b.tx|0,a.y=b.d*d+b.b*c+b.ty|0},_applyConcatenatedInverseTransform:function(a){var b=this._getConcatenatedTransform(null,!1),c=1/(b.a*b.d-b.b*b.c),d=a.x-b.tx,e=a.y-b.ty;a.x=(b.d*d-b.c*e)*c|0,a.y=(b.a*e-b.b*d)*c|0},_hitTest:function(a,b,c,d,f){if(a){e.x=b,e.y=c,this._applyConcatenatedInverseTransform(e);var g=this._getContentBounds();if(!(e.x>=g.xMin&&e.x<g.xMax&&e.y>=g.yMin&&e.y<g.yMax))return!1;if(!d||!this._graphics)return!0;if(this._graphics)for(var h=this._graphics._paths,i=0,j=h.length;j>i;i++){var k=h[i];if(k.isPointInPath(e.x,e.y))return!0;if(k.strokeStyle){var l=k._strokePath;if(l||(l=k.strokePath(k.drawingStyles),k._strokePath=l),l.isPointInPath(e.x,e.y))return!0}}for(var m=this._children,i=0,j=m.length;j>i;i++){var n=m[i];if(n._hitTest&&n._hitTest(!0,b,c,!0,null))return!0}return!1}var o=this.getBounds(this._stage),p=f.getBounds(f._stage);b=Math.max(o.xMin,p.xMin),c=Math.max(o.yMin,p.yMin);var q=Math.min(o.xMax,p.xMax)-b,r=Math.min(o.yMax,p.yMax)-c;return q>0&&r>0},_invalidate:function(){this._invalid=!0},_invalidateBounds:function(){for(var a=this;a&&!a._bounds.invalid;)a._bounds.invalid=!0,a=a._parent},_invalidateTransform:function(){this._concatenatedTransform.invalid=!0,this._parent&&this._parent._invalidateBounds()},_setTransformMatrix:function(a,b){var c,d,e=a.a,f=a.b,g=a.c,h=a.d;b?(c=20*a.tx|0,d=20*a.ty|0):(c=a.tx,d=a.ty);var i=0!==e?Math.atan(f/e):f>0?Math.PI/2:-Math.PI/2;this._rotation=180*i/Math.PI,this._rotationCos=Math.cos(i),this._rotationSin=Math.sin(i);var j=Math.sqrt(e*e+f*f);this._scaleX=e>0?j:-j;var k=Math.sqrt(h*h+g*g);this._scaleY=h>0?k:-k;var l=this._currentTransform;l.a=e,l.b=f,l.c=g,l.d=h,l.tx=c,l.ty=d,this._invalidateTransform()},get accessibilityProperties(){return this._accessibilityProperties},set accessibilityProperties(a){this._accessibilityProperties=a},get alpha(){return this._alpha},set alpha(a){a!==this._alpha&&(this._invalidate(),this._alpha=a,this._animated=!1)},get blendMode(){return this._blendMode},set blendMode(a){b.indexOf(a)>=0?this._blendMode=a:throwError("ArgumentError",Errors.InvalidEnumError,"blendMode"),this._animated=!1},get cacheAsBitmap(){return this._cacheAsBitmap},set cacheAsBitmap(a){this._cacheAsBitmap=this._filters.length?!0:a,this._animated=!1},get filters(){return this._filters},set filters(a){a.length?(this._filters.length||(this._wasCachedAsBitmap=this._cacheAsBitmap),this._cacheAsBitmap=!0):this._cacheAsBitmap=this._wasCachedAsBitmap,this._filters=a,this._animated=!1},get height(){var a=this._getContentBounds(),b=this._currentTransform;return Math.abs(b.b)*(a.xMax-a.xMin)+Math.abs(b.d)*(a.yMax-a.yMin)|0},set height(a){if(!(0>a)){var b=Math.abs(this._rotationCos),c=Math.abs(this._rotationSin),d=this._getContentBounds(),e=c*(d.xMax-d.xMin)+b*(d.yMax-d.yMin);if(e){var f=b*(d.xMax-d.xMin)+c*(d.yMax-d.yMin);this.scaleX=this.width/f,this.scaleY=a/e}}},get loaderInfo(){return this._loader&&this._loader._contentLoaderInfo||this._parent.loaderInfo},get mask(){return this._mask},set mask(a){this._mask!==a&&(this._invalidate(),a&&a._maskedObject&&(a._maskedObject.mask=null),this._mask=a,a&&(a._maskedObject=this),this._animated=!1)},get name(){return this._name||(this._name=a())},set name(a){this._name=a},get mouseX(){return this._stage?(e.x=this._stage._mouseX,e.y=this._stage._mouseY,this._applyConcatenatedInverseTransform(e),e.x):0},get mouseY(){return this._stage?(e.x=this._stage._mouseX,e.y=this._stage._mouseY,this._applyConcatenatedInverseTransform(e),e.y):0},get opaqueBackground(){return this._opaqueBackground},set opaqueBackground(a){this._opaqueBackground=a,this._animated=!1},get parent(){return this._index>-1?this._parent:null},get root(){return this._stage&&this._stage._root},get rotation(){return this._rotation},set rotation(a){if(a%=360,a>180&&(a-=360),a!==this._rotation){this._invalidate(),this._invalidateTransform(),this._rotation=a;var b,c;switch(a){case 0:case 360:b=1,c=0;break;case 90:case-270:b=0,c=1;break;case 180:case-180:b=-1,c=0;break;case 270:case-90:b=0,c=-1;break;default:var d=this._rotation/180*Math.PI;b=Math.cos(d),c=Math.sin(d)}this._rotationCos=b,this._rotationSin=c;var e=this._currentTransform;e.a=b*this._scaleX,e.b=c*this._scaleX,e.c=-c*this._scaleY,e.d=b*this._scaleY,this._animated=!1}},get rotationX(){return 0},set rotationX(a){somewhatImplemented("DisplayObject.rotationX")},get rotationY(){return 0},set rotationY(a){somewhatImplemented("DisplayObject.rotationY")},get rotationZ(){return this.rotation},set rotationZ(a){this.rotation=a,somewhatImplemented("DisplayObject.rotationZ")},get stage(){return this._stage},get scaleX(){return this._scaleX},set scaleX(a){if(a!==this._scaleX){this._invalidate(),this._invalidateTransform(),this._scaleX=a;var b=this._currentTransform;b.a=this._rotationCos*a,b.b=this._rotationSin*a,this._animated=!1}},get scaleY(){return this._scaleY},set scaleY(a){if(a!==this._scaleY){this._invalidate(),this._invalidateTransform(),this._scaleY=a;var b=this._currentTransform;b.c=-this._rotationSin*a,b.d=this._rotationCos*a,this._animated=!1}},get scaleZ(){return 1},set scaleZ(a){somewhatImplemented("DisplayObject.scaleZ")},get scale9Grid(){return this._scale9Grid},set scale9Grid(a){somewhatImplemented("DisplayObject.scale9Grid"),this._scale9Grid=a,this._animated=!1},get scrollRect(){return this._scrollRect},set scrollRect(a){somewhatImplemented("DisplayObject.scrollRect"),this._scrollRect=a},get transform(){return new flash.geom.Transform(this)},set transform(a){var b=this.transform;b.colorTransform=a.colorTransform,a.matrix3D?b.matrix3D=a.matrix3D:b.matrix=a.matrix},get visible(){return this._visible},set visible(a){a!==this._visible&&(this._invalidate(),this._visible=a,this._animated=!1)},get width(){var a=this._getContentBounds(),b=this._currentTransform;return Math.abs(b.a)*(a.xMax-a.xMin)+Math.abs(b.c)*(a.yMax-a.yMin)|0},set width(a){if(!(0>a)){var b=Math.abs(this._rotationCos),c=Math.abs(this._rotationSin),d=this._getContentBounds(),e=b*(d.xMax-d.xMin)+c*(d.yMax-d.yMin);if(e){var f=c*(d.xMax-d.xMin)+b*(d.yMax-d.yMin);this.scaleY=this.height/f,this.scaleX=a/e}}},get x(){return this._currentTransform.tx},set x(a){a!==this._currentTransform.tx&&(this._invalidate(),this._invalidateTransform(),this._currentTransform.tx=a,this._animated=!1)},get y(){return this._currentTransform.ty},set y(a){a!==this._currentTransform.ty&&(this._invalidate(),this._invalidateTransform(),this._currentTransform.ty=a,this._animated=!1)},get z(){return 0},set z(a){somewhatImplemented("DisplayObject.z")},_getContentBounds:function(){var a=this._bounds;if(a.invalid){var b=this._bbox,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MAX_VALUE,f=Number.MIN_VALUE;if(b)c=b.xMin,d=b.xMax,e=b.yMin,f=b.yMax;else{for(var g=this._children,h=g.length,i=0;h>i;i++){var j=g[i];if(flash.display.DisplayObject.class.isInstanceOf(j)){var k=j.getBounds(this),l=k.xMin,m=k.yMin,n=k.xMax,o=k.yMax;c=Math.min(c,l,n),d=Math.max(d,l,n),e=Math.min(e,m,o),f=Math.max(f,m,o)}}if(this._graphics){var k=this._graphics._getBounds(!0);if(k.xMin!==k.xMax&&k.yMin!==k.yMax){var l=k.xMin,m=k.yMin,n=k.xMax,o=k.yMax;c=Math.min(c,l,n),d=Math.max(d,l,n),e=Math.min(e,m,o),f=Math.max(f,m,o)}}}c===Number.MAX_VALUE&&(c=d=e=f=0),a.xMin=c,a.xMax=d,a.yMin=e,a.yMax=f,a.invalid=!1}return a},_getRegion:function(a){var b,c=this._filters;if(c.length){var d=Number.MAX_VALUE,e=Number.MIN_VALUE,f=Number.MAX_VALUE,g=Number.MIN_VALUE;this._graphics&&(b=this._graphics._getBounds(!0),b&&(d=b.xMin,e=b.xMax,f=b.yMin,g=b.yMax));for(var h=this._children,i=0;i<h.length;i++){{h[i]}b=h[i]._getRegion(this),b.xMin<d&&(d=b.xMin),b.xMax>e&&(e=b.xMax),b.yMin<f&&(f=b.yMin),b.yMax>g&&(g=b.yMax)}if(d===Number.MAX_VALUE)return{xMin:0,xMax:0,yMin:0,yMax:0};b={xMin:d,xMax:e,yMin:f,yMax:g};for(var i=0;i<c.length;i++)c[i]._updateFilterBounds(b)}else b=this._graphics?this._graphics._getBounds(!0):this._getContentBounds();return this._getTransformedRect(b,a)},getBounds:function(a){return this._getTransformedRect(this._getContentBounds(),a)},_getTransformedRect:function(a,b){if(!b||b===this)return a;var c=a.xMin,d=a.xMax,e=a.yMin,f=a.yMax;if(d-c===0||f-e===0)return{xMin:0,yMin:0,xMax:0,yMax:0};var g=b&&!flash.display.DisplayObject.class.isInstanceOf(b)?b:this._getConcatenatedTransform(b,!1),h=g.a*c+g.c*e+g.tx|0,i=g.b*c+g.d*e+g.ty|0,j=g.a*d+g.c*e+g.tx|0,k=g.b*d+g.d*e+g.ty|0,l=g.a*d+g.c*f+g.tx|0,m=g.b*d+g.d*f+g.ty|0,n=g.a*c+g.c*f+g.tx|0,o=g.b*c+g.d*f+g.ty|0,p=0;return h>j&&(p=h,h=j,j=p),l>n&&(p=l,l=n,n=p),c=l>h?h:l,d=j>n?j:n,i>k&&(p=i,i=k,k=p),m>o&&(p=m,m=o,o=p),e=m>i?i:m,f=k>o?k:o,{xMin:c,yMin:e,xMax:d,yMax:f}},hitTestObject:function(a){return this._hitTest(!1,0,0,!1,a)},hitTestPoint:function(a,b,c){return this._hitTest(!0,a,b,c,null)},destroy:function(){this._destroyed||(this._destroyed=!0,this.cleanupBroadcastListeners())},cleanupBroadcastListeners:function(){var a=this._listeners;for(var b in a)avm2.systemDomain.onMessage.unregister(b,this._onBroadcastMessage)}},g=Object.getOwnPropertyDescriptor;return f.__glue__={"native":{instance:{root:g(f,"root"),stage:g(f,"stage"),name:g(f,"name"),parent:g(f,"parent"),mask:g(f,"mask"),visible:g(f,"visible"),x:{get:function(){return this.x/20},set:function(a){this.x=20*a|0}},y:{get:function(){return this.y/20},set:function(a){this.y=20*a|0}},z:{get:function(){return this.z/20},set:function(a){this.z=20*a|0}},scaleX:g(f,"scaleX"),scaleY:g(f,"scaleY"),scaleZ:g(f,"scaleZ"),mouseX:{get:function(){return this.mouseX/20},set:function(a){this.mouseX=20*a|0}},mouseY:{get:function(){return this.mouseY/20},set:function(a){this.mouseY=20*a|0}},rotation:g(f,"rotation"),rotationX:g(f,"rotationX"),rotationY:g(f,"rotationY"),rotationZ:g(f,"rotationZ"),alpha:g(f,"alpha"),width:{get:function(){return this.width/20
},set:function(a){this.width=20*a|0}},height:{get:function(){return this.height/20},set:function(a){this.height=20*a|0}},_hitTest:function(a,b,c,d,e){return b=20*b|0,c=20*c|0,this._hitTest(a,b,c,d,e)},cacheAsBitmap:g(f,"cacheAsBitmap"),opaqueBackground:g(f,"opaqueBackground"),scrollRect:g(f,"scrollRect"),filters:g(f,"filters"),blendMode:g(f,"blendMode"),transform:g(f,"transform"),scale9Grid:g(f,"scale9Grid"),loaderInfo:g(f,"loaderInfo"),accessibilityProperties:g(f,"accessibilityProperties"),globalToLocal:function(a){return e.x=20*a.x|0,e.y=20*a.y|0,this._applyConcatenatedInverseTransform(e),new flash.geom.Point(e.x/20,e.y/20)},localToGlobal:function(a){return e.x=20*a.x|0,e.y=20*a.y|0,this._applyCurrentTransform(e),new flash.geom.Point(e.x/20,e.y/20)},getBounds:function(a){var b=this.getBounds(a);return new flash.geom.Rectangle(b.xMin/20,b.yMin/20,(b.xMax-b.xMin)/20,(b.yMax-b.yMin)/20)},getRect:function(a){somewhatImplemented("DisplayObject.getRect");var b=this.getBounds(a);return new flash.geom.Rectangle(b.xMin/20,b.yMin/20,(b.xMax-b.xMin)/20,(b.yMax-b.yMin)/20)}}}},f}.call(this),DisplayObjectContainerDefinition=function(){var a={get mouseChildren(){return this._mouseChildren},set mouseChildren(a){this._mouseChildren=a},get numChildren(){return this._children.length},get tabChildren(){return this._tabChildren},set tabChildren(a){this._tabChildren=a},get textSnapshot(){notImplemented()},addChild:function(a){return this.addChildAt(a,this._children.length)},addChildAt:function(b,c){if(b===this&&throwError("ArgumentError",Errors.CantAddSelfError),b._parent===this)return this.setChildIndex(b,c);var d=this._children;if((0>c||c>d.length)&&throwError("RangeError",Errors.ParamRangeError),b._index>-1){var e=avm2.systemDomain.getClass("flash.display.Loader");e.isInstanceOf(b._parent)?a.removeChild.call(b._parent,b):b._parent.removeChild(b)}if(!this._sparse)for(var f=d.length;f&&f>c;f--)d[f-1]._index++;return d.splice(c,0,b),b._invalidateTransform(),b._owned=!1,b._parent=this,b._stage=this._stage,b._index=c,b._dispatchEvent("added",void 0,!0),this._stage&&this._stage._addToStage(b),b},areInaccessibleObjectsUnderPoint:function(){notImplemented()},contains:function(a){return a._parent===this},getChildAt:function(a){var b=this._children;(0>a||a>b.length)&&throwError("RangeError",Errors.ParamRangeError);var c=b[a];return flash.display.DisplayObject.class.isInstanceOf(c)?c:null},getChildByName:function(a){for(var b=this._children,c=0,d=b.length;d>c;c++){var e=b[c];if(e.name===a)return this.getChildAt(c)}return null},getChildIndex:function(a){return a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError),this._sparse?this._children.indexOf(a):a._index},getObjectsUnderPoint:function(){notImplemented()},removeChild:function(a){return a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError),this.removeChildAt(this.getChildIndex(a))},removeChildAt:function(a){var b=this._children;(0>a||a>=b.length)&&throwError("RangeError",Errors.ParamRangeError);var c=b[a];if(c._dispatchEvent("removed",void 0,!0),this._stage&&this._stage._removeFromStage(c),!this._sparse)for(var d=b.length;d&&d>a;d--)b[d-1]._index--;return b.splice(a,1),c._invalidateTransform(),c._owned=!1,c._parent=null,c._index=-1,c},setChildIndex:function(a,b){a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError);var c=this.getChildIndex(a);if(c!==b){var d=this._children;if((0>b||b>d.length)&&throwError("RangeError",Errors.ParamRangeError),d.splice(c,1),d.splice(b,0,a),!this._sparse)for(var e=b>c?c:b;e<d.length;)d[e]._index=e++;return a._owned=!1,a._invalidate(),a}},removeChildren:function(a,b){a=arguments.length<1?0:0|a,b=arguments.length<2?2147483647:0|b;var c=this._children.length;if((0>a||0>b||a>b)&&throwError("RangeError",Errors.ParamRangeError),0!==c){b>c-1&&(b=c-1);for(var d=b-a+1;d--;)this.removeChildAt(a)}},swapChildren:function(a,b){(a._parent!==this||b._parent!==this)&&throwError("ArgumentError",Errors.NotAChildError),this.swapChildrenAt(this.getChildIndex(a),this.getChildIndex(b))},swapChildrenAt:function(a,b){var c=this._children,d=c.length;(0>a||a>d||0>b||b>d)&&throwError("RangeError",Errors.ParamRangeError);var e=c[a],f=c[b];c[a]=f,c[b]=e,e._index=b,f._index=a,e._owned=!1,f._owned=!1,e._invalidate(),f._invalidate()},destroy:function(){this._destroyed||(this._destroyed=!0,this._children.forEach(function(a){a.destroy&&a.destroy()}),this.cleanupBroadcastListeners())}},b=Object.getOwnPropertyDescriptor;return a.initialize=function(){this._mouseChildren=!0,this._tabChildren=!0,this._sparse=!1,this._isContainer=!0},a.__glue__={"native":{instance:{numChildren:b(a,"numChildren"),tabChildren:b(a,"tabChildren"),mouseChildren:b(a,"mouseChildren"),textSnapshot:b(a,"textSnapshot"),addChild:a.addChild,addChildAt:a.addChildAt,removeChild:a.removeChild,removeChildAt:a.removeChildAt,getChildIndex:a.getChildIndex,setChildIndex:a.setChildIndex,getChildAt:a.getChildAt,getChildByName:a.getChildByName,contains:a.contains,swapChildrenAt:a.swapChildrenAt,swapChildren:a.swapChildren,removeChildren:a.removeChildren}}},a}.call(this),FrameLabelDefinition=function(){return{__class__:"flash.display.FrameLabel",initialize:function(){},__glue__:{"native":{"static":{},instance:{ctor:function(a,b){this._name=a,this._frame=b},name:{get:function(){return this._name}},frame:{get:function(){return this._frame}}}}}}}.call(this),GraphicsDefinition=function(){var a="evenOdd",b={__class__:"flash.display.Graphics",initialize:function(){this._paths=[],this.beginPath(),this._bitmap=null,this._parent=0,this.bbox=null,this.strokeBbox=null},_invalidate:function(){this.bbox=null,this.strokeBbox=null,this._parent._invalidate(),this._parent._invalidateBounds()},beginPath:function(){var a=this._currentPath;if(!a||0!==a.commands.length&&(1!==a.commands.length||a.commands[0]!==SHAPE_MOVE_TO)){var b=this._currentPath=new ShapePath(null,null);this._paths.push(b),a&&(b.fillStyle=a.fillStyle,b.lineStyle=a.lineStyle,b.fillRule=a.fillRule)}},_drawPathObject:function(a){"flash.display.GraphicsPath"===a.__class__?this.drawPath(a.commands,a.data,a.winding):"flash.display.GraphicsTrianglePath"===a.__class__&&this.drawTriangles(a.vertices,a.indices,a.uvtData,a.culling)},draw:function(a,b,c,d){for(var e=this._paths,f=0;f<e.length;f++)e[f].draw(a,b,c,d)},beginFill:function(a,b){void 0===b&&(b=1),this.beginPath(),this._currentPath.fillStyle=b?{style:rgbIntAlphaToStr(a,b)}:null},beginGradientFill:function(a,b,c,d,e,f,g,h){var i=createGradientStyle(a,b,c,d,e,f,g,h);this.beginPath(),this._currentPath.fillStyle=i},beginBitmapFill:function(a,b,c,d){this.beginPath(),c=c!==!1,this._currentPath.fillStyle=createPatternStyle(a,b,c,!!d)},clear:function(){this._invalidate(),this._paths=[],this._currentPath=null,this.beginPath()},copyFrom:function(){notImplemented("Graphics#copyFrom")},cubicCurveTo:function(a,b,c,d,e,f){this._invalidate(),this._currentPath.cubicCurveTo(20*a|0,20*b|0,20*c|0,20*d|0,20*e|0,20*f|0)},curveTo:function(a,b,c,d){this._invalidate(),this._currentPath.curveTo(20*a|0,20*b|0,20*c|0,20*d|0)},drawCircle:function(a,b,c){var d=2*c;this.drawRoundRect(a-c,b-c,d,d,d,d)},drawEllipse:function(a,b,c,d){this.drawRoundRect(a,b,c,d,c,d)},drawPath:function(b,c,d){this._invalidate(),this.beginPath(),this._currentPath.fillRule=d||a,this._currentPath.commands=b,this._currentPath.data=c},drawRect:function(a,b,c,d){isNaN(c+d)&&throwError("ArgumentError",Errors.InvalidParamError),this._invalidate(),this._currentPath.rect(20*a|0,20*b|0,20*c|0,20*d|0)},drawRoundRect:function(a,b,c,d,e,f){if((isNaN(c+d+e)||void 0!==f&&isNaN(f))&&throwError("ArgumentError",Errors.InvalidParamError),this._invalidate(),void 0===f&&(f=e),a=20*a|0,b=20*b|0,c=20*c|0,d=20*d|0,!f||!e)return void this._currentPath.rect(a,b,c,d);var g=e/2*20|0,h=f/2*20|0,i=c/2|0,j=d/2|0;if(g>i&&(g=i),h>j&&(h=j),i===g&&j===h)return void(g===h?this._currentPath.circle(a+g,b+h,g):this._currentPath.ellipse(a+g,b+h,g,h));var k=a+c,l=b+d,m=a+g,n=k-g,o=b+h,p=l-h;this._currentPath.moveTo(k,p),this._currentPath.curveTo(k,l,n,l),this._currentPath.lineTo(m,l),this._currentPath.curveTo(a,l,a,p),this._currentPath.lineTo(a,o),this._currentPath.curveTo(a,b,m,b),this._currentPath.lineTo(n,b),this._currentPath.curveTo(k,b,k,o),this._currentPath.lineTo(k,p)},drawRoundRectComplex:function(a,b,c,d,e,f,g,h){if(isNaN(c+d+e+f+g+h)&&throwError("ArgumentError",Errors.InvalidParamError),this._invalidate(),a=20*a|0,b=20*b|0,c=20*c|0,d=20*d|0,!(e||f||g||h))return void this._currentPath.rect(a,b,c,d);e=20*e|0,f=20*f|0,g=20*g|0,h=20*h|0;var i=a+c,j=b+d,k=a+e;this._currentPath.moveTo(i,j-h),this._currentPath.curveTo(i,j,i-h,j),this._currentPath.lineTo(a+g,j),this._currentPath.curveTo(a,j,a,j-g),this._currentPath.lineTo(a,b+e),this._currentPath.curveTo(a,b,k,b),this._currentPath.lineTo(i-f,b),this._currentPath.curveTo(i,b,i,b+f),this._currentPath.lineTo(i,j-h)},drawTriangles:function(a,b,c,d){if(null!==a&&0!==a.length){var e=a.length/2,f=0;b?b.length%3?throwError("ArgumentError",Errors.InvalidParamError):f=b.length/3:a.length%6?throwError("ArgumentError",Errors.InvalidParamError):f=a.length/6;var g=0;c&&(c.length==2*e?g=2:c.length==3*e?g=3:throwError("ArgumentError",Errors.InvalidParamError));var h=0;"none"===d?h=0:"negative"===d?h=-1:"positive"===d?h=1:throwError("ArgumentError",Errors.InvalidEnumError,"culling"),notImplemented("Graphics#drawTriangles")}},endFill:function(){this.beginPath(),this._currentPath.fillStyle=null},lineBitmapStyle:function(a,b,c,d){this.beginPath(),this._currentPath.lineStyle=createPatternStyle(a,b,c,d)},lineGradientStyle:function(a,b,c,d,e,f,g,h){var i=createGradientStyle(a,b,c,d,e,f,g,h);this.beginPath(),this._currentPath.lineStyle=i},lineStyle:function(a,b,c,d,e,f,g,h){this.beginPath(),a?(void 0===c&&(c=1),void 0===h&&(h=3),this._currentPath.lineStyle={style:rgbIntAlphaToStr(b,c),lineCap:f||"round",lineJoin:f||"round",width:20*a|0,miterLimit:2*h}):this._currentPath.lineStyle=null},lineTo:function(a,b){this._invalidate(),this._currentPath.lineTo(20*a|0,20*b|0)},moveTo:function(a,b){this._currentPath.moveTo(20*a|0,20*b|0)},_getBounds:function(a){var b=a?this.strokeBbox:this.bbox;if(b)return b;for(var c=this._paths,d=[],e=[],f=[],g=[],h=0,i=c.length;i>h;h++){var j=c[h];if(j.commands.length){var k=j.getBounds(a);k&&(d.push(k.xMin),e.push(k.yMin),f.push(k.xMax),g.push(k.yMax))}}return b=0===d.length?{xMin:0,yMin:0,xMax:0,yMax:0}:{xMin:Math.min.apply(Math,d),yMin:Math.min.apply(Math,e),xMax:Math.max.apply(Math,f),yMax:Math.max.apply(Math,g)},a?this.strokeBbox=b:this.bbox=b,b}};return b.__glue__={"native":{instance:{beginFill:b.beginFill,beginGradientFill:b.beginGradientFill,beginBitmapFill:b.beginBitmapFill,beginFillObject:b.beginFillObject,beginStrokeObject:b.beginStrokeObject,clear:b.clear,copyFrom:b.copyFrom,cubicCurveTo:b.cubicCurveTo,curveTo:b.curveTo,drawCircle:b.drawCircle,drawEllipse:b.drawEllipse,drawPath:b.drawPath,drawRect:b.drawRect,drawRoundRect:b.drawRoundRect,drawRoundRectComplex:b.drawRoundRectComplex,drawTriangles:b.drawTriangles,endFill:b.endFill,lineBitmapStyle:b.lineBitmapStyle,lineGradientStyle:b.lineGradientStyle,lineStyle:b.lineStyle,moveTo:b.moveTo,lineTo:b.lineTo}}},b}.call(this),InteractiveObjectDefinition=function(){var a={initialize:function(){this._contextMenu=null,this._doubleClickEnabled=!1,this._focusRect=null,this._mouseEnabled=!0,this._tabEnabled=!1},get accessibilityImplementation(){return null},set accessibilityImplementation(a){somewhatImplemented("accessibilityImplementation")},get contextMenu(){return somewhatImplemented("contextMenu"),this._contextMenu},set contextMenu(a){somewhatImplemented("contextMenu"),this._contextMenu=a},get doubleClickEnabled(){return this._doubleClickEnabled},set doubleClickEnabled(a){this._doubleClickEnabled=a},get focusRect(){return this._focusRect},set focusRect(a){this._focusRect=a},get mouseEnabled(){return this._mouseEnabled},set mouseEnabled(a){this._mouseEnabled=a},get needsSoftKeyboard(){return!1},set needsSoftKeyboard(a){notImplemented()},get softKeyboardInputAreaOfInterest(){return null},set softKeyboardInputAreaOfInterest(a){notImplemented()},get tabEnabled(){return this._tabEnabled},set tabEnabled(a){var b=this._tabEnabled;if(this._tabEnabled=a,b!==a){var c=flash.events.Event;this._dispatchEvent(new c("tabEnabledChange",!1,!1))}},requestSoftKeyboard:function(){notImplemented()}},b=Object.getOwnPropertyDescriptor;return a.__glue__={"native":{instance:{tabEnabled:b(a,"tabEnabled"),tabIndex:{get:function(){return this._tabIndex},set:function(a){this._tabIndex=a}},focusRect:b(a,"focusRect"),mouseEnabled:b(a,"mouseEnabled"),doubleClickEnabled:b(a,"doubleClickEnabled"),accessibilityImplementation:b(a,"accessibilityImplementation"),softKeyboardInputAreaOfInterest:b(a,"softKeyboardInputAreaOfInterest"),needsSoftKeyboard:b(a,"needsSoftKeyboard"),contextMenu:b(a,"contextMenu"),requestSoftKeyboard:a.requestSoftKeyboard}}},a}.call(this),$RELEASE=!1,LoaderDefinition=function(){var a=!0,b="shumway-worker-min.js",c=document.head;c.insertBefore(document.createElement("style"),c.firstChild);var d=document.styleSheets[0],e={__class__:"flash.display.Loader",initialize:function(){this._contentLoaderInfo=new flash.display.LoaderInfo,this._contentLoaderInfo._loader=this,this._dictionary={},this._dictionaryResolved={},this._displayList=null,this._timeline=[],this._lastPromise=null,this._uncaughtErrorEvents=null,this._worker=null;var a=AVM2.currentAbc();a&&a.env.loader&&(this._contentLoaderInfo._loaderURL=a.env.loader._contentLoaderInfo._url)},_commitData:function(a){switch(a.command){case"init":this._init(a.result);break;case"progress":this._updateProgress(a.result);break;case"complete":var b=new Promise(function(a){avm2.systemDomain.onMessage.register("frameConstructed",function b(c){"frameConstructed"===c&&(a(),avm2.systemDomain.onMessage.unregister("frameConstructed",b))})});this._contentLoaderInfo._dispatchEvent("parsed"),Promise.all([b,this._lastPromise]).then(function(){this._content._complete=!0,this._contentLoaderInfo._dispatchEvent("complete")}.bind(this));var c=a.stats;c&&TelemetryService.reportTelemetry(c),this._worker&&this._worker.terminate();break;case"empty":this._lastPromise=Promise.resolve();break;case"error":this._contentLoaderInfo._dispatchEvent("ioError",flash.events.IOErrorEvent);break;default:if(0===a.id)break;a.isSymbol?this._commitSymbol(a):"frame"===a.type?this._commitFrame(a):"image"===a.type&&this._commitImage(a)}},_updateProgress:function(a){var b=this._contentLoaderInfo;b._bytesLoaded=a.bytesLoaded||0,b._bytesTotal=a.bytesTotal||0;var c=new flash.events.ProgressEvent("progress",!1,!1,b._bytesLoaded,b._bytesTotal);b._dispatchEvent(c)},_buildFrame:function(a,b,c,d){var e=this,f=e._dictionary,g=e._dictionaryResolved,h={},i=[],j=d.depths;if(a)for(var k=a.depths,l=0;l<k.length;l++){var m=k[l];null!==j[m]&&(h[m]=a[m],i.push(m))}for(var m in j){var n=j[m];if(n){if(n.move){var o=n;n=cloneObject(a[m]);for(var p in o){var q=o[p];q&&(n[p]=q)}}if(n.symbolId){var r=f[n.symbolId];r&&!g[n.symbolId]&&c.push(r),n=cloneObject(n),Object.defineProperty(n,"symbolInfo",{get:function(a,b){return function(){return a[b]}}(g,n.symbolId)})}h[m]||i.push(m),h[m]=n}}i.sort(sortNumeric),h.depths=i;for(var l=d.repeat;l--;)b.push(h);return h},_commitFrame:function(a){var b,c=a.abcBlocks,d=a.actionBlocks,e=a.initActionBlocks,f=a.exports,g=a.symbolClasses,h=a.sceneData,i=this,j=i._dictionary,k=i._contentLoaderInfo,l=i._timeline,m=l.length+1,n=new Promise(function(a){b=a}),o=a.labelName,p=this._lastPromise;this._lastPromise=n;var q=[p];this._displayList=this._buildFrame(this._displayList,l,q,a,m);var r=l.length;a.bgcolor?k._backgroundColor=a.bgcolor:isNullOrUndefined(k._backgroundColor)&&(k._backgroundColor={red:255,green:255,blue:255,alpha:255}),Promise.all(q).then(function(){if(c&&i._isAvm2Enabled)for(var a=avm2.applicationDomain,b=0,d=c.length;d>b;b++){var e=new AbcFile(c[b].data,"abc_block_"+b);e.env.loader=i,c[b].flags?a.loadAbc(e):a.executeAbc(e)}if(g&&i._isAvm2Enabled){for(var h=[],b=0,d=g.length;d>b;b++){var k=g[b],l=j[k.symbolId];l&&(l.then(function(a){return function(b){b.className=a,avm2.applicationDomain.getClass(a).setSymbol(b.props)}}(k.className)),h.push(l))}return Promise.all(h)}if(f&&!i._isAvm2Enabled){for(var m=[],b=0,d=f.length;d>b;b++){var k=f[b],l=j[k.symbolId];l&&(l.then(function(a){return function(b){i._avm1Context.addAsset(a,b.props)}}(k.className)),m.push(l))}return Promise.all(m)}}).then(function(){var c,f=i._content;if(f){if(f._framesLoaded=r,o&&f._labelMap&&void 0===f._labelMap[o]){f._labelMap[o]=m;for(var g=0,j=f.symbol.scenes.length;j>g;g++){var n=f.symbol.scenes[g];if(m>=n._startFrame&&m<=n._endFrame){n.labels.push(new flash.display.FrameLabel(o,m-n._startFrame));break}}}}else{var p=i._parent,q=i._dictionaryResolved[0],s=avm2.applicationDomain.getClass(q.className);if(f=s.createAsSymbol({framesLoaded:r,loader:i,parent:p||i,index:p?0:-1,level:p?0:-1,timeline:l,totalFrames:q.props.totalFrames,stage:i._stage,complete:a.complete}),!i._isAvm2Enabled){var t=i._avm1Context,u=f;if(p&&p!==i._stage){for(var v=p.loaderInfo._loader;v._parent&&v._parent!==i._stage;)v=v._parent.loaderInfo._loader;if(v._isAvm2Enabled)return somewhatImplemented("AVM1Movie"),void(this._worker&&this._worker.terminate());u=v._content}var w=u._getAS2Object();t.globals.asSetPublicProperty("_root",w),t.globals.asSetPublicProperty("_level0",w),t.globals.asSetPublicProperty("_level1",w);var x=i.loaderInfo._parameters;for(var y in x)y in w||(w[y]=x[y])}var z=p&&p==i._stage&&0===i._stage._children.length;z?(p._frameRate=k._frameRate,p._stageHeight=k._height,p._stageWidth=k._width,p._root=f,p._setup()):i._children.push(f);var A;if(c=f.symbol.labelMap=createEmptyObject(),h){for(var B,C=[],D=f.symbol.totalFrames-1,E=h.scenes,F=h.labels,g=E.length;g--;){var G=E[g];B=G.offset,A=[];for(var H=F.length;H--;){var I=F[H];I.frame>=B&&I.frame<=D&&(c[I.name]=I.frame+1,A.unshift(new flash.display.FrameLabel(I.name,I.frame-B+1)))}var n=new flash.display.Scene(G.name,A,D-B+1);n._startFrame=B+1,n._endFrame=D+1,C.unshift(n),D=B-1}f.symbol.scenes=C}else{A=[],o&&(c[o]=m,A.push(new flash.display.FrameLabel(o,m)));var n=new flash.display.Scene("Scene 1",A,f.symbol.totalFrames);n._startFrame=1,n._endFrame=f.symbol.totalFrames,f.symbol.scenes=[n]}i._stage&&(i._stage._children[0]=f),s.instanceConstructor.call(f),i._content=f}if(a.startSounds&&f._registerStartSounds(m,a.startSounds),a.soundStream&&f._initSoundStream(a.soundStream),a.soundStreamBlock&&f._addSoundStreamBlock(m,a.soundStreamBlock),!i._isAvm2Enabled){var t=i._avm1Context;if(e)for(var g=0;g<e.length;g++){var J=e[g].spriteId,K=e[g].actionsData;f.addFrameScript(m-1,function(a,b,c){return c.executed?void 0:(c.executed=!0,executeActions(a,t,this._getAS2Object()))}.bind(f,K,J,{executed:!1}))}if(d)for(var g=0;g<d.length;g++){var L=d[g];f.addFrameScript(m-1,function(a){return function(){return executeActions(a,t,this._getAS2Object())}}(L))}}1===m&&k._dispatchEvent(new flash.events.Event("init",!1,!1)),b(a)})},_commitImage:function(a){var b,c=this,d=(this._lastPromise=new Promise(function(a){b=a}),new Image);a.props.img=d,d.onload=function(){var d=avm2.systemDomain.getClass("flash.display.Bitmap"),e=avm2.systemDomain.getClass("flash.display.BitmapData"),f=a.props;f.parent=c._parent,f.stage=c._stage,f.skipCopyToCanvas=!0;var g=e.createAsSymbol(f);e.instanceConstructor.call(g,0,0,!0,4294967295);var h=d.createAsSymbol(g);d.instanceConstructor.call(h,g),h._parent=c,c._children.push(h),c._invalidateBounds(),c._content=h,b(a);var i=c._contentLoaderInfo;i._width=h.width,i._height=h.height,i._dispatchEvent("init")},d.src=URL.createObjectURL(a.data),a.data=null},_commitSymbol:function(a){function b(b){var c=document.createElement("canvas");c.width=a.width,c.height=a.height;var d=c.getContext("2d");d.putImageData(b,0,0,0,0,a.width,a.height);d.getImageData(0,0,a.width,a.height);C.src=c.toDataURL("image/png"),document.body.appendChild(c)}var c=this._dictionary,e=this._dictionaryResolved;if("updates"in a)return void c[a.id].then(function(b){for(var c in a.updates)b.props[c]=a.updates[c]});var f,g="flash.display.DisplayObject",h=a.require,i=[],j={symbolId:a.id,loader:this},k=new Promise(function(a){f=a});if(h&&h.length)for(var l=0,m=h.length;m>l;l++){var n=h[l],o=c[n];o&&!e[n]&&i.push(o)}switch(a.type){case"button":var p={};for(var q in a.states){for(var r=[],s={},t=a.states[q],u=Object.keys(t),l=0;l<u.length;l++){var v=u[l],w=t[v],x=c[w.symbolId];x&&!e[w.symbolId]&&i.push(x),r.push(x),s[v]=Object.create(w,{symbolInfo:{get:function(a,b){return function(){return a[b]}}(e,w.symbolId)}})}u.sort(sortNumeric),s.depths=u,p[q]={className:"flash.display.Sprite",props:{loader:this,timeline:[s]}}}g="flash.display.SimpleButton",j.states=p,j.buttonActions=a.buttonActions;break;case"font":var y=fromCharCode.apply(null,a.codes);if(y&&(d.insertRule('@font-face{font-family:"'+a.uniqueName+'";src:url(data:font/opentype;base64,'+btoa(a.data)+")}",d.cssRules.length),!/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.test(window.navigator.userAgent))){var z=document.createElement("div");z.setAttribute("style",'position: absolute; top: 0; right: 0;visibility: hidden; z-index: -500;font-family:"'+a.uniqueName+'";'),z.textContent="font test",document.body.appendChild(z);var A=new Promise(function(a){setTimeout(function(){a(),document.body.removeChild(z)},200)});i.push(A)}g="flash.text.Font",j.name=a.name,j.uniqueName=a.uniqueName,j.charset=a.charset,j.bold=a.bold,j.italic=a.italic,j.metrics=a.metrics,this._registerFont(g,j);break;case"image":var B,C=new Image,D=new Promise(function(a){B=a});C.onload=function(){if(a.mask){var b=document.createElement("canvas");b.width=a.width,b.height=a.height;var c=b.getContext("2d");c.drawImage(C,0,0);for(var d=c.getImageData(0,0,a.width,a.height),e=d.data,f=a.mask,g=d.width*d.height,h=0,i=3;g>h;h++,i+=4)e[i]=f[h];c.putImageData(d,0,0),j.img=b}B();var k=document.createElement("canvas");k.width=a.width,k.height=a.height;var l=k.getContext("2d");l.drawImage(C,0,0)};try{C.src=URL.createObjectURL(a.data)}catch(E){for(var F=document.createElement("canvas"),G=F.getContext("2d"),H=G.createImageData(a.width,a.height),I=0,l=0;l<a.data.length;l++)H.data[I++]=a.data[l];b(H)}i.push(D),g="flash.display.Bitmap",j.img=C,j.width=a.width,j.height=a.height;break;case"label":var J=new Function("c,r,ct",a.data);g="flash.text.StaticText",j.bbox=a.bbox,j.draw=J;break;case"text":j.bbox=a.bbox,j.html=a.html,"label"===a.type?g="flash.text.StaticText":(g="flash.text.TextField",j.tag=a.tag,j.variableName=a.variableName);break;case"shape":g=a.morph?"flash.display.MorphShape":"flash.display.Shape",j.bbox=a.bbox,j.strokeBbox=a.strokeBbox,j.paths=a.paths,j.dictionaryResolved=e;break;case"sound":if(!a.pcm&&!PLAY_USING_AUDIO_TAG){var K,L=new Promise(function(a){K=a});MP3DecoderSession.processAll(a.packaged.data,function(a,b,c,d){a.pcm=b||new Uint8Array(0),K(),d&&console.error("ERROR: "+d)}.bind(null,j)),i.push(L)}g="flash.media.Sound",j.sampleRate=a.sampleRate,j.channels=a.channels,j.pcm=a.pcm,j.packaged=a.packaged;break;case"binary":j.data=a.data;break;case"sprite":for(var s=null,M=a.frameCount,N={},O=1,P=a.frames,Q=[],R=[],l=0,m=P.length;m>l;l++){var S=P[l],O=Q.length+1;if(S.labelName&&(N[S.labelName]=O),S.startSounds){R[O]=S.startSounds;for(var T=0;T<S.startSounds.length;T++){var U=S.startSounds[T].soundId,V=c[U];V&&!e[U]&&i.push(V)}}s=this._buildFrame(s,Q,i,S,O)}var W={};if(!this._isAvm2Enabled&&a.frameScripts)for(var X=a.frameScripts,l=0;l<X.length;l+=2){var O=X[l]+1,Y=X[l+1],Z=function(a,b){return function(){var c=b._avm1Context;return executeActions(a,c,this._getAS2Object())}}(Y,this);W[O]?W[O].push(Z):W[O]=[Z]}g="flash.display.MovieClip",j.timeline=Q,j.framesLoaded=M,j.labelMap=N,j.frameScripts=W,j.totalFrames=M,j.startSoundRegistrations=R}c[a.id]=k,Promise.all(i).then(function(){var b={className:g,props:j};e[a.id]=b,f(b)})},_registerFont:function(a,b){this._vmPromise.then(function(){var c=avm2.applicationDomain.getClass(a),d=c.createAsSymbol(b);c.instanceConstructor.call(d)})},_init:function(a){var b=this,c=b._contentLoaderInfo;c._swfVersion=a.swfVersion;var d=a.bbox;c._width=d.xMax-d.xMin,c._height=d.yMax-d.yMin,c._frameRate=a.frameRate;var e,f,g=new Promise(function(a,b){e=a,f=b});g.resolve=e,g.reject=f;var h=new Promise(function(c){g.then(function(){var d={className:"flash.display.MovieClip",props:{totalFrames:a.frameCount}};b._dictionaryResolved[0]=d,c(d)})});b._dictionary[0]=h,b._lastPromise=h,b._vmPromise=g,b._isAvm2Enabled=a.fileAttributes.doAbc,this._setup()},_load:function(c){flash.net.URLRequest.class.isInstanceOf(c)&&(this._contentLoaderInfo._url=c._url);var d;d=a?new Worker(SHUMWAY_ROOT+b+"?1"):new ResourceLoader(window),window.isSupportTypedArray=!0;var e=this;if(e._worker=d,d.onmessage=function(a){"exception"===a.data.type?avm2.exceptions.push({source:"parser",message:a.data.message,stack:a.data.stack}):"log"===a.data.type||("postData"===a.data.type?a.data.request instanceof Uint8Array||(isSupportTypedArray=!1):e._commitData(a.data))},d.postMessage({isSupportTypedArray:new Uint8Array}),flash.net.URLRequest.class.isInstanceOf(c)){var f=FileLoadingService.createSession();f.onprogress=function(a,b){d.postMessage({data:a,progress:b})},f.onerror=function(a){e._commitData({command:"error",error:a})},f.onopen=function(){d.postMessage("pipe:")},f.onclose=function(){d.postMessage({data:null})},f.open(c._toFileRequest())}else d.postMessage(c)},_setup:function(){var a=this,b=a._stage;if(a._isAvm2Enabled){var c=avm2.systemDomain.getClass("flash.ui.Mouse");return c._stage=b,void a._vmPromise.resolve()}if(!avm2.loadAVM1)return void a._vmPromise.reject("AVM1 loader is not found");var d=function(){var c=a._contentLoaderInfo,d=new AS2Context(c._swfVersion);d.stage=b,a._avm1Context=d,avm1lib.AS2Key.class.$bind(b),avm1lib.AS2Mouse.class.$bind(b),b._addEventListener("frameConstructed",d.flushPendingScripts.bind(d),!1,Number.MAX_VALUE),a._vmPromise.resolve()};avm2.isAVM1Loaded?AS2Context.instance?(a._avm1Context=AS2Context.instance,a._vmPromise.resolve()):d():(avm2.isAVM1Loaded=!0,avm2.loadAVM1(d))},get contentLoaderInfo(){return this._contentLoaderInfo},get content(){return somewhatImplemented("Loader.content"),this._content}};return e.__glue__={"native":{instance:{content:Object.getOwnPropertyDescriptor(e,"content"),contentLoaderInfo:Object.getOwnPropertyDescriptor(e,"contentLoaderInfo"),_getJPEGLoaderContextdeblockingfilter:function(){return 0},_load:e._load,_loadBytes:function(a,b,c,d,e,f,g,h,i){this._load(a.a,b,c,d,e,f,g,h,i)},_unload:function(){somewhatImplemented("Loader._unload, do we even need to do anything here?")},_close:function(){somewhatImplemented("Loader._close")},_getUncaughtErrorEvents:function(){return somewhatImplemented("Loader._getUncaughtErrorEvents"),this._uncaughtErrorEvents},_setUncaughtErrorEvents:function(a){somewhatImplemented("Loader._setUncaughtErrorEvents"),this._uncaughtErrorEvents=a}}}},e}.call(this),LoaderInfoDefinition=function(){return{__class__:"flash.display.LoaderInfo",initialize:function(){this._actionScriptVersion=null,this._backgroundColor=null,this._bytes=null,this._bytesLoaded=0,this._bytesTotal=0,this._content=null,this._contentType=null,this._frameRate=null,this._height=null,this._loader=null,this._loaderURL=null,this._swfVersion=null,this._url=null,this._width=null,this._uncaughtErrorEvents=null},__glue__:{"native":{"static":{getLoaderInfoByDefinition:function(){notImplemented("LoaderInfo.getLoaderInfoByDefinition")}},instance:{_getArgs:function(){var a=this._parameters,b={};for(var c in a)b[Multiname.getPublicQualifiedName(c)]=a[c];return b},_getUncaughtErrorEvents:function(){return somewhatImplemented("Loader._getUncaughtErrorEvents"),this._uncaughtErrorEvents},_setUncaughtErrorEvents:function(a){somewhatImplemented("Loader._setUncaughtErrorEvents"),this._uncaughtErrorEvents=a},loaderURL:{get:function(){return this._loaderURL}},url:{get:function(){return this._url}},isURLInaccessible:{get:function(){return this._isURLInaccessible}},bytesLoaded:{get:function(){return this._bytesLoaded}},bytesTotal:{get:function(){return this._bytesTotal}},applicationDomain:{get:function(){return new flash.system.ApplicationDomain(avm2.applicationDomain)}},swfVersion:{get:function(){return this._swfVersion}},actionScriptVersion:{get:function(){return this._actionScriptVersion}},frameRate:{get:function(){return this._frameRate}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},contentType:{get:function(){return this._contentType}},sharedEvents:{get:function(){return this._sharedEvents}},parentSandboxBridge:{get:function(){return this._parentSandboxBridge},set:function(a){this._parentSandboxBridge=a}},childSandboxBridge:{get:function(){return this._childSandboxBridge},set:function(a){this._childSandboxBridge=a}},sameDomain:{get:function(){return this._sameDomain}},childAllowsParent:{get:function(){return this._childAllowsParent}},parentAllowsChild:{get:function(){return this._parentAllowsChild}},loader:{get:function(){return this._loader}},content:{get:function(){return this._loader._content}},bytes:{get:function(){return this._bytes}}}},script:{instance:scriptProperties("public",["swfVersion","bytesTotal","bytesLoaded","parameters","uncaughtErrorEvent"])}}}}.call(this),MorphShapeDefinition=function(){var a={__class__:"flash.display.MorphShape",initialize:function(){var a=this._graphics=new flash.display.Graphics,b=this.symbol;b&&b.paths&&(a._paths=b.paths,a.bbox=b.bbox,a.strokeBbox=b.strokeBbox,this._stage&&"low"===this._stage._quality&&!a._bitmap&&a._cacheAsBitmap(this._bbox))}};return a.__glue__={"native":{instance:{graphics:{get:function(){return this._graphics}}}}},a}.call(this),MovieClipDefinition=function(){var a={__class__:"flash.display.MovieClip",initialize:function(){this._playHead=1,this._currentFrame=1,this._currentFrameLabel=null,this._currentLabel=null,this._currentScene=0,this._enabled=!0,this._frameScripts={},this._framesLoaded=1,this._isPlaying=!1,this._labelMap={},this._sceneFrameMap={},this._sceneMap={},this._scenes=null,this._timeline=null,this._totalFrames=1,this._startSoundRegistrations=[],this._allowFrameNavigation=!0,this._complete=!0;var a=this.symbol;if(a){this._timeline=a.timeline||null,this._framesLoaded=a.framesLoaded||1,this._labelMap=Object.create(a.labelMap||null),this._frameScripts=Object.create(a.frameScripts||null),this._totalFrames=a.totalFrames||1,this._startSoundRegistrations=a.startSoundRegistrations||[],this._scenes=a.scenes||null,this._complete=a.complete===!1?!1:!0;var b=this._labelMap;for(var c in b){var d=b[c];1==d&&(this._currentFrameLabel=this._currentLabel=c)}}this._enterFrame(1);var e=this;return this._onExecuteFrame=function f(){e._removeEventListener("executeFrame",f),e._allowFrameNavigation=!1,e._callFrame(e._currentFrame),e._allowFrameNavigation=!0,e._playHead!==e._currentFrame&&e._gotoFrame(e._playHead,!0),e._postConstructChildren()},this._addEventListener("executeFrame",this._onExecuteFrame),this._complete&&this._totalFrames<=1?this:(this._onAdvanceFrame=function(){var a=e._playHead+1;if(e._complete&&a>e._totalFrames)a=1;else if(a>e._framesLoaded)return;e._updateDisplayList(a),e._sparse&&e._addEventListener("constructChildren",e._onConstructChildren),e._startSounds(a),e._enterFrame(a),a in e._frameScripts&&e._addEventListener("executeFrame",e._onExecuteFrame)},this._onConstructChildren=function g(){e._removeEventListener("constructChildren",g),e._constructChildren()},void this.play())},_updateDisplayList:function(a){this._destructChildren(a),this._declareChildren(a)},_declareChildren:function(a){var b=this._currentFrame;if(a!==b){var c=this._timeline,d=c[a-1];if(d!==c[b-1])for(var e=null,f=this._currentDisplayList,g=this._children,h=d.depths,i=g.length,j=h.length;j--;){for(var k=h[j],l=0|k;f&&f.depth>l;)e=f,f=f.next;var m=null;f&&f.depth===l&&(m=f.obj,m&&m._owned&&(i=this.getChildIndex(m)));var n=f&&f.depth===l?f.cmd:null,o=d[k];if(o&&o!==n)if(n&&m&&o.symbolId===n.symbolId&&o.ratio===n.ratio)m._animated&&(m._invalidate(),o.hasMatrix&&m._setTransformMatrix(o.matrix,!1),o.hasCxform&&(m._cxform=o.cxform),o.clip&&(m._clipDepth=o.clipDepth),o.hasName&&(m.name=o.name),o.blend&&(m._blendMode=this._resolveBlendMode(o.blendMode))),f.cmd=o;
else{var p=this._addTimelineChild(o,i);p.next=f,e?e.next=p:this._currentDisplayList=p,e=p}}}},_destructChildren:function(a){var b=this._currentFrame;if(a!==b){var c=this._timeline,d=c[a-1];if(d!==c[b-1]){for(var e=null,f=this._currentDisplayList,g=null;f;){var h=f.depth,i=f.cmd,j=d[h];if(j&&j.symbolId===i.symbolId&&j.ratio===i.ratio)e=f,f=f.next;else{var k=f.next;e?e.next=k:this._currentDisplayList=k,f.next=g,g=f,f=k}}for(;g;){var l=g.obj;l&&l._owned&&(this._sparse=!0,this.removeChild(l),l.destroy(),l._isPlaying&&l.stop()),g=g.next}}}},_gotoFrame:function(a,b){var c=a!==this._currentFrame;if(this._allowFrameNavigation||!this._loader._isAvm2Enabled){if(c&&(this._updateDisplayList(a),this._enterFrame(a)),this._constructChildren(),this._loader._isAvm2Enabled&&this.loaderInfo._swfVersion>=10){c&&this._addEventListener("executeFrame",this._onExecuteFrame);var d=avm2.systemDomain;return d.broadcastMessage("frameConstructed"),d.broadcastMessage("executeFrame"),void d.broadcastMessage("exitFrame")}return!c||!b&&this._loader._isAvm2Enabled||this._callFrame(a),void this._postConstructChildren()}c&&(this._playHead=a)},_enterFrame:function(a){if(a!==this._currentFrame){this._currentFrameLabel=null,1===a&&(this._currentLabel=null);var b=this._labelMap;for(var c in b)if(b[c]===a){this._currentFrameLabel=this._currentLabel=c;break}if(this._scenes)for(var d=this._scenes,e=0,f=d.length;f>e;e++){var g=d[e];if(a>=g._startFrame&&a<=g._endFrame){this._currentScene=e;break}}this._playHead=this._currentFrame=a}},_callFrame:function(a){if((!isNaN(a)||(a=this._labelMap[a],void 0!==a))&&a in this._frameScripts){var b=this._frameScripts[a];try{for(var c=0,d=b.length;d>c;c++)b[c].call(this)}catch(e){var f=2;throw TelemetryService.reportTelemetry({topic:"error",error:f}),this.stop(),e}}},_gotoButtonState:function(a){this._enabled&&this.gotoLabel("_"+a)},_getAbsFrameNum:function(a,b){if(1>a&&(a=1),b&&this._scenes&&this._scenes.length>1)for(var c=this._scenes,d=0;d<c.length;d++){var e=c[d];if(e.name===b){a+=e._startFrame-1,a>e._endFrame&&(a=e._endFrame);break}}return a>this._framesLoaded?this._framesLoaded:a},_registerStartSounds:function(a,b){this._startSoundRegistrations[a]=b},_initSoundStream:function(a){this._soundStream=new MovieClipSoundStream(a,this)},_addSoundStreamBlock:function(a,b){this._soundStream.appendBlock(a,b)},_startSounds:function(a){var b=this._startSoundRegistrations[a];if(b)for(var c=this._sounds||(this._sounds={}),d=this.loaderInfo._loader,e=0;e<b.length;e++){var f=b[e],g=f.soundId,h=f.soundInfo,i=c[g];if(!i){var j=d._dictionaryResolved[g];if(!j)continue;var k=avm2.systemDomain.findClass(j.className)?avm2.systemDomain.getClass(j.className):avm2.applicationDomain.getClass(j.className),l=k.createAsSymbol(j.props);k.instanceConstructor.call(l),c[g]=i={object:l}}if(i.channel&&(i.channel.stop(),i.channel=null),!h.stop){var m=h.hasLoops?h.loopCount:0;i.channel=i.object.play(0,m)}}this._soundStream&&this._soundStream.playFrame(a)},_getAS2Object:function(){if(!this.$as2Object)if(this._avm1SymbolClass){var a=this,b=this._avm1SymbolClass,c=function(){this.init(a),b.call(this)};c.prototype=Object.create(b.prototype),c.instanceConstructor=c,c.debugName="avm1 <symbol constructor wrapper>",construct(c)}else new avm1lib.AS2MovieClip(this);return this.$as2Object},get currentFrame(){var a=this._currentFrame;return this._scenes?a-this.currentScene._startFrame+1:a},get currentFrameLabel(){return this._currentFrameLabel},get currentLabel(){return this._currentLabel},get currentLabels(){if(this._scenes)return this._scenes[this._currentScene].labels;var a=[],b=this._labelMap;for(var c in b)a.push(new flash.display.FrameLabel(c,b[c]));return a},get currentScene(){return this._scenes?this._scenes[this._currentScene]:new flash.display.Scene("",this.currentLabels,this._framesLoaded)},get enabled(){return this._enabled},set enabled(a){this._enabled=a},get framesLoaded(){return this._framesLoaded},get totalFrames(){return this._totalFrames},get scenes(){return this._scenes||[new flash.display.Scene("",this.currentLabels,this._framesLoaded)]},get trackAsMenu(){return!1},set trackAsMenu(a){notImplemented()},addFrameScript:function(){for(var a=this._frameScripts,b=0,c=arguments.length;c>b;b+=2){var d=arguments[b]+1,e=arguments[b+1];if(e){var f=a[d];f?f.push(e):a[d]=[e],d===this._currentFrame&&this._addEventListener("executeFrame",this._onExecuteFrame)}}},gotoAndPlay:function(a,b){this.play(),isNaN(a)?this.gotoLabel(a):this._gotoFrame(this._getAbsFrameNum(a,b))},gotoAndStop:function(a,b){this.stop(),isNaN(a)?this.gotoLabel(a):this._gotoFrame(this._getAbsFrameNum(a,b))},gotoLabel:function(a){var b=this._labelMap[a];void 0!==b&&this._gotoFrame(b)},isPlaying:function(){return this._isPlaying},nextFrame:function(){this.stop(),this._currentFrame<this._framesLoaded&&this._gotoFrame(this._currentFrame+1)},nextScene:function(){this._scenes&&this._currentScene<this._scenes.length-1&&this._gotoFrame(this._scenes[this._currentScene+1]._startFrame)},play:function(){this._isPlaying||this._complete&&this._totalFrames<=1||(this._isPlaying=!0,this._addEventListener("advanceFrame",this._onAdvanceFrame))},prevFrame:function(){this.stop(),this._currentFrame>1&&this._gotoFrame(this._currentFrame-1)},prevScene:function(){this._scenes&&this._currentScene>0&&this._gotoFrame(this._scenes[this._currentScene-1]._startFrame)},stop:function(){!this._isPlaying||this._complete&&this._totalFrames<=1||(this._isPlaying=!1,this._removeEventListener("advanceFrame",this._onAdvanceFrame))}},b=Object.getOwnPropertyDescriptor;return a.__glue__={"native":{instance:{currentFrame:b(a,"currentFrame"),framesLoaded:b(a,"framesLoaded"),totalFrames:b(a,"totalFrames"),trackAsMenu:b(a,"trackAsMenu"),scenes:b(a,"scenes"),currentScene:b(a,"currentScene"),currentLabel:b(a,"currentLabel"),currentFrameLabel:b(a,"currentFrameLabel"),enabled:b(a,"enabled"),isPlaying:b(a,"isPlaying"),play:a.play,stop:a.stop,nextFrame:a.nextFrame,prevFrame:a.prevFrame,gotoAndPlay:a.gotoAndPlay,gotoAndStop:a.gotoAndStop,addFrameScript:a.addFrameScript,prevScene:a.prevScene,nextScene:a.nextScene}}},a}.call(this),MovieClipSoundStream=function(){function a(a,b){var c;try{c=b.addSourceBuffer(d),a.mediaSource=b,a.sourceBuffer=c,a.rawFrames.forEach(function(a){c.appendBuffer(a)}),delete a.rawFrames}catch(e){console.error("MediaSource mp3 playback is not supported: "+e)}}function b(a,b){var c,d,e=!1;a.addEventListener("timeupdate",function(){if(!e)return c=a.currentTime,d=performance.now(),e=!0,void b._stage._frameScheduler.startTrackDelta();var f=a.currentTime-c,g=performance.now()-d;b._stage._frameScheduler.setDelta(g-1e3*f)}),a.addEventListener("pause",function(){b._stage._frameScheduler.endTrackDelta(),e=!1}),a.addEventListener("seeking",function(){b._stage._frameScheduler.endTrackDelta(),e=!1})}function c(c,e){this.movieClip=e,this.data={sampleRate:c.sampleRate,channels:c.channels},this.seekIndex=[],this.position=0;var f="mp3"===c.format;if(f&&PLAY_USING_AUDIO_TAG){var g=document.createElement("audio");if(g.preload="metadata",g.loop=!1,b(g,e),g.canPlayType(d)){if(this.element=g,"undefined"!=typeof MediaSource){var h=new MediaSource;h.addEventListener("sourceopen",a.bind(null,this,h)),g.src=URL.createObjectURL(h)}else console.warn("MediaSource is not supported");return void(this.rawFrames=[])}}var i=c.samplesCount*c.channels;if(this.data.pcm=new Float32Array(i),f){var j=this;j.decoderPosition=0,j.decoderSession=new MP3DecoderSession,j.decoderSession.onframedata=function(a){var b=j.decoderPosition;j.data.pcm.set(a,b),j.decoderPosition=b+a.length}.bind(this),j.decoderSession.onerror=function(a){console.error("ERROR: MP3DecoderSession: "+a)}}}var d="audio/mpeg";return c.prototype={appendBlock:function(a,b){var c=this.position;if(this.seekIndex[a]=c+b.seek*this.data.channels,this.position=c+b.samplesCount*this.data.channels,this.sourceBuffer)return void this.sourceBuffer.appendBuffer(b.data);if(this.rawFrames)return void this.rawFrames.push(b.data);var d=this.decoderSession;d?d.pushAsync(b.data):this.data.pcm.set(b.pcm,c)},playFrame:function(a){if(!isNaN(this.seekIndex[a])){var b=1,c=.25,d=this.element;if(d){var e=this.data,f=this.seekIndex[a]/e.sampleRate/e.channels;if(this.channel||!this.movieClip._complete&&!this.sourceBuffer){if(this.sourceBuffer||!isNaN(d.duration)){this.mediaSource&&this.movieClip._complete&&(this.mediaSource.endOfStream(),this.mediaSource=null);var g=d.currentTime;this.expectedFrame!==a?d.paused?(d.play(),d.addEventListener("playing",function l(){d.removeEventListener("playing",l),d.currentTime=f})):d.currentTime=f:this.waitFor>0?this.waitFor<=f&&(d.paused&&d.play(),this.waitFor=0):g-f>b?(console.warn("Sound is faster than frames by "+(g-f)),this.waitFor=g-c,d.pause()):f-g>b&&(console.warn("Sound is slower than frames by "+(f-g)),d.currentTime=f+c),this.expectedFrame=a+1}}else{if(!this.sourceBuffer){var h=new Blob(this.rawFrames);d.src=URL.createObjectURL(h)}var i=flash.media.SoundChannel.class,j=i.createAsSymbol({element:d});i.instanceConstructor.call(j),this.channel=j,this.expectedFrame=0,this.waitFor=0}}else if(!this.sound){var i=flash.media.Sound.class,k=i.createAsSymbol(this.data);i.instanceConstructor.call(k);var j=k.play();this.sound=k,this.channel=j}}}},c}(),NativeMenuDefinition=function(){return{__class__:"flash.display.NativeMenu",initialize:function(){},__glue__:{"native":{"static":{},instance:{}}}}}.call(this),NativeMenuItemDefinition=function(){return{__class__:"flash.display.NativeMenuItem",initialize:function(){},__glue__:{"native":{"static":{},instance:{enabled:{get:function(){return somewhatImplemented("NativeMenuItem.enabled"),this._enabled},set:function(a){somewhatImplemented("NativeMenuItem.enabled"),this._enabled=a}}}}}}}.call(this),SceneDefinition=function(){return{__class__:"flash.display.Scene",initialize:function(){this._startFrame=1,this._endFrame=1},__glue__:{"native":{"static":{},instance:{}},script:{"static":{},instance:{name:{get:function(){return notImplemented("Scene.name"),this._name}},labels:{get:function(){return notImplemented("Scene.labels"),this._labels}},numFrames:{get:function(){return notImplemented("Scene.numFrames"),this._numFrames}}}}}}}.call(this),ShaderDefinition=function(){return{__class__:"flash.display.Shader",initialize:function(){this._data=null},__glue__:{"native":{"static":{},instance:{data:{get:function(){return this._data},set:function(a){this._data=a}},precisionHint:{get:function(){return this._precisionHint},set:function(a){this._precisionHint=a}}}},script:{instance:Glue.ALL}}}}.call(this),ShaderDataDefinition=function(){return{__class__:"flash.display.ShaderData",initialize:function(){this._byteCode=null},__glue__:{"native":{"static":{},instance:{_setByteCode:function(a){this._byteCode=a}}},script:{instance:Glue.ALL}}}}.call(this),ShapeDefinition=function(){var a={__class__:"flash.display.Shape",initialize:function(){var a=this._graphics=new flash.display.Graphics;a._parent=this;var b=this.symbol;if(b&&b.paths){a._paths=b.paths;for(var c=0;c<b.paths.length;c++)b.paths[c]=finishShapePath(b.paths[c],b.dictionaryResolved);a.bbox=b.bbox,a.strokeBbox=b.strokeBbox,this._stage&&"low"===this._stage._quality&&!a._bitmap&&a._cacheAsBitmap(this._bbox),this.ratio=b.ratio||0}}};return a.__glue__={"native":{instance:{graphics:{get:function(){return this._graphics}}}}},a}.call(this),SimpleButtonDefinition=function(){var a=[0,37,39,36,35,45,46,0,8,0,0,0,0,13,38,40,33,34,9,27],b=[0,0,1,128,64,0,0,32,2,0,0,4,256,16,8,0];return{__class__:"flash.display.SimpleButton",initialize:function(){this._useHandCursor=!0,this._enabled=!0,this._trackAsMenu=!1,this._upState=null,this._overState=null,this._downState=null,this._hitTestState=null,this._currentButtonState="up",this._mouseChildren=!1,this._buttonMode=!0,this._prevAvm1StateCode=0,this._avm1StateCode=0,this._avm1MouseEvents=null,this._isContainer=!0;var a=this.symbol;if(a){var b=a.states;b.down&&(this._downState=this._constructState(b.down,this)),b.hitTest&&(this._hitTestState=this._constructState(b.hitTest,this)),b.over&&(this._overState=this._constructState(b.over,this)),b.up&&(this._upState=this._constructState(b.up,this))}this._loader&&!this._loader._isAvm2Enabled&&a&&a.buttonActions&&this._addEventListener("addedToStage",function(){this._initAvm1Events(a.buttonActions)}.bind(this),!1)},_constructState:function(a){var b=avm2.systemDomain.findClass(a.className)?avm2.systemDomain.getClass(a.className):avm2.applicationDomain.getClass(a.className),c=b.createAsSymbol(a.props);return b.instanceConstructor.call(c),1===c._children.length&&(c=c._children[0],c._parent=null,c._index=-1),c},_updateButton:function(){var a=null;switch(this._currentButtonState){case"up":a=this._upState;break;case"over":a=this._overState;break;case"down":a=this._downState}if(a){var b=this._children[0];if(b){if(b===a)return;this._stage&&this._stage._removeFromStage(b),b._invalidateTransform()}if(!a)return void this._children.shift();this._children[0]=a,a._parent=this,a._invalidateTransform(),this._stage&&this._stage._addToStage(a)}},_gotoButtonState:function(a){this._invalidateBounds(),this._currentButtonState=a,this._updateButton(),this._avm1MouseEvents&&this._processAvm1MouseEvents(this._avm1MouseEvents)},_getRegion:function(a){if(!this._hitTestState)return{xMin:0,yMin:0,xMax:0,yMax:0};var b=this._hitTestState.getBounds(null);return this._getTransformedRect(b,a)},_getAS2Object:function(){return this.$as2Object||new avm1lib.AS2Button(this),this.$as2Object},_initAvm1Events:function(b){for(var c=this._loader,d=c._avm1Context,e=null,f=0;f<b.length;f++){var g=b[f],h=function(a){return executeActions(a,d,this._getAS2Object())}.bind(this.parent,g.actionsData),i=g.mouseEventFlags;if(i){var j=this._avm1MouseEvents||(this._avm1MouseEvents=[]);j.push({flags:i,listener:h})}var k=g.keyPress;k&&(e=e||(e=[]),e.push({keyCode:a[k]||0,charCode:k,listener:h}))}if(e){var l=function(a){for(var b=0;b<e.length;b++){var c=e[b];(c.keyCode?c.keyCode===a.keyCode:c.charCode===a.charCode)&&c.listener()}},m=flash.events.KeyboardEvent;this.stage._addEventListener(m.class.KEY_DOWN,l,!1),this._addEventListener("removedFromStage",function(a){a._removeEventListener(m.class.KEY_DOWN,l,!1)}.bind(this,this.stage),!1)}},_processAvm1MouseEvents:function(a){var c=this._avm1StateCode,d=("down"===this._currentButtonState?1:0)|("up"!==this._currentButtonState?2:0);if(c!==d){this._prevAvm1StateCode=c,this._avm1StateCode=d;for(var e=b[c<<2|d],f=0;f<a.length;f++){var g=a[f];0!==(g.flags&e)&&g.listener()}}},__glue__:{"native":{instance:{_updateButton:function(){this._updateButton()},useHandCursor:{get:function(){return this._useHandCursor},set:function(a){this._useHandCursor=a}},enabled:{get:function(){return this._enabled},set:function(a){this._enabled=a}},trackAsMenu:{get:function(){return notImplemented("SimpleButton.trackAsMenu"),this._trackAsMenu},set:function(a){notImplemented("SimpleButton.trackAsMenu"),this._trackAsMenu=a}},upState:{get:function(){return this._upState},set:function(a){this._upState=a,this._updateButton()}},overState:{get:function(){return this._overState},set:function(a){this._overState=a,this._updateButton()}},downState:{get:function(){return this._downState},set:function(a){this._downState=a,this._updateButton()}},hitTestState:{get:function(){return this._hitTestState},set:function(a){a!==this._hitTestState&&(this._invalidate(),this._hitTestState=a)}},soundTransform:{get:function(){return notImplemented("SimpleButton.soundTransform"),this._soundTransform},set:function(a){notImplemented("SimpleButton.soundTransform"),this._soundTransform=a}}}}}}}.call(this),SpriteDefinition=function(){var a={__class__:"flash.display.Sprite",initialize:function(){this._buttonMode=!1,this._hitArea=null,this._useHandCursor=!0,this._hitTarget=null,this._currentDisplayList=null;var a=this.symbol;if(a){if(this._graphics=a.graphics||new flash.display.Graphics,a.timeline){var b=a.timeline[0];if(b)for(var c=b.depths,d=0;d<c.length;d++){var e=b[c[d]];if(e){var f=this._addTimelineChild(e);f.next=this._currentDisplayList,this._currentDisplayList=f}}}}else this._graphics=new flash.display.Graphics;this._graphics._parent=this},_addTimelineChild:function(a,b){var c=a.symbolInfo,d=Object.create(c.props);d.symbolId=a.symbolId,d.depth=a.depth,a.clip&&(d.clipDepth=a.clipDepth),a.hasCxform&&(d.cxform=a.cxform),a.hasMatrix&&(d.currentTransform=a.matrix),a.hasName&&(d.name=a.name),a.hasRatio&&(d.ratio=a.ratio/65535),a.blend&&(d.blendMode=a.blendMode);var e={cmd:a,depth:a.depth,className:c.className,props:d,events:a.events,obj:null};return void 0!==b?this._children.splice(b,0,e):this._children.push(e),this._sparse=!0,e},_constructChildren:function(){if(this._sparse){for(var a=this._loader,b=this._children,c=0;c<b.length;c++){var d=b[c];if(Counter.count("constructChild"),flash.display.DisplayObject.class.isInstanceOf(d))d._index=c;else{var e=avm2.systemDomain.findClass(d.className)?avm2.systemDomain.getClass(d.className):avm2.applicationDomain.getClass(d.className),f=Object.create(d.props),g=f.name;f.animated=!0,f.owned=!0,f.parent=this,f.stage=this._stage,this._level>-1&&(f.level=this._level+1),f.index=c;var h=e.createAsSymbol(f);if(g&&(this[Multiname.getPublicQualifiedName(g)]=h),e.instanceConstructor.call(h),flash.display.BitmapData.class.isInstanceOf(h)){var i=h;h=flash.display.Bitmap.class.createAsSymbol(f),flash.display.Bitmap.class.instanceConstructor.call(h,i)}a._isAvm2Enabled?h._dispatchEvent("load"):(this._initAvm1Bindings(h,g,d.events),h._dispatchEvent("init"),h._dispatchEvent("construct"),h._needLoadEvent=!0),h._dispatchEvent("added",void 0,!0),this._stage&&this._stage._addToStage(h),b[c]=h,d.obj=h}}this._sparse=!1}},_postConstructChildren:function(){var a=this._loader;if(a&&!a._isAvm2Enabled)for(var b=this._children,c=0;c<b.length;c++){var d=b[c];d._needLoadEvent&&(d._needLoadEvent=!1,d._dispatchEvent("load"))}},_duplicate:function(a,b){var c=this._loader,d=this._parent,e=d._children,f=this.class,g=this.symbol,h=Object.create(g);h.name=a,h.parent=d,h.depth=b;var i=f.createAsSymbol(h);return a&&c&&!c._isAvm2Enabled&&!d.asHasProperty(void 0,a,0,!1)&&d.asSetPublicProperty(a,i),f.instanceConstructor.call(i),i._index=e.length,e.push(i),c._isAvm2Enabled||(d._initAvm1Bindings(i,a,g&&g.events),i._dispatchEvent("init"),i._dispatchEvent("construct")),i._dispatchEvent("load"),i._dispatchEvent("added"),this._stage&&i._invalidate(),i},_insertChildAtDepth:function(a){this.addChild(a);var b=a._name,c=this._loader;b&&c&&!c._isAvm2Enabled&&!this._getAS2Object().asHasProperty(void 0,b,0,!0)&&this._getAS2Object().asSetPublicProperty(b,a._getAS2Object())},_initAvm1Bindings:function(a,b,c){var d=this._loader,e=d._avm1Context,f=a.symbol;if(f&&f.variableName&&a._getAS2Object().asSetPublicProperty("variable",f.variableName),c){for(var g=[],h=0;h<c.length;h++){var i=c[h];if(i.eoe)break;var j=function(a){return executeActions(a,e,this._getAS2Object())}.bind(a,i.actionsData);for(var k in i)if(0===k.indexOf("on")&&i[k]){var l=k[2].toLowerCase()+k.substring(3);"enterFrame"===l&&(l="frameConstructed");var m=a;("mouseDown"===l||"mouseUp"===l||"mouseMove"===l)&&(m=this._stage),m._addEventListener(l,j,!1),g.push({name:l,fn:j,target:m})}}g.length>0&&a._addEventListener("removed",function(a){for(var b=0;b<a.length;b++)a[b].target._removeEventListener(a[b].name,a[b].fn,!1)}.bind(a,g),!1)}b&&this._getAS2Object&&a._getAS2Object&&this._getAS2Object().asSetPublicProperty(b,a._getAS2Object())},_gotoButtonState:function(){},get buttonMode(){return this._buttonMode},set buttonMode(a){this._buttonMode=a},get graphics(){return this._graphics},get hitArea(){return this._hitArea},set hitArea(a){this._hitArea!==a&&(a&&a._hitTarget&&(a._hitTarget.hitArea=null),this._hitArea=a,a&&(a._hitTarget=this))},get soundTransform(){notImplemented()},set soundTransform(a){notImplemented()},get useHandCursor(){return this._useHandCursor},set useHandCursor(a){this._useHandCursor=a,this._stage&&(this._stage._mouseMoved=!0)},startDrag:function(){notImplemented()},startTouchDrag:function(){notImplemented()},stopDrag:function(){notImplemented()},stopTouchDrag:function(){notImplemented()}},b=Object.getOwnPropertyDescriptor;return a.__glue__={"native":{instance:{graphics:b(a,"graphics"),buttonMode:b(a,"buttonMode"),dropTarget:b(a,"dropTarget"),startDrag:a.startDrag,stopDrag:a.stopDrag,startTouchDrag:a.startTouchDrag,stopTouchDrag:a.stopTouchDrag,constructChildren:a._constructChildren,hitArea:b(a,"hitArea"),useHandCursor:b(a,"useHandCursor"),soundTransform:b(a,"soundTransform")}}},a}.call(this),StageDefinition=function(){return{__class__:"flash.display.Stage",initialize:function(){this._frameRate=24,this._scaleMode="showAll",this._align="",this._stageWidth=0,this._stageHeight=0,this._quality="high",this._color=4294967295,this._stage=this,this._deferRenderEvent=!1,this._focus=null,this._showDefaultContextMenu=!0,this._displayState="normal",this._colorCorrection="default",this._stageFocusRect=!0,this._fullScreenSourceRect=null,this._wmodeGPU=!1,this._root=null,this._qtree=null,this._invalidRegions=new RegionCluster,this._mouseMoved=!1,this._mouseTarget=this,this._mouseEvents=[],this._cursor="auto",this._stageVideos=[],this._concatenatedTransform.invalid=!1},_setup:function(){this._qtree=new QuadTree(0,0,this._stageWidth,this._stageHeight,null),this._invalid=!0},_addToStage:function(a){a._stage=this;var b=a._parent;a._level=b._level+1,a._invalid=!0;for(var c=a._children,d=0;d<c.length;d++){var e=c[d];null===e._stage&&this._addToStage(e)}a._dispatchEvent("addedToStage")},_removeFromStage:function(a){for(var b=a._children,c=0;c<b.length;c++){var d=b[c];d._stage&&this._removeFromStage(b[c])}a._dispatchEvent("removedFromStage"),a._stage=null,a._level=-1,a._region&&(this._qtree.remove(a._region),this._invalidRegions.insert(a._region),a._region=null)},_processInvalidations:function(a){for(var b=this._qtree,c=this._invalidRegions,d=[],e=0,f=this._children,g=f.length;g--;){var h=f[g];a&&(h._invalid=!0),h._invisible=!h._visible,d.push(h)}for(;d.length;){for(var i=d.pop(),j=i._concatenatedTransform,f=i._children,g=f.length;g--;){var h=f[g];flash.display.DisplayObject.class.isInstanceOf(h)&&(i._invalid&&(h._invalid=!0),j.invalid&&(h._concatenatedTransform.invalid=!0),h._invisible=i._invisible||!h._visible,d.push(h))}if(i._level&&j.invalid){var k=i._currentTransform,l=i._parent._concatenatedTransform;j.a=k.a*l.a+k.b*l.c,j.b=k.a*l.b+k.b*l.d,j.c=k.c*l.a+k.d*l.c,j.d=k.d*l.d+k.c*l.b,j.tx=k.tx*l.a+l.tx+k.ty*l.c,j.ty=k.ty*l.d+l.ty+k.tx*l.b,j.invalid=!1}var m=i._region,n=i._getRegion(j),o=i._invisible||!n||n.xMax-n.xMin===0||n.yMax-n.yMin===0||n.xMax<=0||n.xMin>=this._stageWidth||n.yMax<=0||n.yMin>=this._stageHeight;i._invalid&&(m&&c.insert(m),o||m&&n.xMin===m.xMin&&n.yMin===m.yMin&&n.xMax===m.xMax&&n.yMax===m.yMax||c.insert(n)),o?m&&(b.remove(m),i._region=null):m?(m.xMin=n.xMin,m.xMax=n.xMax,m.yMin=n.yMin,m.yMax=n.yMax,b.update(m)):(n.obj=i,b.insert(n),i._region=n),i._zindex=e++}var p=new ShapePath;if(a)return p.rect(0,0,this._stageWidth,this._stageHeight),c.reset(),p;for(var q=c.retrieve(),g=0;g<q.length;g++){for(var r=q[g],s=r.xMin-r.xMin%20-40,t=r.yMin-r.yMin%20-40,u=r.xMax-r.xMax%20+80,v=r.yMax-r.yMax%20+80,w=b.retrieve(s,u,t,v),x=0;x<w.length;x++){var y=w[x];y.obj._invalid=!0}p.rect(s,t,u-s,v-t)}return c.reset(),p},_handleMouseButtons:function(){if(0!==this._mouseEvents.length){var a=this._mouseEvents.shift();switch(a){case"mousedown":this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("down"),this._mouseTarget._dispatchEvent("mouseDown");break;case"mouseup":this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("over"),this._mouseTarget._dispatchEvent("mouseUp")}}},_handleMouse:function(){for(var a=this._mouseX,b=this._mouseY,c=this._qtree.retrieve(a,a,b,b),d=[],e=0;e<c.length;e++){var f=c[e],g=f.obj,h=!1;if(flash.display.SimpleButton.class.isInstanceOf(g)){if(!g._enabled)continue;var i=g._hitTestState;i._parent=g,h=i._hitTest(!0,a,b,!0),i._parent=null}else h=g._hitTest(!0,a,b,!0);if(h){var j=g,k=null;flash.display.InteractiveObject.class.isInstanceOf(j)||(k=j,j=j._parent);do j._mouseEnabled?null===k&&(k=j):k=null,j=j._parent;while(j);d.push(k)}}var l;if(d.length){d.sort(sortByZindex);for(var e=d.length;e--;){l=null;var j=d[e];if(!flash.display.InteractiveObject.class.isInstanceOf(j))for(var m=e;m--;)d[m]._parent===j._parent&&flash.display.InteractiveObject.class.isInstanceOf(d[m])&&(j=d[m],e=m);do flash.display.InteractiveObject.class.isInstanceOf(j)&&(l&&j._mouseChildren||j._hitArea||(l=j)),j=j._parent;while(j);if(l===d[e]||!flash.display.SimpleButton.class.isInstanceOf(l))break}}if(l?l._hitTarget&&(l=l._hitTarget):l=this,l===this._mouseTarget)l._dispatchEvent("mouseMove");else{this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("up"),this._mouseTarget._dispatchEvent("mouseOut");for(var n=this._mouseTarget,o=n._parent,p=l,q=p._parent,r="auto";n._level>=0&&n!==q;)n._hasEventListener("rollOut")&&n._dispatchEvent("rollOut"),n=n._parent;for(;p._level>=0&&p!==o;)p._hasEventListener("rollOver")&&p._dispatchEvent("rollOver"),p._buttonMode&&p._useHandCursor&&(r="pointer"),p=p._parent;l._buttonMode&&l._gotoButtonState("over"),l._dispatchEvent("mouseOver"),this._mouseTarget=l,this._cursor=r}},_as2SetLevel:function(a,b){somewhatImplemented("Stage._as2SetLevel"),this.addChild(b)},__glue__:{"native":{instance:{invalidate:function(){this._invalid=!0,this._deferRenderEvent=!0},isFocusInaccessible:function(){notImplemented("Stage.isFocusInaccessible")},set_displayState:function(a){somewhatImplemented("Stage.set_displayState"),this._displayState=a},get_simulatedFullScreenWidth:function(){notImplemented("Stage.get_simulatedFullScreenWidth")},get_simulatedFullScreenHeight:function(){notImplemented("Stage.get_simulatedFullScreenHeight")},removeChildAt:function(){notImplemented("Stage.removeChildAt")},swapChildrenAt:function(){notImplemented("Stage.swapChildrenAt")},requireOwnerPermissions:function(){somewhatImplemented("Stage.requireOwnerPermissions")},frameRate:{get:function(){return this._frameRate},set:function(a){this._frameRate=a}},scaleMode:{get:function(){return this._scaleMode},set:function(a){this._scaleMode=a,this._invalid=!0}},align:{get:function(){return this._align},set:function(a){this._align=a,this._invalid=!0}},stageWidth:{get:function(){return this._stageWidth/20},set:function(a){notImplemented("Stage.stageWidth"),this._stageWidth=20*a|0}},stageHeight:{get:function(){return this._stageHeight/20},set:function(a){notImplemented("Stage.stageHeight"),this._stageHeight=20*a|0}},showDefaultContextMenu:{get:function(){return this._showDefaultContextMenu},set:function(a){somewhatImplemented("Stage.showDefaultContextMenu"),this._showDefaultContextMenu=a}},focus:{get:function(){return this._focus},set:function(a){somewhatImplemented("Stage.focus"),this._focus=a}},colorCorrection:{get:function(){return this._colorCorrection},set:function(a){notImplemented("Stage.colorCorrection"),this._colorCorrection=a}},colorCorrectionSupport:{get:function(){return!1}},stageFocusRect:{get:function(){return this._stageFocusRect},set:function(a){somewhatImplemented("Stage.stageFocusRect"),this._stageFocusRect=a}},quality:{get:function(){return this._quality},set:function(a){somewhatImplemented("Stage.stageFocusRect"),this._quality=a}},displayState:{get:function(){return this._displayState},set:function(a){this._displayState=a}},simulatedDisplayState:{get:function(){return notImplemented("Stage.simulatedDisplayState"),this._simulatedDisplayState},set:function(a){notImplemented("Stage.simulatedDisplayState"),this._simulatedDisplayState=a}},fullScreenSourceRect:{get:function(){return this._fullScreenSourceRect},set:function(a){notImplemented("Stage.fullScreenSourceRect"),this._fullScreenSourceRect=a}},simulatedFullScreenSourceRect:{get:function(){return notImplemented("Stage.simulatedFullScreenSourceRect"),this._simulatedFullScreenSourceRect},set:function(a){notImplemented("Stage.simulatedFullScreenSourceRect"),this._simulatedFullScreenSourceRect=a}},stageVideos:{get:function(){return somewhatImplemented("Stage.stageVideos"),this._stageVideos}},stage3Ds:{get:function(){return notImplemented("Stage.stage3Ds"),this._stage3Ds}},color:{get:function(){return this._color},set:function a(a){this._color=a,this._invalid=!0}},fullScreenWidth:{get:function(){return notImplemented("Stage.fullScreenWidth"),this._fullScreenWidth}},fullScreenHeight:{get:function(){return notImplemented("Stage.fullScreenHeight"),this._fullScreenHeight}},wmodeGPU:{get:function(){return somewhatImplemented("Stage.wmodeGPU"),this._wmodeGPU}},softKeyboardRect:{get:function(){return notImplemented("Stage.softKeyboardRect"),this._softKeyboardRect}},allowsFullScreen:{get:function(){return!1}},displayContextInfo:{get:function(){return notImplemented("Stage.displayContextInfo"),this._displayContextInfo}}}}}}}.call(this),EventDefinition=function(){return{__class__:"flash.events.Event",initialize:function(){this._stopPropagation=!1,this._stopImmediatePropagation=!1,this._isDefaultPrevented=!1,this._target=null,this._currentTarget=null,this._eventPhase=2},__glue__:{"native":{instance:{ctor:function(a,b,c){Counter.count("Event: "+a),this._type=a,this._bubbles=b,this._cancelable=c},stopPropagation:function(){this._stopPropagation=!0},stopImmediatePropagation:function(){this._stopImmediatePropagation=this._stopPropagation=!0},preventDefault:function(){this._cancelable&&(this._isDefaultPrevented=!0)},isDefaultPrevented:function(){return this._isDefaultPrevented},type:{get:function(){return this._type}},bubbles:{get:function(){return this._bubbles}},cancelable:{get:function(){return this._cancelable}},target:{get:function(){return this._target}},currentTarget:{get:function(){return this._currentTarget}},eventPhase:{get:function(){return this._eventPhase}}}},script:{"static":Glue.ALL,instance:{clone:"open public clone"}}}}}.call(this),EventDispatcherDefinition=function(){function a(a,d,e,f){var g=a._target,h=d._type||d,i=a._listeners[h];if(f||"string"==typeof d&&c[d]||d._bubbles){for(var j=[],k=g._parent;k;)k._hasEventListener(h)&&j.push(k),k=k._parent;if(!i&&!j.length)return!0;for(var l=!0,m=j.length;m--&&l;){var n=j[m],o=n._captureListeners[h];l=b(o,d,e,f,g,n,1)}i&&l&&(l=b(i,d,e,f,g));for(var m=0;m<j.length&&l;m++){var n=j[m],o=n._listeners[h];l=b(o,d,e,f,g,n,3)}}else i&&b(i,d,e,f,g);return!d._isDefaultPrevented}function b(a,b,d,e,f,g,h){if(a){a=a.slice();var i=!0;try{for(var j=0;j<a.length;j++){var k=a[j],l=k.handleEvent.methodInfo;if(l&&l.parameters.length&&!l.parameters[0].isUsed)k.handleEvent();else if(i&&("string"==typeof b?d?b=new d(b):c[b]?(b=new flash.events.MouseEvent(b,c[b]),f._stage&&(b._localX=f.mouseX,b._localY=f.mouseY)):b=new flash.events.Event(b):b._target&&(b=b.clone()),b._target=f,b._currentTarget=g||f,b._eventPhase=h||2,i=!1),k.handleEvent(b),b._stopImmediatePropagation)break}}catch(m){throw avm2.exceptions.push({source:"avm2",message:m.message,stack:m.stack}),m}}return!b._stopPropagation}var c={click:!0,contextMenu:!0,doubleClick:!0,middleClick:!0,middleMouseDown:!0,middleMouseUp:!0,mouseDown:!0,mouseMove:!0,mouseOut:!0,mouseOver:!0,mouseUp:!0,mouseWheel:!0,releaseOutside:!0,rightClick:!0,rightMouseDown:!0,rightMouseUp:!0,rollOut:!1,rollOver:!1};return{__class__:"flash.events.EventDispatcher",initialize:function(){this._target=this,this._listeners={},this._captureListeners={}},_addEventListenerImpl:function(a,b,c,d){"function"!=typeof b&&throwError("TypeError",Errors.CheckTypeFailedError,b,"Function");var e=c?this._captureListeners:this._listeners,f=e[a],g={handleEvent:b,priority:d||0};if(f){for(var h=f.length,i=h;i--;){var j=f[i];if(j.handleEvent===b)return;d>j.priority&&(h=i)}f.splice(h,0,g)}else e[a]=[g]},_addEventListener:function(a,b,c,d){this._addEventListenerImpl(a,b,c,d)},_removeEventListenerImpl:function(a,b,c){"function"!=typeof b&&throwError("TypeError",Errors.CheckTypeFailedError,b,"Function");var d=c?this._captureListeners:this._listeners,e=d[a];if(e)for(var f=0;f<e.length;f++){var g=e[f];
if(g.handleEvent===b)return e.splice(f,1),void(e.length||(d[a]=null))}},_removeEventListener:function(a,b,c){this._removeEventListenerImpl(a,b,c)},_hasEventListener:function(a){return this._listeners[a]||this._captureListeners[a]},_dispatchEvent:function(b,c,d){a(this,b,c,d)},__glue__:{"native":{instance:{ctor:function(a){this._target=a||this},addEventListener:function(a,b,c,d){this._addEventListener(a,b,c,d)},removeEventListener:function(a,b,c){this._removeEventListener(a,b,c)},hasEventListener:function(a){return this._hasEventListener(a)},willTrigger:function(a){var b=this._target;do if(b._hasEventListener(a))return!0;while(b=b._parent);return!1},dispatchEventFunction:function(b){return a(this,b)}}}}}}.call(this),KeyboardEventDefinition=function(){return{__class__:"flash.events.KeyboardEvent",__glue__:{"native":{instance:{updateAfterEvent:function(){notImplemented("KeyboardEvent.updateAfterEvent")},charCode:{get:function(){return this._charCode},set:function(a){this._charCode=a}},ctrlKey:{get:function(){return this._ctrlKey},set:function(a){this._ctrlKey=a}},altKey:{get:function(){return this._altKey},set:function(a){this._altKey=a}},shiftKey:{get:function(){return this._shiftKey},set:function(a){this._shiftKey=a}}}},script:{"static":Glue.ALL,instance:{keyCode:"public keyCode"}}}}}.call(this),MouseEventDefinition=function(){return{__class__:"flash.events.MouseEvent",initialize:function(){this._localX=0/0,this._localY=0/0},__glue__:{"native":{instance:{updateAfterEvent:function(){},getStageX:function(){if(this._target){var a=this._target._getConcatenatedTransform(null,!1),b=a.a*this._localX+a.c*this._localY+a.tx;return b/20}return this._localX/20},getStageY:function(){if(this._target){var a=this._target._getConcatenatedTransform(null,!1),b=a.d*this._localY+a.b*this._localX+a.ty;return b/20}return this._localY/20},localX:{get:function(){return this._localX/20},set:function(a){this._localX=20*a|0}},localY:{get:function(){return this._localY/20},set:function(a){this._localY=20*a|0}}}},script:{"static":Glue.ALL}}}}.call(this),TextEventDefinition=function(){return{__class__:"flash.events.TextEvent",__glue__:{"native":{instance:{copyNativeData:function(){notImplemented("TextEvent.copyNativeData")}}}}}}.call(this),TimerEventDefinition=function(){return{__class__:"flash.events.TimerEvent",__glue__:{"native":{instance:{updateAfterEvent:function(){notImplemented("TimerEvent.updateAfterEvent")}}}}}}.call(this),ExternalInterfaceDefinition=function(){function a(){return!0}function b(a,b){return d.hasOwnProperty(a)?d[a](a,b):void 0}var c=!1,d={};return{__class__:"flash.external.ExternalInterface",initialize:function(){},__glue__:{"native":{"static":{_initJS:function(){c||(TelemetryService.reportTelemetry({topic:"feature",feature:EXTERNAL_INTERFACE_FEATURE}),c=!0,FirefoxCom.initJS(b))},_getPropNames:function(a){var b=[];return forEachPublicProperty(a,function(a){b.push(a)}),b},_addCallback:function(a,b,c){FirefoxCom.request("externalCom",{action:"register",functionName:a,remove:c}),c?delete d[a]:d[a]=b},_evalJS:function(a){return FirefoxCom.requestSync("externalCom",{action:"eval",expression:a})},_callOut:function(a){return FirefoxCom.requestSync("externalCom",{action:"call",request:a})},available:{get:a},objectID:{get:function(){return FirefoxCom.requestSync("externalCom",{action:"getId"})}},activeX:{get:function(){return!1}}},instance:{}}}}}.call(this),BevelFilterDefinition=function(){var a={__class__:"flash.filters.BevelFilter",initialize:function(){},_updateFilterBounds:function(){}};return a.__glue__={},a}.call(this),BitmapFilterDefinition=function(){var a={__class__:"flash.filters.BitmapFilter",initialize:function(){},_updateFilterBounds:function(){}};return a.__glue__={},a}.call(this),BlurFilterDefinition=function(){return{__class__:"flash.filters.BlurFilter",initialize:function(){},_updateFilterBounds:function(a){var b=this._blurX*this._quality*20,c=this._blurY*this._quality*20;a.xMin-=b,a.xMax+=b,a.yMin-=c,a.yMax+=c},__glue__:{"native":{"static":{},instance:{blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}}}}}}}.call(this),ColorMatrixFilterDefinition=function(){return{__class__:"flash.filters.ColorMatrixFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{"native":{instance:{matrix:{get:function(){return this._matrix},set:function(a){this._matrix=a}}}}}}}.call(this),ConvolutionFilterDefinition=function(){var a={__class__:"flash.filters.ConvolutionFilter",initialize:function(){},_updateFilterBounds:function(){}};return a.__glue__={},a}.call(this),DisplacementMapFilterDefinition=function(){var a={__class__:"flash.filters.DisplacementMapFilter",initialize:function(){},_updateFilterBounds:function(){}};return a.__glue__={},a}.call(this),DropShadowFilterDefinition=function(){return{__class__:"flash.filters.DropShadowFilter",initialize:function(){},_updateFilterBounds:function(a){var b=this._angle*Math.PI/180,c=Math.sin(b)*this._distance,d=Math.cos(b)*this._distance,e=this._blurX*this._quality*20,f=this._blurY*this._quality*20;a.xMin-=e-(d>0?0:d),a.xMax+=e+Math.abs(d),a.yMin-=f-(c>0?0:c),a.yMax+=f+Math.abs(c)},__glue__:{"native":{instance:{distance:{get:function(){return this._distance},set:function(a){this._distance=a}},angle:{get:function(){return this._angle},set:function(a){this._angle=a}},color:{get:function(){return this._color},set:function(a){this._color=a}},alpha:{get:function(){return this._alpha},set:function(a){this._alpha=a}},blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},hideObject:{get:function(){return this._hideObject},set:function(a){this._hideObject=a}},inner:{get:function(){return this._inner},set:function(a){this._inner=a}},knockout:{get:function(){return this._knockout},set:function(a){this._knockout=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}},strength:{get:function(){return this._strength},set:function(a){this._strength=a}}}}}}}.call(this),GlowFilterDefinition=function(){return{__class__:"flash.filters.GlowFilter",initialize:function(){},_updateFilterBounds:function(a){var b=this._blurX*this._quality*20,c=this._blurY*this._quality*20;a.xMin-=b,a.xMax+=b,a.yMin-=c,a.yMax+=c},__glue__:{"native":{"static":{},instance:{color:{get:function(){return this._color},set:function(a){this._color=a}},alpha:{get:function(){return this._alpha},set:function(a){this._alpha=a}},blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},inner:{get:function(){return this._inner},set:function(a){this._inner=a}},knockout:{get:function(){return this._knockout},set:function(a){this._knockout=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}},strength:{get:function(){return this._strength},set:function(a){this._strength=a}}}}}}}.call(this),GradientBevelFilterDefinition=function(){var a={__class__:"flash.filters.GradientBevelFilter",initialize:function(){},_updateFilterBounds:function(){}};return a.__glue__={},a}.call(this),GradientGlowFilterDefinition=function(){var a={__class__:"flash.filters.GradientGlowFilter",initialize:function(){},_updateFilterBounds:function(){}};return a.__glue__={},a}.call(this),ShaderFilterDefinition=function(){var a={__class__:"flash.filters.ShaderFilter",initialize:function(){},_updateFilterBounds:function(){}};return a.__glue__={},a}.call(this),ColorTransformDefinition=function(){return{__class__:"flash.geom.ColorTransform",__glue__:{script:{instance:Glue.ALL}}}}.call(this),MatrixDefinition=function(){return{__class__:"flash.geom.Matrix",__glue__:{script:{instance:Glue.ALL}}}}.call(this),Matrix3DDefinition=function(){function a(a,b,c,d,e,f,g){var h=b*b,i=c*c,j=d*d,k=h+i+j,l=Math.sqrt(k);b/=l,c/=l,d/=l,h/=k,i/=k,j/=k;var m=Math.cos(a),n=Math.sin(a);return new flash.geom.Matrix3D([h+(i+j)*m,b*c*(1-m)+d*n,b*d*(1-m)-c*n,0,b*c*(1-m)-d*n,i+(h+j)*m,c*d*(1-m)+b*n,0,b*d*(1-m)+c*n,c*d*(1-m)-b*n,j+(h+i)*m,0,(e*(i+j)-b*(f*c+g*d))*(1-m)+(f*d-g*c)*n,(f*(h+j)-c*(e*b+g*d))*(1-m)+(g*b-e*d)*n,(g*(h+i)-d*(e*b+f*c))*(1-m)+(e*c-f*b)*n,1])}var b=1e-7,c=new Uint32Array([0,4,8,12,1,5,9,13,2,6,10,14,3,7,11,15]);return{__class__:"flash.geom.Matrix3D",initialize:function(){},__glue__:{"native":{"static":{interpolate:function(){notImplemented("Matrix3D.interpolate")}},instance:{ctor:function(a){this._matrix=new Float32Array(16),a&&a.length>=16?this.copyRawDataFrom(a,0,!1):this.identity()},clone:function(){return new flash.geom.Matrix3D(this._matrix)},copyToMatrix3D:function(a){a._matrix.set(this._matrix)},append:function(a){var b=a._matrix,c=this._matrix,d=this._matrix,e=b[0],f=b[4],g=b[8],h=b[12],i=b[1],j=b[5],k=b[9],l=b[13],m=b[2],n=b[6],o=b[10],p=b[14],q=b[3],r=b[7],s=b[11],t=b[15],u=c[0],v=c[4],w=c[8],x=c[12],y=c[1],z=c[5],A=c[9],B=c[13],C=c[2],D=c[6],E=c[10],F=c[14],G=c[3],H=c[7],I=c[11],J=c[15];d[0]=e*u+f*y+g*C+h*G,d[1]=i*u+j*y+k*C+l*G,d[2]=m*u+n*y+o*C+p*G,d[3]=q*u+r*y+s*C+t*G,d[4]=e*v+f*z+g*D+h*H,d[5]=i*v+j*z+k*D+l*H,d[6]=m*v+n*z+o*D+p*H,d[7]=q*v+r*z+s*D+t*H,d[8]=e*w+f*A+g*E+h*I,d[9]=i*w+j*A+k*E+l*I,d[10]=m*w+n*A+o*E+p*I,d[11]=q*w+r*A+s*E+t*I,d[12]=e*x+f*B+g*F+h*J,d[13]=i*x+j*B+k*F+l*J,d[14]=m*x+n*B+o*F+p*J,d[15]=q*x+r*B+s*F+t*J},prepend:function(a){var b=this._matrix,c=a._matrix,d=this._matrix,e=b[0],f=b[4],g=b[8],h=b[12],i=b[1],j=b[5],k=b[9],l=b[13],m=b[2],n=b[6],o=b[10],p=b[14],q=b[3],r=b[7],s=b[11],t=b[15],u=c[0],v=c[4],w=c[8],x=c[12],y=c[1],z=c[5],A=c[9],B=c[13],C=c[2],D=c[6],E=c[10],F=c[14],G=c[3],H=c[7],I=c[11],J=c[15];d[0]=e*u+f*y+g*C+h*G,d[1]=i*u+j*y+k*C+l*G,d[2]=m*u+n*y+o*C+p*G,d[3]=q*u+r*y+s*C+t*G,d[4]=e*v+f*z+g*D+h*H,d[5]=i*v+j*z+k*D+l*H,d[6]=m*v+n*z+o*D+p*H,d[7]=q*v+r*z+s*D+t*H,d[8]=e*w+f*A+g*E+h*I,d[9]=i*w+j*A+k*E+l*I,d[10]=m*w+n*A+o*E+p*I,d[11]=q*w+r*A+s*E+t*I,d[12]=e*x+f*B+g*F+h*J,d[13]=i*x+j*B+k*F+l*J,d[14]=m*x+n*B+o*F+p*J,d[15]=q*x+r*B+s*F+t*J},invert:function(){var a=this.determinant;if(Math.abs(a)<b)return!1;a=1/a;var c=this._matrix,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6],k=c[7],l=c[8],m=c[9],n=c[10],o=c[11],p=c[12],q=c[13],r=c[14],s=c[15];return c[0]=a*(i*(n*s-r*o)-m*(j*s-r*k)+q*(j*o-n*k)),c[1]=-a*(e*(n*s-r*o)-m*(f*s-r*g)+q*(f*o-n*g)),c[2]=a*(e*(j*s-r*k)-i*(f*s-r*g)+q*(f*k-j*g)),c[3]=-a*(e*(j*o-n*k)-i*(f*o-n*g)+m*(f*k-j*g)),c[4]=-a*(h*(n*s-r*o)-l*(j*s-r*k)+p*(j*o-n*k)),c[5]=a*(d*(n*s-r*o)-l*(f*s-r*g)+p*(f*o-n*g)),c[6]=-a*(d*(j*s-r*k)-h*(f*s-r*g)+p*(f*k-j*g)),c[7]=a*(d*(j*o-n*k)-h*(f*o-n*g)+l*(f*k-j*g)),c[8]=a*(h*(m*s-q*o)-l*(i*s-q*k)+p*(i*o-m*k)),c[9]=-a*(d*(m*s-q*o)-l*(e*s-q*g)+p*(e*o-m*g)),c[10]=a*(d*(i*s-q*k)-h*(e*s-q*g)+p*(e*k-i*g)),c[11]=-a*(d*(i*o-m*k)-h*(e*o-m*g)+l*(e*k-i*g)),c[12]=-a*(h*(m*r-q*n)-l*(i*r-q*j)+p*(i*n-m*j)),c[13]=a*(d*(m*r-q*n)-l*(e*r-q*f)+p*(e*n-m*f)),c[14]=-a*(d*(i*r-q*j)-h*(e*r-q*f)+p*(e*j-i*f)),c[15]=a*(d*(i*n-m*j)-h*(e*n-m*f)+l*(e*j-i*f)),!0},identity:function(){var a=this._matrix;a[0]=a[5]=a[10]=a[15]=1,a[1]=a[2]=a[3]=a[4]=a[6]=a[7]=a[8]=a[9]=a[11]=a[12]=a[13]=a[14]=0},decompose:function(){notImplemented("Matrix3D.decompose")},recompose:function(){notImplemented("Matrix3D.recompose")},appendTranslation:function(a,b,c){var d=this._matrix,e=d[3],f=d[7],g=d[11],h=d[15];d[0]+=a*e,d[1]+=b*e,d[2]+=c*e,d[4]+=a*f,d[5]+=b*f,d[6]+=c*f,d[8]+=a*g,d[9]+=b*g,d[10]+=c*g,d[12]+=a*h,d[13]+=b*h,d[14]+=c*h},appendRotation:function(b,c,d){this.append(a(b/180*Math.PI,c.x,c.y,c.z,d?d.x:0,d?d.y:0,d?d.z:0))},appendScale:function(a,b,c){var d=this._matrix;d[0]*=a,d[1]*=b,d[2]*=c,d[4]*=a,d[5]*=b,d[6]*=c,d[8]*=a,d[9]*=b,d[10]*=c,d[12]*=a,d[13]*=b,d[14]*=c},prependTranslation:function(a,b,c){{var d=this._matrix,e=d[0],f=d[4],g=d[8],h=(d[12],d[1]),i=d[5],j=d[9],k=(d[13],d[2]),l=d[6],m=d[10],n=(d[14],d[3]),o=d[7],p=d[11];d[15]}d[12]+=e*a+f*b+g*c,d[13]+=h*a+i*b+j*c,d[14]+=k*a+l*b+m*c,d[15]+=n*a+o*b+p*c},prependRotation:function(b,c,d){this.prepend(a(b/180*Math.PI,c.x,c.y,c.z,d?d.x:0,d?d.y:0,d?d.z:0))},prependScale:function(a,b,c){var d=this._matrix;d[0]*=a,d[1]*=a,d[2]*=a,d[3]*=a,d[4]*=b,d[5]*=b,d[6]*=b,d[7]*=b,d[8]*=c,d[9]*=c,d[10]*=c,d[11]*=c},transformVector:function(a){var b=this._matrix,c=a.x,d=a.y,e=a.z;return new flash.geom.Vector3D(b[0]*c+b[4]*d+b[8]*e+b[12],b[1]*c+b[5]*d+b[9]*e+b[13],b[2]*c+b[6]*d+b[10]*e+b[14])},deltaTransformVector:function(a){var b=this._matrix,c=a.x,d=a.y,e=a.z;return new flash.geom.Vector3D(b[0]*c+b[4]*d+b[8]*e,b[1]*c+b[5]*d+b[9]*e,b[2]*c+b[6]*d+b[10]*e)},transformVectors:function(a,b){for(var c=this._matrix,d=c[0],e=c[4],f=c[8],g=c[12],h=c[1],i=c[5],j=c[9],k=c[13],l=c[2],m=c[6],n=c[10],o=c[14],p=(c[3],c[7],c[11],c[15],0);p<a.length-2;p+=3){var q=a.asGetNumericProperty(p),r=a.asGetNumericProperty(p+1),s=a.asGetNumericProperty(p+2);b.push(d*q+e*r+f*s+g),b.push(h*q+i*r+j*s+k),b.push(l*q+m*r+n*s+o)}},transpose:function(){var a,b=this._matrix;a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[5]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a},pointAt:function(){notImplemented("Matrix3D.pointAt")},interpolateTo:function(){notImplemented("Matrix3D.interpolateTo")},copyFrom:function(a){this._matrix.set(a._matrix)},copyRawDataTo:function(a,b,d){var e=this._matrix;if(d)for(var f=0,g=0|b;16>f;f++,g++)a.asSetNumericProperty(g,e[c[f]]);else for(var f=0,g=0|b;16>f;f++,g++)a.asSetNumericProperty(g,e[f])},copyRawDataFrom:function(a,b,d){var e=this._matrix;if(d)for(var f=0,g=0|b;16>f;f++,g++)e[c[f]]=a.asGetNumericProperty(g)||0;else for(var f=0,g=0|b;16>f;f++,g++)e[f]=a.asGetNumericProperty(g)||0},copyRowTo:function(a,b){var c=0|a,d=this._matrix;b.x=d[c],b.y=d[c+4],b.z=d[c+8],b.w=d[c+12]},copyColumnTo:function(a,b){var c=a<<2,d=this._matrix;b.x=d[c],b.y=d[c+1],b.z=d[c+2],b.w=d[c+3]},copyRowFrom:function(a,b){var c=0|a,d=this._matrix;d[c]=b.x,d[c+4]=b.y,d[c+8]=b.z,d[c+12]=b.w},copyColumnFrom:function(a,b){var c=a<<2,d=this._matrix;d[c]=b.x,d[c+1]=b.y,d[c+2]=b.z,d[c+3]=b.w},rawData:{get:function(){var a=new Float64Vector;return this.copyRawDataTo(a,0,!1),a},set:function(a){this.copyRawDataFrom(a,0,!1)}},position:{get:function(){var a=this._matrix;return new flash.geom.Vector3D(a[12],a[13],a[14])},set:function(a){var b=this._matrix;b[12]=a.x,b[13]=a.y,b[14]=a.z}},determinant:{get:function(){var a,b=this._matrix,c=b[0],d=b[4],e=b[8],f=b[12],g=b[1],h=b[5],i=b[9],j=b[13],k=b[2],l=b[6],m=b[10],n=b[14],o=b[3],p=b[7],q=b[11],r=b[15];return a=c*(h*(m*r-q*n)-l*(i*r-q*j)+p*(i*n-m*j))-g*(d*(m*r-q*n)-l*(e*r-q*f)+p*(e*n-m*f))+k*(d*(i*r-q*j)-h*(e*r-q*f)+p*(e*j-i*f))-o*(d*(i*n-m*j)-h*(e*n-m*f)+l*(e*j-i*f))}}}},script:{instance:Glue.ALL}}}}.call(this),PointDefinition=function(){return{__class__:"flash.geom.Point",__glue__:{script:{"static":Glue.ALL,instance:Glue.ALL}}}}.call(this),RectangleDefinition=function(){return{__class__:"flash.geom.Rectangle",__glue__:{script:{instance:Glue.ALL}}}}.call(this),TransformDefinition=function(){var a={__class__:"flash.geom.Transform",get colorTransform(){var a=this._target._cxform;return a?new flash.geom.ColorTransform(a.redMultiplier/256,a.greenMultiplier/256,a.blueMultiplier/256,a.alphaMultiplier/256,a.redOffset,a.greenOffset,a.blueOffset,a.alphaOffset):new flash.geom.ColorTransform},set colorTransform(a){var b=avm2.systemDomain.getClass("flash.geom.ColorTransform");b.isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.ColorTransform"),this._target._cxform={redMultiplier:256*a.redMultiplier,greenMultiplier:256*a.greenMultiplier,blueMultiplier:256*a.blueMultiplier,alphaMultiplier:256*a.alphaMultiplier,redOffset:a.redOffset,greenOffset:a.greenOffset,blueOffset:a.blueOffset,alphaOffset:a.alphaOffset},this._target._invalidate()},get concatenatedColorTransform(){var a=this.colorTransform;return a.concat(this._target.parent.transform.concatenatedColorTransform),a},get concatenatedMatrix(){if(this._target._current3DTransform)return null;var a=this._target._getConcatenatedTransform(null,!1);return new flash.geom.Matrix(a.a,a.b,a.c,a.d,a.tx/20,a.ty/20)},get matrix(){if(this._target._current3DTransform)return null;var a=this._target._currentTransform;return new flash.geom.Matrix(a.a,a.b,a.c,a.d,a.tx/20,a.ty/20)},set matrix(a){flash.geom.Matrix.class.isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.Matrix");var b=this._target;b._invalidate(),b._setTransformMatrix(a,!0),b._current3DTransform=null,b._animated=!1},get matrix3D(){var a=this._target._current3DTransform;return a&&a.clone()},set matrix3D(a){var b=avm2.systemDomain.getClass("flash.geom.Matrix3D");b.isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.Matrix3D");var c=a.rawData;this.matrix=new flash.geom.Matrix(c.asGetPublicProperty(0),c.asGetPublicProperty(1),c.asGetPublicProperty(4),c.asGetPublicProperty(5),c.asGetPublicProperty(12),c.asGetPublicProperty(13)),this._target._current3DTransform=a},ctor:function(a){this._target=a}},b=Object.getOwnPropertyDescriptor;return a.__glue__={"native":{instance:{colorTransform:b(a,"colorTransform"),concatenatedColorTransform:b(a,"concatenatedColorTransform"),concatenatedMatrix:b(a,"concatenatedMatrix"),matrix:b(a,"matrix"),matrix3D:b(a,"matrix3D"),ctor:a.ctor}}},a}.call(this),Vector3DDefinition=function(){return{__class__:"flash.geom.Vector3D",initialize:function(){},__glue__:{script:{instance:Glue.ALL}}}}.call(this),ID3InfoDefinition=function(){return{__glue__:{script:{instance:{songName:"public songName",genre:"public genre",artist:"public artist",track:"public track",album:"public album",year:"public year",comment:"public comment"}}}}}.call(this),MicrophoneDefinition=function(){return{__class__:"flash.media.Microphone",initialize:function(){},__glue__:{"native":{"static":{getMicrophone:function(){notImplemented("Microphone.getMicrophone")},getEnhancedMicrophone:function(){notImplemented("Microphone.getEnhancedMicrophone")},names:{get:function(){notImplemented("Microphone.names")}},isSupported:{get:function(){notImplemented("Microphone.isSupported")}}},instance:{setSilenceLevel:function(){notImplemented("Microphone.setSilenceLevel")},setUseEchoSuppression:function(){notImplemented("Microphone.setUseEchoSuppression")},setLoopBack:function(){notImplemented("Microphone.setLoopBack")},gain:{set:function a(a){notImplemented("Microphone.gain"),this._gain=a},get:function(){return notImplemented("Microphone.gain"),this._gain}},rate:{set:function b(b){notImplemented("Microphone.rate"),this._rate=b},get:function(){return notImplemented("Microphone.rate"),this._rate}},codec:{set:function c(c){notImplemented("Microphone.codec"),this._codec=c},get:function(){return notImplemented("Microphone.codec"),this._codec}},framesPerPacket:{get:function(){return notImplemented("Microphone.framesPerPacket"),this._framesPerPacket},set:function(a){notImplemented("Microphone.framesPerPacket"),this._framesPerPacket=a}},encodeQuality:{get:function(){return notImplemented("Microphone.encodeQuality"),this._encodeQuality},set:function(a){notImplemented("Microphone.encodeQuality"),this._encodeQuality=a}},noiseSuppressionLevel:{get:function(){return notImplemented("Microphone.noiseSuppressionLevel"),this._noiseSuppressionLevel},set:function(a){notImplemented("Microphone.noiseSuppressionLevel"),this._noiseSuppressionLevel=a}},enableVAD:{get:function(){return notImplemented("Microphone.enableVAD"),this._enableVAD},set:function(a){notImplemented("Microphone.enableVAD"),this._enableVAD=a}},activityLevel:{get:function(){return notImplemented("Microphone.activityLevel"),this._activityLevel}},index:{get:function(){return notImplemented("Microphone.index"),this._index}},muted:{get:function(){return notImplemented("Microphone.muted"),this._muted}},name:{get:function(){return notImplemented("Microphone.name"),this._name}},silenceLevel:{get:function(){return notImplemented("Microphone.silenceLevel"),this._silenceLevel}},silenceTimeout:{get:function(){return notImplemented("Microphone.silenceTimeout"),this._silenceTimeout}},useEchoSuppression:{get:function(){return notImplemented("Microphone.useEchoSuppression"),this._useEchoSuppression}},soundTransform:{get:function(){return notImplemented("Microphone.soundTransform"),this._soundTransform},set:function(a){notImplemented("Microphone.soundTransform"),this._soundTransform=a}},enhancedOptions:{get:function(){return notImplemented("Microphone.enhancedOptions"),this._enhancedOptions},set:function(a){notImplemented("Microphone.enhancedOptions"),this._enhancedOptions=a}}}},script:{instance:Glue.ALL}}}}.call(this),PLAY_USING_AUDIO_TAG=!0,SoundDefinition=function(){function a(a,b){var c=document.createElement("audio");if(!c.canPlayType(a.mimeType))return void b({duration:0});c.preload="metadata";var d=new Blob([a.data],{type:a.mimeType});c.src=URL.createObjectURL(d),c.load(),c.addEventListener("loadedmetadata",function(){b({duration:1e3*this.duration})})}function b(a,b){var c=8e3,d=new Float32Array(c),e=0,f=0,g={estimateBitRate:!0,bitRateSum:0,bitRateCount:0,metadataSize:0,averageBitRate:0},h=new MP3DecoderSession;h.onframedata=function(h,i,j,k){if(g.estimateBitRate){var l=200;g.bitRateCount<l?(g.bitRateSum+=k,g.bitRateCount++):g.estimateBitRate=!1,this.averageBitRate=g.bitRateSum/g.bitRateCount}if(0!==h.length){if(e||(a.sampleRate=j,a.channels=i,a.pcm=d),e+h.length>=c){do c*=2;while(e+h.length>=c);var m=new Float32Array(c);m.set(d),d=a.pcm=m}d.set(h,e),a.end=e+=h.length,f=1/a.sampleRate/a.channels,b(e*f,!1)}},h.onid3tag=function(a){g.metadataSize+=a.length},h.onclosed=function(){b(e*f,!0)};return{pushData:function(a){h.pushAsync(a)},estimateDuration:function(a){return Math.max(0,8*(a-g.metadataSize)/g.averageBitRate)},close:function(){h.close()}}}var c={initialize:function(){this._playQueue=[],this._url=null,this._length=0,this._bytesTotal=0,this._bytesLoaded=0,this._id3=new flash.media.ID3Info;var b=this.symbol;if(b){var c={};b.pcm&&(c.sampleRate=b.sampleRate,c.channels=b.channels,c.pcm=b.pcm,c.end=b.pcm.length),c.completed=!0,b.packaged&&(c.data=b.packaged.data.buffer,c.mimeType=b.packaged.mimeType);var d=this;a(c,function(a){d._length=a.duration}),this._soundData=c}TelemetryService.reportTelemetry({topic:"feature",feature:SOUND_FEATURE})},close:function(){somewhatImplemented("Sound.close")},extract:function(){notImplemented("Sound.extract")},_load:function(c){if(c){var d=this,e=this._stream=new flash.net.URLStream,f=avm2.systemDomain.getClass("flash.utils.ByteArray"),g=f.createInstance(),h=0,i=null,j={completed:!1};e._addEventListener("progress",function(a){d._bytesLoaded=a[Multiname.getPublicQualifiedName("bytesLoaded")],d._bytesTotal=a[Multiname.getPublicQualifiedName("bytesTotal")],PLAY_USING_AUDIO_TAG||i||(i=b(j,function(a,b){0===d._length&&(d._soundData=j,d._playQueue.forEach(function(a){a.channel._playSoundDataViaChannel(j,a.startTime)})),d._length=b?1e3*a:1e3*Math.max(a,i.estimateDuration(d._bytesTotal))}));var c=e.bytesAvailable;e.readBytes(g,h,c),i&&i.pushData(new Uint8Array(g.a,h,c)),h+=c,d._dispatchEvent(a)}),e._addEventListener("complete",function(b){d._dispatchEvent(b),j.data=g.a,j.mimeType="audio/mpeg",j.completed=!0,PLAY_USING_AUDIO_TAG&&(d._soundData=j,a(j,function(a){d._length=a.duration}),d._playQueue.forEach(function(a){a.channel._playSoundDataViaAudio(j,a.startTime)})),i&&i.close()}),e.load(c)}},loadCompressedDataFromByteArray:function(){notImplemented("Sound#loadCompressedDataFromByteArray")},loadPCMFromByteArray:function(){notImplemented("Sound#loadPCMFromByteArray")},play:function(a,b,c){a=a||0,b=b||0;var d=new flash.media.SoundChannel;return d._sound=this,d._soundTransform=isNullOrUndefined(c)?new flash.media.SoundTransform:c,this._playQueue.push({channel:d,startTime:a}),this._soundData&&(PLAY_USING_AUDIO_TAG?d._playSoundDataViaAudio(this._soundData,a,b):d._playSoundDataViaChannel(this._soundData,a,b)),d},get bytesLoaded(){return this._bytesLoaded},get bytesTotal(){return this._bytesTotal},get id3(){return this._id3},get isBuffering(){notImplemented("Sound#isBuffering")},get isURLInaccessible(){notImplemented("Sound#isURLInaccessible")},get length(){return this._length},get url(){return this._url}},d=Object.getOwnPropertyDescriptor;return c.__glue__={"native":{instance:{close:c.close,extract:c.extract,_load:c._load,loadCompressedDataFromByteArray:c.loadCompressedDataFromByteArray,loadPCMFromByteArray:c.loadPCMFromByteArray,play:c.play,bytesLoaded:d(c,"bytesLoaded"),bytesTotal:d(c,"bytesTotal"),id3:d(c,"id3"),isBuffering:d(c,"isBuffering"),isURLInaccessible:d(c,"isURLInaccessible"),length:d(c,"length"),url:d(c,"url")}}},c}.call(this),SoundChannelDefinition=function(){return{initialize:function(){this._element=null,this._position=0,this._leftPeak=0,this._rightPeak=0,this._pcmData=null,this._soundTransform=new flash.media.SoundTransform,this._soundMixerClass=avm2.systemDomain.getClass("flash.media.SoundMixer");var a=this.symbol;a&&(this._element=a.element||null),this._element&&this._registerWithSoundMixer()},_registerWithSoundMixer:function(){this._soundMixerClass.native.static._registerChannel(this)},_unregisterWithSoundMixer:function(){this._soundMixerClass.native.static._unregisterChannel(this)},_applySoundTransform:function(){var a=this._soundTransform._volume;this._soundMixerClass._soundTransform&&(a*=this._soundMixerClass._soundTransform._volume),a*=this._soundMixerClass.native.static._getMasterVolume(),this._element&&(this._element.volume=clamp(a,0,1)),this._audioChannel},_playSoundDataViaChannel:function(a,b,c){this._registerWithSoundMixer();var d=this,e=Math.round(b/1e3*a.sampleRate)*a.channels,f=e;this._position=b,this._audioChannel=createAudioChannel(a.sampleRate,a.channels),this._audioChannel.ondatarequested=function(b){var g=a.end;if(f>=g&&a.completed)return d._unregisterWithSoundMixer(),d._audioChannel.stop(),void d._dispatchEvent(new flash.events.Event("soundComplete",!1,!1));var h=b.count,i=b.data,j=a.pcm;do{for(var k=Math.min(g-f,h),l=0;k>l;l++)i[l]=j[f++];if(h-=k,f>=g){if(!c)break;c--,f=e}}while(h>0);d._position=f/a.sampleRate/a.channels*1e3},this._audioChannel.start(),this._applySoundTransform()},_playSoundDataViaAudio:function(a,b,c){if(a.mimeType){this._registerWithSoundMixer(),this._position=b;var d=this,e=0,f=document.createElement("audio");if(!f.canPlayType(a.mimeType))return void console.error('ERROR: "'+a.mimeType+'" type playback is not supported by the browser');f.preload="metadata",f.loop=c>0;var g=new Blob([a.data],{type:a.mimeType});f.src=URL.createObjectURL(g),f.addEventListener("loadeddata",function(){f.currentTime=b/1e3,f.play()}),f.addEventListener("timeupdate",function(){var a=f.currentTime;c&&e>a&&(--c,c||(f.loop=!1),b/1e3>a&&(f.currentTime=b/1e3)),d._position=1e3*(e=a)}),f.addEventListener("ended",function(){d._unregisterWithSoundMixer(),d._dispatchEvent(new flash.events.Event("soundComplete",!1,!1)),d._element=null}),this._element=f,this._applySoundTransform()}},__glue__:{"native":{"static":{},instance:{stop:function(){this._element&&(this._unregisterWithSoundMixer(),this._element.pause()),this._audioChannel&&(this._unregisterWithSoundMixer(),this._audioChannel.stop())},position:{get:function(){return this._position}},leftPeak:{get:function(){return this._leftPeak}},rightPeak:{get:function(){return this.rightPeak}},soundTransform:{get:function(){return somewhatImplemented("SoundChannel.soundTransform"),new flash.media.SoundTransform(this._soundTransform._volume,this._soundTransform.pan)},set:function a(a){somewhatImplemented("SoundChannel.soundTransform"),this._soundTransform=isNullOrUndefined(a)?new flash.media.SoundTransform:a,this._applySoundTransform()}}}},script:{instance:scriptProperties("public",["stop"])}}}}.call(this);AudioResampler.prototype={ondatarequested:function(){},getData:function(a,b){for(var c=this.sourceRate/this.targetRate,d=this.sourceOffset,e=Math.ceil((b-1)*c+d)+1,f=[],g=0;g<a.length;g++)f.push(new Float32Array(e));var h={data:f,count:e};this.ondatarequested(h);for(var g=0;g<a.length;g++){for(var i=a[g],j=f[g],k=0;b>k;k++){var l=k*c+d,m=0|l,n=0|Math.ceil(l),o=0>m?this.tail[g]:j[m];if(m===n)i[k]=o;else{var p=l-m;i[k]=o*(1-p)+j[n]*p}}this.tail[g]=j[e-1]}this.sourceOffset=(b-1)*c+d-(e-1)}},WebAudioChannel.prototype={start:function(){var a=this.context.createScriptProcessor?this.context.createScriptProcessor(2048,0,this.channels):this.context.createJavaScriptNode(2048,0,this.channels),b=this;a.onaudioprocess=function(a){for(var c=[],d=0;d<b.channels;d++)c.push(a.outputBuffer.getChannelData(d));var e=c[0].length;if(b.resampler)b.resampler.getData(c,e);else{var a={data:c,count:e};b.requestData(c,e)}},a.connect(this.context.destination),this.source=a},stop:function(){this.source.disconnect(this.context.destination)},requestData:function(a,b){var c=this.channels,d=new Float32Array(b*c),e={data:d,count:d.length};this.ondatarequested(e);for(var f=0,g=0;b>f;f++)for(var h=0;c>h;h++)a[h][f]=d[g++]}},WebAudioChannel.isSupported=function(){return"undefined"!=typeof AudioContext||"undefined"!=typeof webkitAudioContext}();var SoundMixerDefinition=function(){var a=1,b=[];return{__class__:"flash.media.SoundMixer",initialize:function(){},__glue__:{"native":{"static":{_registerChannel:function(a){b.push(a)},_unregisterChannel:function(a){var c=b.indexOf(a);c>=0&&b.splice(c,1)},_getMasterVolume:function(){return a},_setMasterVolume:function(c){a=c,b.forEach(function(a){a._applySoundTransform()})},stopAll:function(){b.forEach(function(a){a.stop()}),b=[]},computeSpectrum:function(a){somewhatImplemented("SoundMixer.computeSpectrum");for(var b=new Float32Array(1024),c=0;1024>c;c++)b[c]=Math.random();a.writeRawBytes(b),a.position=0},areSoundsInaccessible:function(){notImplemented("SoundMixer.areSoundsInaccessible")},bufferTime:{get:function(){notImplemented("SoundMixer.bufferTime")},set:function(){notImplemented("SoundMixer.bufferTime")}},soundTransform:{get:function(){return somewhatImplemented("SoundMixer.soundTransform"),isNullOrUndefined(this._soundTransform)?new flash.media.SoundTransform:new flash.media.SoundTransform(this._soundTransform._volume,this._soundTransform.pan)},set:function c(c){somewhatImplemented("SoundMixer.soundTransform"),this._soundTransform=isNullOrUndefined(c)?new flash.media.SoundTransform:c,b.forEach(function(a){a._applySoundTransform()})}},audioPlaybackMode:{get:function(){notImplemented("SoundMixer.audioPlaybackMode")},set:function(){notImplemented("SoundMixer.audioPlaybackMode")}},useSpeakerphoneForVoice:{get:function(){notImplemented("SoundMixer.useSpeakerphoneForVoice")},set:function(){notImplemented("SoundMixer.useSpeakerphoneForVoice")}}},instance:{}}}}}.call(this),SoundTransformDefinition=function(){return{__class__:"flash.media.SoundTransform",initialize:function(){},_updateTransform:function(){somewhatImplemented("SoundTransform._updateTransform")},__glue__:{"native":{"static":{},instance:{volume:{get:function(){return this._volume},set:function a(a){this._volume=a,this._updateTransform()}},leftToLeft:{get:function(){return this._leftToLeft},set:function b(b){this._leftToLeft=b,this._updateTransform()}},leftToRight:{get:function(){return this._leftToRight},set:function c(c){this._leftToRight=c,this._updateTransform()}},rightToRight:{get:function(){return this._rightToRight},set:function d(d){this._rightToRight=d,this._updateTransform()}},rightToLeft:{get:function(){return this._rightToLeft},set:function e(e){this._rightToLeft=e,this._updateTransform()}}}},script:{instance:{pan:"public pan"}}}}}.call(this),StageVideoDefinition=function(){return{__class__:"flash.media.StageVideo",initialize:function(){},__glue__:{"native":{"static":{},instance:{attachNetStream:function(){notImplemented("StageVideo.attachNetStream")},attachCamera:function(){notImplemented("StageVideo.attachCamera")},viewPort:{get:function(){return notImplemented("StageVideo.viewPort"),this._viewPort},set:function(a){notImplemented("StageVideo.viewPort"),this._viewPort=a}},pan:{set:function(a){notImplemented("StageVideo.pan"),this._pan=a
},get:function(){return notImplemented("StageVideo.pan"),this._pan}},zoom:{set:function(a){notImplemented("StageVideo.zoom"),this._zoom=a},get:function(){return notImplemented("StageVideo.zoom"),this._zoom}},depth:{set:function a(a){notImplemented("StageVideo.depth"),this._depth=a},get:function(){return notImplemented("StageVideo.depth"),this._depth}},videoWidth:{get:function(){return notImplemented("StageVideo.videoWidth"),this._videoWidth}},videoHeight:{get:function(){return notImplemented("StageVideo.videoHeight"),this._videoHeight}},colorSpaces:{get:function(){return notImplemented("StageVideo.colorSpaces"),this._colorSpaces}}}}}}}.call(this),VideoDefinition=function(){function a(a,b,c,d,e){a.save(),a.beginPath(),a.rect(0,0,d,e),a.clip(),a.clearRect(0,0,d,e),a.restore()}var b={initialize:function(){TelemetryService.reportTelemetry({topic:"feature",feature:VIDEO_FEATURE})},attachNetStream:function(a){this._netStream!==a&&(this._netStream&&this._netStream._videoReady.then(function(a){this._element=null,this._added&&(a.remove(),this._added=!1)}.bind(this)),this._netStream=a,a&&a._videoReady.then(function(b){this._element=b,a._videoMetadataReady.then(function(){this._element.width=this._videoWidth=this._element.videoWidth,this._element.height=this._videoHeight=this._element.videoHeight,this.stage&&(this.stage._invalid=!0)}.bind(this))}.bind(this)))},ctor:function(a,b){(!a||0>a)&&(a=320),(!b||0>b)&&(b=240),this._bbox={xMin:0,yMin:0,xMax:20*a,yMax:20*b},this._initialWidth=this._videoWidth=a,this._initialHeight=this._videoHeight=b,this._netStream=null,this._element=null,this._added=!1},draw:function(b,c,d,e){if(this._element){!this._added&&this._stage&&(this._stage._domContainer.appendChild(this._element),this._added=!0);var f=this._initialWidth,g=this._initialHeight,h=this._getConcatenatedTransform(null,!0),i=this.stage&&this.stage._contentsScaleFactor||1,j=h.a/i,k=h.b/i,l=h.c/i,m=h.d/i,n=h.tx/20/i,o=h.ty/20/i;f>0&&g>0&&(a(b,0,0,f,g),e.forEach(function(b){b.save(),b.setTransform(j,k,l,m,n,o),a(b,0,0,f,g),b.restore()}));var p=f/this._videoWidth,q=g/this._videoHeight,r="transform: matrix("+p*j+","+p*k+","+q*l+","+q*m+","+n+","+o+");";this._currentCssTransform!==r&&(this._currentCssTransform=r,this._element.setAttribute("style","position: absolute; top:0; left:0; z-index: -100;transform-origin: 0px 0px 0;"+r+"-webkit-transform-origin: 0px 0px 0; -webkit-"+r))}}};return b.__glue__={"native":{instance:{attachNetStream:b.attachNetStream,ctor:b.ctor,smoothing:{get:function(){return this._smoothing},set:function(a){somewhatImplemented("Video.smoothing"),this._smoothing=a}},videoHeight:{get:function(){return this._videoHeight}},videoWidth:{get:function(){return this._videoWidth}}}}},b}.call(this),FileFilterDefinition=function(){return{__class__:"flash.net.FileFilter",initialize:function(){this._description=null,this._extension=null,this._macType=null},__glue__:{"native":{"static":{},instance:{description:{get:function(){return this._description},set:function(a){this._description=a}},extension:{get:function(){return this._extension},set:function(a){this._extension=a}},macType:{get:function(){return this._macType},set:function(a){this._macType=a}}}}}}}.call(this),LocalConnectionDefinition=function(){return{__class__:"flash.net.LocalConnection",initialize:function(){},__glue__:{"native":{"static":{},instance:{close:function(){notImplemented("LocalConnection.close")},connect:function(){notImplemented("LocalConnection.connect")},send:function(){notImplemented("LocalConnection.send")},allowDomain:function(){notImplemented("LocalConnection.allowDomain")},allowInsecureDomain:function(){notImplemented("LocalConnection.allowInsecureDomain")},domain:{get:function(){somewhatImplemented("LocalConnection.domain");var a=FileLoadingService.resolveUrl("/"),b=/:\/\/(.+?)[:?#\/]/.exec(a);return b&&b[1]}},client:{get:function(){return notImplemented("LocalConnection.client"),this._client},set:function a(a){notImplemented("LocalConnection.client"),this._client=a}},isPerUser:{get:function(){return notImplemented("LocalConnection.isPerUser"),this._isPerUser},set:function(a){notImplemented("LocalConnection.isPerUser"),this._isPerUser=a}}}}}}}.call(this),NetConnectionDefinition=function(){var a=3;return{__class__:"flash.net.NetConnection",initialize:function(){TelemetryService.reportTelemetry({topic:"feature",feature:NETCONNECTION_FEATURE})},_invoke:function(a){var b,c=!1;switch(a){case 2:c=!0}return(c?somewhatImplemented:notImplemented)("NetConnection._invoke ("+a+")"),b},__glue__:{"native":{"static":{defaultObjectEncoding:{get:function b(){return b},set:function c(){return somewhatImplemented("NetConnection.defaultObjectEncoding"),c}}},instance:{ctor:function(){this._uri=null,this._connected=!1,this._client=null,this._proxyType="none",this._objectEncoding=a},connect:function(a){var b=flash.events.NetStatusEvent;somewhatImplemented("NetConnection.connect"),this._uri=a,a?this._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({level:"status",code:"NetConnection.Connect.Failed"}))):(this._connected=!0,this._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({level:"status",code:"NetConnection.Connect.Success"}))))},call:function(){notImplemented("NetConnection.call")},connected:{get:function(){return this._connected}},uri:{get:function(){return this._uri}},client:{get:function(){return this._client},set:function(a){this._client=a}},objectEncoding:{get:function(){return this._objectEncoding},set:function(a){somewhatImplemented("NetConnection.objectEncoding"),this._objectEncoding=a}},proxyType:{get:function(){return this._proxyType},set:function(a){notImplemented("NetConnection.proxyType"),this._proxyType=a}},connectedProxyType:{get:function(){return notImplemented("NetConnection.connectedProxyType"),this._connectedProxyType}},usingTLS:{get:function(){return somewhatImplemented("NetConnection.usingTLS"),!1}},protocol:{get:function(){return notImplemented("NetConnection.protocol"),this._protocol}},maxPeerConnections:{get:function(){return notImplemented("NetConnection.maxPeerConnections"),this._maxPeerConnections},set:function(a){notImplemented("NetConnection.maxPeerConnections"),this._maxPeerConnections=a}},nearID:{get:function(){return notImplemented("NetConnection.nearID"),this._nearID}},farID:{get:function(){return notImplemented("NetConnection.farID"),this._farID}},nearNonce:{get:function(){return notImplemented("NetConnection.nearNonce"),this._nearNonce}},farNonce:{get:function(){return notImplemented("NetConnection.farNonce"),this._farNonce}},unconnectedPeerStreams:{get:function(){return notImplemented("NetConnection.unconnectedPeerStreams"),this._unconnectedPeerStreams}},invoke:function(a){return this._invoke(a,Array.prototype.slice.call(arguments,1))},invokeWithArgsArray:function(a,b){return this._invoke.call(this,a,b)}}}}}}.call(this),USE_MEDIASOURCE_API=!1,NetStreamDefinition=function(){return{__class__:"flash.net.NetStream",initialize:function(){},_invoke:function(a,b){var c,d=!1,e=this._videoElement;switch(a){case 4:this._videoState.bufferTime=b[0],d=!0;break;case 202:switch(b[1]){case"pause":d=!0,e&&(b[3]===!1||e.paused?b[3]!==!0&&e.paused&&e.play():e.pause(),e.currentTime=b[4]/1e3);break;case"seek":d=!0,e&&!e.paused&&(e.currentTime=b[3]/1e3)}break;case 300:c=e?e.currentTime:0,d=!0;break;case 302:c=this._videoState.bufferTime,d=!0;break;case 303:c=e?e.duration:0,d=!0;break;case 305:c="full"===this._videoState.buffer?100:"progress"===this._videoState.buffer?50:0,d=!0;break;case 306:c=100,d=!0}return(d?somewhatImplemented:notImplemented)("NetStream._invoke ("+a+")"),c},_createVideoElement:function(a){function b(){j._videoState.started||(j._videoState.started=!0,j._dispatchEvent(new i(i.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Play.Start",level:"status"}))))}function c(){j._videoState.started=!1,j._dispatchEvent(new i(i.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Play.Stop",level:"status"})))}function d(){j._videoState.buffer="full",j._dispatchEvent(new i(i.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Buffer.Full",level:"status"})))}function e(){j._videoState.buffer="progress"}function f(){j._videoState.buffer="empty",j._dispatchEvent(new i(i.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Buffer.Empty",level:"status"})))}function g(a){var b=4===a.target.error.code?"NetStream.Play.NoSupportedTrackFound":3===a.target.error.code?"NetStream.Play.FileStructureInvalid":"NetStream.Play.StreamNotFound";j._dispatchEvent(new i(i.class.NET_STATUS,!1,!1,wrapJSObject({code:b,level:"error"})))}function h(){if(j._videoMetadataReady.resolve({videoWidth:k.videoWidth,videoHeight:k.videoHeight}),j._client){var a={};a.asSetPublicProperty("width",k.videoWidth),a.asSetPublicProperty("height",k.videoHeight),a.asSetPublicProperty("duration",k.duration),j._client.asCallPublicProperty("onMetaData",[a])}}var i=flash.events.NetStatusEvent,j=this;/\.mp4$/i.test(a)&&/Intel Mac OS X.*?Firefox\/\d+/.test(window.navigator.userAgent)&&(a="http://videos-cdn.mozilla.net/brand/Mozilla_2011_Story.webm");var k=document.createElement("video");k.preload="metadata",k.src=a,k.addEventListener("play",b),k.addEventListener("ended",c),k.addEventListener("loadeddata",d),k.addEventListener("progress",e),k.addEventListener("waiting",f),k.addEventListener("loadedmetadata",h),k.addEventListener("error",g),k.play(),this._videoElement=k,this._videoReady.resolve(k)},__glue__:{script:{instance:scriptProperties("public",["appendBytes","appendBytesAction"])},"native":{"static":{},instance:{ctor:function(){somewhatImplemented("NetStream.ctor"),this._contentTypeHint=null,this._mediaSource=null,this._checkPolicyFile=!0,this._videoElement=null;var a,b;this._videoReady=new Promise(function(c,d){a=c,b=d}),this._videoReady.resolve=a,this._videoReady.reject=b;var c,d;this._videoMetadataReady=new Promise(function(a,b){c=a,d=b}),this._videoMetadataReady.resolve=c,this._videoMetadataReady.reject=d,this._videoState={started:!1,buffer:"empty",bufferTime:.1}},onResult:function(){notImplemented("NetStream.onResult")},dispose:function(){notImplemented("NetStream.dispose")},play:function(a){var b=USE_MEDIASOURCE_API;if(b&&"undefined"==typeof MediaSource&&(console.warn("MediaSource API is not enabled, falling back to regular playback"),b=!1),!b)return somewhatImplemented("NetStream.play"),void this._createVideoElement(FileLoadingService.resolveUrl(a));var c=new MediaSource;if(c.addEventListener("sourceopen",function(){this._mediaSource=c}.bind(this)),c.addEventListener("sourceend",function(){this._mediaSource=null}.bind(this)),this._createVideoElement(window.URL.createObjectURL(c)),a){var d=new flash.net.URLRequest(a);d._checkPolicyFile=this._checkPolicyFile;var e=new flash.net.URLStream;e._addEventListener("httpStatus",function(a){var b=a.asGetPublicProperty("responseHeaders"),c=b.filter(function(a){return"Content-Type"===a.asGetPublicProperty("name")})[0];c&&"application/octet-stream"!==c.asGetPublicProperty("value")&&(this._contentTypeHint=c.asGetPublicProperty("value"))}.bind(this)),e._addEventListener("progress",function(){var a=e.bytesAvailable,b=avm2.systemDomain.getClass("flash.utils.ByteArray"),c=b.createInstance();e.readBytes(c,0,a),this.appendBytes(c)}.bind(this)),e._addEventListener("complete",function(){this.appendBytesAction("endSequence")}.bind(this)),e.load(d)}},play2:function(){notImplemented("NetStream.play2")},invoke:function(a){return this._invoke(a,Array.prototype.slice.call(arguments,1))},invokeWithArgsArray:function(a,b){return this._invoke.call(this,a,b)},appendBytes:function(a){this._mediaSource&&(this._mediaSourceBuffer||(this._mediaSourceBuffer=this._mediaSource.addSourceBuffer(this._contentTypeHint)),this._mediaSourceBuffer.appendBuffer(new Uint8Array(a.a,0,a.length))),somewhatImplemented("NetStream.appendBytes")},appendBytesAction:function(a){"endSequence"===a&&this._mediaSource&&this._mediaSource.endOfStream(),somewhatImplemented("NetStream.appendBytesAction")},info:{get:function(){return notImplemented("NetStream.info"),this._info}},multicastInfo:{get:function(){return notImplemented("NetStream.multicastInfo"),this._multicastInfo}},soundTransform:{get:function(){return this._soundTransform},set:function(a){somewhatImplemented("NetStream.soundTransform"),this._soundTransform=a}},checkPolicyFile:{get:function(){return this._checkPolicyFile},set:function(a){this._checkPolicyFile=a}},client:{get:function(){return somewhatImplemented("NetStream.client"),this._client},set:function(a){somewhatImplemented("NetStream.client"),this._client=a}},objectEncoding:{get:function(){return notImplemented("NetStream.objectEncoding"),this._objectEncoding}},multicastPushNeighborLimit:{get:function(){return notImplemented("NetStream.multicastPushNeighborLimit"),this._multicastPushNeighborLimit},set:function(a){notImplemented("NetStream.multicastPushNeighborLimit"),this._multicastPushNeighborLimit=a}},multicastWindowDuration:{get:function(){return notImplemented("NetStream.multicastWindowDuration"),this._multicastWindowDuration},set:function(a){notImplemented("NetStream.multicastWindowDuration"),this._multicastWindowDuration=a}},multicastRelayMarginDuration:{get:function(){return notImplemented("NetStream.multicastRelayMarginDuration"),this._multicastRelayMarginDuration},set:function(a){notImplemented("NetStream.multicastRelayMarginDuration"),this._multicastRelayMarginDuration=a}},multicastAvailabilityUpdatePeriod:{get:function(){return notImplemented("NetStream.multicastAvailabilityUpdatePeriod"),this._multicastAvailabilityUpdatePeriod},set:function(a){notImplemented("NetStream.multicastAvailabilityUpdatePeriod"),this._multicastAvailabilityUpdatePeriod=a}},multicastFetchPeriod:{get:function(){return notImplemented("NetStream.multicastFetchPeriod"),this._multicastFetchPeriod},set:function(a){notImplemented("NetStream.multicastFetchPeriod"),this._multicastFetchPeriod=a}},multicastAvailabilitySendToAll:{get:function(){return notImplemented("NetStream.multicastAvailabilitySendToAll"),this._multicastAvailabilitySendToAll},set:function(a){notImplemented("NetStream.multicastAvailabilitySendToAll"),this._multicastAvailabilitySendToAll=a}},farID:{get:function(){return notImplemented("NetStream.farID"),this._farID}},nearNonce:{get:function(){return notImplemented("NetStream.nearNonce"),this._nearNonce}},farNonce:{get:function(){return notImplemented("NetStream.farNonce"),this._farNonce}},peerStreams:{get:function(){return notImplemented("NetStream.peerStreams"),this._peerStreams}},audioReliable:{get:function(){return notImplemented("NetStream.audioReliable"),this._audioReliable},set:function(a){notImplemented("NetStream.audioReliable"),this._audioReliable=a}},videoReliable:{get:function(){return notImplemented("NetStream.videoReliable"),this._videoReliable},set:function(a){notImplemented("NetStream.videoReliable"),this._videoReliable=a}},dataReliable:{get:function(){return notImplemented("NetStream.dataReliable"),this._dataReliable},set:function(a){notImplemented("NetStream.dataReliable"),this._dataReliable=a}},audioSampleAccess:{get:function(){return notImplemented("NetStream.audioSampleAccess"),this._audioSampleAccess},set:function(a){notImplemented("NetStream.audioSampleAccess"),this._audioSampleAccess=a}},videoSampleAccess:{get:function(){return notImplemented("NetStream.videoSampleAccess"),this._videoSampleAccess},set:function(a){notImplemented("NetStream.videoSampleAccess"),this._videoSampleAccess=a}},useHardwareDecoder:{get:function(){return notImplemented("NetStream.useHardwareDecoder"),this._useHardwareDecoder},set:function(a){notImplemented("NetStream.useHardwareDecoder"),this._useHardwareDecoder=a}},useJitterBuffer:{get:function(){return notImplemented("NetStream.useJitterBuffer"),this._useJitterBuffer},set:function(a){notImplemented("NetStream.useJitterBuffer"),this._useJitterBuffer=a}},videoStreamSettings:{get:function(){return notImplemented("NetStream.videoStreamSettings"),this._videoStreamSettings},set:function(a){notImplemented("NetStream.videoStreamSettings"),this._videoStreamSettings=a}}}}}}}.call(this),ObjectEncodingDefinition=function(){return{__class__:"flash.net.ObjectEncoding",initialize:function(){},__glue__:{"native":{"static":{dynamicPropertyWriter:{get:function(){notImplemented("ObjectEncoding.dynamicPropertyWriter")},set:function(){notImplemented("ObjectEncoding.dynamicPropertyWriter")}}},instance:{}}}}}.call(this),ResponderDefinition=function(){var a={ctor:function(){}};return a.__glue__={"native":{instance:{ctor:a.ctor}}},a}.call(this),SharedObjectDefinition=function(){function a(a){var b,c=!1;switch(a){case 4:b=JSON.stringify(this._data).length-2,c=!0;break;case 6:this._data={},sessionStorage.removeItem(this._path),c=!0;break;case 2:sessionStorage.setItem(this._path,JSON.stringify(this._data)),c=!0,b=!0;break;case 3:c=!0}return(c?somewhatImplemented:notImplemented)("SharedObject.invoke ("+a+")"),b}var b=3,c=createEmptyObject();return{__class__:"flash.net.SharedObject",initialize:function(){this._path=null,this._data=null,this._objectEncoding=b,TelemetryService.reportTelemetry({topic:"feature",feature:SHAREDOBJECT_FEATURE})},__glue__:{"native":{"static":{deleteAll:function(){notImplemented("SharedObject.deleteAll")},getDiskUsage:function(){notImplemented("SharedObject.getDiskUsage")},getLocal:function(a,b){var d=(b||"")+"/"+a;if(c[d])return c[d];var e=new flash.net.SharedObject;e._path=d;var f=sessionStorage.getItem(d);return e._data=f?JSON.parse(f):{},e},getRemote:function(){notImplemented("SharedObject.getRemote")},defaultObjectEncoding:{get:function(){return b},set:function(a){b=a}}},instance:{setDirty:function(){somewhatImplemented("SharedObject.setDirty")},invoke:function(b){return a.call(this,b,Array.prototype.slice.call(arguments,1))},invokeWithArgsArray:function d(a,b){return d.call(this,a,b)},data:{get:function(){return this._data}},objectEncoding:{get:function(){return this._objectEncoding},set:function(a){this._objectEncoding=a}},client:{get:function(){return notImplemented("SharedObject.client"),this._client},set:function(a){notImplemented("SharedObject.client"),this._client=a}}}}}}}.call(this),SocketDefinition=function(){return{__class__:"flash.net.Socket",initialize:function(){this._connected=!1},__glue__:{"native":{"static":{},instance:{internalGetSecurityErrorMessage:function(){return somewhatImplemented("Socket.internalGetSecurityErrorMessage"),"SecurityErrorEvent"},internalConnect:function(a,b){somewhatImplemented("Socket.internalConnect"),throwError("SecurityError",Errors.SocketConnectError,a,b)},didFailureOccur:function(){return somewhatImplemented("Socket.didFailureOccur"),!0},readBytes:function(){notImplemented("Socket.readBytes")},writeBytes:function(){notImplemented("Socket.writeBytes")},writeBoolean:function(){notImplemented("Socket.writeBoolean")},writeByte:function(){notImplemented("Socket.writeByte")},writeShort:function(){notImplemented("Socket.writeShort")},writeInt:function(){notImplemented("Socket.writeInt")},writeUnsignedInt:function(){notImplemented("Socket.writeUnsignedInt")},writeFloat:function(){notImplemented("Socket.writeFloat")},writeDouble:function(){notImplemented("Socket.writeDouble")},writeMultiByte:function(){notImplemented("Socket.writeMultiByte")},writeUTF:function(){notImplemented("Socket.writeUTF")},writeUTFBytes:function(){notImplemented("Socket.writeUTFBytes")},readBoolean:function(){notImplemented("Socket.readBoolean")},readByte:function(){notImplemented("Socket.readByte")},readUnsignedByte:function(){notImplemented("Socket.readUnsignedByte")},readShort:function(){notImplemented("Socket.readShort")},readUnsignedShort:function(){notImplemented("Socket.readUnsignedShort")},readInt:function(){notImplemented("Socket.readInt")},readUnsignedInt:function(){notImplemented("Socket.readUnsignedInt")},readFloat:function(){notImplemented("Socket.readFloat")},readDouble:function(){notImplemented("Socket.readDouble")},readMultiByte:function(){notImplemented("Socket.readMultiByte")},readUTF:function(){notImplemented("Socket.readUTF")},readUTFBytes:function(){notImplemented("Socket.readUTFBytes")},internalClose:function(){notImplemented("Socket.internalClose")},flush:function(){notImplemented("Socket.flush")},writeObject:function(){notImplemented("Socket.writeObject")},readObject:function(){notImplemented("Socket.readObject")},bytesAvailable:{get:function(){return notImplemented("Socket.bytesAvailable"),this._bytesAvailable}},connected:{get:function(){return somewhatImplemented("Socket.connected"),this._connected}},objectEncoding:{get:function(){return notImplemented("Socket.objectEncoding"),this._objectEncoding},set:function(a){notImplemented("Socket.objectEncoding"),this._objectEncoding=a}},endian:{get:function(){return notImplemented("Socket.endian"),this._endian},set:function(a){notImplemented("Socket.endian"),this._endian=a}},bytesPending:{get:function(){return notImplemented("Socket.bytesPending"),this._bytesPending}}}},script:{instance:Glue.ALL}}}}.call(this),URLLoaderDefinition=function(){return{initialize:function(){},__glue__:{"native":{"static":{},instance:{}},script:{"static":{},instance:{data:"public data",dataFormat:"public dataFormat",bytesTotal:"public bytesTotal",bytesLoaded:"public bytesLoaded",load:"public load"}}}}}.call(this),URLRequestDefinition=function(){function a(){var a={};if(a.url=this._url,a.method=this._method,a.checkPolicyFile=this._checkPolicyFile,this._data){a.mimeType=this._contentType;var b=avm2.systemDomain.getClass("flash.utils.ByteArray");if(b.isInstanceOf(this._data))a.data=new Uint8Array(this._data.a,0,this._data.length);else{var c=this._data.asGetPublicProperty("toString").call(this._data);if("GET"===this._method){var d=a.url.lastIndexOf("?");a.url=(0>d?a.url:a.url.substring(0,d))+"?"+c}else a.data=c}}return a}var b={initialize:function(){this._url=null,this._method="GET",this._data=null,this._digest=null,this._contentType="application/x-www-form-urlencoded",this._requestHeaders=null,this._checkPolicyFile=!0,this._toFileRequest=a},setMethod:function(a){this._method=a},setRequestHeaders:function(a){this._requestHeaders=a},get contentType(){return this._contentType},set contentType(a){this._contentType=a},get data(){return this._data},set data(a){this._data=a},get digest(){return this._digest},set digest(a){this._digest=a},get method(){return this._method},set method(a){this._method=a},get requestHeaders(){return this._requestHeaders},set requestHeaders(a){this._requestHeaders=a},get url(){return this._url},set url(a){this._url=a}},c=Object.getOwnPropertyDescriptor;return b.__glue__={"native":{instance:{setMethod:b.setMethod,setRequestHeaders:b.setRequestHeaders,contentType:c(b,"contentType"),data:c(b,"data"),digest:c(b,"digest"),method:c(b,"method"),requestHeaders:c(b,"requestHeaders"),url:c(b,"url")}}},b}.call(this),URLStreamDefinition=function(){var a={initialize:function(){this._stream=null,this._connected=!1,this._littleEndian=!1},close:function(){this._session.close()},load:function(a){var b=FileLoadingService.createSession(),c=this,d=!0;b.onprogress=function(a,b){if(d){d=!1;var e=Math.max(b.bytesTotal,a.length),f=new ArrayBuffer(e);c._stream=new Stream(f,0,0,e)}else if(c._stream.end+a.length>c._stream.bytes.length){var e=c._stream.end+a.length,f=new ArrayBuffer(e),g=new Stream(f,0,0,e);g.push(c._stream.bytes.subarray(0,c._stream.end)),c._stream=g}c._stream.push(a);var h=avm2.systemDomain.getClass("flash.events.ProgressEvent");c._dispatchEvent(h.createInstance(["progress",!1,!1,b.bytesLoaded,b.bytesTotal]))},b.onerror=function(a){c._connected=!1,c._stream||(c._stream=new Stream(new ArrayBuffer(0),0,0,0)),c._dispatchEvent(new flash.events.IOErrorEvent(flash.events.IOErrorEvent.class.IO_ERROR,!1,!1,a))},b.onopen=function(){c._connected=!0,c._dispatchEvent(new flash.events.Event("open",!1,!1))},b.onhttpstatus=function(a,b,d){var e=avm2.systemDomain.getClass("flash.events.HTTPStatusEvent"),f=avm2.systemDomain.getClass("flash.net.URLRequestHeader"),g=e.createInstance(["httpStatus",!1,!1,b]),h=[];d.split(/(?:\n|\r?\n)/g).forEach(function(b){var c=/^([^:]+): (.*)$/.exec(b);c&&(h.push(f.createInstance([c[1],c[2]])),"Location"===c[1]&&(a=c[2]))}),g.asSetPublicProperty("responseHeaders",h),g.asSetPublicProperty("responseURL",a),c._dispatchEvent(g)},b.onclose=function(){c._connected=!1,c._stream||(c._stream=new Stream(new ArrayBuffer(0),0,0,0)),c._dispatchEvent(new flash.events.Event("complete",!1,!1))},b.open(a._toFileRequest()),this._session=b},readBoolean:function(){notImplemented("URLStream.readBoolean")},readByte:function(){var a=this._stream;return a.ensure(1),a.bytes[a.pos++]},readBytes:function(a,b,c){if(0>c)throw"Invalid length argument";var d=this._stream;c?d.ensure(c):c=d.remaining(),a.writeRawBytes(d.bytes.subarray(d.pos,d.pos+c),b,c),d.pos+=c},readDouble:function(){notImplemented("URLStream.readDouble")},readFloat:function(){notImplemented("URLStream.readFloat")},readInt:function(){notImplemented("URLStream.readInt")},readMultiByte:function(){notImplemented("URLStream.readMultiByte")},readObject:function(){notImplemented("URLStream.readObject")},readShort:function(){notImplemented("URLStream.readShort")},readUTF:function(){return this.readUTFBytes(this.readUnsignedShort())},readUTFBytes:function(a){if(0>a)throw"Invalid length argument";var b=this._stream;b.ensure(a);var c=utf8encode(b.bytes.subarray(b.pos,b.pos+a));return b.pos+=a,c},readUnsignedByte:function(){notImplemented("URLStream.readUnsignedByte")},readUnsignedInt:function(){notImplemented("URLStream.readUnsignedInt")},readUnsignedShort:function(){var a=this._stream;a.ensure(2);var b=a.getUint16(a.pos,this._littleEndian);return a.pos+=2,b},get bytesAvailable(){return this._stream.remaining()},get connected(){return this._connected},get endian(){return this._littleEndian?"littleEndian":"bigEndian"},set endian(a){this._littleEndian="littleEndian"==a},get objectEncoding(){notImplemented("URLStream.objectEncoding")},set objectEncoding(a){notImplemented("URLStream.objectEncoding")}},b=Object.getOwnPropertyDescriptor;return a.__glue__={"native":{instance:{close:a.close,load:a.load,readBoolean:a.readBoolean,readByte:a.readByte,readBytes:a.readBytes,readDouble:a.readDouble,readFloat:a.readFloat,readInt:a.readInt,readMultiByte:a.readMultiByte,readObject:a.readObject,readShort:a.readShort,readUTF:a.readUTF,readUTFBytes:a.readUTFBytes,readUnsignedByte:a.readUnsignedByte,readUnsignedInt:a.readUnsignedInt,readUnsignedShort:a.readUnsignedShort,bytesAvailable:b(a,"bytesAvailable"),connected:b(a,"connected"),endian:b(a,"endian"),objectEncoding:b(a,"objectEncoding")}}},a}.call(this),ApplicationDomainDefinition=function(){return{__class__:"flash.system.ApplicationDomain",initialize:function(){},__glue__:{"native":{"static":{currentDomain:{get:function(){return new flash.system.ApplicationDomain(AVM2.currentDomain())}},MIN_DOMAIN_MEMORY_LENGTH:{get:function(){notImplemented("ApplicationDomain.MIN_DOMAIN_MEMORY_LENGTH")}}},instance:{ctor:function(a){if(a instanceof ApplicationDomain)return void(this.nativeObject=a);var b=a?a.nativeObject:AVM2.currentDomain().system;this.nativeObject=new ApplicationDomain(b.vm,b)},getDefinition:function(a){var b=a.replace("::",".");return this.nativeObject.getProperty(Multiname.fromSimpleName(b),!0,!0)},hasDefinition:function(a){if(void 0===a)return!1;var b=a.replace("::",".");return!!this.nativeObject.findDomainProperty(Multiname.fromSimpleName(b),!1,!1)},getQualifiedDefinitionNames:function(){notImplemented("ApplicationDomain.getQualifiedDefinitionNames")},parentDomain:{get:function(){var a=this.nativeObject.base;return a?new flash.system.ApplicationDomain(a):void 0}},domainMemory:{get:function(){return notImplemented("ApplicationDomain.domainMemory"),this._domainMemory},set:function(a){notImplemented("ApplicationDomain.domainMemory"),this._domainMemory=a}}}},script:{"static":Glue.ALL,instance:Glue.ALL}}}}.call(this),CapabilitiesDefinition=function(){var a,b={},c=window.navigator.userAgent;return c.indexOf("Macintosh")>0?a="Mac OS 10.5.2":c.indexOf("Windows")>0?a="Windows XP":c.indexOf("Linux")>0?a="Linux":/(iPad|iPhone|iPod|Android)/.test(c)?a="iPhone3,1":notImplemented(),b.__glue__={"native":{"static":{version:{get:function(){return"SHUMWAY 10,0,0,0"},enumerable:!0},os:{get:function(){return a},enumerable:!0},serverString:{get:function(){var b=toKeyValueArray({OS:a}).map(function(a){return a[0]+"="+encodeURIComponent(a[1])}).join("&");return somewhatImplemented("Capabilities.serverString: "+b),b}},hasAccessibility:{get:function(){return somewhatImplemented("Capabilities.hasAccessibility"),!1}},isDebugger:{get:function(){return!1}},screenResolutionX:{get:function(){return window.screen.width}},screenResolutionY:{get:function(){return window.screen.height}},manufacturer:{get:function(){return somewhatImplemented("Capabilities.manufacturer"),"Mozilla Research"}},language:{get:function(){return somewhatImplemented("Capabilities.language"),"en"}},playerType:{get:function(){return somewhatImplemented("Capabilities.playerType"),"PlugIn"}}}},script:{"static":scriptProperties("public",["version","os"])}},b}.call(this),FSCommandDefinition=function(){function a(a){switch(a.toLowerCase()){case"quit":return void(renderingTerminated=!0);case"debugger":return}}var b={};return b.__glue__={"native":{"static":{_fscommand:a}}},b}.call(this),SecurityDefinition=function(){var a;return{__class__:"flash.system.Security",initialize:function(){},__glue__:{"native":{"static":{allowDomain:function(){somewhatImplemented('Security.allowDomain ["'+Array.prototype.join.call(arguments,'", "')+'"]')},allowInsecureDomain:function(){somewhatImplemented("Security.allowInsecureDomain")},loadPolicyFile:function(){somewhatImplemented("Security.loadPolicyFile")},duplicateSandboxBridgeInputArguments:function(){notImplemented("Security.duplicateSandboxBridgeInputArguments")},duplicateSandboxBridgeOutputArgument:function(){notImplemented("Security.duplicateSandboxBridgeOutputArgument")},showSettings:function(){notImplemented("Security.showSettings")},exactSettings:{get:function(){return a},set:function(b){a=b}},disableAVM1Loading:{get:function(){notImplemented("Security.disableAVM1Loading")},set:function(){notImplemented("Security.disableAVM1Loading")}},sandboxType:{get:function(){return somewhatImplemented("Security.sandboxType"),"remote"}},pageDomain:{get:function(){somewhatImplemented("Security.pageDomain");var a=FileLoadingService.resolveUrl("/"),b=a.split("/");return b.pop(),b.pop()}}}}}}}.call(this),SecurityDomainDefinition=function(){return{__class__:"flash.system.SecurityDomain",initialize:function(){},_currentDomain:null,__glue__:{"native":{"static":{currentDomain:{get:function(){return this._currentDomain}}},instance:{ctor_impl:function(){notImplemented("SecurityDomain.ctor_impl")},domainID:{get:function(){return notImplemented("SecurityDomain.domainID"),this._domainID}}}}}}}.call(this),SystemDefinition=function(){return{__class__:"flash.system.System",initialize:function(){},__glue__:{"native":{"static":{setClipboard:function(a){FirefoxCom.request("setClipboard",a),TelemetryService.reportTelemetry({topic:"feature",feature:CLIPBOARD_FEATURE})},pause:function(){somewhatImplemented("System.pause")},resume:function(){somewhatImplemented("System.resume")},exit:function(){somewhatImplemented("System.exit"),renderingTerminated=!0},gc:function(){somewhatImplemented("System.gc")},pauseForGCIfCollectionImminent:function(){notImplemented("System.pauseForGCIfCollectionImminent")},disposeXML:function(){notImplemented("System.disposeXML")},ime:{get:function(){notImplemented("System.ime")}},totalMemoryNumber:{get:function(){return performance.memory?performance.memory.usedJSHeapSize:0}},freeMemory:{get:function(){notImplemented("System.freeMemory")}},privateMemory:{get:function(){return 0}},processCPUUsage:{get:function(){notImplemented("System.processCPUUsage")}},useCodePage:{get:function(){return somewhatImplemented("System.useCodePage"),!1},set:function(){notImplemented("System.useCodePage")
}},vmVersion:{get:function(){return somewhatImplemented("System.vmVersion"),"1.0 shumway"}},swfVersion:{get:function(){return 19}},apiVersion:{get:function(){return 26}},getArgv:function(){return[]},getRunmode:function(){return"mixed"}},instance:{}}}}}.call(this),FontDefinition=function(){function a(){return e.slice()}function b(){somewhatImplemented("Font.registerFont")}function c(){if(d)return d;var a=window.navigator.userAgent;return d=a.indexOf("Windows")>-1?DEVICE_FONT_METRICS_WIN:/(Macintosh|iPad|iPhone|iPod|Android)/.test(a)?DEVICE_FONT_METRICS_MAC:DEVICE_FONT_METRICS_LINUX}var d,e=[],f=Object.create(null),g=Object.create(null),h={__class__:"flash.text.Font",initialize:function(){var a=this.symbol;if(a){this._fontName=a.name||null,this._uniqueName=a.uniqueName,this._fontStyle=a.bold?a.italic?"boldItalic":"bold":a.italic?"italic":"regular";var b=a.metrics;b.height=b.ascent+b.descent+b.leading,this._metrics=b,this._fontType="embedded",e.push(this),f[this._uniqueName]=this;var c=this._fontName.toLowerCase()+"_"+this._fontStyle+"_embedded";g[c]=this}},get fontName(){return this._fontName},get fontStyle(){return this._fontStyle},get fontType(){return this._fontType},hasGlyphs:function(){return!0},getFont:function(a,b,d){var e=a.toLowerCase()+"_"+b+(d?"_embedded":"_device"),f=g[e];if(f)return f;f=new flash.text.Font,f._fontName=f._uniqueName=a,f._fontStyle=b,f._fontType="device";var h=c()[a];return h||(h=c().serif,f._fontName=f._uniqueName="serif"),f._metrics={ascent:h[0],descent:h[1],leading:h[2]},f._metrics.height=h[0]+h[1]+h[2],g[e]=f,f},getFontByUniqueName:function(a){return f[a]}},i=Object.getOwnPropertyDescriptor;return h.__glue__={"native":{instance:{fontName:i(h,"fontName"),fontStyle:i(h,"fontStyle"),fontType:i(h,"fontType"),hasGlyphs:h.hasGlyphs},"static":{enumerateFonts:a,registerFont:b}}},h}.call(this),DEVICE_FONT_METRICS_WIN={serif:[1,.25,0],"sans-serif":[1,.25,0],monospace:[1,.25,0],"birch std":[.9167,.25,0],"blackoak std":[1,.3333,0],"chaparral pro":[.8333,.3333,0],"chaparral pro light":[.8333,.3333,0],"charlemagne std":[.9167,.25,0],"cooper std black":[.9167,.25,0],"giddyup std":[.8333,.3333,0],"hobo std":[1.0833,.3333,0],"kozuka gothic pro b":[1,.4167,0],"kozuka gothic pro el":[1.0833,.25,0],"kozuka gothic pro h":[1,.4167,0],"kozuka gothic pro l":[1,.3333,0],"kozuka gothic pro m":[1.0833,.3333,0],"kozuka gothic pro r":[1,.3333,0],"kozuka mincho pro b":[1.0833,.25,0],"kozuka mincho pro el":[1.0833,.25,0],"kozuka mincho pro h":[1.1667,.25,0],"kozuka mincho pro l":[1.0833,.25,0],"kozuka mincho pro m":[1.0833,.25,0],"kozuka mincho pro r":[1.0833,.25,0],"mesquite std":[.9167,.25,0],"minion pro cond":[1,.3333,0],"minion pro med":[1,.3333,0],"minion pro smbd":[1,.3333,0],"myriad arabic":[1,.4167,0],"nueva std":[.75,.25,0],"nueva std cond":[.75,.25,0],"ocr a std":[.8333,.25,0],"orator std":[1.0833,.25,0],"poplar std":[.9167,.25,0],"prestige elite std":[.9167,.25,0],"rosewood std regular":[.8333,.3333,0],"stencil std":[1,.3333,0],"trajan pro":[1,.25,0],"kozuka gothic pr6n b":[1.4167,.4167,0],"kozuka gothic pr6n el":[1.4167,.3333,0],"kozuka gothic pr6n h":[1.4167,.4167,0],"kozuka gothic pr6n l":[1.4167,.3333,0],"kozuka gothic pr6n m":[1.5,.3333,0],"kozuka gothic pr6n r":[1.4167,.3333,0],"kozuka mincho pr6n b":[1.3333,.3333,0],"kozuka mincho pr6n el":[1.3333,.3333,0],"kozuka mincho pr6n h":[1.4167,.3333,0],"kozuka mincho pr6n l":[1.3333,.3333,0],"kozuka mincho pr6n m":[1.3333,.3333,0],"kozuka mincho pr6n r":[1.3333,.3333,0],"letter gothic std":[1,.25,0],"minion pro":[1,.3333,0],"myriad hebrew":[.8333,.3333,0],"myriad pro":[.9167,.25,0],"myriad pro cond":[.9167,.25,0],"myriad pro light":[1,.25,0],marlett:[1,0,0],arial:[1,.25,0],"arabic transparent":[1,.25,0],"arial baltic":[1,.25,0],"arial ce":[1,.25,0],"arial cyr":[1,.25,0],"arial greek":[1,.25,0],"arial tur":[1,.25,0],batang:[.8333,.1667,0],batangche:[.8333,.1667,0],gungsuh:[.8333,.1667,0],gungsuhche:[.8333,.1667,0],"courier new":[1,.25,0],"courier new baltic":[1,.25,0],"courier new ce":[1,.25,0],"courier new cyr":[1,.25,0],"courier new greek":[1,.25,0],"courier new tur":[1,.25,0],daunpenh:[.6667,.6667,0],dokchampa:[1.4167,.5833,0],"estrangelo edessa":[.75,.3333,0],euphemia:[1.0833,.3333,0],gautami:[1.1667,.8333,0],vani:[1.0833,.75,0],gulim:[.8333,.1667,0],gulimche:[.8333,.1667,0],dotum:[.8333,.1667,0],dotumche:[.8333,.1667,0],impact:[1.0833,.25,0],"iskoola pota":[1,.3333,0],kalinga:[1.0833,.5,0],kartika:[1,.4167,0],"khmer ui":[1.0833,.3333,0],"lao ui":[1,.25,0],latha:[1.0833,.4167,0],"lucida console":[.75,.25,0],"malgun gothic":[1,.25,0],mangal:[1.0833,.3333,0],meiryo:[1.0833,.4167,0],"meiryo ui":[1,.25,0],"microsoft himalaya":[.5833,.4167,0],"microsoft jhenghei":[1,.3333,0],"microsoft yahei":[1.0833,.3333,0],mingliu:[.8333,.1667,0],pmingliu:[.8333,.1667,0],mingliu_hkscs:[.8333,.1667,0],"mingliu-extb":[.8333,.1667,0],"pmingliu-extb":[.8333,.1667,0],"mingliu_hkscs-extb":[.8333,.1667,0],"mongolian baiti":[.8333,.25,0],"ms gothic":[.8333,.1667,0],"ms pgothic":[.8333,.1667,0],"ms ui gothic":[.8333,.1667,0],"ms mincho":[.8333,.1667,0],"ms pmincho":[.8333,.1667,0],"mv boli":[1.1667,.25,0],"microsoft new tai lue":[1,.4167,0],nyala:[.9167,.3333,0],"microsoft phagspa":[1.0833,.25,0],"plantagenet cherokee":[1,.4167,0],raavi:[1.0833,.6667,0],"segoe script":[1.0833,.5,0],"segoe ui":[1,.25,0],"segoe ui semibold":[1,.25,0],"segoe ui light":[1,.25,0],"segoe ui symbol":[1,.25,0],shruti:[1.0833,.5,0],simsun:[.8333,.1667,0],nsimsun:[.8333,.1667,0],"simsun-extb":[.8333,.1667,0],sylfaen:[1,.3333,0],"microsoft tai le":[1,.3333,0],"times new roman":[1,.25,0],"times new roman baltic":[1,.25,0],"times new roman ce":[1,.25,0],"times new roman cyr":[1,.25,0],"times new roman greek":[1,.25,0],"times new roman tur":[1,.25,0],tunga:[1.0833,.75,0],vrinda:[1,.4167,0],"shonar bangla":[.8333,.5,0],"microsoft yi baiti":[.8333,.1667,0],tahoma:[1,.1667,0],"microsoft sans serif":[1.0833,.1667,0],"angsana new":[.9167,.4167,0],aparajita:[.75,.4167,0],"cordia new":[.9167,.5,0],ebrima:[1.0833,.5,0],gisha:[.9167,.25,0],kokila:[.8333,.3333,0],leelawadee:[.9167,.25,0],"microsoft uighur":[1.0833,.5,0],moolboran:[.6667,.6667,0],symbol:[1,.25,0],utsaah:[.8333,.4167,0],vijaya:[1.0833,.25,0],wingdings:[.9167,.25,0],andalus:[1.3333,.4167,0],"arabic typesetting":[.8333,.5,0],"simplified arabic":[1.3333,.5,0],"simplified arabic fixed":[1,.4167,0],"sakkal majalla":[.9167,.5,0],"traditional arabic":[1.3333,.5,0],aharoni:[.75,.25,0],david:[.75,.25,0],frankruehl:[.75,.25,0],fangsong:[.8333,.1667,0],simhei:[.8333,.1667,0],kaiti:[.8333,.1667,0],"browallia new":[.8333,.4167,0],"lucida sans unicode":[1.0833,.25,0],"arial black":[1.0833,.3333,0],calibri:[.9167,.25,0],cambria:[.9167,.25,0],"cambria math":[3.0833,2.5,0],candara:[.9167,.25,0],"comic sans ms":[1.0833,.3333,0],consolas:[.9167,.25,0],constantia:[.9167,.25,0],corbel:[.9167,.25,0],"franklin gothic medium":[1,.3333,0],gabriola:[1.1667,.6667,0],georgia:[1,.25,0],"palatino linotype":[1.0833,.3333,0],"segoe print":[1.25,.5,0],"trebuchet ms":[1.0833,.4167,0],verdana:[1,.1667,0],webdings:[1.0833,.5,0],"lucida bright":[.9167,.25,0],"lucida sans":[.9167,.25,0],"lucida sans typewriter":[.9167,.25,0],"gentium basic":[.8333,.25,0],"dejavu serif condensed":[.9167,.25,0],arimo:[1,.25,0],"dejavu sans condensed":[.9167,.25,0],"dejavu sans":[.9167,.25,0],"dejavu sans light":[.9167,.25,0],opensymbol:[.8333,.1667,0],"gentium book basic":[.8333,.25,0],"dejavu sans mono":[.9167,.25,0],"dejavu serif":[.9167,.25,0],"calibri light":[.9167,.25,0]},DEVICE_FONT_METRICS_MAC={"al bayan plain":[1,.5,0],"al bayan bold":[1,.5833,0],"american typewriter":[.9167,.25,0],"american typewriter bold":[.9167,.25,0],"american typewriter condensed":[.9167,.25,0],"american typewriter condensed bold":[.9167,.25,0],"american typewriter condensed light":[.8333,.25,0],"american typewriter light":[.9167,.25,0],"andale mono":[.9167,.25,0],"apple symbols":[.6667,.25,0],"arial bold italic":[.9167,.25,0],"arial bold":[.9167,.25,0],"arial italic":[.9167,.25,0],"arial hebrew":[.75,.3333,0],"arial hebrew bold":[.75,.3333,0],arial:[.9167,.25,0],"arial narrow":[.9167,.25,0],"arial narrow bold":[.9167,.25,0],"arial narrow bold italic":[.9167,.25,0],"arial narrow italic":[.9167,.25,0],"arial rounded mt bold":[.9167,.25,0],"arial unicode ms":[1.0833,.25,0],"avenir black":[1,.3333,0],"avenir black oblique":[1,.3333,0],"avenir book":[1,.3333,0],"avenir book oblique":[1,.3333,0],"avenir heavy":[1,.3333,0],"avenir heavy oblique":[1,.3333,0],"avenir light":[1,.3333,0],"avenir light oblique":[1,.3333,0],"avenir medium":[1,.3333,0],"avenir medium oblique":[1,.3333,0],"avenir oblique":[1,.3333,0],"avenir roman":[1,.3333,0],"avenir next bold":[1,.3333,0],"avenir next bold italic":[1,.3333,0],"avenir next demi bold":[1,.3333,0],"avenir next demi bold italic":[1,.3333,0],"avenir next heavy":[1,.3333,0],"avenir next heavy italic":[1,.3333,0],"avenir next italic":[1,.3333,0],"avenir next medium":[1,.3333,0],"avenir next medium italic":[1,.3333,0],"avenir next regular":[1,.3333,0],"avenir next ultra light":[1,.3333,0],"avenir next ultra light italic":[1,.3333,0],"avenir next condensed bold":[1,.3333,0],"avenir next condensed bold italic":[1,.3333,0],"avenir next condensed demi bold":[1,.3333,0],"avenir next condensed demi bold italic":[1,.3333,0],"avenir next condensed heavy":[1,.3333,0],"avenir next condensed heavy italic":[1,.3333,0],"avenir next condensed italic":[1,.3333,0],"avenir next condensed medium":[1,.3333,0],"avenir next condensed medium italic":[1,.3333,0],"avenir next condensed regular":[1,.3333,0],"avenir next condensed ultra light":[1,.3333,0],"avenir next condensed ultra light italic":[1,.3333,0],ayuthaya:[1.0833,.3333,0],baghdad:[.9167,.4167,0],"bangla mn":[.9167,.6667,0],"bangla mn bold":[.9167,.6667,0],"bangla sangam mn":[.9167,.4167,0],"bangla sangam mn bold":[.9167,.4167,0],baskerville:[.9167,.25,0],"baskerville bold":[.9167,.25,0],"baskerville bold italic":[.9167,.25,0],"baskerville italic":[.9167,.25,0],"baskerville semibold":[.9167,.25,0],"baskerville semibold italic":[.9167,.25,0],"big caslon medium":[.9167,.25,0],"brush script mt italic":[.9167,.3333,0],chalkboard:[1,.25,0],"chalkboard bold":[1,.25,0],"chalkboard se bold":[1.1667,.25,0],"chalkboard se light":[1.1667,.25,0],"chalkboard se regular":[1.1667,.25,0],chalkduster:[1,.25,0],"charcoal cy":[1,.25,0],cochin:[.9167,.25,0],"cochin bold":[.9167,.25,0],"cochin bold italic":[.9167,.25,0],"cochin italic":[.9167,.25,0],"comic sans ms":[1.0833,.25,0],"comic sans ms bold":[1.0833,.25,0],copperplate:[.75,.25,0],"copperplate bold":[.75,.25,0],"copperplate light":[.75,.25,0],"corsiva hebrew":[.6667,.3333,0],"corsiva hebrew bold":[.6667,.3333,0],courier:[.75,.25,0],"courier bold":[.75,.25,0],"courier bold oblique":[.75,.25,0],"courier oblique":[.75,.25,0],"courier new bold italic":[.8333,.3333,0],"courier new bold":[.8333,.3333,0],"courier new italic":[.8333,.3333,0],"courier new":[.8333,.3333,0],biaukai:[.8333,.1667,0],damascus:[.5833,.4167,0],"damascus bold":[.5833,.4167,0],"decotype naskh":[1.1667,.6667,0],"devanagari mt":[.9167,.6667,0],"devanagari mt bold":[.9167,.6667,0],"devanagari sangam mn":[.9167,.4167,0],"devanagari sangam mn bold":[.9167,.4167,0],didot:[.9167,.3333,0],"didot bold":[1,.3333,0],"didot italic":[.9167,.25,0],"euphemia ucas":[1.0833,.25,0],"euphemia ucas bold":[1.0833,.25,0],"euphemia ucas italic":[1.0833,.25,0],"futura condensed extrabold":[1,.25,0],"futura condensed medium":[1,.25,0],"futura medium":[1,.25,0],"futura medium italic":[1,.25,0],"gb18030 bitmap":[1,.6667,0],"geeza pro":[.9167,.3333,0],"geeza pro bold":[.9167,.3333,0],geneva:[1,.25,0],"geneva cy":[1,.25,0],georgia:[.9167,.25,0],"georgia bold":[.9167,.25,0],"georgia bold italic":[.9167,.25,0],"georgia italic":[.9167,.25,0],"gill sans":[.9167,.25,0],"gill sans bold":[.9167,.25,0],"gill sans bold italic":[.9167,.25,0],"gill sans italic":[.9167,.25,0],"gill sans light":[.9167,.25,0],"gill sans light italic":[.9167,.25,0],"gujarati mt":[.9167,.6667,0],"gujarati mt bold":[.9167,.6667,0],"gujarati sangam mn":[.8333,.4167,0],"gujarati sangam mn bold":[.8333,.4167,0],"gurmukhi mn":[.9167,.25,0],"gurmukhi mn bold":[.9167,.25,0],"gurmukhi sangam mn":[.9167,.3333,0],"gurmukhi sangam mn bold":[.9167,.3333,0],helvetica:[.75,.25,0],"helvetica bold":[.75,.25,0],"helvetica bold oblique":[.75,.25,0],"helvetica light":[.75,.25,0],"helvetica light oblique":[.75,.25,0],"helvetica oblique":[.75,.25,0],"helvetica neue":[.9167,.25,0],"helvetica neue bold":[1,.25,0],"helvetica neue bold italic":[1,.25,0],"helvetica neue condensed black":[1,.25,0],"helvetica neue condensed bold":[1,.25,0],"helvetica neue italic":[.9167,.25,0],"helvetica neue light":[1,.25,0],"helvetica neue light italic":[.9167,.25,0],"helvetica neue medium":[1,.25,0],"helvetica neue ultralight":[.9167,.25,0],"helvetica neue ultralight italic":[.9167,.25,0],herculanum:[.8333,.1667,0],"hiragino kaku gothic pro w3":[.9167,.0833,0],"hiragino kaku gothic pro w6":[.9167,.0833,0],"hiragino kaku gothic pron w3":[.9167,.0833,0],"hiragino kaku gothic pron w6":[.9167,.0833,0],"hiragino kaku gothic std w8":[.9167,.0833,0],"hiragino kaku gothic stdn w8":[.9167,.0833,0],"hiragino maru gothic pro w4":[.9167,.0833,0],"hiragino maru gothic pron w4":[.9167,.0833,0],"hiragino mincho pro w3":[.9167,.0833,0],"hiragino mincho pro w6":[.9167,.0833,0],"hiragino mincho pron w3":[.9167,.0833,0],"hiragino mincho pron w6":[.9167,.0833,0],"hiragino sans gb w3":[.9167,.0833,0],"hiragino sans gb w6":[.9167,.0833,0],"hoefler text black":[.75,.25,0],"hoefler text black italic":[.75,.25,0],"hoefler text italic":[.75,.25,0],"hoefler text ornaments":[.8333,.1667,0],"hoefler text":[.75,.25,0],impact:[1,.25,0],inaimathi:[.8333,.4167,0],"headlinea regular":[.8333,.1667,0],"pilgi regular":[.8333,.25,0],"gungseo regular":[.8333,.25,0],"pcmyungjo regular":[.8333,.25,0],"kailasa regular":[1.0833,.5833,0],"kannada mn":[.9167,.25,0],"kannada mn bold":[.9167,.25,0],"kannada sangam mn":[1,.5833,0],"kannada sangam mn bold":[1,.5833,0],"kefa bold":[.9167,.25,0],"kefa regular":[.9167,.25,0],"khmer mn":[1,.6667,0],"khmer mn bold":[1,.6667,0],"khmer sangam mn":[1.0833,.6667,0],"kokonor regular":[1.0833,.5833,0],krungthep:[1,.25,0],kufistandardgk:[.9167,.5,0],"lao mn":[.9167,.4167,0],"lao mn bold":[.9167,.4167,0],"lao sangam mn":[1,.3333,0],"apple ligothic medium":[.8333,.1667,0],"lihei pro":[.8333,.1667,0],"lisong pro":[.8333,.1667,0],"lucida grande":[1,.25,0],"lucida grande bold":[1,.25,0],"malayalam mn":[1,.4167,0],"malayalam mn bold":[1,.4167,0],"malayalam sangam mn":[.8333,.4167,0],"malayalam sangam mn bold":[.8333,.4167,0],"marion bold":[.6667,.3333,0],"marion italic":[.6667,.3333,0],"marion regular":[.6667,.3333,0],"marker felt thin":[.8333,.25,0],"marker felt wide":[.9167,.25,0],"menlo bold":[.9167,.25,0],"menlo bold italic":[.9167,.25,0],"menlo italic":[.9167,.25,0],"menlo regular":[.9167,.25,0],"microsoft sans serif":[.9167,.25,0],monaco:[1,.25,0],"gurmukhi mt":[.8333,.4167,0],mshtakan:[.9167,.25,0],"mshtakan bold":[.9167,.25,0],"mshtakan boldoblique":[.9167,.25,0],"mshtakan oblique":[.9167,.25,0],"myanmar mn":[1,.4167,0],"myanmar mn bold":[1,.4167,0],"myanmar sangam mn":[.9167,.4167,0],nadeem:[.9167,.4167,0],"nanum brush script":[.9167,.25,0],nanumgothic:[.9167,.25,0],"nanumgothic bold":[.9167,.25,0],"nanumgothic extrabold":[.9167,.25,0],nanummyeongjo:[.9167,.25,0],"nanummyeongjo bold":[.9167,.25,0],"nanummyeongjo extrabold":[.9167,.25,0],"nanum pen script":[.9167,.25,0],"optima bold":[.9167,.25,0],"optima bold italic":[.9167,.25,0],"optima extrablack":[1,.25,0],"optima italic":[.9167,.25,0],"optima regular":[.9167,.25,0],"oriya mn":[.9167,.25,0],"oriya mn bold":[.9167,.25,0],"oriya sangam mn":[.8333,.4167,0],"oriya sangam mn bold":[.8333,.4167,0],osaka:[1,.25,0],"osaka-mono":[.8333,.1667,0],"palatino bold":[.8333,.25,0],"palatino bold italic":[.8333,.25,0],"palatino italic":[.8333,.25,0],palatino:[.8333,.25,0],papyrus:[.9167,.5833,0],"papyrus condensed":[.9167,.5833,0],"plantagenet cherokee":[.6667,.25,0],raanana:[.75,.25,0],"raanana bold":[.75,.25,0],"hei regular":[.8333,.1667,0],"kai regular":[.8333,.1667,0],stfangsong:[.8333,.1667,0],stheiti:[.8333,.1667,0],"heiti sc light":[.8333,.1667,0],"heiti sc medium":[.8333,.1667,0],"heiti tc light":[.8333,.1667,0],"heiti tc medium":[.8333,.1667,0],stkaiti:[.8333,.1667,0],"kaiti sc black":[1.0833,.3333,0],"kaiti sc bold":[1.0833,.3333,0],"kaiti sc regular":[1.0833,.3333,0],stsong:[.8333,.1667,0],"songti sc black":[1.0833,.3333,0],"songti sc bold":[1.0833,.3333,0],"songti sc light":[1.0833,.3333,0],"songti sc regular":[1.0833,.3333,0],stxihei:[.8333,.1667,0],sathu:[.9167,.3333,0],silom:[1,.3333,0],"sinhala mn":[.9167,.25,0],"sinhala mn bold":[.9167,.25,0],"sinhala sangam mn":[1.1667,.3333,0],"sinhala sangam mn bold":[1.1667,.3333,0],"skia regular":[.75,.25,0],symbol:[.6667,.3333,0],"tahoma negreta":[1,.1667,0],"tamil mn":[.9167,.25,0],"tamil mn bold":[.9167,.25,0],"tamil sangam mn":[.75,.25,0],"tamil sangam mn bold":[.75,.25,0],"telugu mn":[.9167,.25,0],"telugu mn bold":[.9167,.25,0],"telugu sangam mn":[1,.5833,0],"telugu sangam mn bold":[1,.5833,0],thonburi:[1.0833,.25,0],"thonburi bold":[1.0833,.25,0],"times bold":[.75,.25,0],"times bold italic":[.75,.25,0],"times italic":[.75,.25,0],"times roman":[.75,.25,0],"times new roman bold italic":[.9167,.25,0],"times new roman bold":[.9167,.25,0],"times new roman italic":[.9167,.25,0],"times new roman":[.9167,.25,0],"trebuchet ms bold italic":[.9167,.25,0],"trebuchet ms":[.9167,.25,0],"trebuchet ms bold":[.9167,.25,0],"trebuchet ms italic":[.9167,.25,0],verdana:[1,.25,0],"verdana bold":[1,.25,0],"verdana bold italic":[1,.25,0],"verdana italic":[1,.25,0],webdings:[.8333,.1667,0],"wingdings 2":[.8333,.25,0],"wingdings 3":[.9167,.25,0],"yuppy sc regular":[1.0833,.3333,0],"yuppy tc regular":[1.0833,.3333,0],"zapf dingbats":[.8333,.1667,0],zapfino:[1.9167,1.5,0]},DEVICE_FONT_METRICS_LINUX={kacstfarsi:[1.0831,.5215,0],meera:[.682,.4413,0],freemono:[.8023,.2006,0],undotum:[1.0029,.2808,0],loma:[1.1634,.4814,0],"century schoolbook l":[1.0029,.3209,0],kacsttitlel:[1.0831,.5215,0],undinaru:[1.0029,.2407,0],ungungseo:[1.0029,.2808,0],garuda:[1.3238,.6017,0],rekha:[1.1232,.2808,0],purisa:[1.1232,.5215,0],"dejavu sans mono":[.9628,.2407,0],vemana2000:[.8825,.8424,0],kacstoffice:[1.0831,.5215,0],umpush:[1.2837,.682,0],opensymbol:[.8023,.2006,0],sawasdee:[1.1232,.4413,0],"urw palladio l":[1.0029,.3209,0],freeserif:[.9227,.3209,0],kacstdigital:[1.0831,.5215,0],"ubuntu condensed":[.9628,.2006,0],unpilgi:[1.0029,.4413,0],mry_kacstqurn:[1.4442,.7221,0],"urw gothic l":[1.0029,.2407,0],dingbats:[.8424,.1605,0],"urw chancery l":[1.0029,.3209,0],"phetsarath ot":[1.0831,.5215,0],"tlwg typist":[.8825,.4012,0],kacstletter:[1.0831,.5215,0],utkal:[1.2035,.6418,0],"dejavu sans light":[.9628,.2407,0],norasi:[1.2436,.5215,0],"dejavu serif condensed":[.9628,.2407,0],kacstone:[1.2436,.6418,0],"liberation sans narrow":[.9628,.2407,0],symbol:[1.043,.3209,0],nanummyeongjo:[.9227,.2407,0],untitled1:[.682,.5616,0],"lohit gujarati":[.9628,.4012,0],"liberation mono":[.8424,.3209,0],kacstart:[1.0831,.5215,0],mallige:[1.0029,.682,0],"bitstream charter":[1.0029,.2407,0],nanumgothic:[.9227,.2407,0],"liberation serif":[.9227,.2407,0],"dejavu sans condensed":[.9628,.2407,0],ubuntu:[.9628,.2006,0],"courier 10 pitch":[.8825,.3209,0],"nimbus sans l":[.9628,.3209,0],takaopgothic:[.8825,.2006,0],"wenquanyi micro hei mono":[.9628,.2407,0],"dejavu sans":[.9628,.2407,0],kedage:[1.0029,.682,0],kinnari:[1.3238,.5215,0],tlwgmono:[.8825,.4012,0],"standard symbols l":[1.043,.3209,0],"lohit punjabi":[1.2035,.682,0],"nimbus mono l":[.8424,.2808,0],rachana:[.682,.5616,0],waree:[1.2436,.4413,0],kacstposter:[1.0831,.5215,0],"khmer os":[1.2837,.7622,0],freesans:[1.0029,.3209,0],gargi:[.9628,.2808,0],"nimbus roman no9 l":[.9628,.3209,0],"dejavu serif":[.9628,.2407,0],"wenquanyi micro hei":[.9628,.2407,0],"ubuntu light":[.9628,.2006,0],tlwgtypewriter:[.9227,.4012,0],kacstpen:[1.0831,.5215,0],"tlwg typo":[.8825,.4012,0],"mukti narrow":[1.2837,.4413,0],"ubuntu mono":[.8424,.2006,0],"lohit bengali":[1.0029,.4413,0],"liberation sans":[.9227,.2407,0],unbatang:[1.0029,.2808,0],kacstdecorative:[1.1232,.5215,0],"khmer os system":[1.2436,.6017,0],saab:[1.0029,.682,0],kacsttitle:[1.0831,.5215,0],"mukti narrow bold":[1.2837,.4413,0],"lohit hindi":[1.0029,.5215,0],kacstqurn:[1.0831,.5215,0],"urw bookman l":[.9628,.2808,0],kacstnaskh:[1.0831,.5215,0],kacstscreen:[1.0831,.5215,0],pothana2000:[.8825,.8424,0],ungraphic:[1.0029,.2808,0],"lohit tamil":[.8825,.361,0],kacstbook:[1.0831,.5215,0]};DEVICE_FONT_METRICS_MAC.__proto__=DEVICE_FONT_METRICS_WIN,DEVICE_FONT_METRICS_LINUX.__proto__=DEVICE_FONT_METRICS_MAC;var StaticTextDefinition=function(){var a={__class__:"flash.text.StaticText",initialize:function(){var a=this.symbol;a&&(this.draw=a.draw)},get text(){return this._text},set text(a){this._text=a}},b=Object.getOwnPropertyDescriptor;return a.__glue__={"native":{instance:{text:b(a,"text")}}},a}.call(this),StyleSheetDefinition=function(){return{__class__:"flash.text.StyleSheet",initialize:function(){},__glue__:{"native":{"static":{},instance:{_update:function(){somewhatImplemented("StyleSheet._update")},_parseCSSInternal:function(){return somewhatImplemented("StyleSheet._parseCSSInternal"),null},_parseCSSFontFamily:function(){notImplemented("StyleSheet._parseCSSFontFamily")},_parseColor:function(){notImplemented("StyleSheet._parseColor")},_styles:{get:function(){return this.__styles},set:function(a){somewhatImplemented("StyleSheet._styles"),this.__styles=a}}}}}}}.call(this),TextFieldDefinition=function(){var a={__class__:"flash.text.TextField",initialize:function(){this._bbox={xMin:0,yMin:0,xMax:2e3,yMax:2e3};var a={align:"LEFT",face:"serif",size:12,letterspacing:0,kerning:0,color:0,leading:0};this._content=new TextFieldContent(a),this._type="dynamic",this._embedFonts=!1,this._selectable=!0,this._autoSize="none",this._scrollV=1,this._maxScrollV=1,this._bottomScrollV=1,this._drawingOffsetH=0,this._background=!1,this._border=!1,this._backgroundColor=16777215,this._backgroundColorStr="#ffffff",this._borderColor=0,this._borderColorStr="#000000";var b=this.symbol;if(!b)return this._currentTransform.tx-=40,this._currentTransform.ty-=40,this._content.resolveFont(a,!1),void(this.text="");var c=b.tag,d=c.bbox;if(this._currentTransform.tx+=d.xMin,this._currentTransform.ty+=d.yMin,this._bbox.xMax=d.xMax-d.xMin,this._bbox.yMax=d.yMax-d.yMin,c.hasLayout&&(a.size=c.fontHeight/20,a.leading=(0|c.leading)/20),c.hasColor&&(a.color=rgbaObjToStr(c.color)),c.hasFont){var e=FontDefinition.getFontByUniqueName(c.font);a.font=e,a.face=e._fontName,a.bold=e.symbol.bold,a.italic=e.symbol.italic,a.str=this._content.makeFormatString(a)}switch(this._content.multiline=!!c.multiline,this._content.wordWrap=!!c.wordWrap,this._embedFonts=!!c.useOutlines,this._selectable=!c.noSelect,this._border=!!c.border,c.align){case 1:a.align="right";break;case 2:a.align="center";break;case 3:a.align="justified"}c.initialText?c.html?this.htmlText=c.initialText:this.text=c.initialText:this.text=""},_getAS2Object:function(){return this.$as2Object||new avm1lib.AS2TextField(this),this.$as2Object},replaceText:function(a,b,c){var d=this._content.text;this.text=d.substring(0,a)+c+d.substring(b)},draw:function(a,b,c){this.ensureDimensions();var d=this._bbox,e=d.xMax/20,f=d.yMax/20;if(!(0>=e||0>=f)){if(a.save(),a.beginPath(),a.rect(0,0,e+1,f+1),a.clip(),this._background&&(c.setFillStyle(a,this._backgroundColorStr),a.fill()),this._border&&(c.setStrokeStyle(a,this._borderColorStr),a.lineCap="square",a.lineWidth=1,a.strokeRect(.5,.5,0|e,0|f)),a.closePath(),0===this._content.lines.length)return void a.restore();a.translate(2,2),a.save(),c.setAlpha(a);for(var g=this._content._textRuns,h=this._content.lines[this._scrollV-1].y,i=0;i<g.length;i++){var j=g[i];if("f"===j.type)a.restore(),a.font=j.format.str,c.setFillStyle(a,j.format.color),a.save(),c.setAlpha(a);else{if(j.y<h)continue;a.fillText(j.text,j.x-this._drawingOffsetH,j.y-h)}}a.restore(),a.restore()}},invalidateDimensions:function(){this._invalidate(),this._invalidateBounds(),this._dimensionsValid=!1},ensureDimensions:function(){if(!this._dimensionsValid){var a=this._bbox,b=this._content.calculateMetrics(a,this._embedFonts);this._scrollV=1,this._maxScrollV=1,this._bottomScrollV=1;var c=this._autoSize;if("none"===c){var d=(a.yMax-80)/20;if(this._content.textHeight>d)for(var e=this._content.lines,f=0;f<e.length;f++){var g=e[f];if(g.y+g.height>d){this._maxScrollV=f+1,this._bottomScrollV=0===f?1:f;break}}}else{var h=Math.max(a.xMax/20-4,1),i=this._content.textWidth,j=b,k=0;if("mixed"!==j){switch(c){case"left":break;case"center":k=h-i>>1;break;case"right":k=h-i}if("left"===j)this._drawingOffsetH=0;else{var l;switch(c){case"left":l=h-i;break;case"center":l=k<<1;break;case"right":l=k}"center"===j&&(l>>=1),this._drawingOffsetH=l}this._invalidateTransform(),this._currentTransform.tx+=20*k|0,a.xMax=(20*i|0)+80}a.yMax=(20*this._content.textHeight|0)+80,this._invalidateBounds()}this._dimensionsValid=!0}},get text(){return this._content.text},set text(a){this._content.text=a,this.invalidateDimensions()},get htmlText(){return this._content.htmlText},set htmlText(a){this._content.htmlText=a,this.invalidateDimensions()},get defaultTextFormat(){var a=this._content.defaultTextFormat;return(new flash.text.TextFormat).fromObject(a)},set defaultTextFormat(a){this._content.defaultTextFormat=a.toObject(),this.invalidateDimensions()},getTextFormat:function(){return this.defaultTextFormat},setTextFormat:function(a){this.defaultTextFormat=a,this.text===this.htmlText&&(this.text=this.text),this.invalidateDimensions()},get x(){return this.ensureDimensions(),this._currentTransform.tx},set x(a){a!==this._currentTransform.tx&&(this._invalidate(),this._invalidateBounds(),this._invalidateTransform(),this._currentTransform.tx=a)},get width(){return this.ensureDimensions(),this._bbox.xMax},set width(a){0>a||(this._bbox.xMax=a,this.invalidateDimensions())},get height(){return this.ensureDimensions(),this._bbox.yMax},set height(a){0>a||(this._bbox.yMax=a,this._invalidate())},_getContentBounds:function(){return this.ensureDimensions(),this._bbox},_getRegion:function(a){return this._getTransformedRect(this._getContentBounds(),a)},getLineMetrics:function(a){this.ensureDimensions(),(0>a||a>=this._content.lines.length)&&throwError("RangeError",Errors.ParamRangeError);var b=this._content.lines[a],c=b.largestFormat,d=c.font._metrics,e=c.size,f=d.ascent*e+.49999|0,g=d.descent*e+.49999|0,h=d.leading*e+.49999+b.leading|0;return new flash.text.TextLineMetrics(b.x+2,b.width,b.height,f,g,h)},getCharBoundaries:function(){return somewhatImplemented("TextField.getCharBoundaries"),new flash.geom.Rectangle(0,0,0,0)}},b=Object.getOwnPropertyDescriptor;return a.__glue__={"native":{instance:{text:b(a,"text"),defaultTextFormat:b(a,"defaultTextFormat"),draw:a.draw,htmlText:b(a,"htmlText"),replaceText:a.replaceText,getTextFormat:a.getTextFormat,setTextFormat:a.setTextFormat,getCharBoundaries:a.getCharBoundaries,autoSize:{get:function(){return this._autoSize},set:function(a){this._autoSize!==a&&(this._autoSize=a,this.invalidateDimensions())}},multiline:{get:function(){return this._content.multiline},set:function(a){this._content.multiline!==a&&(this._content.multiline=a,this.invalidateDimensions())}},textColor:{get:function(){return this._content.textColor},set:function(a){this._content.textColor!==a&&(this._content.textColor=a,this._invalidate())}},selectable:{get:function(){return this._selectable},set:function(a){somewhatImplemented("TextField.selectable"),this._selectable=a}},wordWrap:{get:function(){return this._content.wordWrap},set:function(a){this._content.wordWrap!==a&&(this._content.wordWrap=a,this.invalidateDimensions())}},textHeight:{get:function(){return this.ensureDimensions(),this._content.textHeight}},textWidth:{get:function(){return this.ensureDimensions(),this._content.textWidth}},length:{get:function(){return this.text.length}},numLines:{get:function(){return this.ensureDimensions(),this._content.lines.length}},getLineMetrics:function(a){return this.getLineMetrics(a)},setSelection:function(){somewhatImplemented("TextField.setSelection")},scrollV:{get:function(){return this._scrollV},set:function(a){this.ensureDimensions(),a=Math.max(1,Math.min(this._maxScrollV,a)),this._scrollV=a}},bottomScrollV:{get:function(){if(this.ensureDimensions(),1===this._scrollV)return this._bottomScrollV;for(var a=(this._bbox.yMax-80)/20,b=this._content.lines,c=b[this._scrollV-1].y,d=this._bottomScrollV;d<b.length;d++){var e=b[d];if(e.y+e.height+c>a)return d+1}}},maxScrollV:{get:function(){return this.ensureDimensions(),this._maxScrollV}},maxScrollH:{get:function(){return this.ensureDimensions(),Math.max(this._content.textWidth-this._bbox.xMax/20+4,0)}},background:{get:function(){return this._background},set:function(a){this._background!==a&&(this._background=a,this._invalidate())}},backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor!==a&&(this._backgroundColor=a,this._backgroundColorStr=rgbIntAlphaToStr(a,1),this._background&&this._invalidate())}},border:{get:function(){return this._border},set:function(a){this._border!==a&&(this._border=a,this._invalidate())}},borderColor:{get:function(){return this._borderColor},set:function(a){this._borderColor!==a&&(this._borderColor=a,this._borderColorStr=rgbIntAlphaToStr(a,1),this._border&&this._invalidate())}},type:{get:function(){return this._type},set:function(a){somewhatImplemented("TextField.type"),this._type=a}},embedFonts:{get:function(){return this._embedFonts},set:function(a){this.invalidateDimensions(),this._embedFonts=a}},condenseWhite:{get:function(){return this._content.condenseWhite},set:function(a){somewhatImplemented("TextField.condenseWhite"),this._content.condenseWhite=a}},sharpness:{get:function(){return this._sharpness},set:function(a){somewhatImplemented("TextField.sharpness"),this._sharpness=a}}}}},a}.call(this);TextFieldContent.knownNodeTypes={BR:!0,LI:!0,P:!0,B:!0,I:!0,FONT:!0,TEXTFORMAT:!0,U:!0,A:!0,IMG:!0,SPAN:!0},TextFieldContent.WRAP_OPPORTUNITIES={" ":!0,".":!0,"-":!0,"	":!0},TextFieldContent.TextLine=function(a){this.x=0,this.width=0,this.y=a,this.height=0,this.leading=0,this.runs=[],this.largestFormat=null},TextFieldContent.prototype={get text(){return this._text},set text(a){if(a+="",this._text!==a){for(var b=[],c=0,d=0;d<a.length;){var e=a[d];("\r"===e||"\n"===e)&&(b.push(a.substring(c,d)),c=d,"\r"===e&&"\n"===a[d+1]&&d++),d++}b.push(a.substring(c,d)),this._createTrunk(),this._text=a,this._htmlText=a,this._tree.children[0].children[0]={type:"plain-text",lines:b}}},get htmlText(){return this._htmlText},set htmlText(a){this._htmlText!==a&&(this.defaultTextFormat.bold=!1,this.defaultTextFormat.italic=!1,this._parseHtml(a))},calculateMetrics:function(a,b){var c=this.defaultTextFormat;this.resolveFont(c,b),this.lines=[],this._textRuns=[{type:"f",format:c}];var d=Math.max(a.xMax/20-4,1),e=Math.max(a.yMax/20-4,1),f={ctx:this._measureCtx,w:d,h:e,maxLineWidth:0,formats:[c],currentFormat:c,line:new TextFieldContent.TextLine(0),wordWrap:this.wordWrap,combinedAlign:null,textColor:this.textColor,embedFonts:b};return this._collectRuns(f,this._tree),this._finishLine(f,!1),this.textWidth=0|f.maxLineWidth,this.textHeight=0|f.line.y,f.combinedAlign},makeFormatString:function(a){var b="";return a.italic&&(b+="italic"),a.bold&&(b+=" bold"),b+" "+a.size+"px "+(a.font._uniqueName||a.font._fontName)},resolveFont:function(a,b){var c=a.face.toLowerCase();"_sans"===c?c="sans-serif":"_serif"===c?c="serif":"_typewriter"===c&&(c="monospace");var d;d=a.bold?a.italic?"boldItalic":"bold":a.italic?"italic":"regular";var e=FontDefinition.getFont(c,d,b);a.font=e},_parseHtml:function(a){this._htmlParser.innerHTML=a;var b=1!==this._htmlParser.childNodes.length?this._htmlParser:this._htmlParser.childNodes[0];this._text="",this._htmlText=a,this._createTrunk(),3===b.nodeType&&this._convertNode(b,this._tree.children[0].children);
var c,d,e,f=[b];if(1==f.length&&"P"==b.localName.toUpperCase()){c=this._extractAttributes(b),d=this._tree.format;for(e in c)d[e]=c[e];f=b.childNodes,b=b.childNodes[0]}if(1==f.length&&"FONT"==b.localName.toUpperCase()){c=this._extractAttributes(b),d=this._tree.children[0].format;for(e in c)d[e]=c[e];f=b.childNodes}this._convertNodeList(f,this._tree.children[0].children)},_createTrunk:function(){var a=this.defaultTextFormat;this._tree={type:"SPAN",format:{ALIGN:a.align},children:[]};var b={FACE:a.face,LETTERSPACING:a.letterSpacing,KERNING:a.kerning,LEADING:a.leading,COLOR:a.color};this._tree.children[0]={type:"FONT",format:b,children:[]}},_convertNode:function(a,b){if(!(1!==a.nodeType&&3!==a.nodeType||a.prefix)){var c;if(3===a.nodeType){var d=a.textContent;return c={type:"text",text:d,format:null,children:null},this._text+=d,void b.push(c)}var e=a.localName.toUpperCase();if(!TextFieldContent.knownNodeTypes[e]||this.multiline===!1&&("P"===e||"BR"===e))return"SBR"===e&&b.push({type:"BR",text:null,format:null,children:null}),void this._convertNodeList(a.childNodes,b);c={type:e,text:null,format:this._extractAttributes(a),children:[]},this._convertNodeList(a.childNodes,c.children),b.push(c)}},_convertNodeList:function(a,b){for(var c=a.length,d=0;c>d;d++)this._convertNode(a[d],b)},_extractAttributes:function(a){for(var b=a.attributes,c={},d=0;d<b.length;d++){var e=b[d];e.prefix||(c[e.localName.toUpperCase()]=e.value)}return c},_collectRuns:function(a,b){var c=!1,d=!1;switch(b.type){case"plain-text":for(var e=b.lines,f=0;f<e.length;f++)this._addRunsForText(a,e[f]),f<e.length-1&&this._finishLine(a,!0);return;case"text":return void this._addRunsForText(a,b.text);case"BR":return void this._finishLine(a,!0);case"LI":case"P":this._finishLine(a,!1),this._pushFormat(a,b),d=!0;break;case"B":case"I":case"FONT":case"TEXTFORMAT":this._pushFormat(a,b),c=!0;break;case"U":case"A":case"IMG":case"SPAN":}for(var f=0;f<b.children.length;f++){var g=b.children[f];this._collectRuns(a,g)}c&&this._popFormat(a),d&&this._finishLine(a,!0)},_addRunsForText:function(a,b){if(b){if(!a.wordWrap)return void this._addTextRun(a,b,a.ctx.measureText(b).width);for(;b.length;){var c=a.ctx.measureText(b).width,d=a.w-a.line.width;if(0>=d&&(this._finishLine(a,!1),d=a.w-a.line.width),d>=c){this._addTextRun(a,b,c);break}for(var e=b.length/c*d|0;a.ctx.measureText(b.substr(0,e)).width<d&&e<b.length;)e++;for(var f=e;f>-1;){if(TextFieldContent.WRAP_OPPORTUNITIES[b[f]]){f++;break}f--}if(-1===f){if(a.line.width>0){this._finishLine(a,!1);continue}for(;a.ctx.measureText(b.substr(0,e)).width>d;)e--;0===e&&(e=1),f=e}var g=b.substr(0,f);c=a.ctx.measureText(g).width,this._addTextRun(a,g,c),a.wordWrap&&this._finishLine(a,!1),b=b.substr(f)}}},_addTextRun:function(a,b,c){if(0!==b.length){var d=a.line,e=a.currentFormat,f=e.size,g={type:"t",text:b,x:d.width};this._textRuns.push(g),a.line.runs.push(g),d.width+=0|c,0===d.leading&&e.leading>d.leading&&(d.leading=e.leading),(!d.largestFormat||f>d.largestFormat.size)&&(d.largestFormat=e)}},_finishLine:function(a,b){var c=a.line;if(0!==c.runs.length){for(var d=c.runs,e=c.largestFormat,f=c.y+e.font._metrics.ascent*e.size,g=d.length;g--;)d[g].y=f;var h=(a.currentFormat.align||"").toLowerCase();if(null===a.combinedAlign?a.combinedAlign=h:a.combinedAlign!==h&&(a.combinedAlign="mixed"),"center"===h||"right"===h){var i=Math.max(a.w-c.width,0);for("center"===h&&(i>>=1),g=d.length;g--;)d[g].x+=i}c.height=e.font._metrics.height*e.size+c.leading|0,a.maxLineWidth=Math.max(a.maxLineWidth,c.width),this.lines.push(c),a.line=new TextFieldContent.TextLine(c.y+c.height)}else if(b){var e=a.currentFormat;a.line.y+=e.font._metrics.height*e.size+e.leading|0}},_pushFormat:function(a,b){var c=b.format,d=Object.create(a.formats[a.formats.length-1]),e=!1;switch(b.type){case"P":if(c.ALIGN===d.align)return;d.align=c.ALIGN;break;case"B":d.bold=!0,e=!0;break;case"I":d.italic=!0,e=!0;break;case"FONT":void 0!==c.COLOR&&(d.color=c.COLOR),void 0!==c.FACE&&(d.face=c.FACE,e=!0),void 0!==c.SIZE&&(d.size=parseFloat(c.SIZE)),void 0!==c.LETTERSPACING&&(d.letterspacing=parseFloat(c.LETTERSPACING)),void 0!==c.KERNING&&(d.kerning=c.KERNING&&!0);case"TEXTFORMAT":void 0!==c.LEADING&&(d.leading=parseFloat(c.LEADING)),void 0!==c.INDENT&&(a.line.x=c.INDENT,a.line.width+=0|c.INDENT);break;default:return void warning("Unknown format node encountered: "+b.type)}null!==a.textColor&&(d.color=rgbIntAlphaToStr(a.textColor,1)),e&&this.resolveFont(d,a.embedFonts),d.str=this.makeFormatString(d),a.formats.push(d),this._textRuns.push({type:"f",format:d}),a.currentFormat=d,a.ctx.font=d.str},_popFormat:function(a){a.formats.pop();var b=a.currentFormat=a.formats[a.formats.length-1];this._textRuns.push({type:"f",format:b}),a.ctx.font=a.str}};var TextFormatDefinition=function(){var a;return{__class__:"flash.text.TextFormat",initialize:function(){},fromObject:function(a){return this._font=a.face||null,this._size="number"==typeof a.size?a.size:null,this._color="number"==typeof a.color?a.color:null,this._bold="boolean"==typeof a.bold?a.bold:null,this._italic="boolean"==typeof a.italic?a.italic:null,this._underline="boolean"==typeof a.underline?a.underline:null,this._url=a.url||null,this._target=a.target||null,this._align=a.align||null,this._leftMargin="number"==typeof a.leftMargin?a.leftMargin:null,this._rightMargin="number"==typeof a.rightMargin?a.rightMargin:null,this._indent="number"==typeof a.indent?a.indent:null,this._leading="number"==typeof a.leading?a.leading:null,this},toObject:function(){return{face:this._font||"serif",size:this._size||12,color:this._color||0,bold:this._bold||!1,italic:this._italic||!1,underline:this._underline||!1,url:this._url,target:this._target,align:this._align||"left",leftMargin:this._leftMargin||0,rightMargin:this._rightMargin||0,indent:this._indent||0,leading:this._leading||0}},as2GetTextExtent:function(b,c){a||(a=new flash.text.TextField,a._multiline=!0),!isNaN(c)&&c>0?(a.width=c+4,a._wordWrap=!0):a._wordWrap=!1,a.defaultTextFormat=this,a.text=b,a.ensureDimensions();var d={},e=a._textWidth,f=a._textHeight;d.asSetPublicProperty("width",e),d.asSetPublicProperty("height",f),d.asSetPublicProperty("textFieldWidth",e+4),d.asSetPublicProperty("textFieldHeight",f+4);var g=a.getLineMetrics(0);return d.asSetPublicProperty("ascent",g.asGetPublicProperty("ascent")),d.asSetPublicProperty("descent",g.asGetPublicProperty("descent")),d},__glue__:{"native":{"static":{},instance:{align:{get:function(){return this._align},set:function(a){this._align=a}},blockIndent:{get:function(){return this._blockIndent},set:function(a){this._blockIndent=a}},bold:{get:function(){return this._bold},set:function(a){this._bold=a}},bullet:{get:function(){return this._bullet},set:function(a){this._bullet=a}},color:{get:function(){return this._color},set:function(a){this._color=a}},display:{get:function(){return this._display},set:function(a){this._display=a}},font:{get:function(){return this._font},set:function(a){this._font=a}},indent:{get:function(){return this._indent},set:function(a){this._indent=a}},italic:{get:function(){return this._italic},set:function(a){this._italic=a}},kerning:{get:function(){return this._kerning},set:function(a){this._kerning=a}},leading:{get:function(){return this._leading},set:function(a){this._leading=a}},leftMargin:{get:function(){return this._leftMargin},set:function(a){this._leftMargin=a}},letterSpacing:{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing=a}},rightMargin:{get:function(){return this._rightMargin},set:function(a){this._rightMargin=a}},size:{get:function(){return this._size},set:function(a){this._size=a}},tabStops:{get:function(){return this._tabStops},set:function(a){this._tabStops=a}},target:{get:function(){return this._target},set:function(a){this._target=a}},underline:{get:function(){return this._underline},set:function(a){this._underline=a}},url:{get:function(){return this._url},set:function(a){this._url=a}}}}}}}.call(this),ContentElementDefinition=function(){return{__class__:"flash.text.engine.ContentElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{textBlock:{get:function(){return notImplemented("ContentElement.textBlock"),this._textBlock}},textBlockBeginIndex:{get:function(){return notImplemented("ContentElement.textBlockBeginIndex"),this._textBlockBeginIndex}},elementFormat:{get:function(){return this._elementFormat},set:function(a){somewhatImplemented("ContentElement.elementFormat"),this._elementFormat=a}},eventMirror:{get:function(){return this._eventMirror},set:function(a){somewhatImplemented("ContentElement.eventMirror"),this._eventMirror=a}},groupElement:{get:function(){return notImplemented("ContentElement.groupElement"),this._groupElement}},rawText:{get:function(){return notImplemented("ContentElement.rawText"),this._rawText}},text:{get:function(){return notImplemented("ContentElement.text"),this._text}},textRotation:{get:function(){return this._textRotation},set:function(a){somewhatImplemented("ContentElement.textRotation"),this._textRotation=a}}}}}}}.call(this),ElementFormatDefinition=function(){return{__class__:"flash.text.engine.ElementFormat",initialize:function(){},__glue__:{"native":{"static":{},instance:{getFontMetrics:function(){notImplemented("ElementFormat.getFontMetrics")},alignmentBaseline:{get:function(){return this._alignmentBaseline},set:function a(a){somewhatImplemented("ElementFormat.alignmentBaseline"),this._alignmentBaseline=a}},alpha:{get:function(){return this._alpha},set:function(a){somewhatImplemented("ElementFormat.alpha"),this._alpha=a}},baselineShift:{get:function(){return this._baselineShift},set:function(a){somewhatImplemented("ElementFormat.baselineShift"),this._baselineShift=a}},breakOpportunity:{get:function(){return this._breakOpportunity},set:function(a){somewhatImplemented("ElementFormat.breakOpportunity"),this._breakOpportunity=a}},color:{get:function(){return this._color},set:function(a){somewhatImplemented("ElementFormat.color"),this._color=a}},dominantBaseline:{get:function(){return this._dominantBaseline},set:function b(b){somewhatImplemented("ElementFormat.dominantBaseline"),this._dominantBaseline=b}},fontDescription:{get:function(){return this._fontDescription},set:function(a){somewhatImplemented("ElementFormat.fontDescription"),this._fontDescription=a}},digitCase:{get:function(){return this._digitCase},set:function(a){somewhatImplemented("ElementFormat.digitCase"),this._digitCase=a}},digitWidth:{get:function(){return this._digitWidth},set:function(a){somewhatImplemented("ElementFormat.digitWidth"),this._digitWidth=a}},ligatureLevel:{get:function(){return this._ligatureLevel},set:function(a){somewhatImplemented("ElementFormat.ligatureLevel"),this._ligatureLevel=a}},fontSize:{get:function(){return this._fontSize},set:function(a){somewhatImplemented("ElementFormat.fontSize"),this._fontSize=a}},kerning:{get:function(){return this._kerning},set:function(a){somewhatImplemented("ElementFormat.kerning"),this._kerning=a}},locale:{get:function(){return this._locale},set:function(a){somewhatImplemented("ElementFormat.locale"),this._locale=a}},textRotation:{get:function(){return this._textRotation},set:function(a){somewhatImplemented("ElementFormat.textRotation"),this._textRotation=a}},trackingRight:{get:function(){return this._trackingRight},set:function(a){somewhatImplemented("ElementFormat.trackingRight"),this._trackingRight=a}},trackingLeft:{get:function(){return this._trackingLeft},set:function(a){somewhatImplemented("ElementFormat.trackingLeft"),this._trackingLeft=a}},typographicCase:{get:function(){return this._typographicCase},set:function(a){somewhatImplemented("ElementFormat.typographicCase"),this._typographicCase=a}},locked:{get:function(){return notImplemented("ElementFormat.locked"),this._locked},set:function(a){notImplemented("ElementFormat.locked"),this._locked=a}}}}}}}.call(this),FontDescriptionDefinition=function(){return{__class__:"flash.text.engine.FontDescription",initialize:function(){},__glue__:{"native":{"static":{isFontCompatible:function(){notImplemented("FontDescription.isFontCompatible")},isDeviceFontCompatible:function(){notImplemented("FontDescription.isDeviceFontCompatible")}},instance:{renderingMode:{get:function(){return this._renderingMode},set:function(a){somewhatImplemented("FontDescription.renderingMode"),this._renderingMode=a}},fontLookup:{get:function(){return this._fontLookup},set:function(a){somewhatImplemented("FontDescription.fontLookup"),this._fontLookup=a}},fontName:{get:function(){return this._fontName},set:function(a){somewhatImplemented("FontDescription.fontName"),this._fontName=a}},fontPosture:{get:function(){return this._fontPosture},set:function(a){somewhatImplemented("FontDescription.fontPosture"),this._fontPosture=a}},fontWeight:{get:function(){return this._fontWeight},set:function(a){somewhatImplemented("FontDescription.fontWeight"),this._fontWeight=a}},cffHinting:{get:function(){return this._cffHinting},set:function(a){somewhatImplemented("FontDescription.cffHinting"),this._cffHinting=a}},locked:{get:function(){return notImplemented("FontDescription.locked"),this._locked},set:function(a){notImplemented("FontDescription.locked"),this._locked=a}}}},script:{"static":{},instance:{}}}}}.call(this),GroupElementDefinition=function(){return{__class__:"flash.text.engine.GroupElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{getElementAt:function(){notImplemented("GroupElement.getElementAt")},setElements:function(a){somewhatImplemented("GroupElement.setElements"),this._elements=a},groupElements:function(){notImplemented("GroupElement.groupElements")},ungroupElements:function(){notImplemented("GroupElement.ungroupElements")},mergeTextElements:function(){notImplemented("GroupElement.mergeTextElements")},splitTextElement:function(){notImplemented("GroupElement.splitTextElement")},replaceElements:function(){notImplemented("GroupElement.replaceElements")},getElementAtCharIndex:function(){notImplemented("GroupElement.getElementAtCharIndex")},elementCount:{get:function(){return notImplemented("GroupElement.elementCount"),this._elementCount}}}}}}}.call(this),SpaceJustifierDefinition=function(){return{__class__:"flash.text.engine.SpaceJustifier",initialize:function(){this._letterSpacing=!1,this._optimumSpacing=1,this._minimumSpacing=.5,this._maximumSpacing=1.5},__glue__:{"native":{"static":{},instance:{cloneSpacing:function(a){somewhatImplemented("SpaceJustifier.cloneSpacing"),a._optimumSpacing=this._optimumSpacing,a._minimumSpacing=this._minimumSpacing,a._maximumSpacing=this._maximumSpacing},letterSpacing:{get:function(){return this._letterSpacing},set:function(a){somewhatImplemented("SpaceJustifier.letterSpacing"),this._letterSpacing=a}},minimumSpacing:{get:function(){return this._minimumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.minimumSpacing"),this._minimumSpacing=a}},optimumSpacing:{get:function(){return this._optimumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.optimumSpacing"),this._optimumSpacing=a}},maximumSpacing:{get:function(){return this._maximumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.maximumSpacing"),this._maximumSpacing=a}}}}}}}.call(this),TextBlockDefinition=function(){return{__class__:"flash.text.engine.TextBlock",initialize:function(){this._firstLine=null,this._lastLine=null},__glue__:{"native":{"static":{},instance:{getTextJustifier:function(){return this._textJustifier},setTextJustifier:function(a){somewhatImplemented("TextBlock.setTextJustifier"),this._textJustifier=a},getTabStops:function(){return this._tabStops},setTabStops:function(a){somewhatImplemented("TextBlock.setTabStops"),this._tabStops=a},findNextAtomBoundary:function(){notImplemented("TextBlock.findNextAtomBoundary")},findPreviousAtomBoundary:function(){notImplemented("TextBlock.findPreviousAtomBoundary")},findNextWordBoundary:function(){notImplemented("TextBlock.findNextWordBoundary")},findPreviousWordBoundary:function(){notImplemented("TextBlock.findPreviousWordBoundary")},getTextLineAtCharIndex:function(){notImplemented("TextBlock.getTextLineAtCharIndex")},DoCreateTextLine:function(a,b){if(somewhatImplemented("TextBlock.DoCreateTextLine"),a)return null;var c=new flash.text.engine.TextLine;return c._textBlock=this,c._specifiedWidth=b,c._rawTextLength=0,c._textWidth=0,c._textHeight=0,c._ascent=0,c._descent=0,c._unjustifiedTextWidth=0,c._validity="valid",c._previousLine=null,c._nextLine=null,this._firstLine=c,this._lastLine=c,c},releaseLineCreationData:function(){notImplemented("TextBlock.releaseLineCreationData")},releaseLines:function(){notImplemented("TextBlock.releaseLines")},dump:function(){notImplemented("TextBlock.dump")},applyNonLinearFontScaling:{get:function(){return this._applyNonLinearFontScaling},set:function(a){somewhatImplemented("TextBlock.applyNonLinearFontScaling"),this._applyNonLinearFontScaling=a}},baselineFontDescription:{get:function(){return this._baselineFontDescription},set:function(a){somewhatImplemented("TextBlock.baselineFontDescription"),this._baselineFontDescription=a}},baselineFontSize:{get:function(){return this._baselineFontSize},set:function(a){somewhatImplemented("TextBlock.baselineFontSize"),this._baselineFontSize=a}},baselineZero:{get:function(){return this._baselineZero},set:function(a){somewhatImplemented("TextBlock.baselineZero"),this._baselineZero=a}},content:{get:function(){return this._content},set:function(a){somewhatImplemented("TextBlock.content"),this._content=a}},bidiLevel:{get:function(){return this._bidiLevel},set:function(a){somewhatImplemented("TextBlock.bidiLevel"),this._bidiLevel=a}},firstInvalidLine:{get:function(){return notImplemented("TextBlock.firstInvalidLine"),this._firstInvalidLine}},firstLine:{get:function(){return somewhatImplemented("TextBlock.firstLine"),this._firstLine}},lastLine:{get:function(){return somewhatImplemented("TextBlock.lastLine"),this._lastLine}},textLineCreationResult:{get:function(){return notImplemented("TextBlock.textLineCreationResult"),this._textLineCreationResult}},lineRotation:{get:function(){return this._lineRotation},set:function(a){somewhatImplemented("TextBlock.lineRotation"),this._lineRotation=a}}}}}}}.call(this),TextElementDefinition=function(){return{__class__:"flash.text.engine.TextElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{replaceText:function(a,b,c){somewhatImplemented("TextElement.replaceText");var d=this._text||"";this._text=d.slice(0,a)+c+d.slice(b)},text:{set:function(a){somewhatImplemented("TextElement.text"),this._text=a}}}}}}}.call(this),TextJustifierDefinition=function(){return{__class__:"flash.text.engine.TextJustifier",initialize:function(){this._locale=null,this._lineJustification=null},__glue__:{"native":{"static":{},instance:{setLocale:function(a){somewhatImplemented("TextJustifier.setLocale"),this._locale=a},locale:{get:function(){return this._locale}},lineJustification:{get:function(){return this._lineJustification},set:function(a){somewhatImplemented("TextJustifier.lineJustification"),this._lineJustification=a}}}}}}}.call(this),TextLineDefinition=function(){return{__class__:"flash.text.engine.TextLine",initialize:function(){},__glue__:{"native":{"static":{},instance:{getAtomIndexAtPoint:function(){notImplemented("TextLine.getAtomIndexAtPoint")},getAtomIndexAtCharIndex:function(){notImplemented("TextLine.getAtomIndexAtCharIndex")},getAtomBounds:function(){notImplemented("TextLine.getAtomBounds")},getAtomBidiLevel:function(){notImplemented("TextLine.getAtomBidiLevel")},getAtomTextRotation:function(){notImplemented("TextLine.getAtomTextRotation")},getAtomTextBlockBeginIndex:function(){notImplemented("TextLine.getAtomTextBlockBeginIndex")},getAtomTextBlockEndIndex:function(){notImplemented("TextLine.getAtomTextBlockEndIndex")},getAtomCenter:function(){notImplemented("TextLine.getAtomCenter")},getAtomWordBoundaryOnLeft:function(){notImplemented("TextLine.getAtomWordBoundaryOnLeft")},getAtomGraphic:function(){notImplemented("TextLine.getAtomGraphic")},getBaselinePosition:function(){notImplemented("TextLine.getBaselinePosition")},dump:function(){notImplemented("TextLine.dump")},textBlock:{get:function(){return notImplemented("TextLine.textBlock"),this._textBlock}},hasGraphicElement:{get:function(){return notImplemented("TextLine.hasGraphicElement"),this._hasGraphicElement}},hasTabs:{get:function(){return notImplemented("TextLine.hasTabs"),this._hasTabs}},nextLine:{get:function(){return somewhatImplemented("TextLine.nextLine"),this._nextLine}},previousLine:{get:function(){return somewhatImplemented("TextLine.previousLine"),this._previousLine}},ascent:{get:function(){return somewhatImplemented("TextLine.ascent"),this._ascent}},descent:{get:function(){return somewhatImplemented("TextLine.descent"),this._descent}},textHeight:{get:function(){return somewhatImplemented("TextLine.textHeight"),this._textHeight}},textWidth:{get:function(){return somewhatImplemented("TextLine.textWidth"),this._textWidth}},totalAscent:{get:function(){return notImplemented("TextLine.totalAscent"),this._totalAscent}},totalDescent:{get:function(){return notImplemented("TextLine.totalDescent"),this._totalDescent}},totalHeight:{get:function(){return notImplemented("TextLine.totalHeight"),this._totalHeight}},textBlockBeginIndex:{get:function(){return notImplemented("TextLine.textBlockBeginIndex"),this._textBlockBeginIndex}},rawTextLength:{get:function(){return somewhatImplemented("TextLine.rawTextLength"),this._rawTextLength}},specifiedWidth:{get:function(){return somewhatImplemented("TextLine.specifiedWidth"),this._specifiedWidth}},unjustifiedTextWidth:{get:function(){return somewhatImplemented("TextLine.unjustifiedTextWidth"),this._unjustifiedTextWidth}},validity:{get:function(){return this._validity},set:function(a){somewhatImplemented("TextLine.validity"),this._validity=a}},atomCount:{get:function(){return notImplemented("TextLine.atomCount"),this._atomCount}},mirrorRegions:{get:function(){return notImplemented("TextLine.mirrorRegions"),this._mirrorRegions}}}}}}}.call(this),ContextMenuDefinition=function(){return{__class__:"flash.ui.ContextMenu",initialize:function(){},__glue__:{"native":{"static":{_checkSupported:function(){notImplemented("ContextMenu._checkSupported")}},instance:{cloneLinkAndClipboardProperties:function(){notImplemented("ContextMenu.cloneLinkAndClipboardProperties")},builtInItems:{get:function(){return somewhatImplemented("ContextMenu.builtInItems"),this._builtInItems},set:function(a){somewhatImplemented("ContextMenu.builtInItems"),this._builtInItems=a}},customItems:{get:function(){return somewhatImplemented("ContextMenu.customItems"),this._customItems},set:function(a){somewhatImplemented("ContextMenu.customItems"),this._customItems=a}},link:{get:function(){return notImplemented("ContextMenu.link"),this._link},set:function(a){notImplemented("ContextMenu.link"),this._link=a}},clipboardMenu:{get:function(){return notImplemented("ContextMenu.clipboardMenu"),this._clipboardMenu},set:function(a){notImplemented("ContextMenu.clipboardMenu"),this._clipboardMenu=a}},clipboardItems:{get:function(){return notImplemented("ContextMenu.clipboardItems"),this._clipboardItems},set:function(a){notImplemented("ContextMenu.clipboardItems"),this._clipboardItems=a}}}}}}}.call(this),ContextMenuItemDefinition=function(){return{__class__:"flash.ui.ContextMenuItem",initialize:function(){},__glue__:{"native":{"static":{},instance:{caption:{get:function(){return somewhatImplemented("ContextMenuItem.caption"),this._caption},set:function(a){somewhatImplemented("ContextMenuItem.caption"),this._caption=a}},separatorBefore:{get:function(){return somewhatImplemented("ContextMenuItem.separatorBefore"),this._separatorBefore},set:function(a){somewhatImplemented("ContextMenuItem.separatorBefore"),this._separatorBefore=a}},visible:{get:function(){return somewhatImplemented("ContextMenuItem.visible"),this._visible},set:function(a){somewhatImplemented("ContextMenuItem.visible"),this._visible=a}}}}}}}.call(this),ShumwayKeyboardListener={_lastKeyCode:0,_captureKeyPress:!1,_charCodeMap:[],focus:null,handleEvent:function(a){var b=a.keyCode;if("keydown"===a.type){if(this._lastKeyCode=b,this._captureKeyPress=8===b||9===b||13===b||32===b||b>=48&&90>=b||b>145,this._captureKeyPress)return;this._charCodeMap[b]=0}else if("keypress"===a.type){if(!this._captureKeyPress)return;b=this._lastKeyCode,this._charCodeMap[b]=a.charCode}this.focus&&this.focus._dispatchEvent(new flash.events.KeyboardEvent("keyup"===a.type?"keyUp":"keyDown",!0,!1,"keyup"===a.type?this._charCodeMap[b]:a.charCode,"keyup"===a.type?a.keyCode:this._lastKeyCode,a.keyLocation,a.ctrlKey,a.altKey,a.shiftKey))}};window.addEventListener("keydown",ShumwayKeyboardListener),window.addEventListener("keypress",ShumwayKeyboardListener),window.addEventListener("keyup",ShumwayKeyboardListener);var KeyboardDefinition=function(){var a={get capsLock(){return!1},get hasVirtualKeyboard(){return!1},get numLock(){return!1},get physicalKeyboardType(){return"alphanumeric"},get isAccessible(){return!0}},b=Object.getOwnPropertyDescriptor;return a.__glue__={script:{"static":scriptProperties("public",["A","ALTERNATE","AUDIO","B","BACK","BACKQUOTE","BACKSLASH","BACKSPACE","BLUE","C","CAPS_LOCK","CHANNEL_DOWN","CHANNEL_UP","COMMA","COMMAND","CONTROL","D","DELETE","DOWN","DVR","E","END","ENTER","EQUAL","ESCAPE","EXIT","F","F1","F10","F11","F12","F13","F14","F15","F2","F3","F4","F5","F6","F7","F8","F9","FAST_FORWARD","G","GREEN","GUIDE","H","HELP","HOME","I","INFO","INPUT","INSERT","J","K","KEYNAME_BEGIN","KEYNAME_BREAK","KEYNAME_CLEARDISPLAY","KEYNAME_CLEARLINE","KEYNAME_DELETE","KEYNAME_DELETECHAR","KEYNAME_DELETELINE","KEYNAME_DOWNARROW","KEYNAME_END","KEYNAME_EXECUTE","KEYNAME_F1","KEYNAME_F10","KEYNAME_F11","KEYNAME_F12","KEYNAME_F13","KEYNAME_F14","KEYNAME_F15","KEYNAME_F16","KEYNAME_F17","KEYNAME_F18","KEYNAME_F19","KEYNAME_F2","KEYNAME_F20","KEYNAME_F21","KEYNAME_F22","KEYNAME_F23","KEYNAME_F24","KEYNAME_F25","KEYNAME_F26","KEYNAME_F27","KEYNAME_F28","KEYNAME_F29","KEYNAME_F3","KEYNAME_F30","KEYNAME_F31","KEYNAME_F32","KEYNAME_F33","KEYNAME_F34","KEYNAME_F35","KEYNAME_F4","KEYNAME_F5","KEYNAME_F6","KEYNAME_F7","KEYNAME_F8","KEYNAME_F9","KEYNAME_FIND","KEYNAME_HELP","KEYNAME_HOME","KEYNAME_INSERT","KEYNAME_INSERTCHAR","KEYNAME_INSERTLINE","KEYNAME_LEFTARROW","KEYNAME_MENU","KEYNAME_MODESWITCH","KEYNAME_NEXT","KEYNAME_PAGEDOWN","KEYNAME_PAGEUP","KEYNAME_PAUSE","KEYNAME_PREV","KEYNAME_PRINT","KEYNAME_PRINTSCREEN","KEYNAME_REDO","KEYNAME_RESET","KEYNAME_RIGHTARROW","KEYNAME_SCROLLLOCK","KEYNAME_SELECT","KEYNAME_STOP","KEYNAME_SYSREQ","KEYNAME_SYSTEM","KEYNAME_UNDO","KEYNAME_UPARROW","KEYNAME_USER","L","LAST","LEFT","LEFTBRACKET","LIVE","M","MASTER_SHELL","MENU","MINUS","N","NEXT","NUMBER_0","NUMBER_1","NUMBER_2","NUMBER_3","NUMBER_4","NUMBER_5","NUMBER_6","NUMBER_7","NUMBER_8","NUMBER_9","NUMPAD","NUMPAD_0","NUMPAD_1","NUMPAD_2","NUMPAD_3","NUMPAD_4","NUMPAD_5","NUMPAD_6","NUMPAD_7","NUMPAD_8","NUMPAD_9","NUMPAD_ADD","NUMPAD_DECIMAL","NUMPAD_DIVIDE","NUMPAD_ENTER","NUMPAD_MULTIPLY","NUMPAD_SUBTRACT","O","P","PAGE_DOWN","PAGE_UP","PAUSE","PERIOD","PLAY","PREVIOUS","Q","QUOTE","R","RECORD","RED","REWIND","RIGHT","RIGHTBRACKET","S","SEARCH","SEMICOLON","SETUP","SHIFT","SKIP_BACKWARD","SKIP_FORWARD","SLASH","SPACE","STOP","STRING_BEGIN","STRING_BREAK","STRING_CLEARDISPLAY","STRING_CLEARLINE","STRING_DELETE","STRING_DELETECHAR","STRING_DELETELINE","STRING_DOWNARROW","STRING_END","STRING_EXECUTE","STRING_F1","STRING_F10","STRING_F11","STRING_F12","STRING_F13","STRING_F14","STRING_F15","STRING_F16","STRING_F17","STRING_F18","STRING_F19","STRING_F2","STRING_F20","STRING_F21","STRING_F22","STRING_F23","STRING_F24","STRING_F25","STRING_F26","STRING_F27","STRING_F28","STRING_F29","STRING_F3","STRING_F30","STRING_F31","STRING_F32","STRING_F33","STRING_F34","STRING_F35","STRING_F4","STRING_F5","STRING_F6","STRING_F7","STRING_F8","STRING_F9","STRING_FIND","STRING_HELP","STRING_HOME","STRING_INSERT","STRING_INSERTCHAR","STRING_INSERTLINE","STRING_LEFTARROW","STRING_MENU","STRING_MODESWITCH","STRING_NEXT","STRING_PAGEDOWN","STRING_PAGEUP","STRING_PAUSE","STRING_PREV","STRING_PRINT","STRING_PRINTSCREEN","STRING_REDO","STRING_RESET","STRING_RIGHTARROW","STRING_SCROLLLOCK","STRING_SELECT","STRING_STOP","STRING_SYSREQ","STRING_SYSTEM","STRING_UNDO","STRING_UPARROW","STRING_USER","SUBTITLE","T","TAB","U","UP","V","VOD","W","X","Y","YELLOW","Z","CharCodeStrings"])},"native":{instance:{capsLock:b(a,"capsLock"),hasVirtualKeyboard:b(a,"hasVirtualKeyboard"),numLock:b(a,"numLock"),physicalKeyboardType:b(a,"physicalKeyboardType"),isAccessible:b(a,"isAccessible")}}},a}.call(this),MouseDefinition=function(){function a(){}function b(){}function c(){notImplemented()}function d(){notImplemented()}var e={__class__:"flash.ui.Mouse"};return e.__glue__={"native":{"static":{cursor:{get:function(){return"auto"},set:function(){notImplemented()}},supportsCursor:{get:function(){return!0}},supportsNativeCursor:{get:function(){return!0}},hide:a,show:b,registerCursor:c,unregisterCursor:d}}},e}.call(this),MouseCursorDataDefinition=function(){return{__class__:"flash.ui.MouseCursorData",initialize:function(){},__glue__:{"native":{"static":{},instance:{data:{get:function(){return notImplemented("MouseCursorData.data"),this._data},set:function a(a){notImplemented("MouseCursorData.data"),this._data=a}},hotSpot:{get:function(){return notImplemented("MouseCursorData.hotSpot"),this._hotSpot},set:function(a){notImplemented("MouseCursorData.hotSpot"),this._hotSpot=a}},frameRate:{get:function(){return notImplemented("MouseCursorData.frameRate"),this._frameRate},set:function(a){notImplemented("MouseCursorData.frameRate"),this._frameRate=a}}}}}}}.call(this),DictionaryDefinition=function(){return{__class__:"flash.utils.Dictionary",initialize:function(){},__glue__:{"native":{"static":{},instance:{init:function(){notImplemented("Dictionary.init")}}}}}}.call(this),TimerDefinition=function(){var a={__class__:"flash.utils.Timer",initialize:function(){this._running=!1}};return a.__glue__={"native":{instance:{running:{get:function(){return this._running}},_start:function(a,b){this._running=!0,this.interval=setInterval(b,a)},stop:function(){this._running=!1,clearInterval(this.interval)},_tick:function(){this._running&&this._dispatchEvent(new flash.events.TimerEvent("timer",!0,!1))}}}},a}.call(this),AccessibilityDefinition=function(){return{__class__:"flash.accessibility.Accessibility",initialize:function(){},__glue__:{"native":{"static":{sendEvent:function(){notImplemented("Accessibility.sendEvent")},updateProperties:function(){notImplemented("Accessibility.updateProperties")},active:{get:function(){return somewhatImplemented("Accessibility.active"),!1}}},instance:{}}}}}.call(this),AS2ButtonDefinition=function(){{var a={__class__:"avm1lib.AS2Button",initialize:function(){}};Object.getOwnPropertyDescriptor}return a.__glue__={"native":{instance:{_as3Object:{get:function(){return this.$nativeObject}},_init:function(a){Object.defineProperty(this,"$nativeObject",{value:a}),a.$as2Object=this,initDefaultListeners(this)}}},script:{instance:Glue.ALL}},a}.call(this),AS2GlobalsDefinition=function(){var a={__class__:"avm1lib.AS2Globals",initialize:function(){flash.text.TextFormat.prototype.asDefinePublicProperty("getTextExtent",{value:TextFormatDefinition.as2GetTextExtent,writable:!1,enumerable:!1,configurable:!1})}};return a.__glue__={"native":{instance:{ASSetPropFlags:function(){},_addToPendingScripts:function(a,b,c){AS2Context.instance.addToPendingScripts(function(){b.apply(a,c)})},_setLevel:function(a,b){AS2Context.instance.stage._as2SetLevel(a,b)},trace:function(a){var b=avm2.applicationDomain.getProperty(Multiname.fromSimpleName("trace"),!0,!0);b(a)}},"static":{_addInternalClasses:function(a){a.asSetPublicProperty("Object",Stubs.Object),a.asSetPublicProperty("Function",Stubs.Function),a.asSetPublicProperty("Array",Stubs.Array),a.asSetPublicProperty("Number",Stubs.Number),a.asSetPublicProperty("Math",avm2.systemDomain.getClass("Math")),a.asSetPublicProperty("Boolean",Stubs.Boolean),a.asSetPublicProperty("Date",Stubs.Date),a.asSetPublicProperty("RegExp",Stubs.RegExp),a.asSetPublicProperty("String",Stubs.String)
}}},script:{instance:Glue.ALL}},a}.call(this),AS2MovieClipDefinition=function(){{var a={__class__:"avm1lib.AS2MovieClip",initialize:function(){},_insertChildAtDepth:function(a,b){return this.$nativeObject._insertChildAtDepth(a,b)},_duplicate:function(a,b,c){return this.$nativeObject._duplicate(a,b,c)},_constructSymbol:function(a){var b=AS2Context.instance.classes&&AS2Context.instance.classes[a],c=AS2Context.instance.assets[a],d=flash.display.MovieClip.class,e=d.createAsSymbol(c);return e._avm1SymbolClass=b,d.instanceConstructor.call(e),this.$nativeObject.addChild(e),e},_gotoLabel:function(a){this.$nativeObject.gotoLabel(a)},_callFrame:function(a){this.$nativeObject._callFrame(a)},init:function(a){a&&(Object.defineProperty(this,"$nativeObject",{value:a}),a.$as2Object=this,initDefaultListeners(this))}};Object.getOwnPropertyDescriptor}return a.__glue__={"native":{instance:{_as3Object:{get:function(){return this.$nativeObject}},_init:a.init,_insertChildAtDepth:a._insertChildAtDepth,_duplicate:a._duplicate,_constructSymbol:a._constructSymbol,_callFrame:a._callFrame,_gotoLabel:a._gotoLabel}},script:{instance:Glue.ALL}},a}.call(this),AS2MovieClipLoaderDefinition=function(){var a={__class__:"avm1lib.AS2MovieClipLoader",initialize:function(){},get _bytesLoaded(){return this.$nativeObject._contentLoaderInfo._bytesLoaded}},b=Object.getOwnPropertyDescriptor;return a.__glue__={"native":{instance:{$nativeObject:{get:function(){return this.$nativeObject}},_bytesLoaded:b(a,"_bytesLoaded")}},script:{instance:Glue.ALL}},a}.call(this),AS2TextFieldDefinition=function(){var a={__class__:"avm1lib.AS2TextField",initialize:function(){this._variable=""}};return a.__glue__={"native":{instance:{variable:{get:function(){return this._variable},set:function(a){if(a!==this._variable){this._variable=a;var b,c=this.$nativeObject,d=a.indexOf(".")>=0||a.indexOf(":")>=0;if(d){var e=a.split(/[.:\/]/g);for(a=e.pop(),"_root"==e[0]||""===e[0]?(b=c.root._getAS2Object(),e.shift(),""===e[0]&&e.shift()):b=c._parent._getAS2Object();e.length>0;){var f=e.shift();if(b=b.asGetPublicProperty(f)||b[f],!b)throw new Error("Cannot find "+f+" variable")}}else b=c._parent._getAS2Object();b.asHasProperty(void 0,a,0)||b.asSetPublicProperty(a,c.text),c._addEventListener("advanceFrame",function(){c.text=""+b.asGetPublicProperty(a)})}}},_as3Object:{get:function(){return this.$nativeObject}},_init:function(a){Object.defineProperty(this,"$nativeObject",{value:a}),a.$as2Object=this,initDefaultListeners(this)}}},script:{instance:Glue.ALL}},a}.call(this),AS2UtilsDefinition=function(){function a(){var a=Stubs.Object,b=a.asGetPublicProperty("prototype");a.asSetPublicProperty("registerClass",function(a,b){var c=AS2Context.instance.classes||(AS2Context.instance.classes={});c[a]=b}),b.asDefinePublicProperty("addProperty",{value:function(a,b,c){return"string"!=typeof a||""===a?!1:"function"!=typeof b?!1:"function"!=typeof c&&null!==c?!1:(this.asDefinePublicProperty(a,{get:b,set:c||void 0,configurable:!0,enumerable:!0}),!0)},writable:!1,enumerable:!1,configurable:!1})}var b={__class__:"avm1lib.AS2Utils",initialize:function(){}};return b.__glue__={"native":{"static":{getAS2Object:function(a){return a&&a._getAS2Object?a._getAS2Object():null},addProperty:function(a,b,c,d,e){a.asDefinePublicProperty(b,{get:c,set:d||void 0,enumerable:e,configurable:!0})},resolveTarget:function(a){return AS2Context.instance.resolveTarget(a)},resolveLevel:function(a){return AS2Context.instance.resolveLevel(a)},currentStage:{get:function(){return AS2Context.instance.stage}},_installObjectMethods:a}}},b}.call(this),Stubs=new function(){function a(a,b,c){Object.defineProperty(a,c,{get:function(){var d=avm2.systemDomain.getClass(b);return Object.defineProperty(a,c,{value:d.instanceConstructor,writable:!1}),a[c]},configurable:!0})}function b(a,b,c){return{classSimpleName:a,nativeName:b,definition:c}}var c=this,d=createEmptyObject(),e={__glue__:{script:{instance:Glue.ALL,"static":Glue.ALL}}};this.getClassNames=function(){return Object.keys(d)},this.onClassCreated=function(a,b){var c=b.classInfo.instanceInfo.name.getOriginalName();c in d&&b.link(d[c]||e)},["Boolean","Date","String","Function","Object","Number","Math","Array","RegExp"].forEach(function(b){a(c,b,b)}),["Error","DefinitionError","EvalError","RangeError","ReferenceError","SecurityError","SyntaxError","TypeError","URIError","VerifyError","UninitializedError","ArgumentError"].forEach(function(b){a(c,b,b)}),[b("flash.display.DisplayObject","DisplayObjectClass",DisplayObjectDefinition),b("flash.display.InteractiveObject","InteractiveObjectClass",InteractiveObjectDefinition),b("flash.display.DisplayObjectContainer","ContainerClass",DisplayObjectContainerDefinition),b("flash.display.Sprite","SpriteClass",SpriteDefinition),b("flash.display.MovieClip","MovieClipClass",MovieClipDefinition),b("flash.display.Shape","ShapeClass",ShapeDefinition),b("flash.display.Bitmap","BitmapClass",BitmapDefinition),b("flash.display.BitmapData","BitmapDataClass",BitmapDataDefinition),b("flash.display.Stage","StageClass",StageDefinition),b("flash.display.Loader","LoaderClass",LoaderDefinition),b("flash.display.LoaderInfo","LoaderInfoClass",LoaderInfoDefinition),b("flash.display.Graphics","GraphicsClass",GraphicsDefinition),b("flash.display.SimpleButton","SimpleButtonClass",SimpleButtonDefinition),b("flash.display.MorphShape","MorphShapeClass",MorphShapeDefinition),b("flash.display.NativeMenu","MenuClass",NativeMenuDefinition),b("flash.display.NativeMenuItem","MenuItemClass",NativeMenuItemDefinition),b("flash.display.FrameLabel","FrameLabelClass",FrameLabelDefinition),b("flash.display.Scene"),b("flash.display.BlendMode"),b("flash.display.Shader","ShaderClass",ShaderDefinition),b("flash.display.ShaderData","ShaderDataClass",ShaderDataDefinition),b("flash.filters.BevelFilter","BevelFilterClass",BevelFilterDefinition),b("flash.filters.BitmapFilter","BitmapFilterClass",BitmapFilterDefinition),b("flash.filters.BlurFilter","BlurFilterClass",BlurFilterDefinition),b("flash.filters.ColorMatrixFilter","ColorMatrixFilterClass",ColorMatrixFilterDefinition),b("flash.filters.ConvolutionFilter","ConvolutionFilterClass",ConvolutionFilterDefinition),b("flash.filters.DisplacementMapFilter","DisplacementMapFilterClass",DisplacementMapFilterDefinition),b("flash.filters.DropShadowFilter","DropShadowFilterClass",DropShadowFilterDefinition),b("flash.filters.GlowFilter","GlowFilterClass",GlowFilterDefinition),b("flash.filters.GradientBevelFilter","GradientBevelFilterClass",GradientBevelFilterDefinition),b("flash.filters.GradientGlowFilter","GradientGlowFilterClass",GradientGlowFilterDefinition),b("flash.filters.ShaderFilter","ShaderFilterClass",ShaderFilterDefinition),b("flash.geom.Point","PointClass",PointDefinition),b("flash.geom.Rectangle","RectangleClass",RectangleDefinition),b("flash.geom.Matrix","MatrixClass",MatrixDefinition),b("flash.geom.Matrix3D","Matrix3DClass",Matrix3DDefinition),b("flash.geom.Vector3D","Vector3DClass",Vector3DDefinition),b("flash.geom.Transform","TransformClass",TransformDefinition),b("flash.geom.ColorTransform","ColorTransformClass",ColorTransformDefinition),b("flash.events.EventDispatcher","EventDispatcherClass",EventDispatcherDefinition),b("flash.events.Event","EventClass",EventDefinition),b("flash.events.IOErrorEvent"),b("flash.events.NetStatusEvent"),b("flash.events.KeyboardEvent","KeyboardEventClass",KeyboardEventDefinition),b("flash.events.MouseEvent","MouseEventClass",MouseEventDefinition),b("flash.events.TextEvent","TextEventClass",TextEventDefinition),b("flash.events.TimerEvent","TimerEventClass",TimerEventDefinition),b("flash.events.ProgressEvent"),b("flash.events.NetStatusEvent"),b("flash.external.ExternalInterface","ExternalInterfaceClass",ExternalInterfaceDefinition),b("flash.ui.ContextMenu","ContextMenuClass",ContextMenuDefinition),b("flash.ui.ContextMenuItem","ContextMenuItemClass",ContextMenuItemDefinition),b("flash.ui.Keyboard","KeyboardClass",KeyboardDefinition),b("flash.ui.Mouse","MouseClass",MouseDefinition),b("flash.ui.MouseCursorData","MouseCursorDataClass",MouseCursorDataDefinition),b("flash.text.Font","FontClass",FontDefinition),b("flash.text.TextField","TextFieldClass",TextFieldDefinition),b("flash.text.StaticText","StaticTextClass",StaticTextDefinition),b("flash.text.StyleSheet","StyleSheetClass",StyleSheetDefinition),b("flash.text.TextFormat","TextFormatClass",TextFormatDefinition),b("flash.text.TextLineMetrics"),b("flash.text.engine.ContentElement","ContentElementClass",ContentElementDefinition),b("flash.text.engine.ElementFormat","ElementFormatClass",ElementFormatDefinition),b("flash.text.engine.FontDescription","FontDescriptionClass",FontDescriptionDefinition),b("flash.text.engine.GroupElement","GroupElementClass",GroupElementDefinition),b("flash.text.engine.SpaceJustifier","SpaceJustifierClass",SpaceJustifierDefinition),b("flash.text.engine.TextBlock","TextBlockClass",TextBlockDefinition),b("flash.text.engine.TextElement","TextElementClass",TextElementDefinition),b("flash.text.engine.TextJustifier","TextJustifierClass",TextJustifierDefinition),b("flash.text.engine.TextLine","TextLineClass",TextLineDefinition),b("flash.media.Sound","SoundClass",SoundDefinition),b("flash.media.SoundChannel","SoundChannelClass",SoundChannelDefinition),b("flash.media.SoundMixer","SoundMixerClass",SoundMixerDefinition),b("flash.media.SoundTransform","SoundTransformClass",SoundTransformDefinition),b("flash.media.Video","VideoClass",VideoDefinition),b("flash.media.ID3Info","ID3InfoClass",ID3InfoDefinition),b("flash.media.Microphone","MicrophoneClass",MicrophoneDefinition),b("flash.net.FileFilter","FileFilterClass",FileFilterDefinition),b("flash.net.NetConnection","NetConnectionClass",NetConnectionDefinition),b("flash.net.NetStream","NetStreamClass",NetStreamDefinition),b("flash.net.Responder","ResponderClass",ResponderDefinition),b("flash.net.URLRequest","URLRequestClass",URLRequestDefinition),b("flash.net.URLStream","URLStreamClass",URLStreamDefinition),b("flash.net.URLLoader","URLLoaderClass",URLLoaderDefinition),b("flash.net.SharedObject","SharedObjectClass",SharedObjectDefinition),b("flash.net.ObjectEncoding","ObjectEncodingClass",ObjectEncodingDefinition),b("flash.net.LocalConnection","LocalConnectionClass",LocalConnectionDefinition),b("flash.net.Socket","SocketClass",SocketDefinition),b("flash.net.URLVariables"),b("packageInternal flash.system.FSCommand","FSCommandClass",FSCommandDefinition),b("flash.system.Capabilities","CapabilitiesClass",CapabilitiesDefinition),b("flash.system.System","SystemClass",SystemDefinition),b("flash.system.Security","SecurityClass",SecurityDefinition),b("flash.system.SecurityDomain","SecurityDomainClass",SecurityDomainDefinition),b("flash.system.ApplicationDomain","ApplicationDomainClass",ApplicationDomainDefinition),b("flash.accessibility.Accessibility","AccessibilityClass",AccessibilityDefinition),b("flash.utils.Timer","TimerClass",TimerDefinition),b("avm1lib.AS2Utils","AS2Utils",AS2UtilsDefinition),b("avm1lib.AS2Broadcaster"),b("avm1lib.AS2Key"),b("avm1lib.AS2Mouse"),b("avm1lib.AS2MovieClip","AS2MovieClip",AS2MovieClipDefinition),b("avm1lib.AS2Button","AS2Button",AS2ButtonDefinition),b("avm1lib.AS2TextField","AS2TextField",AS2TextFieldDefinition),b("avm1lib.AS2Stage"),b("avm1lib.AS2System"),b("avm1lib.AS2Color"),b("avm1lib.AS2Globals","AS2Globals",AS2GlobalsDefinition),b("avm1lib.AS2MovieClipLoader","AS2MovieClipLoader",AS2MovieClipLoaderDefinition)].forEach(function(b){for(var c=Multiname.fromSimpleName(b.classSimpleName),e=c.getOriginalName().split("."),f=this,g=0,h=e.length-1;h>g;g++)f[e[g]]||(f[e[g]]={}),f=f[e[g]];a(f,b.classSimpleName,e[e.length-1]),b.nativeName&&bindNativeClassDefinition(b.nativeName,b.definition),d[c.getOriginalName()]=b.definition})};natives["FlashUtilScript::getAliasName"]=function(){return function(a){return a.debugName}},natives["FlashUtilScript::getDefinitionByName"]=natives.getDefinitionByName,natives["FlashUtilScript::getTimer"]=function(){var a=Date.now();return function(){return Date.now()-a}},natives["FlashUtilScript::escapeMultiByte"]=function(){return escape},natives["FlashUtilScript::unescapeMultiByte"]=function(){return unescape},natives["FlashNetScript::navigateToURL"]=function(){return function(a,b){(null===a||void 0===a)&&throwError("TypeError",Errors.NullPointerError,"request");var c=avm2.systemDomain.getClass("flash.net.URLRequest");c.isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.net.URLRequest");var d=a.url;if(/^fscommand:/i.test(d)){var e=avm2.applicationDomain.getProperty(Multiname.fromSimpleName("flash.system.fscommand"),!0,!0);return void e.call(null,d.substring("fscommand:".length),b)}var f=b||"_parent";window.open(FileLoadingService.resolveUrl(d),f)}},natives["FlashNetScript::sendToURL"]=function(){return function(a){(null===a||void 0===a)&&throwError("TypeError",Errors.NullPointerError,"request");var b=avm2.systemDomain.getClass("flash.net.URLRequest");b.isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.net.URLRequest");var c=FileLoadingService.createSession();c.onprogress=function(){},c.open(a)}},natives["Toplevel::registerClassAlias"]=function(){return function(a,b){a||throwError("TypeError",Errors.NullPointerError,"aliasName"),b||throwError("TypeError",Errors.NullPointerError,"classObject"),AMFUtils.aliasesCache.classes.set(b,a),AMFUtils.aliasesCache.names[a]=b}},natives["Toplevel::getClassByAlias"]=function(){return function(a){a||throwError("TypeError",Errors.NullPointerError,"aliasName");var b=AMFUtils.aliasesCache.names[a];return b||throwError("ReferenceError",Errors.ClassNotFoundError,a),b}};