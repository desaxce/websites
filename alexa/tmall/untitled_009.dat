KISSY.add("list/mods/crumb/crumb",function(e,t,a,i,r,n){var s=document,o=i.ie==6,l="#J_CrumbSlide",c="#J_CrumbSlideCon",u="#J_CrumbSlidePrev",d="#J_CrumbSlideNext",f="#J_CrumbSearchForm",p="#J_CrumbSearchInuput",h="#J_CrumbSearchBtn",m="crumbDrop-hover",g=".j_CrumbDrop",v=".j_CrumbDropHd",_=".j_CrumbDropBd",b=["\u5728\u672c\u5e97\u641c\u7d22","\u5728\u5f53\u524d\u6761\u4ef6\u4e0b\u641c\u7d22"],S=".crumbSearch",y=".crumbAttr",C=".crumbArrow",w,x,T,A,I,B,L,k;function D(){if(!(this instanceof D)){return new D}this._init()}e.augment(D,a.Target,{_init:function(){if(!x)return;var a=this;a.searchPrompt=(t.attr(I,"data-type")||"")==="s"?b[0]:b[1];if(e.trim(I.value)===""){I.value=a.searchPrompt}a._slideViewWidth=t.innerWidth(w);a._slideContentWidth=0;t.query("li",x).each(function(e){a._slideContentWidth+=t.outerWidth(e,true)});a._relocate(true);a._bindEvent()},_bindEvent:function(){var i=this;a.on(B,"click",function(e){e.stopPropagation()});var r=i.searchPrompt,n=t.val(I);a.on(I,"focus",function(){t.addClass([this,this.parentNode],"focus");if(t.val(this)==r){t.val(this,"")}else{this.select()}});a.on(I,"blur",function(){t.removeClass([this,this.parentNode],"focus");t.val(this)===""&&t.val(this,r)});a.on(L,"submit",function(a){var i=e.trim(t.val(I));if(i==r){t.val(I,"")}else if(i==n){a.halt()}});a.on(s.body,"click",function(e){var a=t.val(I),i=e.target;if(a&&a!=n&&i.id!=B.id&&i.id!=I.id){t.val(I,n)}});a.on([T,A],"click",function(e){e.halt();i._relocate(false,true)});LIST.msg.fire("ie6&PadHover",{classname:["crumbAttr","crumbSearch-btn"]});LIST.msg.fire("ie6&PadHover",{id:"mallCate",hoverCls:"hover"});LIST.msg.on("viewchange",function(){i._slideViewWidth=t.innerWidth(w);i._relocate()});setTimeout(function(){i._dropdown()},0)},_setBtnsStatus:function(){if(!T||!A){return}var e=this;T.style.visibility=A.style.visibility="hidden";if(e._slideContentWidth<=e._slideViewWidth){return}var a=parseInt(t.css(x,"left"));a!==0&&(T.style.visibility="visible");a===0&&(A.style.visibility="visible")},_relocate:function(e,a,i){var n=this,s=n.anim,o=parseInt(t.css(x,"left")),l=n._slideContentWidth-n._slideViewWidth,c=(a?o==0?-l:0:Math.min(-l,0))+(i||0),u=!!(o==c);if(u){n._setBtnsStatus();return}if(e){t.css(x,{left:c});n._setBtnsStatus();return}var d=(d=Math.abs(c/400))==0?.1:d;s&&s.stop();n.anim=r(x,{left:c},d,"easeOutStrong",function(){n._setBtnsStatus()});n.anim.run()},_dropdown:function(){var e=this,r=null,s=function(a,i){var r=t.outerWidth(a),n=t.innerWidth(i),s=t.offset(a).left,o=t.offset(i).left;var l=0;if(r<=n){l=Math.max(o-s,0)||Math.min(o+n-(s+r),0)}else{}l&&e._relocate(false,false,l)};t.query(g,x).each(function(l){var c=t.get(v,l),u=t.get(_,l),d=function(e){var a={href:"javascript:;",title:c.text||c.textContent||c.innerText,atp:"0,cat-dropdown,,,,"+(c.search.match(/\bcat=\d+/)||[""])[0]+",rightnav,"},i="";e.unshift(a);for(var r=0,n=e.length;r<n;r++){r%6==0&&(i+="<ul>");i+="<li><a ";r==0&&(i+='class="crumbDrop-disable"');i+='atpanel="'+e[r].atp+'" href="'+e[r].href+'" title="'+e[r].title+'">'+e[r].title+"</a></li>";r%6==5&&(i+="</ul>")}t.html(u,i)},f=function(a){if(l.hover){t.addClass(l,m);s(c,w);var i=u.step||(u.step=t.outerWidth(t.get("ul",u))),n=t.offset(w).left+e._slideViewWidth-t.offset(c).left;a=Math.min(Math.floor(n/i),a);u._initWidth=a*i||u._initWidth||n;t.css(u,"width",u._initWidth);r=l}},p=function(e){e.hover=false;t.removeClass(e,m);r=null},h="/ajax/getAllBrotherCats.htm"+c.search,g=0,b=function(){clearTimeout(g)};if(u){i.ie==7&&c.setAttribute("hideFocus","true");a.on(l,"mouseenter",function(e){b();if(!l.hover){l.hover=true;if(!!u.rendered){f()}else{n.get(h,{t:o?+new Date:0},function(e){if(e&&e.length){d(e);f(Math.ceil(e.length/6))}else{t.hide(u);f()}u.rendered=true},"json")}}else{}e.preventDefault()});a.on(l,"mouseleave",function(){g=setTimeout(function(){p(l)},300)})}})},_crumbAnim:function(){if(this.animed)return;var e=false,a=0,i=t.query("li",x),n=t.get(y);i.each(function(i){a+=i.offsetWidth;function r(){if(i.className.indexOf("crumbSearch")===-1&&e){t.hide(i);t.css(i,"opacity","0")}}n?i.className.indexOf("crumbAttr")>-1&&(t.hide(i),t.css(i,"opacity","0")):r();e=true});t.hide(t.prev(k));t.css(k,{position:"absolute",left:k.offsetLeft,visibility:"visible"});r(S,{left:a-k.offsetWidth+(n?10:0)},.6,"easeNone",function(){i.each(function(e){t.show(e);t.css([t.get("a",e),t.get(C,e)],{visibility:"visible"});r(e,{opacity:"1"},1,"easeNone",undefined).run()})}).run();this.animed=true}});return{init:function(){this._initNodes();new D},_initNodes:function(){w=t.get(l),x=t.get(c),T=t.get(u),A=t.get(d),I=t.get(p),B=t.get(h),L=t.get(f),k=t.get(S)}}},{requires:["dom","event","ua","anim","ajax"]});KISSY.add("list/mods/attr/attr",function(S,D,E,UA,IO){var isIE6=UA.ie===6;var FORM="#J_NavAttrsForm",BRAND=".j_Brand",CATE=".j_Cate",PROP=".j_Prop",ATTR=".attr",MORE_BTN=".j_More",MORE_ATTRS_BTN=".j_MoreAttrs",MORE_ATTRS_CONT=".j_MoreAttrsCont",MULTIPLE_BTN=".j_Multiple",SUBMIT_BTN=".j_SubmitBtn",CANCLE_BTN=".j_CancelBtn",BRAND_SEARCH=".j_BrandSearch",DISABLE_BTN_CLS="ui-btn-disable",VAL_SELECTED_CLS="av-selected",MINI_ATTR_CLS="miniAttr",MINI_ATTRS_CLS="miniAttrs",UL_EXPAND_CLS="av-expand",UL_COLLAPSE_CLS="av-collapse",UL_SCROLL_CLS="av-scroll",FOR_MULTIPLE_CLS="forMultiple",FOR_MULTIPLE_BTN_CLS="forMultipleBtn",MULTIPLE_ROW_CLS="multipleRow",MORE_ATTRS_DROP_CLS="attrExtra-more-drop",SHOW_LOGO_CLS="showLogo",ATTRS_TRIGGER="#J_AttrsTrigger",ATTRS=".j_NavAttrs";var form,brands,cates,props,moreAttrsBtn,moreAttrsCont;var util={extend:function(e,t,a,n,r){if(a in t){if(r){e[a]=function(){n.apply(this,arguments);t[a].apply(this,arguments)}}else{e[a]=function(){t[a].apply(this,arguments);n.apply(this,arguments)}}}},bindPlaceholder:function(e){var t=null,a="#BFBFBF";if(S.isString(e)){t=D.query(e)}else if(S.isObject(e)){t=[e]}var n=["text","search","url","tel","email","password"].join(",");S.each(t,function(e){if(n.indexOf(e.type)!=-1){if(D.hasAttr(e,"placeholder")){if(S.trim(D.val(e))==""||S.trim(D.val(e))==D.attr(e,"placeholder")){D.css(e,"color",a);D.val(e,D.attr(e,"placeholder"))}E.on(e,"focus",function(){D.css(e,"color","");if(S.trim(D.val(e))==D.attr(e,"placeholder")){D.val(e," ")}});E.on(e,"blur",function(){if(S.trim(D.val(e))==""){D.css(e,"color",a);D.val(e,D.attr(e,"placeholder"))}})}}})},getCustomKey:function(e,t){if(!e||e.tagName!="A")return null;if(e._map&&t in e._map)return e._map[t];var a=new RegExp("(\\?|\\&)"+t+"=([^&#]*)(\\&|\\#|$)","g"),n=e.href||e.link||"",r,i;r=(i=a.exec(n))?i[2]:D.attr(e,"data-"+t)||"";e._map=e._map||{};e._map[t]=r;return e._map[t]},fixIE6Hover:function(e,t){if(isIE6){if(!this._initedHoverCallback){S.mix(this,E.Target);this._selectorRegs={cls:/^[.][_a-z]+[-_0-9a-z]*$/i,cls_tag:/^([.][_a-z]+[-_0-9a-z]*)( )+([a-z]+)$/i,id_tag:/^[#][_a-z]+[-_0-9a-z]*( )+[a-z]+$/i};this._hoverEventFns={add:function(e,t){var a=e.replace(/[.#]/g,"")+"-hover";E.on(e,"mouseenter",function(e){D.addClass(this,a);t&&t.call(this,e)});E.on(e,"mouseleave",function(e){D.removeClass(this,a);t&&t.call(this,e)})},delegate:function(e,t,a){var n=t.replace(/[.#]/g,"")+"-hover";E.delegate(e,"mouseenter",t,function(e){D.addClass(e.currentTarget,n);a&&a.call(e.currentTarget,e)});E.delegate(e,"mouseleave",t,function(e){D.removeClass(e.currentTarget,n);a&&a.call(e.currentTarget,e)})}};var a=this,n=function(e,t){var n=a._selectorRegs,r=a._hoverEventFns,i;if(n.cls.test(e)){r.add(e,t);S.log('mod:Attr::fixIE6Hover succeeded for "'+e+'"!')}else if(n.cls_tag.test(e)){i=e.match(n.cls_tag);r.delegate(i[1],i[3],t);S.log('mod:Attr::fixIE6Hover succeeded for "'+e+'"!')}else if(n.id_tag.test(e)){i=e.match(n.id_tag);r.delegate(i[1],i[3],t);S.log('mod:Attr::fixIE6Hover succeeded for "'+e+'"!')}else{S.log('mod:Attr::fixIE6Hover failed for "'+e+'"!',"error")}};this.on("ie6Hover",function(e){var t=e.selector,a=e.callback;if(S.isString(t)){n(t,a)}else if(S.isArray(t)){S.each(t,function(e){n(e,a)})}});this._initedHoverCallback=true}this.fire("ie6Hover",{selector:e,callback:t&&S.isFunction(t)?t:null})}},reviseImg:function(e,t,a,n){if(!e){return e}else{if(e.indexOf("taobaocdn")===-1){e=e.replace(/([^\/]*\/)*i\d\//,"");var r=0;for(var i=0,s=e.length;i<s;i++){r+=e.charCodeAt(i)}r%=4;r+=1;if("number"===typeof t){n=a;a=t;t=null}else if("string"===typeof t){switch(t){case"tps":case"imgextra":case"bao/uploaded":case"poster_pic":break;default:n=a;a=t;t=null}}else if("boolean"===typeof t){n=t;t=null}e="http://img0"+r+".taobaocdn.com/"+(t||"tps")+"/i"+r+"/"+e}if("number"===typeof a){a=a+"x"+a}if(a){e=e.replace(/(\.\w+)_\w+\1$/,"$1");var o=a.match(/\.\w+$/)||e.match(/\.\w+$/);e=e+"_"+a.replace(/_|\.\w*/g,"")+(o.length?o[0]:"jpg")}return n?e.replace(/i\d\/([^\/]+\/)*/gi,""):e}}};var moreBtn={init:function(e){if(e.moreBtn){var t=e.minDiffRow||parseInt(D.attr(e,"data-mindiffrow")||"1")||1,a=e.valueAnchors,n=a.length?Math.max(a[0].offsetHeight,parseFloat(D.css(a[0],"lineHeight"))):25;!S.trim(new RegExp("((.|\n)*)<i","gi").exec(e.moreBtn.innerHTML)[1])&&(e.moreBtn.innerHTML=(D.hasClass(e.ul,UL_EXPAND_CLS)?"\u6536\u8d77":"\u66f4\u591a")+e.moreBtn.innerHTML);var r=D.hasClass(e.ul,UL_COLLAPSE_CLS)||D.hasClass(e.ul,UL_EXPAND_CLS),i=!e.openMultiple,s=D.style(e.moreBtn,"visibility")=="visible",o=(a.length?a[a.length-1].offsetTop-a[0].offsetTop:0)>=t*n,c=D.hasClass(e.parentNode,MINI_ATTR_CLS),l=c&&e.multipleBtn;if(r&&i&&(s||o||l)){if(D.hasClass(e.ul,UL_EXPAND_CLS)){moreBtn.open(e)}moreBtn.show(e);e.moreBtn.shouldShow=true;c&&D.addClass(e.ul,MULTIPLE_ROW_CLS)}else{moreBtn.hide(e);e.moreBtn.shouldShow=false}}else if(D.hasClass(e.ul,UL_COLLAPSE_CLS)||D.hasClass(e.ul,UL_EXPAND_CLS)){D.style(e.ul,"height","auto")}},close:function(e){if(e.moreBtn){D.addClass(e.moreBtn,"ui-more-drop-l");D.removeClass(e.moreBtn,"ui-more-expand-l");var t=D.html(e.moreBtn);t=t.replace("\u6536\u8d77","\u66f4\u591a");t=t.replace("expand","drop");D.html(e.moreBtn,t)}},open:function(e){if(e.moreBtn){D.addClass(e.moreBtn,"ui-more-expand-l");D.removeClass(e.moreBtn,"ui-more-drop-l");var t=D.html(e.moreBtn);t=t.replace("\u66f4\u591a","\u6536\u8d77");t=t.replace("drop","expand");D.html(e.moreBtn,t)}},show:function(e){e.moreBtn&&D.show(e.moreBtn)},hide:function(e){e.moreBtn&&D.hide(e.moreBtn)}};var multipleBtn={init:function(e){D.hasClass(e.parentNode,MINI_ATTR_CLS)&&e.multipleBtn&&D.addClass(e.ul,FOR_MULTIPLE_BTN_CLS)},show:function(e){if(e.multipleBtn){D.show(e.multipleBtn);e.multipleBtn.isHidden=false}},hide:function(e){if(e.multipleBtn){D.hide(e.multipleBtn);e.multipleBtn.isHidden=true}}};var formBtns={show:function(e){e.submitBtn&&D.show(e.submitBtn.parentNode)},hide:function(e){e.submitBtn&&D.hide(e.submitBtn.parentNode)}};var list={collapse:function(e){D.replaceClass(e.ul,UL_EXPAND_CLS,UL_COLLAPSE_CLS);D.scrollTop(e.ul,0)},expand:function(e){D.replaceClass(e.ul,UL_COLLAPSE_CLS,UL_EXPAND_CLS)},openMultiple:function(e){this.expand(e);multipleBtn.hide(e);moreBtn.hide(e);formBtns.show(e);D.addClass(e,FOR_MULTIPLE_CLS);e.openMultiple=true},close:function(e){this.collapse(e);this._clearValSelectedCls(e);this._disableSubmitBtn(e);formBtns.hide(e);D.removeClass(e,FOR_MULTIPLE_CLS);e.openMultiple=false;multipleBtn.show(e);if(e.moreBtn&&e.moreBtn.shouldShow){moreBtn.close(e);moreBtn.show(e)}},closeAll:function(e){S.each(e,function(e){this.close(e)},this)},_clearValSelectedCls:function(e){S.each(e.valueAnchors,function(e){D.removeClass(e.parentNode,VAL_SELECTED_CLS)})},_disableSubmitBtn:function(e){if(e.submitBtn&&!D.hasClass(e.submitBtn,DISABLE_BTN_CLS)){D.addClass(e.submitBtn,DISABLE_BTN_CLS);e.valueAnchors.selectedCount=0}}};var ajax=S.merge(E.Target,{initLogos:function(e,t){var a=[],n=/(\?|&)brand=(\d*)\b/i,r=isIE6?+new Date:0;S.each(t.valueAnchors,function(e){var t=e.search.match(n);a[a.length]=e._brandId=D.attr(e,"data-id")||t&&t.length==3?t[2]:""});var i=t.logoUrl||(t.logoUrl=D.attr(D.get("."+SHOW_LOGO_CLS,t),"data-url"));i&&IO.get(i,i.indexOf("brand_ids=")!==-1?{t:r}:{brand_ids:a.join(","),t:r},function(e){S.each(t.valueAnchors,function(t){var a=util.reviseImg(e[t._brandId]);a&&D.prepend(D.create('<img src="'+a+'" alt="'+(t.text||t.innerText)+'" />'),t)})},"json")},initBrandSearch:function(e,t){t.brandSearch=D.get(BRAND_SEARCH,t);if(!t.brandSearch)return;var a=null,n=D.get("input",t.brandSearch);util.bindPlaceholder(n);E.on(t.brandSearch,"keyup",function(){var r=D.val(n);if(S.trim(r)!==S.trim(n.lastVal)){clearTimeout(a);a=setTimeout(function(){ajax.searchAndRender(e,t,r)},200);n.lastVal=r}})},expandBrand:function(e,t){D.show(t.brandSearch);if(t.ajaxData){this.replaceUlHtml(t,t.ajaxData);e.bindEventForValue(t)}else{!t.ulCopy&&(t.ulCopy=D.clone(t.ul,true,true,true));this.searchAndRender(e,t)}},collapseBrand:function(e,t){if(t.brandSearch){var a=D.get("input",t.brandSearch);D.val(a,"");E.fire(a,"blur");D.hide(t.brandSearch)}this.replaceUlHtml(t,"");D.prepend(D.children(D.clone(t.ulCopy,true,true,true)),t.ul)},searchAndRender:function(e,t,a,n){var r=this;D.style(t.ul,"visibility","hidden");if(!r._initedSearchCallBack){r.on("render",function(e){var t=e.result,a=e.key,n=e.attr;r.replaceUlHtml(n,t);this.bindEventForValue(n);D.style(n.ul,"visibility","visible");!S.trim(a)&&(n.ajaxData=t)},e);r._initedSearchCallBack=true}var i=t.searchUrl||(t.searchUrl=D.attr(D.get(MORE_BTN,t),"data-url"));i&&r._search(t,i,a,n)},_search:function(e,t,a,n){var r=this;t&&IO.get(t,S.trim(a)?{brandkey:encodeURIComponent(S.trim(a)),t:isIE6?+new Date:0}:{t:isIE6?+new Date:0},function(t){n&&n();r.fire("render",{result:r.render(t),key:a,attr:e})})},_searchTip:"\u62b1\u6b49\uff0c\u6ca1\u6709\u627e\u5230\u76f8\u5173\u54c1\u724c",render:function(data){data=eval(data);var html="";for(var i=0,l=data.length;i<l;i++){html+='<li><a atpanel="'+data[i].atpanel+'" href="'+data[i].href+'" title="'+data[i].title+'">';if(data[i].img!==undefined&&data[i].img!==""){html+='<img src="http://img01.taobaocdn.com/bao/uploaded/'+data[i].img+'"/>'}html+=data[i].title+"</a></li>"}html=html?html.replace(/title=(["'])[^"']*\1/g,function(e){return e.replace(/<\/?strong>/g,"")}):"";if(data.length==0){html=this._searchTip}return html},replaceUlHtml:function(e,t){this.detachEventsForValue(e);D.html(e.ul,t);this.correctStyle(e)},appendUlHtml:function(e,t){this.detachEventsForValue(e);D.html(e.ul,D.html(D.clone(e.ulCopy,true,true,true))+t);this.correctStyle(e)},detachEventsForValue:function(e){S.each(e.valueAnchors,function(e){E.detach(e,"click")})},correctStyle:function(e){D.removeClass(e.ul,UL_SCROLL_CLS);if(isIE6&&typeof e.ul.initHeight!=="undefined"){D.style(e.ul,"height",e.ul.initHeight)}e.valueAnchors=D.query("a",e.ul);if(e.valueAnchors.length==0)return;var t=e.valueAnchors[0].parentNode,a=D.outerWidth(t,true),n=Math.floor(e.ul.offsetWidth/a),r=e.valueAnchors.length/n;if(r>5){if(isIE6){e.ul.initHeight=D.style(e.ul,"height");D.style(e.ul,"height","")}D.addClass(e.ul,UL_SCROLL_CLS)}}});var Base={init:function(e){this.scope&&S.each(this.scope,function(t){t.ul=D.get("ul",t);t.valueAnchors=D.query("a",t.ul);t.multipleBtn=D.get(MULTIPLE_BTN,t);t.moreBtn=D.get(MORE_BTN,t);t.submitBtn=D.get(SUBMIT_BTN,t);t.cancelBtn=D.get(CANCLE_BTN,t);setTimeout(function(){moreBtn.init(t)},0);setTimeout(function(){multipleBtn.init(t)},0);var a=this;setTimeout(function(){a._bindEvents(t)},0);e&&S.isFunction(e)&&e.call(this,t)},this)},_bindEvents:function(e){this.bindEventForMultipleBtn(e);this.bindEventForMoreBtn(e);this.bindEventForValue(e);this.bindEventForCancelBtn(e);this.bindEventForSubmitBtn(e)},bindEventForMultipleBtn:function(e){e.multipleBtn&&E.on(e.multipleBtn,"click",function(){list.closeAll(this.scope);list.openMultiple(e)},this)},bindEventForMoreBtn:function(e){e.moreBtn&&E.on(e.moreBtn,"click",function(){if(D.hasClass(e.ul,UL_COLLAPSE_CLS)){list.expand(e);moreBtn.open(e)}else if(D.hasClass(e.ul,UL_EXPAND_CLS)){list.collapse(e);moreBtn.close(e)}else{}});if(e.moreBtn&&D.css(e.moreBtn,"display")!="none"&&D.css(e.moreBtn,"visibility")!="hidden"){if(D.hasClass(e.moreBtn,"ui-more-expand-l")&&D.hasClass(e,"j_Brand")){list.expand(e);moreBtn.open(e);ajax.expandBrand(this,e)}}},bindEventForValue:function(e){e.valueAnchors.selectedCount=0;e.submitBtn&&D.addClass(e.submitBtn,DISABLE_BTN_CLS);S.each(e.valueAnchors,function(t){E.on(t,"click",function(){if(e.multipleBtn&&e.multipleBtn.isHidden&&D.hasClass(e.ul,UL_EXPAND_CLS)){if(D.html(t).indexOf("<i></i>")==-1){D.html(t,D.html(t)+"<i></i>")}if(!D.hasClass(t.parentNode,VAL_SELECTED_CLS)){D.addClass(t.parentNode,VAL_SELECTED_CLS);e.valueAnchors.selectedCount++}else{D.removeClass(t.parentNode,VAL_SELECTED_CLS);e.valueAnchors.selectedCount--}if(e.submitBtn){if(e.valueAnchors.selectedCount>0){D.removeClass(e.submitBtn,DISABLE_BTN_CLS)}else if(!D.hasClass(e.submitBtn,DISABLE_BTN_CLS)){D.addClass(e.submitBtn,DISABLE_BTN_CLS)}}return false}return true})})},submit:function(e){},bindEventForSubmitBtn:function(e){e.submitBtn&&E.on(e.submitBtn,"click",function(){if(!D.hasClass(e.submitBtn,DISABLE_BTN_CLS)){this.submit(e)}return false},this)},bindEventForCancelBtn:function(e){e.cancelBtn&&E.on(e.cancelBtn,"click",function(){list.close(e)})}};function Handler(e){if(!e)return;!S.isArray(e)&&(e=[e]);this.scope=e}S.augment(Handler,Base);var bindEventForMoreAttrsBtn=function(){E.on(moreAttrsBtn,"click",function(){var e=[],t;if(moreAttrsCont.style.display=="none"){D.addClass(moreAttrsBtn,MORE_ATTRS_DROP_CLS);D.html(moreAttrsBtn,D.html(moreAttrsBtn).replace("\u66f4\u591a\u9009\u9879","\u7cbe\u7b80\u9009\u9879"));D.show(moreAttrsCont);e=e.concat(D.query(ATTR,moreAttrsCont));t=D.query("."+MINI_ATTRS_CLS);S.each(t,function(t){D.replaceClass(t,MINI_ATTRS_CLS,"_"+MINI_ATTRS_CLS);S.each(D.query("."+MINI_ATTR_CLS,t),function(t){D.replaceClass(t,MINI_ATTR_CLS,"_"+MINI_ATTR_CLS);e[e.length]=D.get(ATTR,t)})})}else{D.removeClass(moreAttrsBtn,MORE_ATTRS_DROP_CLS);D.html(moreAttrsBtn,D.html(moreAttrsBtn).replace("\u7cbe\u7b80\u9009\u9879","\u66f4\u591a\u9009\u9879"));D.hide(moreAttrsCont);t=D.query("._"+MINI_ATTRS_CLS);S.each(t,function(t){D.replaceClass(t,"_"+MINI_ATTRS_CLS,MINI_ATTRS_CLS);S.each(D.query("._"+MINI_ATTR_CLS,t),function(t){D.replaceClass(t,"_"+MINI_ATTR_CLS,MINI_ATTR_CLS);e[e.length]=D.get(ATTR,t)})});list.closeAll(e)}S.each(e,function(e){moreBtn.init(e)})})};return{init:function(){form=D.get(FORM),brands=D.query(BRAND,form),cates=D.query(CATE),props=D.query(PROP,form),moreAttrsBtn=D.get(MORE_ATTRS_BTN,form),moreAttrsCont=D.get(MORE_ATTRS_CONT,form);UA.ie==7&&D.query(ATTR).each(function(e){D.query("a",e).each(function(e){e.setAttribute("hideFocus","true")})});S.each(cates,function(e){e.minDiffRow=2});var e=new Handler(cates);e.init();if(!form)return;bindEventForMoreAttrsBtn();var t=new Handler(props);t.submit=function(e){var t="",a=[];S.each(e.valueAnchors,function(e){if(D.hasClass(e.parentNode,VAL_SELECTED_CLS)){var n=D.attr(e,"data-pv"),r=(n||"").split(":");t=r[0];r[1]&&a.push(r[1])}});var n=t==""?"":t+":"+a.join(",");var r=D.val(form.prop);D.val(form.prop,r==""?n:r+";"+n);form.submit()};t.init();var a=new Handler(brands);util.extend(a,t,"bindEventForMoreBtn",function(e){e.searchUrl=e.searchUrl||D.attr(D.get(MORE_BTN,e),"data-url");e.searchUrl&&e.moreBtn&&E.on(e.moreBtn,"click",function(){if(D.hasClass(e.ul,UL_EXPAND_CLS)){ajax.expandBrand(this,e)}else{ajax.collapseBrand(this,e)}},this)});util.extend(a,t,"bindEventForMultipleBtn",function(e){e.searchUrl=e.searchUrl||D.attr(D.get(MORE_BTN,e),"data-url");e.searchUrl&&e.multipleBtn&&E.on(e.multipleBtn,"click",function(){ajax.expandBrand(this,e)},this)});util.extend(a,t,"bindEventForCancelBtn",function(e){e.searchUrl=e.searchUrl||D.attr(D.get(MORE_BTN,e),"data-url");e.searchUrl&&E.on(e.cancelBtn,"click",function(){ajax.collapseBrand(this,e)},this)},true);a.submit=function(e){var t=[];S.each(e.valueAnchors,function(e){if(D.hasClass(e.parentNode,VAL_SELECTED_CLS)){t.push(util.getCustomKey(e,"brand"))}});D.val(form.brand,t.join(","));form.submit()};if(brands){S.each(brands,function(e){e.minDiffRow=2;ajax.initBrandSearch(a,e)})}a.init(function(e){});util.fixIE6Hover(["."+MINI_ATTR_CLS,BRAND+" li"]);if(D.get("."+MINI_ATTRS_CLS,form)){var n=D.query("."+MINI_ATTR_CLS,form);S.each(n,function(e){E.on(e,"mouseleave",function(){var t=D.get("."+FOR_MULTIPLE_CLS,e);if(t){D.style(e,"zIndex",11)}else{D.style(e,"zIndex","")}})})}var r=function(){var e=[].concat(cates,props);if(brands)e.push(brands);S.each(e,function(e){moreBtn.init(e)})};LIST.msg.on("viewchange",r);E.on(ATTRS_TRIGGER,"click",function(e){var t=this;var a=D.get(ATTRS,form);D.toggleClass(t,"attrsTrigger-expand");t.className.indexOf("attrsTrigger-expand")===-1?D.hide(a):D.show(a);r()});var i="height="+D.outerHeight(form),s=__header_atpanel_param.match(/\brn=\w+\b/),o=i+"&"+s;(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:["/msearch.1.11","tmallsearch",o,"H1449172242"]})}}},{requires:["dom","event","ua","ajax"]});KISSY.add("list/mods/related/related",function(e,t,a){function n(){}e.augment(n,{init:function(){this.initView()},initView:function(){var t,n,i;n=a.get("#J_RelSearch");i=a.get("p",n);if(!i){return}t=['<ul class="relKeyTop" data-spm="'+a.attr(i,"data-spm")+'" data-atp="'+a.attr(i,"data-atp")+'">'];e.each(a.query("a",n),function(e){t.push('<li><a href="'+a.attr(e,"href")+'">'+a.text(e)+"</a></il>")});t.push("</ul>");a.append(a.create(t.join("")),"#mallSearch")}},t);return new n},{requires:["base","dom"]});KISSY.add("list/mods/filter/filter",function(e,t,a,n,i){var r=window,s=n.ie==6,o=".main",c="#J_Filter",l="#J_FForm",u="filter-fix",d="#J_FPrice",f="#J_FPEnter",p="#J_FPCancel",h=".j_FPInput",m="fPrice-hover",g="#J_FOriginArea",v="#J_FOAInput",_="#J_FDestArea",b="#J_DestAreaForm",S="fA-text",w="fA-list",y="fAll-cities",C="fAl-cur",x="fAll-cities-cur",T=new i,A="#J_FMenu",I=".j_FMcExpand",D=".j_FTip",B=".j_FTCat",L=".j_FTX",k="#J_FDisctOpts",j="fDO-cur",E="fDO-disable",J,q,R,N,P,M,O,F,H,U,z,W,K,Y,V;function $(){if(!(this instanceof $)){return new $}this.isPriceFocus=false;this._init()}e.augment($,a.Target,{_init:function(){if(!q)return;var e=this;LIST.msg.fire("ie6&PadHover",{classname:["fArea","fRange"]});this._destAreaInit();this._menuInit();setTimeout(function(){e._priceEvent();e._originAreaEvent();e._destAreaEvent();e._menuEvent();e._fix()},0);this._tipCtrl(true);this._disctOpts()},_priceEvent:function(){if(!N)return;var n=this,i=null;a.on(P,"blur",function(){i=setTimeout(function(){n.isPriceFocus=false;t.removeClass(N,m)},300)});a.on(P,"focus",function(){clearTimeout(i);n.isPriceFocus=true;t.addClass(N,m)});a.on(P,"keyup",function(){var e=this.value;if(!/^\d+\.?\d*$/.test(e)){e=Math.abs(parseFloat(e));this.value=isNaN(e)?"":e}});a.on(M,"click",function(t){R.submit();e.log(R);t.preventDefault()});a.on(O,"click",function(e){t.val(P,"");P[0].focus();e.preventDefault()});a.on(q,"keypress",function(e){if(e.keyCode==13&&n.isPriceFocus){R.submit()}})},_originAreaEvent:function(){if(!H)return;var e=t.attr(H,"data-val")||"";if(H.value==""){H.value=e}a.on(H,"focus",function(){if(H.value==e){H.value=""}});a.on(H,"blur",function(){if(H.value==""){H.value=e}});a.on(t.query("a",F),"click",function(e){e.preventDefault();var a=t.attr(this,"data-val")||t.html(this);H.value=a=="\u6240\u6709\u5730\u533a"?"":a;U.submit()});a.on(z,"click",function(){if(H.value==e){H.value=""}})},_updateDestAreaBoxHtml:function(e,a,n){var i=['<ul class="fAl-loc">'];for(var r in a){i[i.length]="<li"+(n==r?' class="'+C+'"':"")+'><a href="" code="'+r+'" atpanel="3,'+a[r]+',,,spu-toloc,20,toloc,">'+a[r]+"</a></li>"}i[i.length]="</ul>";t.html(e,i.join(""))},_data:{},_destAreaInit:function(){if(!W)return;var e=t.get("."+w,W),a=t.get("."+S,W),n=t.query("a",e).slice(1),i=t.val(document.getElementsByName("area_code")[0]),r=T[i],s=-1,o=n.length,c,l;if(!i)return;if(!r){var u=i.replace(/([\d]{2})\d+/g,"$10000"),d=T[u],f=d&&d.length==2?d[1]:null,p;if(f){while(++s<o){c=n[s];if(t.attr(c,"code")==u){l=c.parentNode;p=t.next(l,"."+y);this._updateDestAreaBoxHtml(p,f,i);if(!t.get("i",c)){t.append(t.create('<i class="f-ico-triangle-mt" />'),c)}t.addClass(l,C);t.addClass(p,x);t.html(a,f[i]);this._data.dLastBox=p;this._data.dLastLi=l;this._data.lastChildLi=t.get("."+C,p);break}}}}else{while(++s<o){c=n[s];l=c.parentNode;if(t.attr(c,"code")==i){t.addClass(l,C);this._data.dLastLi=l;break}}}},_destAreaEvent:function(){if(!W)return;var e=this,n=t.get("."+w,W),i=e._data.dLastChildLi,r=e._data.dLastLi,s=e._data.dLastBox;a.on(W,"click",function(){n.style.display="block"});a.on(W,"mouseleave",function(){n.style.display="none"});a.delegate(n,"click","a",function(a){var n=a.currentTarget,o=n.parentNode,c=t.attr(n,"code"),l=[],u=null;if(t.hasClass(o,y))return;t.addClass(o,C);c&&(l=T[c]||[]);o.grade=l.length!==0?1:2;s&&o.grade==1&&t.removeClass(s,x);l.length==2&&function(){if(u=t.next(o,"."+y)){e._updateDestAreaBoxHtml(u,l[1]);if(!t.get("i",n)){t.append(t.create('<i class="f-ico-triangle-mt" />'),n)}t.addClass(u,x);s=u}}();switch(o.grade){case 1:if(r!=o){t.removeClass(r,C);r=o}break;case 2:if(i!=o){t.removeClass(i,C);i=o}break}a.preventDefault();if(l.length!==2){t.val(K["sarea_code"],c);K.submit()}})},_menuEvent:function(){if(!Y)return;a.on(t.query("input",Y),"click",function(){R.submit()})},_menuInit:function(){if(!Y)return;var e="drop",a=t.children(t.children(Y),function(e){return e.tagName=="INPUT"&&e.type=="checkbox"}),n=a.length;for(var i=3;i<n;i++){if(a[i].checked){e="expand";break}}LIST.msg.fire("expand",{el:V,classname:"fMenu",status:e})},_fix:function(){var e=t.get("#J_FilterPlaceholder")||t.create('<div id="J_FilterPlaceholder" />',{css:{height:t.outerHeight(q,true),display:"none"}});t.insertAfter(e,q);var n=t.get("#J_crumbs"),i=document.body,o,c;var l=function(){var a=t.scrollTop(r),o;if(t.hasClass(q,u)){o=t.offset(e).top}else{o=Math.max(t.offset(q).top,130)}if(t.hasClass(n,"crumb-fix")){a+=t.height(n)}if(a>o){if(!t.hasClass(q,u)){if(t.hasClass(i,"crumb-filter-fix")){c=t.css(q,"top");t.css(q,{top:t.height(n)-10})}t.addClass(q,u);t.show(e)}if(s){if(t.get("#J_CrumbPlaceholder")){t.css(q,"top",a-t.offset(J).top+20)}else{t.css(q,"top",a-10-t.offset(J).top)}}}else{t.removeClass(q,u);t.css(q,{top:c});t.hide(e)}};l();LIST.msg.on("filter.topchange",function(){l()});a.on(r,"scroll",l)},_tipCtrl:function(e){if(e||!Y)return;var a=t.query("label",Y);if(!a.length)return;var n=[1,-1,0,0],i=n.length;t.query(D).each(function(e){var r=t.attr(e,"data-cfg"),s=n;if(r){s=r.split(",");for(var o=0;o<i;o++){s[o]=parseInt(s[o])||n[o]}}var c=a[s[0]-1];if(c){var l=c.offsetLeft+t.outerWidth(c)/2-t.outerWidth(e)/2;t.css(e,"left",l+"px")}s[1]!==-1&&setTimeout(function(){t.hide(D)},s[1]<0?0:s[1]);s[2]&&t.show(t.get(B,e));s[3]&&t.show(t.get(L,e));t.show(e)})},_disctOpts:function(){var e=k;if(!t.get(e))return;n.ie==7&&t.query(e+" a").each(function(e){e.setAttribute("hideFocus","true")});a.delegate(e,"click","a",function(a){var n=a.target,i=j,r=E;if(t.hasClass(n,r))return;t.query(e+" a").each(function(e){t.removeClass(e,i)});t.addClass(n,i)})}});return{init:function(){this._initNodes();new $},_initNodes:function(){J=t.get(o),q=t.get(c),R=t.get(l),N=t.get(d),P=t.query(h),M=t.get(f),O=t.get(p),F=t.get(g),H=t.get(v),U=t.get("form",F),z=t.get("button",F),W=t.get(_),K=t.get(b),Y=t.get(A),V=t.get(I)}}},{requires:["dom","event","ua","list/widgets/city-codes"]});KISSY.add("list/widgets/city-codes",function(e){var t={110000:["\u5317\u4eac"],120000:["\u5929\u6d25"],130000:["\u6cb3\u5317",{130100:["\u77f3\u5bb6\u5e84"],130200:["\u5510\u5c71"],130300:["\u79e6\u7687\u5c9b"],130400:["\u90af\u90f8"],130500:["\u90a2\u53f0"],130600:["\u4fdd\u5b9a"],130700:["\u5f20\u5bb6\u53e3"],130800:["\u627f\u5fb7"],130900:["\u6ca7\u5dde"],131000:["\u5eca\u574a"],131100:["\u8861\u6c34"]}],140000:["\u5c71\u897f",{140100:["\u592a\u539f"],140200:["\u5927\u540c"],140300:["\u9633\u6cc9"],140400:["\u957f\u6cbb"],140500:["\u664b\u57ce"],140600:["\u6714\u5dde"],140700:["\u664b\u4e2d"],140800:["\u8fd0\u57ce"],140900:["\u5ffb\u5dde"],141000:["\u4e34\u6c7e"],141100:["\u5415\u6881"]}],150000:["\u5185\u8499\u53e4",{150100:["\u547c\u548c\u6d69\u7279"],150200:["\u5305\u5934"],150300:["\u4e4c\u6d77"],150400:["\u8d64\u5cf0"],150500:["\u901a\u8fbd"],150600:["\u9102\u5c14\u591a\u65af"],150700:["\u547c\u4f26\u8d1d\u5c14"],150800:["\u5df4\u5f66\u6dd6\u5c14"],150900:["\u4e4c\u5170\u5bdf\u5e03"],152200:["\u5174\u5b89"],152500:["\u9521\u6797\u90ed\u52d2"],152900:["\u963f\u62c9\u5584"]}],210000:["\u8fbd\u5b81",{210100:["\u6c88\u9633"],210200:["\u5927\u8fde"],210300:["\u978d\u5c71"],210400:["\u629a\u987a"],210500:["\u672c\u6eaa"],210600:["\u4e39\u4e1c"],210700:["\u9526\u5dde"],210800:["\u8425\u53e3"],210900:["\u961c\u65b0"],211000:["\u8fbd\u9633"],211100:["\u76d8\u9526"],211200:["\u94c1\u5cad"],211300:["\u671d\u9633"],211400:["\u846b\u82a6\u5c9b"]}],220000:["\u5409\u6797",{220100:["\u957f\u6625"],220200:["\u5409\u6797"],220300:["\u56db\u5e73"],220400:["\u8fbd\u6e90"],220500:["\u901a\u5316"],220600:["\u767d\u5c71"],220700:["\u677e\u539f"],220800:["\u767d\u57ce"],222400:["\u5ef6\u8fb9"]}],230000:["\u9ed1\u9f99\u6c5f",{230100:["\u54c8\u5c14\u6ee8"],230200:["\u9f50\u9f50\u54c8\u5c14"],230300:["\u9e21\u897f"],230400:["\u9e64\u5c97"],230500:["\u53cc\u9e2d\u5c71"],230600:["\u5927\u5e86"],230700:["\u4f0a\u6625"],230800:["\u4f73\u6728\u65af"],230900:["\u4e03\u53f0\u6cb3"],231000:["\u7261\u4e39\u6c5f"],231100:["\u9ed1\u6cb3"],231200:["\u7ee5\u5316"],232700:["\u5927\u5174\u5b89\u5cad"]}],310000:["\u4e0a\u6d77"],320000:["\u6c5f\u82cf",{320100:["\u5357\u4eac"],320200:["\u65e0\u9521"],320300:["\u5f90\u5dde"],320400:["\u5e38\u5dde"],320500:["\u82cf\u5dde"],320600:["\u5357\u901a"],320700:["\u8fde\u4e91\u6e2f"],320800:["\u6dee\u5b89"],320900:["\u76d0\u57ce"],321000:["\u626c\u5dde"],321100:["\u9547\u6c5f"],321200:["\u6cf0\u5dde"],321300:["\u5bbf\u8fc1"]}],330000:["\u6d59\u6c5f",{330100:["\u676d\u5dde"],330200:["\u5b81\u6ce2"],330300:["\u6e29\u5dde"],330400:["\u5609\u5174"],330500:["\u6e56\u5dde"],330600:["\u7ecd\u5174"],330700:["\u91d1\u534e"],330800:["\u8862\u5dde"],330900:["\u821f\u5c71"],331000:["\u53f0\u5dde"],331100:["\u4e3d\u6c34"]}],340000:["\u5b89\u5fbd",{340100:["\u5408\u80a5"],340200:["\u829c\u6e56"],340300:["\u868c\u57e0"],340400:["\u6dee\u5357"],340500:["\u9a6c\u978d\u5c71"],340600:["\u6dee\u5317"],340700:["\u94dc\u9675"],340800:["\u5b89\u5e86"],341000:["\u9ec4\u5c71"],341100:["\u6ec1\u5dde"],341200:["\u961c\u9633"],341300:["\u5bbf\u5dde"],341500:["\u516d\u5b89"],341600:["\u4eb3\u5dde"],341700:["\u6c60\u5dde"],341800:["\u5ba3\u57ce"]}],350000:["\u798f\u5efa",{350100:["\u798f\u5dde"],350200:["\u53a6\u95e8"],350300:["\u8386\u7530"],350400:["\u4e09\u660e"],350500:["\u6cc9\u5dde"],350600:["\u6f33\u5dde"],350700:["\u5357\u5e73"],350800:["\u9f99\u5ca9"],350900:["\u5b81\u5fb7"]}],360000:["\u6c5f\u897f",{360100:["\u5357\u660c"],360200:["\u666f\u5fb7\u9547"],360300:["\u840d\u4e61"],360400:["\u4e5d\u6c5f"],360500:["\u65b0\u4f59"],360600:["\u9e70\u6f6d"],360700:["\u8d63\u5dde"],360800:["\u5409\u5b89"],360900:["\u5b9c\u6625"],361000:["\u629a\u5dde"],361100:["\u4e0a\u9976"]}],370000:["\u5c71\u4e1c",{370100:["\u6d4e\u5357"],370200:["\u9752\u5c9b"],370300:["\u6dc4\u535a"],370400:["\u67a3\u5e84"],370500:["\u4e1c\u8425"],370600:["\u70df\u53f0"],370700:["\u6f4d\u574a"],370800:["\u6d4e\u5b81"],370900:["\u6cf0\u5b89"],371000:["\u5a01\u6d77"],371100:["\u65e5\u7167"],371200:["\u83b1\u829c"],371300:["\u4e34\u6c82"],371400:["\u5fb7\u5dde"],371500:["\u804a\u57ce"],371600:["\u6ee8\u5dde"],371700:["\u83cf\u6cfd"]}],410000:["\u6cb3\u5357",{410100:["\u90d1\u5dde"],410200:["\u5f00\u5c01"],410300:["\u6d1b\u9633"],410400:["\u5e73\u9876\u5c71"],410500:["\u5b89\u9633"],410600:["\u9e64\u58c1"],410700:["\u65b0\u4e61"],410800:["\u7126\u4f5c"],410900:["\u6fee\u9633"],411000:["\u8bb8\u660c"],411100:["\u6f2f\u6cb3"],411200:["\u4e09\u95e8\u5ce1"],411300:["\u5357\u9633"],411400:["\u5546\u4e18"],411500:["\u4fe1\u9633"],411600:["\u5468\u53e3"],411700:["\u9a7b\u9a6c\u5e97"]}],420000:["\u6e56\u5317",{420100:["\u6b66\u6c49"],420200:["\u9ec4\u77f3"],420300:["\u5341\u5830"],420500:["\u5b9c\u660c"],420600:["\u8944\u6a0a"],420700:["\u9102\u5dde"],420800:["\u8346\u95e8"],420900:["\u5b5d\u611f"],421000:["\u8346\u5dde"],421100:["\u9ec4\u5188"],421200:["\u54b8\u5b81"],421300:["\u968f\u5dde"],422800:["\u6069\u65bd"]}],430000:["\u6e56\u5357",{430100:["\u957f\u6c99"],430200:["\u682a\u6d32"],430300:["\u6e58\u6f6d"],430400:["\u8861\u9633"],430500:["\u90b5\u9633"],430600:["\u5cb3\u9633"],430700:["\u5e38\u5fb7"],430800:["\u5f20\u5bb6\u754c"],430900:["\u76ca\u9633"],431000:["\u90f4\u5dde"],431100:["\u6c38\u5dde"],431200:["\u6000\u5316"],431300:["\u5a04\u5e95"],433100:["\u6e58\u897f"]}],440000:["\u5e7f\u4e1c",{440100:["\u5e7f\u5dde"],440200:["\u97f6\u5173"],440300:["\u6df1\u5733"],440400:["\u73e0\u6d77"],440500:["\u6c55\u5934"],440600:["\u4f5b\u5c71"],440700:["\u6c5f\u95e8"],440800:["\u6e5b\u6c5f"],440900:["\u8302\u540d"],441200:["\u8087\u5e86"],441300:["\u60e0\u5dde"],441400:["\u6885\u5dde"],441500:["\u6c55\u5c3e"],441600:["\u6cb3\u6e90"],441700:["\u9633\u6c5f"],441800:["\u6e05\u8fdc"],441900:["\u4e1c\u839e"],442000:["\u4e2d\u5c71"],445100:["\u6f6e\u5dde"],445200:["\u63ed\u9633"],445300:["\u4e91\u6d6e"]}],450000:["\u5e7f\u897f",{450100:["\u5357\u5b81"],450200:["\u67f3\u5dde"],450300:["\u6842\u6797"],450400:["\u68a7\u5dde"],450500:["\u5317\u6d77"],450600:["\u9632\u57ce\u6e2f"],450700:["\u94a6\u5dde"],450800:["\u8d35\u6e2f"],450900:["\u7389\u6797"],451000:["\u767e\u8272"],451100:["\u8d3a\u5dde"],451200:["\u6cb3\u6c60"],451300:["\u6765\u5bbe"],451400:["\u5d07\u5de6"]}],460000:["\u6d77\u5357",{460100:["\u6d77\u53e3"],460200:["\u4e09\u4e9a"]}],500000:["\u91cd\u5e86"],510000:["\u56db\u5ddd",{510100:["\u6210\u90fd"],510300:["\u81ea\u8d21"],510400:["\u6500\u679d\u82b1"],510500:["\u6cf8\u5dde"],510600:["\u5fb7\u9633"],510700:["\u7ef5\u9633"],510800:["\u5e7f\u5143"],510900:["\u9042\u5b81"],511000:["\u5185\u6c5f"],511100:["\u4e50\u5c71"],511300:["\u5357\u5145"],511400:["\u7709\u5c71"],511500:["\u5b9c\u5bbe"],511600:["\u5e7f\u5b89"],511700:["\u8fbe\u5dde"],511800:["\u96c5\u5b89"],511900:["\u5df4\u4e2d"],512000:["\u8d44\u9633"],513200:["\u963f\u575d"],513300:["\u7518\u5b5c"],513400:["\u51c9\u5c71"]}],520000:["\u8d35\u5dde",{520100:["\u8d35\u9633"],520200:["\u516d\u76d8\u6c34"],520300:["\u9075\u4e49"],520400:["\u5b89\u987a"],522200:["\u94dc\u4ec1"],522300:["\u9ed4\u897f\u5357"],522400:["\u6bd5\u8282"],522600:["\u9ed4\u4e1c\u5357"],522700:["\u9ed4\u5357"]}],530000:["\u4e91\u5357",{530100:["\u6606\u660e"],530300:["\u66f2\u9756"],530400:["\u7389\u6eaa"],530500:["\u4fdd\u5c71"],530600:["\u662d\u901a"],530700:["\u4e3d\u6c5f"],530800:["\u666e\u6d31"],530900:["\u4e34\u6ca7"],532300:["\u695a\u96c4"],532500:["\u7ea2\u6cb3"],532600:["\u6587\u5c71"],532800:["\u897f\u53cc\u7248\u7eb3"],532900:["\u5927\u7406"],533100:["\u5fb7\u5b8f"],533300:["\u6012\u6c5f"],533400:["\u8fea\u5e86"]}],540000:["\u897f\u85cf",{540100:["\u62c9\u8428"],542100:["\u660c\u90fd"],542200:["\u5c71\u5357"],542300:["\u65e5\u5580\u5219"],542400:["\u90a3\u66f2"],542500:["\u963f\u91cc"],542600:["\u6797\u829d"]}],610000:["\u9655\u897f",{610100:["\u897f\u5b89"],610200:["\u94dc\u5ddd"],610300:["\u5b9d\u9e21"],610400:["\u54b8\u9633"],610500:["\u6e2d\u5357"],610600:["\u5ef6\u5b89"],610700:["\u6c49\u4e2d"],610800:["\u6986\u6797"],610900:["\u5b89\u5eb7"],611000:["\u5546\u6d1b"]}],620000:["\u7518\u8083",{620100:["\u5170\u5dde"],620200:["\u5609\u5cea\u5173"],620300:["\u91d1\u660c"],620400:["\u767d\u94f6"],620500:["\u5929\u6c34"],620600:["\u6b66\u5a01"],620700:["\u5f20\u6396"],620800:["\u5e73\u51c9"],620900:["\u9152\u6cc9"],621000:["\u5e86\u9633"],621100:["\u5b9a\u897f"],621200:["\u9647\u5357"],622900:["\u4e34\u590f"],623000:["\u7518\u5357"]}],630000:["\u9752\u6d77",{630100:["\u897f\u5b81"],632100:["\u6d77\u4e1c"],632200:["\u6d77\u5317"],632300:["\u9ec4\u5357"],632500:["\u6d77\u5357"],632600:["\u679c\u6d1b"],632700:["\u7389\u6811"],632800:["\u6d77\u897f"]}],640000:["\u5b81\u590f",{640100:["\u94f6\u5ddd"],640200:["\u77f3\u5634\u5c71"],640300:["\u5434\u5fe0"],640400:["\u56fa\u539f"],640500:["\u4e2d\u536b"]}],650000:["\u65b0\u7586",{650100:["\u4e4c\u9c81\u6728\u9f50"],650200:["\u514b\u62c9\u739b\u4f9d"],652100:["\u5410\u9c81\u756a"],652200:["\u54c8\u5bc6"],652300:["\u660c\u5409"],652700:["\u535a\u5c14\u5854\u62c9"],652800:["\u5df4\u97f3\u90ed\u695e"],652900:["\u963f\u514b\u82cf"],653000:["\u514b\u5b5c\u52d2\u82cf"],653100:["\u5580\u4ec0"],653200:["\u548c\u7530"],654000:["\u4f0a\u7281"],654200:["\u5854\u57ce"],654300:["\u963f\u52d2\u6cf0"]}],710000:["\u53f0\u6e7e",{710200:["\u9ad8\u96c4"],710300:["\u53f0\u5357"],710500:["\u91d1\u95e8"],710600:["\u5357\u6295"],710700:["\u57fa\u9686"],710900:["\u5609\u4e49"],711100:["\u53f0\u5317"],711200:["\u5b9c\u5170"],711300:["\u65b0\u7af9"],711400:["\u6843\u56ed"],711500:["\u82d7\u6817"],710400:["\u53f0\u4e2d"],711700:["\u5f70\u5316"],712100:["\u4e91\u6797"],712400:["\u5c4f\u4e1c"],712500:["\u53f0\u4e1c"],712600:["\u82b1\u83b2"],712700:["\u6f8e\u6e56"]}],810000:["\u9999\u6e2f",{810100:["\u9999\u6e2f\u5c9b"],810200:["\u4e5d\u9f99"],810300:["\u65b0\u754c"]}],820000:["\u6fb3\u95e8",{820100:["\u6fb3\u95e8\u534a\u5c9b"]}]};function a(){if(!(this instanceof a)){return new a}return e.clone(t)}return a});KISSY.add("list/mods/p4p/p4p",function(e,t,a,n){return{init:function(){e.ready(function(){var e="#J_Recommend",a=t.get(e);if(a){var i=n(a,{diff:5e3});i.refresh()}})}}},{requires:["dom","ajax","datalazyload"]});KISSY.add("list/mods/srp/grid",function(e,t,a){var n=window;var i="_160x160",r="_b";var s="view",o="miniView",c="product",l="productImg-wrap",u="data-notSwitch";var d=".productImg",f=".main",p="#J_ItemList";function h(e){if(!(this instanceof h)){return new h(e)}var a=this.mod=t.get(p);if(a){this.init(e)}}h.prototype={init:function(e){this._onViewChange();!(e&&e.closeLazy)&&this._lazy();this._patch4IE6()},_lazy:function(){var e=a(this.mod,{diff:100});setTimeout(function(){e.set("diff","default");e.refresh()},2e3)},_patch4IE6:function(){LIST.msg.fire("ie6&PadHover",{classname:[c,l]})},_onViewChange:function(){var e=this.mod;var a=e.switchable=t.hasClass(e,o)&&!t.hasAttr(t.get(f),u);if(a){this._switchToView({view:n.g_config.view});LIST.msg.on("viewchange",this._switchToView,this)}},_switchToView:function(a){var n=this.mod;if(n&&a.view>0){if(n.className.indexOf(o)>-1){n.className=n.className.replace(new RegExp(o,"g"),s).replace(/grid-(\d+)/gi,function(e,t){return"grid-"+(parseInt(t)+6)})}e.each(t.query(d,n),function(e){var a=t.get("img",e),n=t.attr(a,"data-ks-lazyload");!n?a.src&&(a.src=a.src.replace(i,r)):t.attr(a,"data-ks-lazyload",n.replace(i,r))});LIST.msg.detach("viewchange",this._switchToView)}},_webp:function(){var e=this.mod;LIST.util.webpFn(e)}};return{init:function(e){new h(e)}}},{requires:["dom","datalazyload"]});KISSY.add("list/mods/srp/cells/pin",function(e,t,a,n,i,r){var s=n.ie==6?"http://gtms02.alicdn.com/tps/i2/T1wiDnFnhfXXaSQP_X-16-16.png":"http://gtms03.alicdn.com/tps/i3/T19YHoFXBgXXaSQP_X-16-16.png",o="http://bar.tmall.com/pinItem.htm?pin=1&itemId={itemId}&_tb_token_={token}",c,l=".j_ProductPin",u,d,f;function p(){TB&&TB.Global&&TB.Global.loginStatusReady&&TB.Global.loginStatusReady(function(e){f=e.isLogin});return!!f}return{init:function(){var n=window.g_config.toggle,f=n?n.pin:0;if(!f){t.addStyleSheet("body .main .product .productPin{display:none;}");return}var h=this;e.ready(function(){h._initNodes();c=t.get("#J_TbToken").value;a.delegate(u,"click",l,function(a){a.halt();var n=a.currentTarget;if(t.hasClass(n,"clicked")){return}var l=t.parent(n,".product"),u=l&&t.attr(l,"data-id")||-1;function f(){r.jsonp(e.substitute(o,{itemId:u,token:c}),function(r){if(r.s==1||r.s==-5){var o=TB.Global.mallbar;if(!o){return}t.addClass(n," clicked");d=d||i.one('<img src="'+s+'"/>').appendTo(document.body);var c={left:a.pageX,top:a.pageY,display:"inline",opacity:1};d.css(c);o.fly({type:"foot",flyer:d,start:c,complete:function(){e.log("list/mods/srp/cells/pin::the fly action competed!")}})}else if(r.s==-3){e.use("mui/overlay/dialog",function(e,t){var a=new t({width:300,height:100,bodyContent:'<div style="line-height:60px;padding-left:20px;color:#666">\u55b5~ \u60a8\u6700\u591a\u4ec5\u80fd\u9489100\u4e2a\u5b9d\u8d1d\uff0c\u73b0\u5728\u8d85\u9650\u5566\uff01</div>',mask:true,showCat:true,align:{points:["cc","cc"]}});a.render();a.get("el").css({zIndex:99999});a.show();setTimeout(function(){a.hide()},4e3)})}});window.sendAtp&&window.sendAtp(n)}if(!p()){e.log("list/mods/srp/cells/pin::check current user doesn't login in. So to call the mini login.");e.use("mui/minilogin,mui/overlay/overlay.css",function(e,t){t.show(function(){e.log("list/mods/srp/cells/pin::current user logins in successfully. And to call the callback function.");f()},{check:false})});return}e.log("list/mods/srp/cells/pin::check current user has login in. So to call the callback function.");f()})})},_initNodes:function(){u=t.get("#J_ItemList")}}},{requires:["dom","event","ua","node","ajax"]});var ASSETS_SERVER;(function(t){var e=t.use,r=t.Loader.Utils.isAttached;t.use=function(r,n,a){return e.call(t,r,n,a===undefined?true:a)};t.Loader.Utils.isAttached=function(e,n){t.Loader.Utils.attachModsRecursively(n,e);return r.call(t.Loader.Utils,e,n)};var n=t.log;t.log=function(t,e){var r=new Date;return n("["+(r.toISOString||r.toLocaleString).call(r).replace(/T/," ").replace(/Z/,"")+"] "+t,e)};var a=window,i=a.g_config=a.g_config||{};ASSETS_SERVER=i["assetsServer"]||"//g.tbcdn.cn/";a.LIST=a.LIST||{};LIST.util=LIST.util||{};LIST.support=LIST.support||{};LIST.data=LIST.data||{};LIST.msg=function(){if(LIST.msg&&LIST.msg.on){return LIST.msg}t.log("to simulate a `LIST.msg` object");var e={cache:{},on:function(t,e,r){this.cache[t]=this.cache[t]||{fired:0,fns:[]};this.cache[t].fns.push({fn:e,scope:r})},fire:function(t,e){var r=this.cache[t];if(r){r.fired=1;r.data=e||{}}},detach:function(t,e,r){if(this.cache[t]){for(var n=0,a=this.cache[t].fns,i=a.length;n<i;n++){if(e===a[n].fn&&r===a[n].scope){a.splice(n,1);n--;i--}}if(this.cache[t].fns.length==0){delete this.cache[t]}}}};t.use("event",function(t,r){var n=e.cache||{};t.log("to change the `LIST.msg` object into the real object!");e=t.mix(e,r.Target,true);for(var a in n){if(n.hasOwnProperty(a)){for(var i=0,o=n[a].fns.length;i<o;i++){e.on(a,n[a][i].fn,n[a][i].scope)}n[a].fired&&e.fire(a,n[a].data)}}});return e}();t.config({combine:true,tag:i.t||+new Date+"",map:[[/(.+\/tm\/list\/.+)-min.js(.*)$/gi,"$1.js$2"]]});t.use("event",function(t,e){e.on(a,"load",function(){t.log("onload triggered | duration:"+(new Date-(i.st||a.g_hb_monitor_st||0))+"ms")})});if(location.href.indexOf("ks-debug")==-1||typeof console==="undefined"){a.console={log:function(){}}}t.use("mui/iconfont/fontloader",function(t,e){new e({fontFamily:"tm-list-font",container:"#content",textContent:"&#xf0002;",CLASS_TRIGGER:"list-font",loadingCallback:function(){t.log("load the icon font for list...")},successCallback:function(){t.log("loaded the icon font for list successfully!");t.use("dom",function(t,e){e.addStyleSheet(".list-font{visibility:visible!important}")})},errorCallback:function(){t.log("failed to load the icon font for list!","warn")}})})})(KISSY);(function(t){t.use("dom,event,ua,datalazyload",function(t,e,n,r,a){var i=window,o=document,c=r.ie==6,s="ontouchstart"in o;LIST.util.createLoader=function(t){var e,n,r=[],a;return function(i,o){if(o!==0&&!o){o=1}if(o&1&&!n){n=true;t(function(t){e=t;while(a=r.shift()){try{a&&a.apply(null,[e])}catch(n){setTimeout(function(){throw n},0)}}})}if(e){i&&i.apply(null,[e]);return e}if(!(o&2)){i&&r.push(i)}return e}};LIST.util.onTemplate=function(e,n){var r="__Loader__"+e;LIST[r]=LIST[r]||LIST.util.createLoader(function(n){var r=window;if(r[e]){n(r[e]);return}t.getScript(t.Config.packages["list"].base+e,function(){n(r[e])})});LIST[r](n)};LIST.util.webpFn=function(n){if(!i.g_config.webp)return;if(typeof LIST.support.webp==="undefined"){var r=function(t){var n=false,r=e.attr(t,"data-ks-lazyload")||e.attr(t,"data-ks-lazyload-custom");if(r){n=/img\d*\.taobaocdn\.com.*?\.(jpg|png)\b/.test(r)||/gi\d*\.mlist\.alicdn\.com.*?\.(jpg|png)\b/.test(r)}return n},a=LIST.util.webpFn._fn=function(){t.each(e.filter("img",r,e.get(n)||document),function(t){var n=e.attr(t,"data-ks-lazyload");if(n){e.attr(t,"data-ks-lazyload",n+"_.webp")}else{e.attr(t,"data-ks-lazyload-custom",e.attr(t,"data-ks-lazyload-custom")+"_.webp")}})};var o=new Image;LIST.support.webp=false;o.onload=function(){LIST.support.webp=true;t.log("webp is supported!");a()};o.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return}LIST.support.webp&&LIST.util.webpFn._fn()};LIST.util.initMods=function(e,n,r){var a=window.g_config.poc,i=(a?a.mods:0)&&window.TMPoc;r=r||{};t.log("to init mods ['"+n.join("','")+"']... ");for(var o=0,c=e.length,s,l,u,d,f;o<c;o++){f=+new Date;s=e[o];d={};l=n[o].replace(/\blist\//,"").replace(/\.js/g,"");u=l.replace(/[/-]/g,"_").toLowerCase();i&&TMPoc.trackCT(u+"_st");try{var p=r[l];if(typeof s==="function"){d=new s(p)}else if(typeof s==="object"){d=s}d.init&&d.init(p)}catch(S){t.log(S,"error");var g=encodeURIComponent(l+"\u521d\u59cb\u5316\u6267\u884c\u5931\u8d25:"+S);window._ap&&_ap.push(["jstracker","_trackCustom","msg="+g]);continue}i&&TMPoc.trackCT(u+"_nd");t.log(">>>> the module `"+l+"` inited | duration:"+(new Date-f)+"ms")}};function l(r,a,o){o=o||"hover";if(s||c){a=c?"mouse":a||"touch";function l(t){if(this.disableHoverIn)return;e.addClass(this,this._hoverCls||o)}function u(t){if(this.disableHoverOut)return;var n=this;setTimeout(function(){e.removeClass(n,n._hoverCls||o)},200)}var d=null;switch(a){case"mouse":d=function(){n.on(this,"mouseenter",l);n.on(this,"mouseleave",u)};break;case"touch":d=function(){n.on(this,"touchstart",l);n.on(this,"touchend",u)};break;default:i.__hoverPool=i.__hoverPool||[];d=function(){var t=this;n.on(this,"click",function(e){if(__hoverPool[__hoverPool.length-1]!==t){t._hoverCls=o;__hoverPool[__hoverPool.length]=t;l.call(t,e)}})};!this._boundDefHover4Doc&&(n.on(".page","click",function(t){var n=t.target;for(var r=0,a=__hoverPool.length;r<a;r++){var i=__hoverPool[r];!(i==n||e.contains(i,n))&&(u.call(i,t),__hoverPool.splice(r,1),r--,a--)}}),this._boundDefHover4Doc=true)}t.log("bind hover events for ie6 or pad!");e.query(r).each(function(t){if(c&&t.tagName=="A"&&typeof e.attr(t,"href")!=="undefined")return;d.call(t)})}}e[s?"removeClass":"addClass"]("html","no-touch");LIST.msg.on("ie6&PadHover",function(e){var n=e.classname,r=e.id,a=n||r,i=r?"#":".",o=e.hoverType;if(!(a&&(s||c)))return;var u=function(t,n){var r=(n&&e.hoverCls?e.hoverCls[n]:e.hoverCls)||t+"-hover";l(i+t,o,r)};if(t.isString(a)){u(a)}else if(t.isArray(a)){t.each(a,function(t,e){u(t,e)})}});LIST.msg.on("expand",function(t){var r=t.el||null,a=t.classname||"",i=a+"-expand",o=t.text||{drop:"\u66f4\u591a",expand:"\u6536\u8d77"},c=t.status||"drop",s=t.debounce||{threshold:100,execAsap:true},l=t.manual;if(!r)return;r.expandSwitchFn=function(){var t=e.attr(this,"data-status")||"drop",n=o[t],r=t=="drop"?"expand":"drop",c=o[r],s=e.parent(this,"."+a);this.className=this.className.replace(t,r);this.innerHTML=this.innerHTML.replace(n,c);this.innerHTML=this.innerHTML.replace(t,r);e.attr(this,"data-status",r);t=="drop"?e.addClass(s,i):e.removeClass(s,i)};!l&&n.on(r,"click",r.expandSwitchFn.debounce(s.threshold,s.execAsap));if(c!==(e.attr(r,"data-status")||"drop"))r.expandSwitchFn()});LIST.util.bindScrollAsync=function(r,a,o,c,s){if(!(r&&"function"===typeof a))return;r=e.query(r);if(!r.length)return;s=s?~~s:-1;if(!s)return;var l=function(c){var u=e.viewportHeight(),d="number"===typeof o?o:0,f=r.length;if(!s||!f){t.log("detach scroll async monitor...");n.detach(i,"scroll",l);return}for(var p=0;p<f&&s;p++){var S=e.scrollTop(),g=e.offset(r[p]),m=g.top||0,h=u+d+S,v=e.outerHeight(r[p]),C=m+v;if(h>=m&&S<C){t.log("send scroll async request...");t.log("exeTimes:"+s+" el.length:"+r.length);a.call(r[p]);r.splice(p--,1);f=r.length;s--}}}.debounce(150,true);!!c&&l();n.on(i,"scroll",l)};LIST.util.exposureFn=function(t){var e=new Image,n="_img_"+Math.random();i[n]=e;e.onload=e.onerror=function(){i[n]=null};e.src=t;e=null};Function.prototype.debounce=function(t,e){var n=this,r;return function a(){var a=this,i=arguments;function o(){if(!e)n.apply(a,i);r=null}if(r)clearTimeout(r);else if(e)n.apply(a,i);r=setTimeout(o,t||100)}};a("#content",{diff:200})})})(KISSY);KISSY.add("list/pages/list",function(e,t,a){e.log("modules engine start ... | page-type:"+g_config.pageType);e.ready(function(){e.log("deal with the page's images");window.LIST&&LIST.util&&LIST.util.webpFn&&LIST.util.webpFn();var r=t.get("#J_ItemList");if(!r){e.log("the SRP dom doesn't exist!");return}e.log("to lazy page's images");var i=a(r,{diff:100});i&&e.log("SRP lazy engine is started!")});var r=t.get(".shopBox1"),i={"mods/dsr":r?{tpl:"mods/dsr/dsr.v3.html.js"}:undefined,"mods/srp/grid":{closeLazy:1}};e.log("to use mods...");e.use(MODS,function(e){LIST.util.initMods([].slice.call(arguments,1),MODS,i)});window.TMPoc&&TMPoc.trackCT("tti",true);e.ready(function(e){var r=t.get("#J_BtmSearch"),i="btmSearch-loading";if(r){var n=a(r,{mod:"manual",execScript:false});n.addCallback(r,function(){t.removeClass(r,i);if(t.get("#mallSearch")){try{e.use("mui/searchbar/instance/default",function(e,t){t.build({node:"#btm-mq",clickId:"bottomsearch"});e.log("tmallsearch::bottom 'searchBar' instance has been instantiated successfully!")})}catch(a){e.log("btmSearch::error:"+a)}}})}})},{requires:["dom","datalazyload"]});KISSY.use("list/pages/list");window["mods/dsr/dsr.v3.html.js"]=function(e,t){var a={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(e){return a.escapehash[e]},escaping:function(e){return typeof e!=="string"?e:e.replace(/[&<>"]/gim,this.escapereplace)},detection:function(e){return typeof e==="undefined"?"":e}};var r=function(e){if(typeof console!=="undefined"){if(console.warn){console.warn(e);return}if(console.log){console.log(e);return}}throw e};t=t||{};t.__escapehtml=a;t.__throw=r;"use strict";var e=e||{};var i="";i+="";try{i+="";var n=e.dsr;var o=e.atpanel;var s=e.url;var c=e.it;var l=e.idx;var d=e.div;var u=e.star;var f=e.a;var p=e.em;var m=e.i;var g=e.script;var h=e.document;var v=e.d;var S=e.s;var _=e.more;var b=e.drop;var w=e.l;var C=e.arrow;var y=e.ul;var x=e.expand;var J=e.li;var T=e.pointer;var I=e.title;var k=e.strong;var L=e.num;var A=e.b;var j=e.high;var q=e.low;i+="<!-- \u6309\u5e97\u94fa\u5c55\u793a\u6a21\u5f0f\u65f6\u4e13\u8f91\u6a21\u5757\u7684DSR\u6a21\u677f PD\uff1a\u5f20\u4eea @added by youxia.lqk.@tmall.com on 2013.05.23 -->\n";~function(){for(var e in n){if(n.hasOwnProperty(e)){var a=n[e];var r=e;i+="\n";if(r==0){i+='\n<div class="tb-star" id="J_RateStar">\n    <a target="_blank" atpanel="';i+=t.__escapehtml.escaping(t.__escapehtml.detection(o));i+='" href="';i+=t.__escapehtml.escaping(t.__escapehtml.detection(s));i+="\"><em><i></i></em>\n        <script>(function(){var d=document.getElementById('J_RateStar'),i=d.getElementsByTagName('I')[0];i&&(i.style.width=(";i+=t.__escapehtml.escaping(t.__escapehtml.detection(a.value));i+="*60/5)+'px');})();</script>\n        ";i+=t.__escapehtml.escaping(t.__escapehtml.detection(a.value));i+='<s class="ui-more-drop-l-arrow"></s></a>\n</div>\n'}i+="\n"}}}();i+='\n<ul class="pId-expand">\n    <li class="pIde-pointer"></li>\n    <li class="pIde-title"><strong>\u5e97\u94fa\u52a8\u6001\u8bc4\u5206</strong>\u4e0e\u540c\u884c\u4e1a\u76f8\u6bd4</li>\n    ';~function(){for(var e in n){if(n.hasOwnProperty(e)){var a=n[e];i+="\n    <li>";i+=t.__escapehtml.escaping(t.__escapehtml.detection(a.about));i+='\uff1a<em class="pId-num">';i+=t.__escapehtml.escaping(t.__escapehtml.detection(a.value));i+='</em>\n        <a target="_blank" atpanel="';i+=t.__escapehtml.escaping(t.__escapehtml.detection(o));i+='" href="';i+=t.__escapehtml.escaping(t.__escapehtml.detection(s));i+='">\n            ';if(a.higher){i+='\n            <b class="pId-high">';i+=t.__escapehtml.escaping(t.__escapehtml.detection(a.cpText));i+='</b><em class="pId-high">';i+=t.__escapehtml.escaping(t.__escapehtml.detection(a.diff));i+="</em>\n            "}else{i+='\n            <b class="pId-low">';i+=t.__escapehtml.escaping(t.__escapehtml.detection(a.cpText));i+='</b><em class="pId-low">';i+=t.__escapehtml.escaping(t.__escapehtml.detection(a.diff));i+="</em>\n            "}i+="\n        </a>\n    </li>\n    "}}}();i+="\n</ul>"}catch(E){t.__throw("Juicer Render Exception: "+E.message)}i+="";return i.replace(/[\r\n]\s+[\r\n]/g,"\r\n")};KISSY.ready(function(t){if(window.__atplog_inited__)return;t.use("dom,event,json",function(t,e,a,r){var n=window,i=document,o="data-atp",l="atpanel",c={"/mallsearch":"H1449172242","/msearch.1.2":"H46777405"};function p(t,e,a){e=e||o;a=a||"";var r,n,i;while(t&&t.tagName!="HTML"&&t.tagName!="BODY"&&t.getAttribute){i=t.getAttribute(e+a);if(i){r=i;n=t;break}if(!(t=t.parentNode))break}return{atpAttr:r,el:n}}function u(e){var a=e.split(","),r,n={};t.each(a,function(t){if(r=/{(.*)}/.exec(t))r=r[1];if(r)n[r]=""});return n}function d(t,a){if(!t||t.tagName!="A")return;if(a!=="text"){var n=new RegExp("(\\?|\\&)"+a+"=([^&#]*)(\\&|\\#|$)","g"),i=t.href||t.link||"",o,l;o=(l=n.exec(i))?l[2]:e.attr(t,"data-"+a)||(t._atpParams||(t._atpParams=r.parse(e.attr(t,"data-atp-params")||"{}")))[a]||"";if(!o){var c=p(t,"data-"+a);if(c.atpAttr&&c.el){o=c.atpAttr}}}else{o=e.text(t)}return o}function f(a){var r=p(a),n=r.el,i=r.atpAttr;if(n&&i){var o,c=t.query("a",n);i=g(i||"",n.parentNode);t.each(c,function(a,r){if(a._atped||e.hasAttr(a,"data-atp-ignore"))return;var c=p(a);if(c.el==n){if(!e.hasAttr(a,l)){o=o||u(i);for(var f in o){o[f]=d(a,f)}o["loc"]=r+1;var g=t.substitute(i,o);e.attr(a,l,g)}a._atped=true}else{}})}}function g(e,a){var r,n,i,o;if(e.indexOf("!")===-1){i=e}else{e=e.split("!");r="-"+e[0];i=(e[1]||"").split(",");n=p(a,"",r);if(n.el&&n.atpAttr){o=n.atpAttr.split(",");t.each(i,function(t,e){if(t===""){i[e]=o[e]}})}i=i.join(",")}return i}function s(){return Math.floor(Math.random()*268435456).toString(16)}function m(e,a,r,i){if(n.goldlog&&n.goldlog.record){goldlog.record(e,a,r,i)}else{var o=new Image,l="_img_"+e+"_"+(new Date).getTime();n[l]=o;o.onload=o.onerror=function(){n[l]=null};o.src="//gm.mmstat.com"+e+"?goldlog=undefined"+"&cache="+s()+"&gmkey="+encodeURIComponent(a)+"&gokey="+encodeURIComponent(r)+"&cna="+(Cookie.get("cna")||"");t.log(n[l]);o=null}}function _(e,a,r,i,o){var l=e.split(","),p=o||n.__list_atpanel_param||"",u={pos:l[0]||"",itemid:l[1]||"",clickid:l[1]||"",itemcat:l[2]||"",itemspu:l[3]||"",fromtab:l[4]||"",type:l[5]||"",combo:l[6]||"",shopid:l[7]||"",actype:l[8]||"",gid:l[9]||""};p+=(t.endsWith(p,"&")?"":p?"&":"")+t.param(u);m(a||"/mallsearch",i||"tmallsearch",p,r||c[a]||"H1449172242")}a.delegate&&a.delegate(i.body,"mouseenter","a",function(t){var a=t.currentTarget;if(a._atped||e.hasAttr(a,"data-atp-ignore"))return;if(e.attr(a,l)){a._atped=true;return}f(a)});function h(t){if(!t)return;t=e.get(t);var a=e.attr(t,l)||e.parent(t)&&e.attr(e.parent(t),l),r;if(a){r=p(t,"data-atp-logkey").atpAttr||p(t,"data-atp-url").atpAttr;_(a,r)}}a.on(i.body,"click",function(t){return h(t.target)});n.atpanelFun=_;n.sendAtp=h;n.clicklog=_;n.exposelog=m;n.__atplog_inited__=1})});(function(t){t.use("dom,sizzle,event",function(t,e,r,n){var a="data-rn";function i(t){var r=t.currentTarget;if(r._rned)return;var n=e.attr(this,a),i=r.href,o=r.search;if(i&&/^https*:\/\/\b/.test(i)){if(o==""){r.search+="?rn="+n}else{!/\brn=\w+\b/g.test(o)&&(r.search+="&rn="+n)}}r._rned=true}n.delegate("["+a+"]","mouseenter","a",i)})})(KISSY);(function(t){t.use("dom,event,ua",function(t,e,r,n){var a=document,i=n.ie<9,o=n.ie<8;function c(t){var e;if(a.createEvent){var r=a.createEvent("HTMLEvents");r.initEvent(t,true,true);e=this.dispatchEvent(r)}else if(this.fireEvent){if(t!=="aftersubmit"){e=this.fireEvent("on"+t)}}return e}function s(t){return c.call(t,"submit")}function d(t){return c.call(t,"aftersubmit")}t.ready(function(){var n=window.g_config.toggle,c=n?n.filter:0;if(!c)return;var l=function(r){var n=r.elements,a=r.length;for(var i=0,o;i<a;i++){o=n[i];if(o.type!=="checkbox"&&o.type!=="radio"&&t.trim(o.value)==""){e.attr(o,"data-name-bak",o.name);e.removeAttr(o,"name");t.log("filter: remove form '"+r+"'."+o["data-name-bak"])}}},u=function(r){var n=r.elements,a=r.length;for(var i=0,o;i<a;i++){o=n[i];if(e.hasAttr(o,"data-name-bak")){e.attr(o,"name",e.attr(o,"data-name-bak"));e.removeAttr(o,"data-name-bak");t.log("filter: restored form '"+r+"'."+o.name)}}},f=i?function(t){r.on(t,"submit",function(t){l(t.target)});!o&&r.on(t,"aftersubmit",function(t){u(t.target)})}:function(t){};if(!o){for(var p=0,S=a.forms,g=S.length,m,C;p<g;p++){C=S[p];m=C.submit;C.submit=function(){var e=s(this);t.log("filter: canSubmit="+e);if(e){m&&m.call(this);d(this)}};f(C)}}if(!i){r.delegate(a,"submit","form",function(t){l(t.currentTarget)});r.delegate(a,"aftersubmit","form",function(t){u(t.currentTarget)})}})})})(KISSY);(function(t){t.use("dom,event,ua,cookie",function(t,e,r,n,a){var i=window,o=document,c=n.ie==6;t.ready(function(){var t=o.documentElement,e="scroll:"+t.scrollWidth+"*"+t.scrollHeight+"-";e+="client:"+t.clientWidth+"*"+t.clientHeight+"-";e+="offset:"+t.offsetWidth+"*"+t.offsetHeight+"-";e+="screen:"+screen.width+"*"+screen.height;a.set("res",e)})})})(KISSY);