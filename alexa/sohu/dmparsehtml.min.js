var _DMLib=window._DMLib||{};(function(n){var c=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,o,l,m=/\S/,f=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,h=/<([\w:]+)/,g=document.createDocumentFragment(),a=document.createElement("div"),j=document.getElementsByTagName("head")[0];a.setAttribute("className","t");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";l=!!a.getElementsByTagName("link").length;o={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l?[0,"",""]:[1,"X<div>","</div>"]};function k(p){if(p&&m.test(p)){(window.execScript||function(q){window["eval"].call(window,q);})(p);}}function b(p,u){u=typeof u==="function"?u:function(){};if(p.length===0){u();return;}var t=p[0].src,q=(p[0].text||p[0].textContent||p[0].innerHTML||"");p.splice(0,1);var r=document.createElement("script");r.type="text/javascript";try{r.appendChild(document.createTextNode(q));}catch(s){r.text=q;}if(!t&&q!==""){j.insertBefore(r,j.firstChild);if(r.parentNode){j.removeChild(r);}b(p,u);}else{r.src=t;r.onload=r.onreadystatechange=function(w,v){if(v||!r.readyState||/loaded|complete/.test(r.readyState)){r.onload=r.onreadystatechange=null;if(j&&r.parentNode){j.removeChild(r);}r=undefined;if(!v){b(p,u);}}};j.insertBefore(r,j.firstChild);}}n.isArray=("isArray" in Array)?Array.isArray:function(p){return Object.prototype.toString.call(p)==="[object Array]";};n.parseHTML=function(A,t){var p="dm-"+new Date().getTime(),s=document.getElementById(t),q=document.createElement("div"),B=document.createDocumentFragment(),C,r,y,z,u,x,v,w=[];u=A.match(f)||[];z=A.replace(f,"");if(!s){if(z.length>0){s=document.createElement("div");s.id=t||p;document.body.appendChild(s);s.innerHTML=z;}}else{s.innerHTML=z;}if(u.length>0){for(x=0;x<u.length;x++){y=y||B.appendChild(document.createElement("div"));C=(h.exec(u[x])||["",""])[1].toLowerCase();r=o[C]||o._default;y.innerHTML=r[1]+u[x].replace(e,"<$1></$2>")+r[2];v=r[0];while(v--){y=y.lastChild;}w.push(y.childNodes[0]);y.textContent="";while(y.firstChild){y.removeChild(y.firstChild);}y=B.lastChild;}b(w);}for(;g.firstNode!=null;){g.removeChild(g.firstNode);}};n.load=function(q){var r=q.indexOf("?"),s=window.screen.width,p=window.screen.height,t=window.devicePixelRatio;q+=["&ss=",s*t,"_",p*t,"_",t].join("");var u=document.createElement("script");u.src=q;document.body.appendChild(u);};function i(p,q){p.onclick=function(){if(typeof q==="string"){new Image().src=q;}if(n.isArray(q)){var r=0;for(;r<q.length;r++){new Image().src=q[r];}}};}function d(q){var r='<a href="{href}" style="display:block;" target="_blank"><img src="{src}" width="{width}" height="{height}"></a>';var p=document.getElementById(q.el);r=r.replace(/\{href\}/,q.defaultClickUrl);r=r.replace(/\{src\}/,q.defaultMaterial);r=r.replace(/\{width\}/,q.width);r=r.replace(/\{height\}/,q.height);p.innerHTML=r;i(p.getElementsByTagName("a")[0],q.listenUrl);}n.loadCreative=function(r){var q=document.createElement("script");q.src=r.url;q.type="text/javascript";var s=Number(r.timeout);if(isNaN(s)||s<1){s=3;}var p=setTimeout(function(){d(r);},s*1000);q.onload=q.onreadystatechange=function(u,t){if(t||!q.readyState||/loaded|complete/.test(q.readyState)){clearTimeout(p);i(document.getElementById(r.el),r.listenUrl);q.onload=q.ononreadystatechange=null;}};document.body.appendChild(q);};})(_DMLib);